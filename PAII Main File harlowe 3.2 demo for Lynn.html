<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>PAII Main File harlowe 3.2 demo for Lynn</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:0.1em}0%,to{top:0px}}@keyframes shudder{25%{left:0.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:0.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:0.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%, to{transform:translateX(0em)}5%, 25%, 45%{transform:translateX(-1em)}15%, 35%, 55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%, to{transform:translateY(0em)}5%, 25%, 45%{transform:translateY(-1em)}15%, 35%, 55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%, 8.1%, 82.1%, 31.1%, 38.1%, 44.1%, 40.1%, 47.1%, 74.1%, 16.1%, 27.1%, 72.1%, 24.1%, 95.1%, 6.1%, 36.1%, 20.1%, 4.1%, 91.1%, 14.1%, 87.1%, to{left:0px;top:0px}8%, 82%, 31%, 38%, 44%{left:-1px}40%, 47%, 74%, 16%, 27%{left:1px}72%, 24%, 95%, 6%, 36%{top:-1px}20%, 4%, 91%, 14%, 87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:0.2}64%{opacity:0.4}78%{opacity:0.6}87%{opacity:0.8}92%, to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:black;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" title="' attr(title) '">'}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,0.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,0.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,0.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,0.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,0.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,0.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,0.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,0.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,0.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,0.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,0.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,0.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,0.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(title) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:0em 0.5em 0.5em 1em;font-size:1.25em;font-family:sans-serif;color:#000;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit;color:#000}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger .panel-source,tw-debugger .panel-row-source{font-family:monospace;overflow-x:scroll;white-space:pre;-ms-flex-preferred-size:100%;flex-basis:100%}tw-debugger .panel-row-source{margin:5px 0}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background:#EEE}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:0.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:0.8;font-size:0.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#444;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,0.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .error-row>*{display:table-cell;padding:0.25em 0.5em}tw-debugger .error-row .error-message{cursor:help}tw-debugger .error-row .error-passage{color:#444}tw-debugger .storylet-row{background-color:rgba(201,233,222,0.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(128,203,178,0.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;opacity:0.4;background-color:rgba(217,217,217,0.3)}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:rgba(166,166,166,0.3)}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,0.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .tabs{padding-bottom:0.5em}tw-debugger .tab{border-radius:0px 0px 0.5em 0.5em;border-top:none}tw-debugger .resizer{position:absolute;height:3em;border-left:2px solid #ccc;border-right:2px solid #ccc;top:10px;left:4px;width:8px;cursor:ew-resize}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media (min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop ~ tw-backdrop{display:none}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-passage [style^="color"] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-link:hover,tw-passage [style*=" color"][hover="true"] tw-link:hover,tw-passage [style^="color"] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^="color"][hover="true"] .enchantment-link:hover,tw-passage [style*=" color"][hover="true"] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-passage [style^="color"] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^="color"][hover="true"] .visited:hover,tw-passage [style*=" color"][hover="true"] .visited:hover{color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-passage [style^="color"] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-broken-link:hover,tw-passage [style*=" color"][hover="true"] tw-broken-link:hover{color:inherit}.enchantment-mouseover{border-bottom:2px dashed #999}.enchantment-mouseout{border:rgba(64,149,191,0.6) 1px solid}.enchantment-mouseout:hover{background-color:rgba(175,197,207,0.75);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,0.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,0.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 0.5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 0.5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,0.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,0.75);border:transparent 2px solid;border-radius:0.2em}tw-link.enchantment-button,.enchantment-link.enchantment-button,.enchantment-button:not(.enchantment-link) tw-link,.enchantment-button:not(.enchantment-link) .enchantment-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media (min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:transparent;font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:transparent;font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 0.5em}tw-story tw-noscript{animation:appear 0.8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media (min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}}tw-icon{display:inline-block;margin:0.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:0.2}tw-icon[alt]:hover{opacity:0.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,0.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;padding:2px;white-space:pre}tw-folddown::after{content:"\25b6"}tw-folddown.open::after{content:"\25bc"}tw-open-button::after{content:"Open"}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play PAII Main File harlowe 3.2 demo for Lynn.</tw-noscript></noscript></tw-story>
<tw-storydata name="PAII Main File harlowe 3.2 demo for Lynn" startnode="1" creator="Twine" creator-version="2.3.12" ifid="4ECF4633-7226-4AC0-A485-4CF2D8ADCAE2" zoom="0.6" format="Harlowe" format-version="3.2.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">scroll-margin-top: 0;

@import url(https://fonts.googleapis.com/css2?family=Special+Elite&display=swap);

.9booksfont {
  	text-align:center;
	font-size:60%;
	display:inline-block !important;
	width:100%;
}

tw-story {
	background-color: rgba(255, 235, 210, 0.9);
  	font-family: Palatino Linotype, Palatino;
  	padding:1em;
	color:#291B10;
	transition: color 0.5s, background-color 0.5s;
	min-height:80%;
	min-width:300px;
	max-width:1280px;
    width:60%;
  	font-size:1.5em;
  	line-height:1.5em;
  	margin: auto;
}

@media screen and (max-width:1024px){tw-story{width:70%}{font-size:1.2em}}

@media screen and (max-width:896px){tw-story{width:75%}{font-size:1.05em}}

@media screen and (max-width:768px){tw-story{width:80%}{font-size:.9em}}

@media screen and (max-width:640px){tw-story{width:85%}{font-size:.75em}}
  
body {
	background:#E7C6A2;
}

tw-story.day {
	background-color: rgba(255, 235, 210, 0.9);
	padding:1em;
	min-height:80%;
	color:#291B10;
	transition: color 0.5s, background-color 0.5s;
}

body.morning {
	background:#F5BC8F;
  	transition: 0.5s;
}

body.midday {
	background:#FD8587;
  	transition: 0.5s;
}

body.afternoon {
	background:#EC6F73;
  	transition: 0.5s;
}

body.dusk {
	background:#854367;
  	transition: 0.5s;
}

body.night {
	background:#083242;
}

body.bunker {
	background:#006684;
}

body.bunkerlightup {
	background:#7EAFCD;
}

tw-story.quickmorning {
	background-color: rgba(255, 250, 210, 0.9) !important;
	color:#291B10;
	transition: color 0s, background-color 0s;
}

body.quickmorning {
	background:#C4C89A;
	transition: 0s;
}

tw-story.black {
	background-color: rgba(64, 61, 69, 1) !important;
	color:#f6eee7;
	transition: color 0.5s, background-color 0.5s;
}

body.black {
	background:#403D45;
  	transition: 0.5s;
}

body.blood {
	background:#b94c3f;
  	transition: 0.5s;
}

body.love {
	background:#edd5ca;
    transition: 0.5s;
}

tw-story.dream {
	background-color: rgba(	245, 229, 213, 0.9) !important;
	color:#291B10;
	transition: color 0.5s, background-color 0.5s;
}

body.dream {
	background:#efd7cb;
	transition: 0.5s;
}

tw-story.card {
	background-color: rgba(255, 255, 255, 0.9) !important;
	color:#291B10;
	transition: color 0.5s, background-color 0.5s;
}

body.card {
	background:#DCDCDC;
	transition: 0.5s;
}

tw-story.white {
	background-color: rgba(255, 255, 255, 0);
	color:#291B10;
	transition: color 1s, background-color 1s;
}

body.white {
	background:#DCDCDC;
	transition: 0.5s;
}

tw-story.pink {
	background-color: rgba(235, 197, 115, 0) !important;
	color:#291B10;
	transition: color 0.5s, background-color 0.5s;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

body.pink {
	background:#EBC573;
	transition: 0.5s;
}

body.messenger {
	background:#4267B2;
	transition: 0.5s;
}

.day tw-link{
	color:#1764B6;
}

.day tw-link:hover{
	color:#8FC1F5;
	transition: 0.2s;
}

.pink tw-link{
	color:#f6eee7;
}

.pink tw-link:hover{
	color:#FFCDB4;
	transition: 0.2s;
}

.black tw-link{
	color:#FBBD55;
}

.black tw-link:hover{
	color:gray;
	transition: 0.2s;
}

.dream tw-link{
	color:#884636;
}

.dream tw-link:hover{
	color:#d2975b;
	transition: 0.2s;
}

.dream tw-enchantment{
	color:#e7b35d;
}

.dream tw-enchantment:hover{
	color:#ebc47f;
	transition: 0.2s;
}

.dream a{
	color:#e7b35d;
	text-decoration:none;
	font-weight:bold;
}

.dream a:hover{
	color:#ebc47f;
	transition: 0.2s;
}

html {
	height:100%;
	overflow-y: scroll
}

.fade {
	color:#44B43E;
}

.note {
	color:#44B43E;
	font-size:0.75em;
	top:1em;
}

a.out {
	text-decoration:none;
	color:#44B43E;
}

a.out:hover {
	opacity:0.5;
	transition: 0.2s;
}

.projectalexiaii {
	text-align:center;
	font-size:400%;
	line-height:125%;
	font-weight:bold;
	display:inline-block !important;
	width:100%;
	font-family: "Century Gothic", CenturyGothic, "URW Gothic L", "Avant Garde", "Trebuchet MS", Arial, sans-serif;
	color:rgba(77, 109, 135, 1);
}

.by {
	text-align:center;
	font-size:110%;
	font-weight:bold;
	display:inline-block !important;
	width:100%;
	font-family: "Century Gothic", CenturyGothic, "URW Gothic L", "Avant Garde", "Trebuchet MS", Arial, sans-serif;
	color:rgba(77, 109, 135, 1);
}

.menu {
	text-align:center;
	line-height:125%;
	display:inline-block !important;
	width:100%;
	color:white;
}

tw-sidebar {
	display: none;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.showundo {
    display: block !important;
}

tw-icon {
	opacity:.75;	
}

[type="header"] {
  	position:absolute:
  	right:0;;
	top:-0.5em;
  	display:inline-block;
}

[type="footer"] {
	display:inline-block;
	position:fixed;
	right:3em;
	bottom:0;
}

[type="debug-footer"] {
	position:fixed;
	right:-0.8em;
	bottom:0;
}

.characters {
	line-height:115%;
	font-size:10pt;
	text-align:center;
	width:140px;
	display:inline-block;
}

.characters img {
	margin-left:-10px;
}

.copyright {
	font-size:66%;
	color:#FFCDB4;
	text-align:right;
	width:100%;
	display:inline-block;
	position:fixed;
	right:1em;
	bottom:0;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.menuback {
	position: absolute;
	left:0;
	display:inline-block;
}

.menuhead {
	text-align:center;
	display:inline-block;
	width:100%;
}

.characterset {
	text-align:center;
	display:inline-block;
	width:100%;
	vertical-align:top;
}

.menupage {
	font-size:160%;
	font-weight:bold;
	font-family: "Century Gothic", CenturyGothic, "URW Gothic L", "Avant Garde", "Trebuchet MS", Arial, sans-serif;
}

tw-story {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  -webkit-tap-highlight-color: transparent;
}

div#preload { opacity:0; }

.letter {
    font-style: italic;
    font-weight:;
}

#logo2 {
  	display: block;
  	margin-left: auto;
  	margin-right: auto;
  	width: 50%
  	-webkit-background-size: cover;
  	-moz-background-size: cover;
  	-o-background-size: cover;
  	background-size: cover;

  	-webkit-animation: myfirst 10s ; /* Chrome, Safari, Opera */
  	animation: myfirst 10s ;
  }

.autosavefooter {
	font-size: 50%;
  	font-family: Palatino;
	color: white
}

.centerLOGO {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}

.centerBOOK {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 60%;
}

.centerGen {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.centerletter {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

.hammerheadcovertext {
  	text-align:center;
  	font-weight: bold;
	font-size:80%;
	display:inline-block !important;
	width:100%;
	color:rgba(77, 109, 135, 1);
}

.hammerheadsmallertext {
  	text-align:center;
  	font-weight: bold;
	font-size:60%;
	display:inline-block !important;
	width:100%;
	color:rgba(77, 109, 135, 1);
}

.hammerheadsmallertextthin {
  	text-align:center;
	font-size:80%;
	display:inline-block !important;
	width:100%;
	color:grey;
}

.buttons {
  width: 20%;
}
   
.mannequin {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 80%;
}

img.small {
	width: 100%;
}

img.medium {
  width: 60%;
}

img.large {
  width: 80%;
}

hr.clear {
  clear: both;
  border: 0;
}

.sideboxright {
	float:right;
	line-height:115%;
	font-size:10pt;
	padding:4px;
	margin-left:1em;
	margin-bottom:1em;
	max-width:168px;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	text-align:center;
}

.sideboxleft {
	float:left;
	line-height:115%;
	font-size:10pt;
	padding:4px;
	margin-right:1em;
	margin-bottom:1em;
	max-width:168px;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	text-align:center;
}

.portraitbox {
	float:left;
	line-height:115%;
	font-size:10pt;
	padding:4px;
  	margin-right:1em;
	margin-bottom:1em;
	max-width:50%;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	text-align:center;
}

/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
#audio-overlay{position:fixed;top:0;right:0;left:0;bottom:0;z-index:100000;background:#111}.lds-ring{display:block;position:relative;top:20%;margin:auto;width:20em;height:20em}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:18em;height:18em;margin:6px;border:6px solid #fff;border-radius:50%;-webkit-animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}.lds-ring div:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}input#audio-volume{width:100%;margin:2em 0}span#vol-title{position:relative;bottom:-1em;font-size:1rem;float:left}tw-link#audio-mute{display:inline-block;padding:.3em;width:90%;text-decoration:none;color:#111;background:#eee;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid #000}tw-link#audio-mute:hover{opacity:.8}tw-link#audio-mute:active{opacity:.6}tw-link#audio-mute span{display:inline-block;width:1em;position:relative;height:1em;top:.2em;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAABF0lEQVR4Ae2VJVREYRSEB3ftuFUaLhF6I22iF7TgLr1XvAc849CwiBac9Xtm3e97cefp/Pec7+mdH0mZrGtMoBomyAEHfjGHXKg07gNxeUS3BuMAqGZswE7YcOIYgqgG7BFlSQgTAgKysC2jNjQmghFQCOpMxq+QmQgmFATU4kcq/YlgfKB1lALUqFSukRIbEwpy4BTZPM/Bu9TaQ362KAsl56sAtSR+Sgv6RCFdr/gjBYiuj65c3J0eNEmXz95TgybocvmoJj3avf5l59L1iD/WglZCP7/uh8zgeQ6epdahaZENFIPCCFvEYNPW4JdNazBGzhkj6caCbSc02DRRu0+8RR/+rb7wx6D505HxCVKvG0zpp+yknHe8MBDkT/s8AAAAAElFTkSuQmCC);background-size:contain}tw-link#audio-mute.muted span{right:4px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAASElEQVR4Ae3WsQ0AMAjAsJ7ez9MTGEmlRGL3BJzPq6prw2DDYMNgw2DDYMOwh1kAMUygQIEC2RejANVxnVE9aDOqJ39GVZWqB5Z3r1ndBX5oAAAAAElFTkSuQmCC)}div#audio-volume{float:left}div#audio-controls{font:100% Georgia,serif;font-size:1.5em;position:fixed;width:8em;height:100%;padding:1em 2em;z-index:10000;top:0;left:0;bottom:0;background:#333;color:#eee;transition:left .3s;text-align:center}div#audio-controls.closed{left:-10.5em}div#audio-controls tw-link#audio-panel-toggle{display:inline-block;width:1.5em;position:absolute;height:1.5em;top:0;right:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAYklEQVR4Ae3MsQFAMAAEQMDEagCgN4EuVTrbPcACeUBugDNeSdMQomI0PmYdTEYD9DA5jcVoBKuxGY1kNQ6jGRSaGaIj8gw1aI/KYVUSNqsSzMpiVT2zMjlVN0fqVW5o2luMGHqkQmD9cPYAAAAASUVORK5CYII=);background-size:contain}div#audio-controls.closed tw-link#audio-panel-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAZElEQVR4Ae3TpwGAMBQAUfrEeHB0cDhcXBSO7ehlgBw9N8BL/YZO95r6uA/UEbOv+ylfHRJ9z1BWLynKJqmWohyS6ijKOygKCpmjZYqXTTA2xUiCsShGAMw8/Q3ArFgFMHek0w3WCaR74eO2YQAAAABJRU5ErkJggg==)}@media screen and (max-width:800px){div#audio-controls.closed{left:-12em}div#audio-controls.closed tw-link#audio-panel-toggle{right:-1.5em}}div#story-menu{margin:1em 0}tw-link.story-menu{width:100%;display:block;font-weight:400;background:#ccc;font-size:.9em;padding:.1em 0;color:#111;border:1px solid #333}tw-link.story-menu.hide{display:none}tw-link.story-menu:hover{opacity:.8}tw-link.story-menu:active{opacity:.6}input[type=range].hal{-webkit-appearance:none;width:100%;margin:2.25px 0}input[type=range].hal:focus{outline:0}input[type=range].hal::-webkit-slider-runnable-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-webkit-slider-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;-webkit-appearance:none;margin-top:-2.25px}input[type=range].hal:focus::-webkit-slider-runnable-track{background:#444}input[type=range].hal::-moz-range-track{width:100%;height:15.5px;cursor:pointer;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d;background:#111;border-radius:0;border:0 solid #010101}input[type=range].hal::-moz-range-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer}input[type=range].hal::-ms-track{width:100%;height:15.5px;cursor:pointer;background:0 0;border-color:transparent;color:transparent}input[type=range].hal::-ms-fill-lower{background:#000;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-fill-upper{background:#111;border:0 solid #010101;border-radius:0;box-shadow:.4px .4px 1px #000,0 0 .4px #0d0d0d}input[type=range].hal::-ms-thumb{box-shadow:0 0 2.2px rgba(17,17,17,.1),0 0 0 rgba(30,30,30,.1);border:0 solid #fff;height:20px;width:11px;border-radius:0;background:rgba(255,255,255,.93);cursor:pointer;height:15.5px}input[type=range].hal:focus::-ms-fill-lower{background:#111}input[type=range].hal:focus::-ms-fill-upper{background:#444}
/** End of HAL code */</style><script role="script" id="twine-user-script" type="text/twine-javascript">	/* SCROLL TO THE TOP OF THE WINDOW */
	window.scrollTo(0, 0);

document.addEventListener("touchstart", function() {},false);

/**
 * Harlowe Audio Library (HAL), by Chapel, v2.2.1
 * for Harlowe 2.1.0 and higher
 * Released under the Unlicense, and dedicated to the public domain.
**/
;!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(){"use strict";window.Fast={filter:function(e,t){for(var o=e.length,n=[],a=0;a<o;a++)t(e[a],a,e)&&n.push(e[a]);return n},forEach:function(e,t){for(var o=e.length,n=0;n<o;n++)t(e[n],n,e)},map:function(e,t){for(var o=e.length,n=new Array(o),a=0;a<o;a++)n[a]=t(e[a],a,e);return n},find:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return e[n]},findIndex:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return n;return-1},some:function(e,t){for(var o=e.length,n=0;n<o;n++)if(t(e[n],n,e))return!0;return!1}}}(),window.Chapel=window.Chapel||{},window.Chapel.options={preload:!0,loadDelay:0,muteOnBlur:!0,startingVol:.5,persistPrefs:!0,globalA:!0,showControls:!0,sidebarStartClosed:!0,volumeDisplay:!1,trackLoadLimit:500,totalLoadLimit:8e3,debug:!1},window.Chapel.debug=function(){Chapel.options.debug&&console.log.apply(null,arguments)},function(){"use strict";var n=$("tw-storydata"),o=/(.+?):(.+)/,t=/[\r\n]+/,a=/^["']/,r=/["']$/;function e(e){return Fast.map(Fast.filter(e.split(t),function(e){return e&&e.trim()&&e.includes(":")}),function(e){return e.trim()})}function i(e){return e.trim().replace(a,"").replace(r,"").trim()}function s(e){var t=e.match(o);return t instanceof Array?{key:i(t[1]),value:i(t[2])}:e}var u,l,c,p=n.find('tw-passagedata[name="hal.tracks"]'),d=null;p.length&&(u=e(p.text()),l=[],c=[],Fast.forEach(u,function(e){var t,o=s(e);"string"==typeof o&&c.push(o),l.push([o.key,(t=o.value,Fast.map(t.split(","),i))])}),c.length&&console.error("Some track definitions could not be parsed:\n"+c.join("\n")+"\nPlease check these definitions and try again."),d=new Map(l));var m,h,f=n.find('tw-passagedata[name="hal.config"]'),g=null;function y(e){var t=n.attr("format-version");if(e)return t;var o=t.split(".")[0],o=Number(o);return Number.isNaN(o)&&(o=3),o<1&&(o=3),o}f.length&&(m=e(f.text()),h={},Fast.forEach(Fast.map(m,function(e){return s(e)}),function(e){h[e.key]=e.value}),g=h),g&&Fast.forEach(Object.keys(g),function(e){var t=e,o=h[e],n=typeof Chapel.options[e];"boolean"==n?"true"===o?Chapel.options[t]=!0:"false"===o&&(Chapel.options[t]=!1):"number"==n?(o=Number(o),Number.isNaN(o)||(Chapel.options[t]=o)):"string"==n&&o&&(Chapel.options[t]=o)});var w=require("macros");if(window.Chapel=window.Chapel||{},window.Chapel.Macros={add:function(n){n&&"object"==typeof n&&Fast.forEach(Object.keys(n),function(e){var t,o;o=n[t=e],w.add(t,function(){var e=[].slice.call(arguments).slice(1),t=o.apply(null,e);return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?t:""},w.TypeSignature.zeroOrMore(w.TypeSignature.Any))})}},window.Chapel.Get={version:y(),isHarlowe3OrLater:3<=y(),storyTitle:n.attr("name"),IFID:n.attr("ifid"),fromPassage:d},Chapel.debug("Harlowe Version -> ",y(!0)),Chapel.debug("Harlowe Major Version -> ",Chapel.Get.version),Chapel.debug("Story Title -> ",Chapel.Get.storyTitle),Chapel.debug("Story IFID -> ",Chapel.Get.IFID),Chapel.Get.version<2)throw new Error("The Harlowe Audio Library is only designed to work with Harlowe 2 and 3; you appear to be using Harlowe 1 or an otherwise invalid story format.","get.js -> initialization",176);Chapel.options.storagekey="%%hal-"+Chapel.Get.IFID+"-{"+Chapel.Get.storyTitle+"}",Chapel.debug("Storage Key -> ",Chapel.options.storagekey)}(),function(){"use strict";var t=Chapel.options,e=function(e,t){if(window.localStorage)try{e=""+e,"string"!=typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}catch(e){console.error(e)}},o=function(e){if(window.localStorage)try{return e=""+e,window.localStorage.getItem(e)}catch(e){console.error(e)}},n=function(e){if(window.localStorage)try{e=""+e,window.localStorage.removeItem(e)}catch(e){console.error(e)}},a={loaded:[],classes:{},master:{volume:t.startingVol,mute:!1},groups:{playing:[],looping:[],custom:{}},mute:function(e){a.master.mute=!!e,$(document).trigger({type:":master-mute",mute:!!e})},isMuted:function(){return!!a.master.mute},volume:function(e){e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),a.master.volume=e),$(document).trigger({type:":master-volume",volume:e})},getVolume:function(){return a.master.volume},stopAll:function(){a.classes.Track&&Fast.forEach(a.classes.Track.list,function(e){e.stop()})},audioPlaying:function(){return!!a.groups.playing.length},savePrefs:function(){e(t.storagekey,a.master)},loadPrefs:function(){var e=o(t.storagekey);e&&"object"==typeof e&&e.hasOwnProperty("volume")&&"number"==typeof e.volume&&e.hasOwnProperty("mute")&&"boolean"==typeof e.volume&&(delete a.master,a.master=e)},clearPrefs:function(){n(t.storagekey)}},r={track:[":available",":loaded",":play",":stop",":mute",":volume"],master:[":master-mute",":master-volume"]};var i=r.track.concat(r.master);function s(e,t){if(!e||"string"!=typeof e||!e.trim())return null;var o=Fast.filter(Fast.map(e.split(" "),function(e){return":"!==(e=e.split(".")[0])[0]&&(e=":"+e),e+".userland"}),function(e){return t?i.includes(e):r.track.includes(e)}).join(" ");return o&&o.trim()?o:null}a.data={parseEvent:s,bail:function(e){throw new Error(e,"audio.js -> bail()",140)}},a.on=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).on(e,t):console.error("Chapel.Audio.on() -> invalid callback")},a.one=function(e,t){t&&"function"==typeof t?(e=s(e,!0))&&$(document).one(e,t):console.error("Chapel.Audio.one() -> invalid callback")},a.off=function(e){(e=s(e,!0))&&$(document).off(e)},t.persistPrefs&&($(document).on(":master-mute",a.savePrefs),$(document).on(":master-volume",a.savePrefs)),$(document).on(":play",function(e){e.track.addToGroup("playing")}),$(document).on(":stop",function(e){e.track.removeFromGroup("playing")}),t.muteOnBlur&&$(window).on("blur",function(){a.isMuted()||(a.mute(!0),$(window).one("focus",function(){a.mute(!1)}))}),a.parseEvent=s,window.Chapel=window.Chapel||{},window.Chapel.Audio=a}(),function(){"use strict";var r=Chapel.Audio,o=r.data.pareEvent,a=r.data.bail,i=Chapel.options,t=$(document.createElement("div")).attr("id","audio-container").css("display","none").appendTo(document.body),s={aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"};function u(e,t,o){this instanceof u||a("Track: called without `new` operator"),e||a("Track: no id specified"),"string"!=typeof e&&a("Track: track id is not a string"),t&&(!Array.isArray(t)||t.length)||a("Track: no sources specified"),o?t=[].slice.call(arguments).slice(1):"string"==typeof t&&(t=[t]);var n=$(document.createElement("audio"));Fast.forEach(t,function(e){var t,o;$(document.createElement("source")).attr({src:e,type:(t=e.split("."),(o=t[t.length-1]).includes("?")&&(o=o.split("?")[0]),o=o.toLowerCase().trim(),Object.keys(s).includes(o)||a('Track: unsupported file type "'+o+'"'),s[o])}).appendTo(n)}),n.attr({"data-track":"id","data-volume":1,"data-mute":!1}).one("canplaythrough.hal",function(){r.loaded.push(e)}),i.preload&&n.attr("preload","auto"),n[0].volume=+r.master.volume,this.id=e,this.$el=n,this.unwrap=n[0],this.sources=t}Object.assign(u,{list:[],is:function(e){return e instanceof u},has:function(t){return Fast.some(u.list,function(e){return e.id===t})},emit:function(e,t){$(document).trigger({type:e,track:t}),t.emit(e)},add:function(e,t,o){o&&(t=[].slice.call(arguments).slice(1));var n=new u(e,t);return u.list.push(n),n.$el.on("canplay",function(){u.emit(":available",n)}),n.$el.on("canplaythrough",function(){u.emit(":loaded",n)}),n.attach(),n},renew:function(){Fast.forEach(u.list,function(e){e.mute(e.isMuted()),e.volume(e.getVolume())})},getIdx:function(t){return Fast.findIndex(u.list,function(e){return e.id===t})},get:function(t){var e=Fast.find(u.list,function(e){return e.id===t});if(!e)throw new ReferenceError('There is no track with the id "'+t+'". Please check your spelling and capitalization.',"track.js -> Track.get()",155);return e},removeFromDOM:function(e){"string"==typeof e&&(e=u.get(e)),e&&u.is(e)?e.unattach():t.remove()},_runOnMultiple:function(e,t,o){e instanceof Array&&u.prototype.hasOwnProperty(t)&&Fast.forEach(u.list,function(e){u.is(e)||(e=u.get(e)||null),e&&e[t].apply(e,o&&o instanceof Array?o:[])})}}),Object.assign(u.prototype,{constructor:u,emit:function(e){this.$el.trigger({type:e,track:this})},clone:function(){return new u(this.id,this.sources)},isAttached:function(){return $.contains(t[0],this.unwrap)},attach:function(){return this.isAttached()||this.$el.appendTo(t),this},unattach:function(){return this.isAttached()&&this.$el.remove(),this},isPlaying:function(){return!this.unwrap.paused},play:function(){var e=this;return this.unwrap.play(),u.emit(":play",this),this.$el.on("ended",function(){e.unwrap.loop||(e.unwrap.currentTime=0,u.emit(":stop",e))}),this},playWhenPossible:function(){var t=this;return this.unwrap.play().then(function(){u.emit(":play",t),t.$el.on("ended",function(){t.unwrap.loop||(t.unwrap.currentTime=0,u.emit(":stop",t))})},function(e){$(document).one("click mousedown keydown touchstart",function(){t.play()})}).catch(function(e){console.error(e)}),this},forcePlay:function(){var e=this,t=$(document.createElement("a")).css("display","none").appendTo(document.body).on("click",function(){e.play()});setTimeout(function(){t.trigger("click")},safeAudioStart)},pause:function(){return this.unwrap.pause(),u.emit(":pause",this),this},stop:function(){return this.unwrap.pause(),this.unwrap.currentTime=0,u.emit(":stop",this),this},mute:function(e){return e=!!e,this.$el.attr("data-mute",e),r.master.mute?this.unwrap.muted=!0:this.unwrap.muted=e,u.emit(":mute",this),this},isMuted:function(){var e=this.$el.attr("data-mute");return"boolean"==typeof e?e:"false"!==e},toggleMute:function(){return this.mute(!this.isMuted()),this},volume:function(e){return e=Number(e),Number.isNaN(e)||(1<e?e=1:e<0&&(e=0),this.$el.attr("data-volume",e),this.unwrap.volume=e*r.master.volume),u.emit(":volume",this),this},getVolume:function(){return Number(this.$el.attr("data-volume"))},addToGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e];return Fast.some(n,function(e){return o.id===e.id})||n.push(this),this},removeFromGroup:function(e,t){var o=this,n=t?r.groups.custom[e]:r.groups[e],a=Fast.findIndex(n,function(e){return e.id&&e.id===o.id});return n.splice(a,1),this},loop:function(e){return this.unwrap.loop=!!e,this.unwrap.loop?this.addToGroup("looping"):this.removeFromGroup("looping"),this},isLooping:function(){return!!this.unwrap.loop},toggleLoop:function(){return this.loop(!this.isLooping()),this},seek:function(e){return e<0?e=this.unwrap.duration-e:e>this.unwrap.duration&&(e=this.unwrap.duration),this.unwrap.currentTime=e,this},fadeIn:function(e){var t=this;e=e||1;var o=this.getVolume();return this.volume(0),this.play(),this.$el.animate({volume:o*r.master.volume},1e3*e,function(){t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeOut:function(e){e=e||1;var t=this,o=this.getVolume();return this.$el.animate({volume:0},1e3*e,function(){t.stop(),t.volume(o),u.emit(":volume",t),u.emit(":fade",t)}),this},fadeTo:function(e,t){var o=this;if(e=e||1,t=Number(t),!Number.isNaN(t))return 1<t?t=1:t<0&&(t=0),this.$el.animate({volume:t*r.master.volume},1e3*e,function(){o.volume(t),u.emit(":volume",o),u.emit(":fade",o)}),this;alert("ivalid volume level")},delay:function(e,t){var o=this;"function"==typeof t&&(e=Number(e),(Number.isNaN(e)||e<0)&&(e=0),setTimeout(function(){t.call(o,o,e)},e))},on:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.on() -> invalid callback"),this;(e=o(e))&&this.$el.on(e,t)},one:function(e,t){if(!t||"function"!=typeof t)return console.error("<track>.one() -> invalid callback"),this;(e=o(e))&&this.$el.one(e,t)},off:function(e){(e=o(e))&&this.$el.off(e)}}),r.classes.Track=u,r.newTrack=function(){try{return u.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.newTrack() -> see the console for more information.")}},r.track=function(e){try{return u.get(e)}catch(e){console.error(e.message),alert("Error in A.track() -> see the console for more information.")}},$(document).on(":master-mute",u.renew),$(document).on(":master-volume",u.renew)}(),function(){"use strict";var i=Chapel.Audio,s=i.classes.Track,o=(i.data._extend,/(play)?list:(.+)/i);i.createGroup=function(e,t,o){var n,a,r=o?[].slice.call(arguments).slice(1):t;n=e,(a=r)&&Array.isArray(a)||(a=[]),i.groups.custom[n]=Fast.map(a,function(e){return s.get(e)})},i.group=function(e){if(!(this instanceof i.group))return new i.group(e);if(Object.keys(i.groups.custom).includes(e))this.members=i.groups.custom[e];else{if(!(i.groups[e]&&i.groups[e]instanceof Array))throw new ReferenceError('There is no group with the id "'+id+'". Please check your spelling and capitalization.',"group.js -> A.group()",29);this.members=i.groups[e]}var t;!o.test(e)||(t=e.match(o)[2])&&t.trim()&&(this.members=i.playlist(t).tracks),Array.isArray(this.members)||(this.members=[],console.error('Could not find members for track group "'+e+'"!'))},Object.assign(i.group,{is:function(e){return this instanceof i.group},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.members,t,o];s._runOnMultiple.apply(null,a)}}),Object.assign(i.group.prototype,{constructor:i.group,_run:function(){i.group._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},play:function(){return this._run("play"),this},pause:function(){return this._run("pause"),this},stop:function(){return this._run("stop"),this},mute:function(e){return this._run("mute",e),this},volume:function(e){return this._run("volume",e),this},loop:function(e){return this._run("loop",e),this}})}(),function(){"use strict";var e=Chapel.Audio,r=e.classes.Track;e.data._extend;function n(e,t){if(!(this instanceof n))return new n(e,t);this.id=e,this.tracks=t.map(function(e){return r.get(e)}),this.looping=!1,this.current="",this.playing=!1}Object.assign(n,{list:{},is:function(e){return e instanceof n},add:function(e,t,o){return o&&(t=[].slice.call(arguments).slice(1)),n.list[e]=new n(e,t),n.list[e]},_runOnAll:function(e,t,o,n){null!=n?o=[].slice.call(arguments).slice(2):o instanceof Array||(o=[o]);var a=[e.tracks,t,o];r._runOnMultiple.apply(null,a)}}),Object.assign(n.prototype,{constructor:n,clone:function(){return new n(this.id,this.tracks.map(function(e){return e.id}))},_run:function(){n._runOnAll.apply(null,[this].concat([].slice.call(arguments)))},volume:function(e){return this._run("volume",e),this},mute:function(e){return this._run("mute",e),this},shuffle:function(){for(var e,t,o=this.tracks,n=o.length-1;0<n;n--)e=Math.floor(Math.random()*(n+1)),t=o[n],o[n]=o[e],o[e]=t;return this.tracks=o,this},random:function(){return this.tracks[Math.floor(Math.random()*this.tracks.length)]},isPlaying:function(){return this.playing},nowPlaying:function(){return r.get(this.current)},play:function(e){var t=this;if((e=e||(t.current?Fast.findIndex(t.tracks,function(e){return e.id===t.current}):0))>=t.tracks.length&&t.looping)e=0;else if(e>=t.tracks.length)return t.current="",void(t.playing=!1);var o=t.tracks[e],n=o.isLooping();return o.loop(!1),o.play(),t.playing=!0,setTimeout(function(){o.isPlaying()||(t.playing=!1)},20),t.current=o.id,o.$el.one("ended.playlist",function(){e++,o.loop(n),t.play(e)}),t},loop:function(e){return this.looping=!!e,this},isLooping:function(){return this.looping},stop:function(){var e;return this.current&&this.isPlaying()?(e=this.nowPlaying())&&(e.stop(),e.$el.off(".playlist")):this._run("stop"),this.current="",this.playing=!1,this},pause:function(){var e;return this.current&&this.isPlaying()&&((e=this.nowPlaying())&&e.pause()),this.playing=!1,this}}),e.classes.Playlist=n,e.createPlaylist=function(){try{n.add.apply(null,arguments)}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}},e.playlist=function(e){try{var t=n.list[e]||null;if(!t)throw new ReferenceError('There is no playlist with the id "'+e+'". Please check your spelling and capitalization.',"list.js -> A.playlist()",171);return t}catch(e){console.error(e.message),alert("Error in A.createPlaylist() -> see the console for more information.")}}}(),function(){"use strict";var t=Chapel.Audio,o=t.classes.Track,n=t.classes.Playlist;function a(t,o){if("object"!=typeof o)throw new TypeError("Invalid extension.","extensions.js -> _extend()",8);Fast.forEach(Object.keys(o),function(e){if(void 0!==t[e])throw new Error('Invalid extension: cannot clobber existing property "'+e+'".',"extensions.js -> _extend()",8);t[e]=o[e]})}t.extend=function(e){a(Audio,e)},o.extend=function(e){a(o,e)},o.extendPrototype=function(e){a(o.prototype,e)},t.extendTrack=o.extend,t.extendTrackProto=o.extendPrototype,t.group.extend=function(e){a(t.group,e)},t.group.extendPrototype=function(e){a(t.group.prototype,e)},t.extendGroup=t.group.extend,t.extendGroupProto=t.group.extendPrototype,n.extend=function(e){a(n,e)},n.extendPrototype=function(e){a(n.prototype,e)},t.extendPlaylist=n.extend,t.extendPlaylistProto=n.extendPrototype}(),function(){"use strict";var e,t,o,n,a,r,i,s,u=Chapel.options;u.showControls&&(e=$(document.createElement("div")).attr("id","story-menu").css("display","none"),t=$(document.createElement("span")).attr("id","vol-title").append("Volume"),u.volumeDisplay||t.css("display","none"),o=$(document.createElement("input")).attr({id:"audio-volume",type:"range",min:1,max:99,step:1,title:"Volume"}).addClass("hal"),(n=Math.trunc(100*window.Chapel.Audio.master.volume))<0?n=0:100<n&&(n=100),o.attr("value",n),a=function(e){void 0===e&&(e=o.val()),t.empty().append("Volume "+e)},o.on("input",function(){window.Chapel.Audio.volume($(this).val()/100),a($(this).val())}),r=$(document.createElement("tw-link")).attr({id:"audio-mute",title:"Mute"}).append("Mute <span></span>").on("click",function(e){e.preventDefault(),$(this).toggleClass("muted"),Chapel.Audio.mute(!Chapel.Audio.isMuted())}),Chapel.Audio.isMuted()&&r.addClass("muted"),i=$(document.createElement("tw-link")).attr("id","audio-panel-toggle").on("click",function(e){e.preventDefault(),s.toggleClass("closed")}),s=$(document.createElement("div")).attr("id","audio-controls").append(e,t,o,r,i).appendTo(document.body),u.sidebarStartClosed&&s.addClass("closed"),window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.controls={$panel:s,$volume:o,$mute:r,$user:e,close:function(){s.addClass("closed")},open:function(){s.removeClass("closed")},toggle:function(){s.toggleClass("closed")},hide:function(){s.css("display","none")},show:function(){s.css("display","block")},updateVolume:a})}(),function(){"use strict";var s=Chapel.options,t=State,e=$(document.createElement("div")).attr("id","audio-overlay").css("display","none").appendTo(document.body);function o(){e.css("display","block").append('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>')}function u(){e.fadeOut(function(){e.empty()})}window.Chapel=window.Chapel||{},window.Chapel.Audio=window.Chapel.Audio||{},window.Chapel.Audio.loadScreen={show:o,dismiss:u,kill:function(){$("#audio-overlay").remove()}},window.Chapel.Audio.$overlay=e,window.Chapel.Audio.preload=function(){var a,e,r,i;Chapel.debug("This is a mobile browser -> ",$.browser.mobile),t.pastLength||t.futureLength||$.browser.mobile||($(document).ready(function(){o()}),a=100+s.loadDelay,e=Chapel.Audio.classes.Track.list,r=Chapel.Audio.loaded,e.length?(i=Fast.map(e,function(e){return e.id}),0<s.totalLoadLimit&&setTimeout(function(){u()},s.totalLoadLimit),function e(){var t,o,n;i.length?(t=i.shift(),r.includes(t)?e():(o=Chapel.Audio.classes.Track.get(t)).unwrap.readyState<2?(n=!1,o.$el.one("canplaythrough.hal",function(){e(),n=!0}),setTimeout(function(){n||(o.$el.off("canplaythrough.hal"),e())},s.trackLoadLimit)):(r.includes(t)||r.push(t),e())):setTimeout(u,a)}()):setTimeout(u,a))}}(),function(){"use strict";var o=Chapel.options.storagekey+"_hal_restart_";Chapel.debug("HAL Session Key -> ",o);var e,t,n=(window.sessionStorage?(Chapel.debug("Session Storage Available"),e=function(e,t){window.sessionStorage.setItem(o+e,t)},t=function(e){return window.sessionStorage.getItem(o+e)}):(Chapel.debug("Session Storage Unavailable"),e=function(){},t=function(){},console.warn("Session storage is unavailable...")),{save:e,load:t});window.Chapel.Audio.state={_store:n,saveTracks:function(){var e;try{e=Fast.map(Chapel.Audio.classes.Track.list,function(e){return{id:e.id,sources:e.sources}}),Chapel.debug("Session Saved (Tracks) -> ",e),e=JSON.stringify(e),n.save("tracks",e)}catch(e){console.error(e.message)}},loadTracks:function(){var e;try{e=(e=n.load("tracks"))&&JSON.parse(e),Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Tracks) -> ",e),Fast.forEach(e,function(e){e.id&&e.sources&&!Chapel.Audio.classes.Track.has(e.id)?Chapel.Audio.newTrack.apply(null,[e.id].concat(e.sources)):Chapel.debug("Track reloading skipped.")}))}catch(e){console.error(e.message)}},savePlaylists:function(){try{var o=Chapel.Audio.classes.Playlist.list,e=Fast.map(Object.keys(o),function(e){var t={};return t.tracks=Fast.map(o[e].tracks,function(e){return e.id}),t.id=o[e].id,t});Chapel.debug("Session Saved (Playlists) -> ",e),e=JSON.stringify(e),n.save("playlists",e)}catch(e){console.error(e.message)}},loadPlaylists:function(){var e;try{(e=(e=n.load("playlists"))&&JSON.parse(e))&&Array.isArray(e)&&e.length&&(Chapel.debug("Session Loaded (Playlists) -> ",e),Fast.forEach(e,function(e){e.id&&e.tracks&&Chapel.Audio.createPlaylist(e.id,e.tracks)}))}catch(e){console.error(e.message)}},saveGroups:function(){var t;try{t={},Fast.forEach(Object.keys(Chapel.Audio.groups.custom),function(e){t[e]=Fast.map(Chapel.Audio.groups.custom[e],function(e){return"string"==typeof e?e:e.id})}),Chapel.debug("Session Saved (Groups) -> ",t),t=JSON.stringify(t),n.save("groups",t)}catch(e){console.error(e.message)}},loadGroups:function(){var t;try{(t=(t=n.load("groups"))&&JSON.parse(t))&&"object"==typeof t&&(Chapel.debug("Session Loaded (Groups) -> ",t),Fast.forEach(Object.keys(t),function(e){Fast.map(t[e],function(e){return Chapel.Audio.classes.Track.get(e)})}),Chapel.Audio.groups.custom=t)}catch(e){console.error(e.message)}}}}(),function(){"use strict";var e=Chapel.options;e.globalA&&void 0===window.A&&(Chapel.debug("Created global A interface."),window.A=window.Chapel.Audio),Chapel.Get.fromPassage&&(Chapel.debug("Loading tracks from track def special passage -> ",Chapel.Get.fromPassage),Chapel.Get.fromPassage.forEach(function(e,t){Chapel.Audio.newTrack.apply(null,[t].concat(e))})),$(document).on("unload",function(){Chapel.debug("User Prefs Saved"),window.Chapel.Audio.savePrefs()}),Chapel.Audio.classes.Track.renew(),Chapel.Audio.controls&&Chapel.Audio.controls.updateVolume(),Chapel.Get.isHarlowe3OrLater&&($(window).on("unload",function(){Chapel.debug("HAL State Saved"),Chapel.Audio.state.saveTracks(),Chapel.Audio.state.savePlaylists(),Chapel.Audio.state.saveGroups()}),Chapel.debug("HAL State Loaded"),Chapel.Audio.state.loadTracks(),Chapel.Audio.state.loadPlaylists(),Chapel.Audio.state.loadGroups()),e.persistPrefs&&(Chapel.debug("User Prefs Loaded"),Chapel.Audio.loadPrefs())}(),function(){"use strict";var s,u,e,l,t;Chapel.options.showControls&&(s=Engine,u=Chapel.Audio.controls.$user,e=function(){return"none"!==u.css("display")},l=function(){return e()||u.css("display","block"),u},t=function(){return e()&&u.css("display","none"),u},Chapel.Audio.menu={hide:t,show:l,isShown:e,links:{add:function(e,t,o){var n,a;if(!e||"string"!=typeof e){var r="undefined";return alert(r),void console.error(r)}o||"function"!=typeof t?(t&&"string"==typeof t&&(n=t),o&&"function"==typeof o&&(a=o)):(a=t,n=null);var i=$(document.createElement("tw-link")).append(e).attr({tabindex:"0",name:e.toLowerCase().trim()}).on("click",function(){n&&s.goToPassage(n),a&&a()}).addClass("story-menu").appendTo(u);return l(),i},clear:function(){return u.empty(),t()},hide:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').addClass("hide")},show:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').removeClass("hide")},toggle:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').toggleClass("hide")},remove:function(e){e=e.toLowerCase().trim(),$('tw-link.story-menu[name="'+e+'"]').remove()}}})}(),function(){"use strict";var n=Chapel.Audio;function o(e){return e&&"function"==typeof e}function a(e,t){if(!e||"string"!=typeof e)return null;switch(e=e.toLowerCase().trim()){case"isplaying":e="isPlaying";break;case"playwhenpossible":e="playWhenPossible";break;case"ismuted":e="isAMuted";break;case"togglemute":e="toggleMute";break;case"getvolume":e="getVolume";break;case"islooping":e="isLooping";break;case"toggleloop":e="toggleLoop";break;case"fadein":e="fadeIn";break;case"fadeout":e="fadeOut";break;case"fadeto":e="fadeTo";break;case"stopall":e="stopAll"}if("isPlaying"===e&&"master"===t&&(e="audioPlaying"),"group"===t){if(o(n.group.prototype[e]))return e}else if("master"===t){if(o(n[e]))return e}else if(o(n.classes[t].prototype[e]))return e;throw new ReferenceError('Cannot run the command: "'+e+'" on the API "'+t+'". The command may be invalid, or this may be a bug in HAL.',"macros.js -> getCommand()",10)}var e={newtrack:function(){var e=[].slice.call(arguments);try{return n.newTrack.apply(null,e)}catch(e){alert("Error in the (newtrack:) macro: "+e.message)}},newplaylist:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createPlaylist(e,t)}catch(e){alert("Error in the (newplaylist:) macro: "+e.message)}},newgroup:function(e,t){t=[].slice.call(arguments).slice(1);try{return n.createGroup(e,t)}catch(e){alert("Error in the (newgroup:) macro: "+e.message)}},masteraudio:function(e){try{return e=a(e,"master"),n[e].apply(null,[].slice.call(arguments).slice(1))}catch(e){alert("Error in the (masteraudio:) macro: "+e.message)}},track:function(e,t){try{var o=n.track(e);return o[t=a(t,"Track")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (track:) macro: "+e.message)}},playlist:function(e,t){try{var o=n.playlist(e);return o[t=a(t,"Playlist")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (playlist:) macro: "+e.message)}},group:function(e,t){try{var o=n.group(e);return o[t=a(t,"group")].apply(o,[].slice.call(arguments).slice(2))}catch(e){alert("Error in the (group:) macro: "+e.message)}}};window.Chapel.Macros.add(e)}();
/** End of HAL code */</script><tw-passagedata pid="1" name="title" tags="donotshowinventory nosave" position="400,325" size="100,100">(display:&quot;setpink&quot;)(display:&quot;undo-off&quot;)&lt;div class=&quot;projectalexiaii&quot;&gt;PROJECT ALEXIA II&lt;/div&gt;
&lt;div class=&quot;by&quot;&gt;by Luisa Cheng &amp; Angela Ko&lt;/div&gt;

&lt;div class=&quot;menu&quot;&gt;(link-goto:&quot;New Game&quot;,&quot;newgame&quot;)  (link-goto:&quot;About &quot;,&quot;about&quot;){
(if: (saved-games:) contains &quot;paiiautosave&quot;)[  
	(link: &quot;Continue&quot;)[(load-game:&quot;paiiautosave&quot;)]
]}&lt;/div&gt;</tw-passagedata><tw-passagedata pid="2" name="setpink" tags="" position="775,0" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;

&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;pink&#39;)&lt;/script&gt;

&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;pink&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="3" name="newkeeper" tags="nosave donotshowinventory" position="675,600" size="100,100">(display:&quot;setafternoon&quot;)(track: &#39;objectgain&#39; , &#39;play&#39;)(alert:&quot;You got a new mail and 3 messages! Please check your phone!&quot;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;X&quot;)[You never knew you had a fifth cousin thrice removed until two weeks ago when her lawyer and banker came to you, saying that you were her successor. You were going to inherit the Doyle Estate, which included a huge land and a mansion houseoh yes, you heard them righta frigging ESTATE.] 
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;) . . . ]
(button:)[[Next|nk01]]</tw-passagedata><tw-passagedata pid="4" name="nk01" tags="" position="675,750" size="100,100">(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)(display:&quot;setafternoon&quot;)
&lt;==&gt;
It took only one day for you to think over the whole last heiress drama, and then you signed the papers. You didnt do it because you were in need of money, though. You always wanted to leave but had no courage to sever yourself from your past, not since your parents died in a car crash last year. You thought this was a good opportunity to lead a new life.


So, you dropped out of uni, sold the house, and left the city where you grew up, heading for this faraway non-place where everything would be foreign and insignificant, a perfect place to start all over. {
(track: &#39;maintitle&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
}


(button:)[[Next|nk02]]</tw-passagedata><tw-passagedata pid="5" name="nk02" tags="" position="675,900" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
[However, staring at the very incarnation of Gothic horror in front of you, you cannot suppress the urge to take back what you said about starting a new life here. You werent really paying attention to the lawyer and the banker back then when they were describing the condition of the land and showing you the photos of the mansion. You thought it would look like the Audley End House, only less refined due to its 10-year lack of maintenance.


&lt;img src=&quot;https://i.imgur.com/Y1bmGr9.jpg&quot; class=&quot;centerBOOK&quot;&gt;

]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk02&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)Holy cow. . . ]Yet the hot mess ahead of you is way worse than less refined. You look aroundendless fields of tall long grass, dense canopies from the vast forestthis place is savage, primeval, and forgotten in time. You gasp, shaking your head. Theres no way you can make it here! //Is there even electricity and gas in the house?//



(button:)[[Next|nk03]]]]</tw-passagedata><tw-passagedata pid="6" name="nk04" tags="" position="675,1200" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
	(track: &#39;nk03&#39;, &#39;stop&#39;)
}
&lt;==&gt;
The house has three stories. You quickly look through all the rooms on each floor, just to decide where to settle down. Out of respect, you dont feel like taking the master bedroom, which once belonged to your cousin Laoise. Instead, you pick a random chamber on the second floor and start to move in the boxes and unpack your stuff.



(button:)[[Next|nk05]]</tw-passagedata><tw-passagedata pid="7" name="maila" tags="nosave donotshowinventory" position="175,1225" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[Dear Alexia,

I hope this letter finds you well.

Firstly, we deeply regret the passing of Laoise Woods. We would like to send our condolences. 

Secondly, we would like to welcome you to join the Royal Society for the Protection of Faeries (RSPF). Congratulations on becoming the ***10th*** keeper of FJCU Sanctuary, aka DSGN. 4.

Please do not hesitate to write to us if you are ever in need of anything.

Best,
Anglea and Luisa
Ministry of Administration, RSPF
]
</tw-passagedata><tw-passagedata pid="8" name="setcard" tags="" position="1075,0" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;

&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;card&#39;)&lt;/script&gt;

&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;card&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="9" name="setblack" tags="" position="875,0" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;black&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;black&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="10" name="setwhite" tags="" position="975,0" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;

&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;white&#39;)&lt;/script&gt;

&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;white&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="11" name="setdream" tags="" position="1175,0" size="100,100">&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;dream&#39;);$(&#39;tw-story&#39;).removeClass().addClass(&#39;dream&#39;);&lt;/script&gt;</tw-passagedata><tw-passagedata pid="12" name="undo-off" tags="" position="1275,0" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;
&lt;script&gt;$(&#39;tw-sidebar&#39;).removeClass()&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="13" name="newgame" tags="donotshowinventory nosave" position="400,450" size="100,100">{
(track: &#39;click&#39;, &#39;play&#39;)
(track: &#39;maintitle&#39;, &#39;volume&#39;, 0.5)
(track: &#39;maintitle&#39;, &#39;loop&#39;, true)
(track: &#39;maintitle&#39;, &#39;playwhenpossible&#39;)
}
(display:&quot;undo-off&quot;)(display:&quot;setwhite&quot;)(live:1.5s)[(t8n:&quot;dissolve&quot;)[(display:&quot;user instruction&quot;)(stop:)]]
{
(set: $inv to (a:))
(set: $gal to (a:))
(set: $phone to (a:))
(set: $library to false)
(set: $secondfloor to false)
(set: $banshee to false)
(set: $portraits to false)
(set: $shelf to false)
(set: $tapestry to false)
}</tw-passagedata><tw-passagedata pid="14" name="ch2" tags="nosave donotshowinventory" position="2600,425" size="100,100">(display:&quot;setquickmorning&quot;)**A few days later . . .**
{(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
(track: &#39;chapterend&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setmorning&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setafternoon&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;dress01&quot;)]]
}</tw-passagedata><tw-passagedata pid="15" name="password" tags="nosave" position="1400,425" size="100,100">(set: $password to (prompt: &quot;Password?&quot;,&quot;*********&quot;) )
(set: $time to it + 1)
(if: $password is &quot;SCOUNDREL&quot; or $password is &quot;scoundrel&quot; or $password is &quot;Scoundrel&quot;)[You got the rgiht password.  [[Unlock Chapter II-&gt;ch2-01]]](elseif: $password is &quot;*********&quot;)[Cmon! At least try! Failing five times will reveal the hints.  [[Try again-&gt;password]].](elseif: $password is &quot;CMYEXNBOV&quot; or $password is &quot;cmyexnbov&quot;)[Youre almost there! This is the ciphertext. What about the plaintext? [[Try again-&gt;password]].](else:)[Dont give up! Do you check all the clues? Failing five times will reveal the hints.  [[Try again-&gt;password]].]
(if: $time &gt;= 5)[
---
(display: &quot;dumb&quot;)]</tw-passagedata><tw-passagedata pid="16" name="ch2-01" tags="donotshowinventory" position="1400,550" size="100,100">You successfully got (link-repeat: &quot;Keepers Guide&quot;)[(open-url: &#39;http://bit.ly/password_SCOUNDREL&#39;)]!
(confirm: &quot;Remember to downloaded the guide!&quot;)
(link-reveal-goto: &quot;Next&quot;, &quot;ch2&quot;)[(set: $guide to true)]</tw-passagedata><tw-passagedata pid="17" name="header" tags="header" position="325,825" size="100,100">{
(if: (passage:)&#39;s name is &quot;inventory&quot;)[&lt;!--Do nothing--&gt;]
(else-if: (passage:)&#39;s name is &quot;gallery&quot;)[&lt;!--Do nothing--&gt;]
(else-if: (passage:)&#39;s name is &quot;phone&quot;)[&lt;!--Do nothing--&gt;]
(else-if: (passage:)&#39;s name is &quot;guide&quot;)[&lt;!--Do nothing--&gt;]
(else-if: (passage:)&#39;s name is &quot;bookmark&quot;)[&lt;!--Do nothing--&gt;]
(else-if: (passage:)&#39;s tags contains &quot;donotshowinventory&quot;)[&lt;!--Do nothing--&gt;]
(else:)[[[&lt;img src=&quot;https://i.imgur.com/7FpT7dX.png&quot; width=&quot;5%&quot; height=auto&quot;&gt;|inventory]][[&amp;nbsp; &lt;img src=&quot;https://i.imgur.com/uXtfc97.png&quot; width=&quot;5%&quot; height=auto&quot;&gt;|gallery]](if: $phonedead is 1)[&lt;img src=https://i.imgur.com/b49ddDm.png&quot; width=&quot;5%&quot; height=auto&quot;&gt;](else:)[[[&amp;nbsp; &lt;img src=&quot;https://i.imgur.com/003I2uz.png&quot; width=&quot;5%&quot; height=auto&quot;&gt;|phone]]](if: $guide is true)[[[&amp;nbsp; &lt;img src=&quot;https://i.imgur.com/RiajS8k.png&quot; width=&quot;5%&quot; height=auto&quot;&gt;|bookmark]]]]
&amp;nbsp
---
&amp;nbsp
}</tw-passagedata><tw-passagedata pid="18" name="inventory" tags="nosave" position="325,975" size="100,100">{(display: &quot;setcard&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menuback&quot;&gt;(link: &#39; Back&#39;)[(track: &#39;inventory&#39;, &#39;stop&#39;)(goto: (history:)&#39;s last)]&lt;/span&gt;&lt;span class=&quot;menupage&quot;&gt;INVENTORY&lt;/span&gt;&lt;/span&gt;
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, true)(track: &#39;panic&#39;, &#39;mute&#39;, true)(track: &#39;heartbeats&#39;, &#39;mute&#39;, true)(track: &#39;nightfall&#39;, &#39;mute&#39;, true)(track: &#39;librarystroll&#39;, &#39;mute&#39;, true)(track: &#39;yard&#39;, &#39;mute&#39;, true)(track: &#39;laoisetheme&#39;, &#39;mute&#39;, true)(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, true)(track: &#39;attic&#39;, &#39;mute&#39;, true)(track: &#39;chapterend&#39;, &#39;mute&#39;, true)(track: &#39;revel&#39;, &#39;mute&#39;, true)(track: &#39;seantheme&#39;, &#39;mute&#39;, true)(track: &#39;foufoutheme&#39;, &#39;mute&#39;, true)(track: &#39;quarry&#39;, &#39;mute&#39;,true)(track: &#39;revel&#39;, &#39;mute&#39;,true)(track: &#39;banetheme&#39;, &#39;mute&#39;,true)(track: &#39;poeticjustice&#39;, &#39;mute&#39;, true)(track: &#39;badend&#39;, &#39;mute&#39;, true)
(track: &#39;inventory&#39;, &#39;volume&#39;, 0.1)(track: &#39;inventory&#39;, &#39;fadein&#39;, 3)(track: &#39;inventory&#39;, &#39;loop&#39;, true)(track: &#39;inventory&#39;, &#39;play&#39;)(track: &#39;click&#39;, &#39;play&#39;)
}

&lt;==&gt;
{(if: $inv&#39;s length &gt; 0)[Your inventory contains (print: (a: ...$inv)).]
(else:)[Your inventory is empty for now.]}


[]&lt;c4|
{
(click: &quot;a homemade childrens book&quot;)[(replace:?c4)[(display: &quot;hammerhead&quot;)]]
(click: &quot;a note&quot;)[(replace:?c4)[(display: &quot;caesarcipher&quot;)]]
(click: &quot;the recording of hippogriff sounds&quot;)[(open-url: &#39;https://static.wixstatic.com/mp3/5ab759_6c96bff665d24379bed9c022f2dbf7ee.wav&#39;)]
(click: &quot; a Dullahan Express package&quot;)[(open-url: &#39;https://drive.google.com/drive/folders/1Zsp3o0jCleEIOM5umLtlhrp2nM0lx-79?usp=sharing&#39;)]
(click: &quot;Sir Doyle letter&quot;)[(replace:?c4)[(display: &quot;benletter&quot;)]]

(mouseover:&quot;mail&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
(mouseover:&quot;a homemade childrens book&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
(mouseover:&quot;a note&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
}
</tw-passagedata><tw-passagedata pid="19" name="nk05" tags="" position="675,1350" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
[(track: &#39;dagfootsteps&#39;, &#39;volume&#39;, 0.8)(track: &#39;dagfootsteps&#39;, &#39;play&#39;)Then you hear footsteps above your head, light but clear, as if someone is knocking fiercely at the floorboards with their knuckles. They must come from very small feet. 


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk05&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Could it be some child from the neighboring town that comes to seek adventure? Or perhaps a racoon?]You grab the broomstick you got earlier from the local grocery and go upstairs.



(button:)[[Next|nk06]]]]</tw-passagedata><tw-passagedata pid="20" name="nk06" tags="" position="675,1500" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
	(track: &#39;nk05&#39;, &#39;stop&#39;)
}
&lt;==&gt;
[The Doyle Mansion should be a vacant house. As far as you know, Cousin Laoise didnt hire any housekeepers or gardeners when she still lived in the estate, not even when her health condition was so bad that she needed to stay in hospital all the time. 


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk06&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Hellooooo?]As if in response to your greeting, the {
(link-repeat: &#39;tiny footfalls&#39;)[
    (track: &#39;dagcloserfootsteps&#39;, &#39;play&#39;)
]
} sound again, but this time closer. On your right, within the walls. You hit the walls with your broomstick, thinking that it might be a rat.



(button:)[[Next|nk07]]]]</tw-passagedata><tw-passagedata pid="21" name="nk03" tags="" position="675,1050" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
[In front of the porch stands a sign that reads Keepers Keep, which is apparently what they used to call the mansion though you dont quite understand the name. 


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk03&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)More like the **PALACE OF HORROR**. What the heck is a *keeper* though? ]The door creaks on its hinges when you push it. You step into the house. Its quite dim inside considering the sunlight leaking from the bay windows are the only light source. Dust particles are dancing in the air, glowing faintly. To your surprise, the interior actually looks quite organized and neat; its not as old and shabby as the exterior.



(button:)[[Next|nk04]]]]</tw-passagedata><tw-passagedata pid="22" name="nk07" tags="" position="675,1650" size="100,100">{(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 3)(display:&quot;setafternoon&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
(track: &#39;panic&#39;, &#39;volume&#39;, 0.1)(track: &#39;panic&#39;, &#39;fadein&#39;, 3)(track: &#39;panic&#39;, &#39;loop&#39;, true)(track: &#39;panic&#39;, &#39;play&#39;)]
(track: &#39;panic&#39;, &#39;mute&#39;, false)(track: &#39;heartbeats&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(track: &#39;giggles&#39;, &#39;play&#39;)The thing hidden in the wall lets out a small giggle and shuffles to the ceiling where you cannot reach. Immediately chills run down your spine.



(click-replace: &quot;&quot;)[(track: &#39;nk07_1&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)Ok, whatever that is, its definitely not a rodent! Racoons and rats dont giggle!](unless: (track: &#39;heartbeats&#39;, &#39;isplaying&#39;))[(track: &#39;heartbeats&#39;, &#39;play&#39;)]Your heart races like a wild horse. You hate to think of it that way, but is there any chance that youre running into a . . . a //presence//, even during the day? 


You drop the broomstick and rush downstairs like a bullet. Just when youre about to reach the door, you trip and fall right on your face.


]
(click-replace: &quot;&quot;)[(track: &#39;nk07_1&#39;, &#39;stop&#39;)(track: &#39;nk07_2_ver2&#39;, &#39;play&#39;)Just where do you think youre going, human? a tiny voice says.



(button:)[[Next|nk08]]]</tw-passagedata><tw-passagedata pid="23" name="nk08" tags="" position="675,1800" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
	(track: &#39;nk07_2_ver2&#39;, &#39;stop&#39;)
}
&lt;==&gt;
(track: &#39;nk08_1&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)Whos there? Show yourself! Or Ill call the police!]You get up and look around, yet see nothing but thin air.



(click-replace: &quot;&quot;)[(track: &#39;nk08_1&#39;, &#39;stop&#39;)(track: &#39;nk08_2&#39;, &#39;play&#39;)Pee-ka-boo, I see you~


The voice comes from above your head. You look up and see a small humanoid creature standing on the three-branch chandelier. Its no taller than a water bottle, dressed in a tattered doll-size plaid shirt, denim jeans and a beige cardigan. It has a squeezed brown face that looks like a bat, with black beady eyes and mousy, straw-like hair.


(button:)[[Next|nk09]]]</tw-passagedata><tw-passagedata pid="24" name="nk09" tags="" position="675,1950" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
	(track: &#39;nk08_2&#39;, &#39;stop&#39;)
}
&lt;==&gt;
[(track: &#39;nk09_1&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)What . . . what are you!?]

]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk09_1&#39;, &#39;stop&#39;)(track: &#39;nk09_2&#39;, &#39;play&#39;)Im a browniealmost a boggart though. Youre lucky Laoise left enough honey for me. The names Daggart, by the way. Dag for short. 


He takes off his little hat, which is decorated with pins, a button, and a needle, and gives an elegant bow. 


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk09_2&#39;, &#39;stop&#39;)(track: &#39;nk09_3&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)A what?]Your lack of imagination limits you. You can only think of the brownie brownie, the chocolate-flavored baked treat. //Am I dreaming? Is this all in my head?// You wonder to yourself.


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk09_3&#39;, &#39;stop&#39;)(track: &#39;nk09_4&#39;, &#39;play&#39;)Laoise said she would find us a new keeper, but I dont trust you. 


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk09_4&#39;, &#39;stop&#39;)(track: &#39;nk09_5&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)A new keeper? What do you mean?] You kind of regret that you left the broomstick upstairs. You dont want to face this imp barehanded.


(button:)[[Next|nk10]]]]</tw-passagedata><tw-passagedata pid="25" name="nk10" tags="" position="675,2150" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
	(track: &#39;nk09_5&#39;, &#39;stop&#39;)
}
&lt;==&gt;
Dag jumps off the chandelier and lands before you. His movement reminds you of a floating dandelion seed.



(click-replace: &quot;&quot;)[(track: &#39;nk10_1n2&#39;, &#39;play&#39;)Youre from the Macodrum line. I never liked Bridget. Im not surprised that you Macodrum descendants know nothing about us.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)You? What are you? No, wait, what Macodrum line? My last name is not Macodrum, and whos Bridget anyway?] You still cant believe that youre arguing with an actual imp.


]
(click-replace: &quot;&quot;)[(track: &#39;nk10_1n2&#39;, &#39;stop&#39;)(track: &#39;nk10_3&#39;, &#39;play&#39;)What, do I look like an encyclopedia to you? Figure it out yourself! 


He rolls his beady eyes and turns around, ready to leave. His small body starts turning translucent.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;) . . . ]

(link-reveal-goto: &quot;Act friendly.&quot;, &quot;nk11&quot;, (button:))[(set: $dagfriendship += 1)]
(button:)[[Get alert.|nk11]]
(link-reveal-goto: &quot;Act defensive.&quot;, &quot;nk11&quot;, (button:))[(set: $dagfriendship -= 1)]]</tw-passagedata><tw-passagedata pid="26" name="nk12" tags="donotshowinventory" position="675,2425" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;panic&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;nightfall&#39;, &#39;isplaying&#39;))[
    (track: &#39;nightfall&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;nightfall&#39;, &#39;fadein&#39;, 3)
	(track: &#39;nightfall&#39;, &#39;loop&#39;, true)
]
(track: &#39;nightfall&#39;, &#39;mute&#39;, false)
(track: &#39;nk11_3&#39;, &#39;stop&#39;)
}
&lt;==&gt;
The night falls, you were lying on your bed, thinking how absurd all this is. Youre certain that the guide might help you; its called a guide afterall. But what about the four-leaf clover?


Just when youre about to fall asleep, a poignant and painful wail not afar startles you. 


(text-style: &quot;shudder&quot;)[
(link-repeat: &#39;Caaaaaaawwwwwww&#39;)
	[(track: &#39;bronaghwailing&#39;, &#39;play&#39;)]
]


(link-reveal-goto: &quot;Go check the window.&quot;, &quot;see&quot;, (button:))[(set: $banshee to true)]
(button:)[[Ignore it.|sleep]]</tw-passagedata><tw-passagedata pid="27" name="see" tags="" position="575,2600" size="100,100">{
(display:&quot;setblack&quot;)
(unless: (track: &#39;nightfall&#39;, &#39;isplaying&#39;))[
    (track: &#39;nightfall&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;nightfall&#39;, &#39;fadein&#39;, 3)
	(track: &#39;nightfall&#39;, &#39;loop&#39;, true)]
	(track: &#39;nightfall&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
The sound comes from the yard. You lift up a small corner of the curtain and peek out the window, just to see what demonic bird could let out such an ugly cry. However, the second you look out, immediately you regret it.


Outside on the border of the yard where it meets the forest, is standing a gaunt woman in white, who has the most cadaverous face. Her streaky dark hair flowing with the wind. Shes holding something in her hands, a piece of clothing you figure. The moment your gaze lands upon her, she turns back and meets with it. Her eyes are two big hollows, and blood is welling up from those two holes and streaming all the way down to the off-white blouse in her hands. She lets out another painful wail.



&lt;img src=&quot;https://i.imgur.com/nregXPC.jpg&quot; class=&quot;centerBOOK&quot;&gt;


You shut the curtain right away, jump onto your bed and pull the blanket over your head. Youre going to pretend you saw nothing! 



(click-replace: &quot;&quot;)[(track: &#39;nk12_banshee&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)+(text-style: &quot;rumble&quot;)[(display: &quot;ashocked1&quot;)Ill find that bloody clover and guide tomorrow!!]


(button:)[[Next|phooka01]]]</tw-passagedata><tw-passagedata pid="28" name="sleep" tags="" position="775,2600" size="100,100">{
(display:&quot;setblack&quot;)
(unless: (track: &#39;nightfall&#39;, &#39;isplaying&#39;))[
    (track: &#39;nightfall&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;nightfall&#39;, &#39;fadein&#39;, 3)
	(track: &#39;nightfall&#39;, &#39;loop&#39;, true)]
	(track: &#39;nightfall&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You ignore  the sound and continue your beauty sleep.


(button:)[[Next|phooka01]]</tw-passagedata><tw-passagedata pid="29" name="ch1.0" tags="donotshowinventory nosave" position="675,475" size="100,100">(track: &#39;click&#39;, &#39;play&#39;)(display:&quot;setwhite&quot;)|logo2&gt;[&lt;img src=&quot;https://i.imgur.com/VNaaVEy.png&quot; class=&quot;centerLOGO&quot;&gt;](click: ?logo2)[(goto: &quot;newkeeper&quot;)]</tw-passagedata><tw-passagedata pid="30" name="phooka02" tags="" position="675,3050" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
	(track: &#39;bronaghsong&#39;, &#39;stop&#39;)
	(track: &#39;pk_agg_1to4&#39;, &#39;stop&#39;)
}
&lt;==&gt;
You still keep in mind the two things Dag demanded you to find yesterday. Before your search, youre hoping to dig more information from him.


(live:5s)[(stop:)(track: &#39;pk02_1&#39;, &#39;play&#39;)](align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)So, whats so special about the guide and the four-leaf clover? Why do I need those to survive here? What does the book look like anyway? Is it a thick book?](if: $pervert is true)[(live:16s)[(stop:)(track: &#39;pk02_2perv&#39;, &#39;play&#39;)]Not talking to you.](else:)[(live:16s)[(stop:)(track: &#39;pk02_2else&#39;, &#39;play&#39;)]If I tell you every detail beforehand, then this is not a quest but an errand.] 


(live:23s)[(stop:)(track: &#39;pk02_3&#39;, &#39;play&#39;)](align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;aangry1&quot;)Fine! Ill find them on my own.](live:26s)[(stop:)(track: &#39;pk02_4&#39;, &#39;play&#39;)]A gentle reminder though. ***Dont go into the woods.*** 


(live:31s)[(track: &#39;pk02_5&#39;, &#39;play&#39;)](align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)As if you CARE.]You hear a soft snort, but no more sounds after that. 


{
(link: &#39;Next&#39;, (button:))[
	(track: &#39;pk02_1&#39;, &#39;stop&#39;)
	(track: &#39;pk02_2perv&#39;, &#39;stop&#39;)
	(track: &#39;pk02_2else&#39;, &#39;stop&#39;)
	(track: &#39;pk02_4&#39;, &#39;stop&#39;)
	(track: &#39;pk02_5&#39;, &#39;stop&#39;)
    (track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
    (goto: &#39;phooka03&#39;)
]
}</tw-passagedata><tw-passagedata pid="31" name="nk11" tags="" position="675,2300" size="100,100">{
(display:&quot;setafternoon&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
	(track: &#39;nk10_3&#39;, &#39;stop&#39;)
}
&lt;==&gt;
[{(if: $dagfriendship is 1)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)(track: &#39;nk11_1fr&#39;, &#39;play&#39;)Wait! Please dont go! If, like you said, Im the new keeper, then what exactly do I manage or look after? Are there more . . . the likes of you? Please, Id like to know.]](if: $dagfriendship is 0)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)(track: &#39;nk11_1alert&#39;, &#39;play&#39;)If, like you said, Im the new keeper, then what exactly do I manage or look after? You said you couldnt trust me, but how can I trust you then?]](if: $dagfriendship is -1)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)(track: &#39;nk11_1offended&#39;, &#39;play&#39;)Come back here! Who are you to tell me what to do? My house, my rules! I have no interest in being a ***keeper***! Whatever that means!]]}
Dag has already faded into the thin air. However, his voice lingers on throughout the house.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk11_1fr&#39;, &#39;stop&#39;)(track: &#39;nk11_1alert&#39;, &#39;stop&#39;)(track: &#39;nk11_1offended&#39;, &#39;stop&#39;)(track: &#39;nk11_2&#39;, &#39;play&#39;)Small people, good neighbors, the gentry, folk of the air, the sidheyou humans call us by various namesor simply FAIRIES. This whole estate is a secret faerie sanctuary, a land preserved for the fae to live away from human disturbance. And you, as its keeper, need to make sure that every faerie that lives on the land is happy and content. If I were you, the first thing I would do is to look for a four-leaf clover and the keepers guide, or you wont know how you die when death knocks upon your door.


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;nk11_2&#39;, &#39;stop&#39;)(track: &#39;nk11_3&#39;, &#39;play&#39;)It shouldnt be hard to find a four-leaf clover; theres grass everywhere on the estate. The guide, however, I hid it somewhere in the house. Nothing personal. Consider it to be a small fun challenge!


No matter how hard you knock on the walls or stamp your foot, Dag doesnt make a sound.


(link-reveal-goto: &quot;Next&quot;, &quot;nk12&quot;, (button:))[(set: $gal to $gal + (a: &quot; Daggart&quot;))(alert:&quot;You unlock a new character card!&quot;)]]]</tw-passagedata><tw-passagedata pid="32" name="phooka03" tags="donotshowinventory" position="1475,3600" size="100,100">(display: &quot;setmorning&quot;)
&lt;==&gt;
On the first floor, adjacent to the drawing room, is a library, which should be a perfect place to start to look for the keepers guide. A personal study is on the second floor, also a possible hiding spot for a book. As Dag said yesterday, there should be plenty of clovers outside in the yard, which is the least thing to worry about. 


You decide to explore . . . 


{
(if: $library is false)[(link-goto: &quot;The First Floor&quot;, &quot;library&quot;)]
(else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[The First Floor]]
}
{
(if: $secondfloor is false)[(link-reveal-goto: &quot;The Second Floor&quot;, &quot;secondfloor&quot;)[(set: $secondfloor to true)]]
(else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[The Second Floor]]
}
{(if: $library is false or $secondfloor is false)[[[The Yard|nope]]](else:)[[[The Yard|yard1]]]}</tw-passagedata><tw-passagedata pid="33" name="secondfloor" tags="" position="1575,2675" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You hesitate, not sure if you want to go into your deceased cousins personal space . . .


(link-reveal-goto: &quot;Enter anyway.&quot;, &quot;enterstudy&quot;)[(set: $laoisestudy to true)]
[[Back out.|noenterstudy]]</tw-passagedata><tw-passagedata pid="34" name="yard1" tags="" position="1675,3600" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Walking out of the mansion, you take a deep breath, breathing in the warm midday air. Feeling refreshed, you feel ready for a walk in the yard. Or rather, a quest of survival in the jungle of tall grass! 


(live:12s)[(stop:)(track: &#39;yard1&#39;, &#39;play&#39;)](align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Bloody hell . . . are brownies only limited to cleaning the house? Why not take care of this mess?]Swimming through overgrown grasses and shrubs, you almost trip over a rotten trunk. 


Along the way, strange tiny bugs and small unknown creatures keep swarming around you and sometimes even bump onto your face. You try to stay close to the ground for it might be easier to spot the four-leaf clover. Keeping in mind Dags advice, you limit the scope of your search within the yard. You end up at the edge of the yard but dare not venture into the woods.


[[Next|yard2]]</tw-passagedata><tw-passagedata pid="35" name="library" tags="donotshowinventory" position="1250,3100" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
	(track: &#39;bookfini_study_talk_tapepor&#39;, &#39;stop&#39;)
	(track: &#39;bookfini_study_talk_notapepor&#39;, &#39;stop&#39;)
	(track: &#39;bookfini_study_notalk_tapepor&#39;, &#39;stop&#39;)
	(track: &#39;bookfini_nostudy_tapepor&#39;, &#39;stop&#39;)
	(track: &#39;bookfini_nostudy_notapepor&#39;, &#39;stop&#39;)
}
&lt;==&gt;
(if: $library is false)[You remember theres a library on the first floor, so you decide to check it out.


Contrary to the dark hallway, the library is well-lit, thanks to the sunlight from the immense floor-to-ceiling windows. You can tell that the room is carefully maintainedperhaps by the loyal brownie himselfwith extreme caution. 


Where should you check?](else:)[Where shoud you check?]


{
(if: $shelf is false)[(link-reveal-goto: &quot;Front&quot;, &quot;shelf1&quot;)[(set: $shelf to true)]]
(else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Front]]
}
{
(if: $portraits is false)[(link-reveal-goto: &quot;Left&quot;, &quot;Loop: portraits&quot;)[(set: $portraits to true)]]
(else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Left]]
}
{
(if: $tapestry is false)[(link-reveal-goto: &quot;Right&quot;, &quot;tapestry1&quot;)[(set: $tapestry to true)]]
(else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Right]]
}

(if: $shelf is true and $portraits is true and $tapestry is true)[(link: &#39;Continue to explore the mansion.&#39;)[(track: &#39;librarystroll&#39;, &#39;fadeout&#39;, 2)(goto: &#39;phooka03&#39;)]]</tw-passagedata><tw-passagedata pid="36" name="shelf1" tags="" position="1250,2950" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(set: $library to true)You start examining the wall of bookshelves. Out of habit, your fingers brush through the backbones of the books as you scan through them. Among all the bookshelves, one shelf seems to be a little . . . off. You realize that on that particular shelf, a stack of nine books are piled horizontally rather than standing vertically like all the other books. Also, they look like they are intentionally placed in that manner instead of simply slipping from their original position. From top to bottom, the titles of the books are:


&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;//(font: &quot;Special Elite, cursive&quot;)[Cyanite and Kyanite: Chemical-Mineral Mixtures in Practice
Making your First Pot of Rice! A Guide to Oriental Cuisine
Youngsters of the Heart
Effects of Symbolism and Structuralism
Xystus, Amphitheater, Coliseum: A Brief History of Military Training
Ninnyhammer and the Featherhead that Follows
Beowulf
Occident Without Incidents
Varney the Vampire]//&lt;/div&gt;



(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(track: &#39;shelf1&#39;, &#39;play&#39;)Hmm . . . how mysterious. But I don&#39;t think the said guide is here.  ]
[[Next|shelf2]]]</tw-passagedata><tw-passagedata pid="37" name="tapestry1" tags="" position="1250,3350" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(set: $library to true)An embroidered tapestry hangs on the other side of the room, with an ornamented tree as its theme. Its actually a family tree! The patriarch was Benjamin Leslie Doyle, entitled Sir, who seemed to be a knight or baronet at some point during his life.


He had two daughters, Winnifred Woods and Bridget Macodrum. 


&lt;img src=&quot;https://i.imgur.com/ythUixv.jpg&quot; class=&quot;centerBOOK&quot;&gt;
You find your name at the bottom of Bridgets line, right underneath your dads and grandpas. No wonder Dag called you a Macodrum descendant yesterday; Bridget Macodrum was indeed your 5th great grandmother! You never heard of this from your dad or grandpa; you guessed they didnt know either.


[[Next|tapestry2]]</tw-passagedata><tw-passagedata pid="38" name="shelf2" tags="" position="1250,2800" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
	(track: &#39;shelf1&#39;, &#39;stop&#39;)
}
&lt;==&gt;
Nothing else special has gotten your eyes so far. Sighing, you decide to {(if: $tapestry is true and $portraits is true and $laoisestudy is true)[go look for the four-leaf clover instead](else:)[explore somewhere else]}. As you walk away, one of the books from the weird stack falls off the shelf, lying flat open on the floor.


You pick up the book. Its the childrens book titled //Ninnyhammer and the Featherhead that Follows//.



(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)(track: &#39;shelf2_1&#39;, &#39;play&#39;)Oh no . . . wait, what is this? ]From the pages (link-reveal: &quot;slides a note . . .&quot;)[

&lt;img src=https://i.imgur.com/dBWUZIX.jpg class=centerBOOK&gt;


]
(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(track: &#39;shelf2_1&#39;, &#39;stop&#39;)(track: &#39;shelf2_2&#39;, &#39;play&#39;)Ok, fancy. It seems that the Doyles might have had some secrets to hide. I wonder if this information will help.]You keep the paper and start examining the books cover art. 


It shows two boys, a swordsman and a wizard. They look identical, except that the swordsman has blonde hair while the wizard has red hair. The simple art style suggests that it was drawn by little children. The bottom left corner shows the authors names: **Alwyn Ninnyhammer and Maddox Featherhead**.


(link-reveal-goto: &quot;Take a look.&quot;, &quot;ninnyhammer&quot;)[(set: $inv to $inv + (a: &quot; a note&quot;))(alert:&quot;You obtained a new clue!&quot;)]
(link-reveal-goto: &quot;Return the book.&quot;, &quot;dontlook&quot;)[(set: $inv to $inv + (a: &quot; a note&quot;))(set: $nohammerhead to true)(alert:&quot;You obtained a new clue!&quot;)]]]</tw-passagedata><tw-passagedata pid="39" name="tapestry2" tags="" position="1125,3350" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Winnifred Woods and her line had been the successors of the Doyle Estate and the keepers of the faerie sanctuary until her last descendant, that is, Cousin Laoise, passed away this year. 


(if: $laoisetalk is true)[You knew from Dag that Laoises parents were cousins. Yet you didnt know they were first cousins once removed. Imogen was a rank below Alwyn Jr. but actually 2 years older.](else:)[You read on and find a family scandal. Cousin Laoises parents, Alwyn Jr. and Imogen, were first cousins once removed! She was a rank below him but actually 2 years older. WOAH!]


[[Continue to explore|library]]</tw-passagedata><tw-passagedata pid="40" name="nope" tags="" position="1475,3725" size="100,100">(display: &quot;setmorning&quot;)
&lt;==&gt;
You look at the harsh sunlight outside and decide that you will finish exploring the mansion before going into the yard.


[[Return|phooka03]]</tw-passagedata><tw-passagedata pid="41" name="about" tags="donotshowinventory nosave" position="400,575" size="100,100">(track: &#39;click&#39;, &#39;play&#39;)(display:&quot;setdream&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menuback&quot;&gt;(link-goto:&quot; Back&quot;,&quot;title&quot;)&lt;/span&gt;&lt;span class=&quot;menupage&quot;&gt;ABOUT&lt;/span&gt;&lt;/span&gt;

&lt;==&gt;
Project Alexia II Twine Remake is a free narrative based game written by Luisa Cheng and Angela Ko, illustrated by Luisa Cheng (Angela did the //Ninnyhammer// book though!) The game was designed to facilitate and promote English self-learning activities for students in Fu Jen Catholic University, Taiwan.


If youd like to report bugs and errors, send feedbacks, offer job opportunities or propose collaborations, please contact us via email.


(align:&quot;&lt;==&quot;)+(box:&quot;==XXXXXXXXXXXXXXXXXXXX===&quot;)[Luisa Liling Cheng &lt;a target=&quot;_top&quot; href=&quot;mailto:luisa0923@gmail.com&quot;&gt;luisa0923@gmail.com&lt;/a&gt;
Angela Ciao-Chian Ko &lt;a target=&quot;_top&quot; href=&quot;mailto:cc911086@gmail.com&quot;&gt;cc911086@gmail.com&lt;/a&gt;]
(display:&quot;authors&quot;)
(display:&quot;specialthx&quot;)
(display:&quot;castandcrew&quot;)
(display:&quot;musiccredits&quot;)
(display:&quot;references&quot;)
&lt;span class=&quot;copyright&quot;&gt; 2021, Luisa Cheng &amp; Angela Ko&lt;/span&gt;</tw-passagedata><tw-passagedata pid="42" name="gallery" tags="nosave" position="475,975" size="100,100">{(display: &quot;setcard&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menuback&quot;&gt;(link: &#39; Back&#39;)[(track: &#39;inventory&#39;, &#39;stop&#39;)(goto: (history:)&#39;s last)]&lt;/span&gt;&lt;span class=&quot;menupage&quot;&gt;GALLERY&lt;/span&gt;&lt;/span&gt;
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, true)(track: &#39;panic&#39;, &#39;mute&#39;, true)(track: &#39;heartbeats&#39;, &#39;mute&#39;, true)(track: &#39;nightfall&#39;, &#39;mute&#39;, true)(track: &#39;librarystroll&#39;, &#39;mute&#39;, true)(track: &#39;yard&#39;, &#39;mute&#39;, true)(track: &#39;laoisetheme&#39;, &#39;mute&#39;, true)(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, true)(track: &#39;attic&#39;, &#39;mute&#39;, true)(track: &#39;chapterend&#39;, &#39;mute&#39;, true)(track: &#39;revel&#39;, &#39;mute&#39;, true)(track: &#39;seantheme&#39;, &#39;mute&#39;, true)(track: &#39;foufoutheme&#39;, &#39;mute&#39;, true)(track: &#39;quarry&#39;, &#39;mute&#39;,true)(track: &#39;revel&#39;, &#39;mute&#39;,true)(track: &#39;banetheme&#39;, &#39;mute&#39;,true)(track: &#39;poeticjustice&#39;, &#39;mute&#39;, true)(track: &#39;badend&#39;, &#39;mute&#39;, true)
(track: &#39;inventory&#39;, &#39;volume&#39;, 0.1)(track: &#39;inventory&#39;, &#39;fadein&#39;, 3)(track: &#39;inventory&#39;, &#39;loop&#39;, true)(track: &#39;inventory&#39;, &#39;play&#39;)(track: &#39;click&#39;, &#39;play&#39;)
}

&lt;==&gt;
This is where you store the character cards you have collected. Remember that as the plot goes on you will get more and more info on a certain character, so do come back check them out from time to time!

{
(if: $gal&#39;s length &gt; 0)[Your gallery contains the following character cards:(print: (a: ...$gal)). ]
(else:)[Your gallery is empty for now. Please proceed with your story to unlock character cards and get extra info on them!]}


[]&lt;c4|
{(click: &quot;Daggart&quot;)[(replace:?c4)[(display: &quot;dag&quot;)]]
(click: &quot;Bronagh&quot;)[(replace:?c4)[(display: &quot;bronagh&quot;)]]
(click: &quot;Phooka&quot;)[(replace:?c4)[(display: &quot;phooka&quot;)]]
(click: &quot;Foufou&quot;)[(replace:?c4)[(display: &quot;foufou&quot;)]]
(click: &quot;Kor&quot;)[(replace:?c4)[(display: &quot;kor&quot;)]]
}
</tw-passagedata><tw-passagedata pid="43" name="dag" tags="nosave" position="475,1100" size="100,100">---
(track: &#39;select&#39;, &#39;play&#39;)
(display: &quot;dagcard&quot;)Dag is a brownie, who has a really bad temper and seems to be in charge of the house. Your Alfred, you suppose? 

(if: $maxdag is true)[Maddox said that Dag likes to arrange books by the first letter of their titles. He seldom organizes books in alphabetic order though as he likes to leave hidden messages using the first letters. More often than not, the messages are ciphered or encoded.


He also said that the password was Dags message to you the ***10th*** keeper.]</tw-passagedata><tw-passagedata pid="44" name="bronagh" tags="nosave" position="475,1225" size="100,100">---
(track: &#39;select&#39;, &#39;play&#39;)
(display: &quot;bronaghcard&quot;)Bronagh is a banshee. From Dag, it seems to you that a banshee is some kind of ghostly faerie supposed to herald an impending death and mourn for it. In that aspect, Bronagh seems incompetent since she always comes after death. </tw-passagedata><tw-passagedata pid="45" name="hal.config" tags="" position="1475,0" size="100,100">sidebarStartClosed: true
volumeDisplay: true</tw-passagedata><tw-passagedata pid="46" name="hal.tracks" tags="" position="1375,0" size="100,100">maintitle: https://static.wixstatic.com/mp3/5ab759_f5fec00f5c34413e8aea4db19dd2409e.mp3
alexiatheme: https://static.wixstatic.com/mp3/5ab759_0aa896e13c544bdaa6f5048056d960c7.mp3
maddoxtheme: https://static.wixstatic.com/mp3/5ab759_c67f44cc88044a71baff44fe5ae77c71.mp3
maddoxandhislove: https://static.wixstatic.com/mp3/5ab759_0697222a3ee843ae9da68d776d685f13.mp3
seantheme: https://static.wixstatic.com/mp3/5ab759_0602c04913c745d0a8c39f4f84e735d0.mp3
attic: https://static.wixstatic.com/mp3/5ab759_f9d3589f5daa4324bc26ed1f3328c63a.mp3
banetheme: https://static.wixstatic.com/mp3/5ab759_d916d576f3f04b438c9d4d8baf37e0f9.mp3
laoisetheme: https://static.wixstatic.com/mp3/5ab759_bd1cc9892a704723866367a071dbdba0.mp3
yard: https://static.wixstatic.com/mp3/5ab759_7f02428305474e50b9e5a0fbb52c22d5.mp3
chapterend: https://static.wixstatic.com/mp3/5ab759_4530b9443a69438eb969ee0c6fcdd61b.mp3
panic: https://static.wixstatic.com/mp3/5ab759_ed8a6e5405704bfbb15abe138e179552.mp3
revel: https://static.wixstatic.com/mp3/5ab759_07e69f7e83544ba2866c4cca3088f576.mp3
inventory: https://static.wixstatic.com/mp3/5ab759_bbc825ca941d4b5c98a0727b5f17db69.mp3
librarystroll: https://static.wixstatic.com/mp3/5ab759_58c0f9b95c754d31845b10778fbc8cc3.mp3
nightfall: https://static.wixstatic.com/mp3/5ab759_e2ecfea06c854c2b8b7c1e00d0e50c72.mp3
quarry: https://static.wixstatic.com/mp3/5ab759_ab5819176968482c8fc3f361ca753d61.mp3
foufoutheme: https://static.wixstatic.com/mp3/5ab759_793708b1f1904bd19d3882d1b2e8047f.mp3
rspf: https://static.wixstatic.com/mp3/5ab759_507a66aa2914407e9af2fb5efc1dffb6.mp3
dullahan: https://static.wixstatic.com/mp3/5ab759_e269fd2ad0d842728165d527e6975712.mp3
poeticjustice: https://static.wixstatic.com/mp3/5ab759_dacb895cfa134d1ca4c0a68ba78248d7.mp3
us: https://static.wixstatic.com/mp3/5ab759_a987e81b43c4405aaf9f124fc62d22e7.mp3
goatlove: https://static.wixstatic.com/mp3/5ab759_aaf4870139e54bb0b1dc2b342174923b.mp3
samhain: https://static.wixstatic.com/mp3/5ab759_98f356b011e543a7bf2c769613164c5f.mp3
badend: https://static.wixstatic.com/mp3/5ab759_531fd1151835400d94026004d7abcbc5.mp3
dagfootsteps: https://static.wixstatic.com/mp3/5ab759_b40815ffa0b4485893d8f1d8607b2886.mp3
dagcloserfootsteps: https://static.wixstatic.com/mp3/5ab759_9ac8e426d1fb4b87a5d0fb069f8da1db.mp3
bronaghwailing: https://static.wixstatic.com/mp3/5ab759_9c4e56f0aca0455a94bc2703c633e1c1.mp3
opendoor: https://static.wixstatic.com/mp3/5ab759_3a2995afc85440989f8aa31810b24be8.mp3
doorslam: https://static.wixstatic.com/mp3/5ab759_b819530b7fc444bc9d10eaadb3f6d5d2.mp3
unlock: https://static.wixstatic.com/mp3/5ab759_3f6381a2adbd41d8a220dc9f82864992.mp3
objectgain: https://static.wixstatic.com/mp3/5ab759_4392f19f0eab49fcbdc61e14cece1fc4.mp3
fliponepage: https://static.wixstatic.com/mp3/5ab759_4f0402db53544005ade9962979607660.mp3
flippages: https://static.wixstatic.com/mp3/5ab759_4f0402db53544005ade9962979607660.mp3
glassofwater: https://static.wixstatic.com/mp3/5ab759_b670dbb0ceaa4f65b97a7abe51e79480.mp3
searchthings: https://static.wixstatic.com/mp3/5ab759_81b51dfd16044b9cb8c623df997f5506.mp3
heartbeats: https://static.wixstatic.com/mp3/5ab759_d018e4c26dd746149cf31078f067a217.mp3
lightsonoff: https://static.wixstatic.com/mp3/5ab759_8015948db8124586adafec722c888970.mp3
lightson: https://static.wixstatic.com/mp3/5ab759_8e55de4b3c5e4f7b8564f3ee1c9f4b2a.mp3
select: https://static.wixstatic.com/mp3/5ab759_b1c6b4525b2140e0a658ff88b957b83b.mp3
click: https://static.wixstatic.com/mp3/5ab759_800819b3120040dab0d1de4a9080c600.mp3
giggles: https://static.wixstatic.com/mp3/5ab759_c710cb64ba7b4cd9840f98d7ca5a7170.mp3
dragonroar: https://static.wixstatic.com/mp3/5ab759_1753b81270bc466aa9bc8e413780835d.mp3
nk02: https://static.wixstatic.com/mp3/5ab759_e1f86877955147eb97aa16da11786530.mp3
nk03: https://static.wixstatic.com/mp3/5ab759_1a732d13c1bb48709cd4bb08716bbe7c.mp3
nk05: https://static.wixstatic.com/mp3/5ab759_bd19c6e6e73549eca895bf03af4a64c8.mp3
nk06: https://static.wixstatic.com/mp3/5ab759_12437756b08f48368d298ba05a74c428.mp3
nk07_1: https://static.wixstatic.com/mp3/5ab759_bb8671cc3d9245ed9cb107b2b99f3724.mp3
nk07_2_ver2: https://static.wixstatic.com/mp3/5ab759_c08173614f724d688a0ae3057e8f8129.mp3
nk08_1: https://static.wixstatic.com/mp3/5ab759_648fa6ed250541449b1a604a6ecc06d3.mp3
nk08_2: https://static.wixstatic.com/mp3/5ab759_5e4e11b0ad18458f89706048903db691.mp3
nk09_1: https://static.wixstatic.com/mp3/5ab759_3fec218725a94c7aa6b67dfcf05ba66b.mp3
nk09_2: https://static.wixstatic.com/mp3/5ab759_942bde1c5feb48b0beccc489d0c3d672.mp3
nk09_3: https://static.wixstatic.com/mp3/5ab759_16fdec4a98c848c5a8c463ca26216c35.mp3
nk09_4: https://static.wixstatic.com/mp3/5ab759_07ad7b0f44104837877c9f1a2654335c.mp3
nk09_5: https://static.wixstatic.com/mp3/5ab759_66c8106f2089472ba038aadddd7bd854.mp3
nk10_1n2: https://static.wixstatic.com/mp3/5ab759_dd47192a3db94df79bd025596743e11c.mp3
nk10_3: https://static.wixstatic.com/mp3/5ab759_002e12408b4041f796efbf75def64890.mp3
nk11_1fr: https://static.wixstatic.com/mp3/5ab759_4109b16e71044ced82067713219770e5.mp3
nk11_1alert: https://static.wixstatic.com/mp3/5ab759_68f7423b23214efab21fa5bb328fbcd5.mp3
nk11_1offended: https://static.wixstatic.com/mp3/5ab759_5cbd71d3027e42b8a53a65f6722dc9de.mp3
nk11_2: https://static.wixstatic.com/mp3/5ab759_21bb091bc3cc412b96aad21339303c95.mp3
nk11_3: https://static.wixstatic.com/mp3/5ab759_ad7bd13d9f63476f8ebafe4d674d65e3.mp3
nk12_banshee: https://static.wixstatic.com/mp3/5ab759_6c3c8d39188649bfaac2d476bb359873.mp3
pk_01: https://static.wixstatic.com/mp3/5ab759_a10dc1b0b04a4277b68cc974360dca63.mp3
pk_sassy_1n2: https://static.wixstatic.com/mp3/5ab759_2355e19e35934b58bc2ae6067d5066bd.mp3
pk_sassy_banf_alex: https://static.wixstatic.com/mp3/5ab759_06a0590c9cd4464195a62ff366f1cf2c.mp3
pk_sassy_bant_alex: https://static.wixstatic.com/mp3/5ab759_87462a5bc2c5417fa4e99eb974089123.mp3
pk_sassy_polite_dag: https://static.wixstatic.com/mp3/5ab759_114415f52b7a4662a1c52d65cc044c54.mp3
pk_sassy_banf_dag: https://static.wixstatic.com/mp3/5ab759_bfc60acb315a42229ff8876639b1f4a0.mp3
bronaghsong: https://static.wixstatic.com/mp3/5ab759_bad58b48ee404910b98977a36b5164dc.mp3
pk_polite_1n2: https://static.wixstatic.com/mp3/5ab759_b87dea70bce6464daad498a2466b23d9.mp3
pk_polite_bant_alex: https://static.wixstatic.com/mp3/5ab759_4212ea1808694fcb99e14be2da65aa15.mp3
pk_polite_banf_alex: https://static.wixstatic.com/mp3/5ab759_9995cad2801f47638c1f1dfac22d04da.mp3
pk_agg_1to4: https://static.wixstatic.com/mp3/5ab759_5522dc30a76a4a1e99d37cc667d1742a.mp3
pk02_1: https://static.wixstatic.com/mp3/5ab759_833ace0c6a30425d8877e7e64c67c4ed.mp3
pk02_2else: https://static.wixstatic.com/mp3/5ab759_f0d7d5469d1848f8af3b7352ac98473e.mp3
pk02_2perv: https://static.wixstatic.com/mp3/5ab759_f93c51e71edc48d9ba6b8f359cdc9ff3.mp3
pk02_3: https://static.wixstatic.com/mp3/5ab759_648fca53300641ffa889101dde438cb5.mp3
pk02_4: https://static.wixstatic.com/mp3/5ab759_88f18ddd86fa48e4af60316804eabd7f.mp3
pk02_5: https://static.wixstatic.com/mp3/5ab759_3d22fb310be34f8fb39c67670ec58d32.mp3
cover: https://static.wixstatic.com/mp3/5ab759_4d1f587dce664a18b5ccd85c907e94bd.mp3
shelf1: https://static.wixstatic.com/mp3/5ab759_be1b397a9d7a43e5bbb1f401d2a2073e.mp3
shelf2_1: https://static.wixstatic.com/mp3/5ab759_35419ccd4bf34ae197026e78f44f5fac.mp3
shelf2_2: https://static.wixstatic.com/mp3/5ab759_bfa5b0d21959490c962fcab0c2b27781.mp3
p1: https://static.wixstatic.com/mp3/5ab759_671a13bd56684e959ded1ad44d084803.mp3
p2: https://static.wixstatic.com/mp3/5ab759_71ece6050c0843b2b9bdef207da4e07c.mp3
p3: https://static.wixstatic.com/mp3/5ab759_c448e2fcaf9a470fac7ad93838a5f4e8.mp3
p4: https://static.wixstatic.com/mp3/5ab759_46176049fd1d44d286faeced0f8ca69d.mp3
p5: https://static.wixstatic.com/mp3/5ab759_1c82f341b09e474bb77763e302d7d9f3.mp3
p6: https://static.wixstatic.com/mp3/5ab759_6491bdc1e6614e2e8de7e1c1d072a24a.mp3
bld_notape: https://static.wixstatic.com/mp3/5ab759_cc5a78f31f254313a72399a6d157c116.mp3
bld_tape: https://static.wixstatic.com/mp3/5ab759_befb80d24e964f69bfd922ae5012d30c.mp3
wdw: https://static.wixstatic.com/mp3/5ab759_185536d278814106ada2c635f5f34f58.mp3
willy: https://static.wixstatic.com/mp3/5ab759_900dfac62d7c40889af02ad75e5e21ad.mp3
asw: https://static.wixstatic.com/mp3/5ab759_c943a2a4f8734ef6b294b4f25e4bfcaf.mp3
ewwk: https://static.wixstatic.com/mp3/5ab759_2fa97ec66f2d4b4499c7c7e4f1f60b96.mp3
ajw: https://static.wixstatic.com/mp3/5ab759_8480396ddb274da99506b1f3d1208785.mp3
ikw: https://static.wixstatic.com/mp3/5ab759_1296d989a2774021991a245be832946a.mp3
lw: https://static.wixstatic.com/mp3/5ab759_d3f9f4a1d8cf4ed6ae4a2cc40510a343.mp3
bookfini_study_talk_tapepor: https://static.wixstatic.com/mp3/5ab759_2484789d370348dfb9aa917251aa4015.mp3
bookfini_study_notalk_tapepor: https://static.wixstatic.com/mp3/5ab759_44241cf3032d41bdbe573e7e2d73ef86.mp3
bookfini_study_talk_notapepor: https://static.wixstatic.com/mp3/5ab759_921f825d93904c7ca7dd3dfeb90b6a75.mp3
bookfini_nostudy_notapepor: https://static.wixstatic.com/mp3/5ab759_1fb9cb582f54430985165eeca4c4af8c.mp3
bookfini_nostudy_tapepor: https://static.wixstatic.com/mp3/5ab759_5a074b0a7d854f1789cc7d2f899b2b63.mp3
enterstudy02_1: https://static.wixstatic.com/mp3/5ab759_8a698af9ed254532b68ae49691bd87d3.mp3
enterstudy02_2: https://static.wixstatic.com/mp3/5ab759_3aa6bc06694b455884cdbe73aa53e8bf.mp3
nocry1: https://static.wixstatic.com/mp3/5ab759_1762e74ec7eb4e189d99a7ff03e1a5a9.mp3
nocry2: https://static.wixstatic.com/mp3/5ab759_dd50fe62a0fa49f59024905f947c81c8.mp3
nocry3: https://static.wixstatic.com/mp3/5ab759_20f56408e8c44049aa0346bc9762002f.mp3
asklao01_1: https://static.wixstatic.com/mp3/5ab759_0bca2fdfc6fb4277ab245f651234103a.mp3
asklao01_2: https://static.wixstatic.com/mp3/5ab759_176f237be8e440b487ef1b040c6a6d15.mp3
asklao01_3: https://static.wixstatic.com/mp3/5ab759_1cb702860c214cb082965bea4db115ae.mp3
asklao01_4: https://static.wixstatic.com/mp3/5ab759_4855c1365a98488985400fc05dc6d09a.mp3
asklao02_1: https://static.wixstatic.com/mp3/5ab759_15d8be4b555e4ea19c28bb09ec8707ed.mp3
asklao02_2: https://static.wixstatic.com/mp3/5ab759_9ea15601e13747d08105100758b91264.mp3
asklao02_3: https://static.wixstatic.com/mp3/5ab759_a244eec5e0f84903901beaf30a2345f3.mp3
asklao02_4: https://static.wixstatic.com/mp3/5ab759_c726f618ca0b44f9829a3cbed970465c.mp3
asklao02_5: https://static.wixstatic.com/mp3/5ab759_23fa806fb8074da3a477133344fb5bc8.mp3
asklao02_6: https://static.wixstatic.com/mp3/5ab759_740a682f6ed34d59b8cb2e34f17edb03.mp3
enterstudy_common01: https://static.wixstatic.com/mp3/5ab759_c8c4ff0c32914c67877ccab7e182d6cd.mp3
enterstudy_common02_1: https://static.wixstatic.com/mp3/5ab759_e0ffd5f32b7248bc909a2c1eec6c4390.mp3
enterstudy_common02_2: https://static.wixstatic.com/mp3/5ab759_12dd6e93d60c44b29f84bf94d3876513.mp3
yard1: https://static.wixstatic.com/mp3/5ab759_212f532f364149a0805daa51d4cac6dc.mp3
yard2: https://static.wixstatic.com/mp3/5ab759_11a7c4bc648a4065b7bf8726dc748fee.mp3
yard3_1: https://static.wixstatic.com/mp3/5ab759_d6a3f2dc7a5646eeb533313e9ed08a09.mp3
yard3_2: https://static.wixstatic.com/mp3/5ab759_b4db2d49573941e8a26b684a8e06a27c.mp3
yard3_alas: https://static.wixstatic.com/mp3/5ab759_cdc8918df53441978574c4fe4db84898.mp3
yard3_humanleather: https://static.wixstatic.com/mp3/5ab759_9606e54cd9094f6a8523de34aad0b2ad.mp3
yard3_4: https://static.wixstatic.com/mp3/5ab759_0ebd4de304d14b09bc30e1a08a0dca69.mp3
yard5_1: https://static.wixstatic.com/mp3/5ab759_0bab9631bddf4d10bfc556671c81da87.mp3
yard5_2: https://static.wixstatic.com/mp3/5ab759_99a08c893c224f9ba6a86f61045c316e.mp3
yard5_3dagfh: https://static.wixstatic.com/mp3/5ab759_eabf9b41bac241f6b68ac39bd9333a6f.mp3
yard5_3dagfl: https://static.wixstatic.com/mp3/5ab759_04190bd8da954478b995ae1f2ccf1dac.mp3
yard6_1: https://static.wixstatic.com/mp3/5ab759_3b5127cab63346f39ce32235d445ff8a.mp3
yard6_2: https://static.wixstatic.com/mp3/5ab759_cab97944a37749e7b8a499d3ff1ccdcd.mp3
yard6_3: https://static.wixstatic.com/mp3/5ab759_b87ddeb09f0f44a6b020c07d230a4f16.mp3
yard_rescue_dag1: https://static.wixstatic.com/mp3/5ab759_123bd6d54d964756ac5691d8fed40ef7.mp3
yard_rescue_dag2: https://static.wixstatic.com/mp3/5ab759_9d0256b16f67436bb2e0f5728a648414.mp3
yard_rescue_phooka: https://static.wixstatic.com/mp3/5ab759_838f30860bf6473e98aa4733b2e62172.mp3
yard_agitated: https://static.wixstatic.com/mp3/5ab759_c88d9ba664f14a298a74cb9651606cd6.mp3
yard_grateful: https://static.wixstatic.com/mp3/5ab759_fb157fb2c0614d63b79e93ffe764115b.mp3
yard_ungrateful: https://static.wixstatic.com/mp3/5ab759_fbf28cab4cdc4cbcab7cb16f5c048d52.mp3
maddox02: https://static.wixstatic.com/mp3/5ab759_ba3e00cb7eb34855ac74eda5414b2fdc.mp3
maddox04: https://static.wixstatic.com/mp3/5ab759_a05844e93c5c445ab006f7e5e6cdb7e3.mp3
maddox05: https://static.wixstatic.com/mp3/5ab759_28bf3f0e858b4343b3a6975e6dae7c23.mp3
maddox06: https://static.wixstatic.com/mp3/5ab759_1b0133a794c94719a8414ed8e3016cad.mp3
maddox07: https://static.wixstatic.com/mp3/5ab759_03465c9862724013a9681391ea25c667.mp3
maddox08_1: https://static.wixstatic.com/mp3/5ab759_b44f9aeabf0a43b49f504cae2c72ae0c.mp3
maddox08_2: https://static.wixstatic.com/mp3/5ab759_ba6f8136712c4f66b97b230a5a53ddfe.mp3
maddox09: https://static.wixstatic.com/mp3/5ab759_2ca93628a9254cf0ae02d75989ba8f71.mp3
maddox10_1: https://static.wixstatic.com/mp3/5ab759_bcd6244f1a2a42ed966153a7c5c0435e.mp3
maddox10_2mega: https://static.wixstatic.com/mp3/5ab759_70a39ad71d194eb2805aa72cabf38b33.mp3
maddox12_1: https://static.wixstatic.com/mp3/5ab759_31c4146ef76a46558ab1f7d115394946.mp3
maddox12_2: https://static.wixstatic.com/mp3/5ab759_5345988c54bf4388979d810e4669878c.mp3
maddox13_1: https://static.wixstatic.com/mp3/5ab759_de455cd1589441818446db59f435156d.mp3
maddox13_2: https://static.wixstatic.com/mp3/5ab759_287bfa45888743cf94b9887f8881fc5a.mp3
distance01: https://static.wixstatic.com/mp3/5ab759_d070326dccbb419ab0429b8d5ae02c33.mp3
distance02_mega1: https://static.wixstatic.com/mp3/5ab759_a5fdd1c62698428cbe34845fcd636779.mp3
distance02_mega2: https://static.wixstatic.com/mp3/5ab759_6bdb3c24ffd845a0b39359ad4dffa92f.mp3
guiltymad1: https://static.wixstatic.com/mp3/5ab759_b7480f23681748c889a78456aa3d8c0b.mp3
menbook1_1: https://static.wixstatic.com/mp3/5ab759_0abbc4eade9d4063a00104c15cf4ddb2.mp3
menbook1_2: https://static.wixstatic.com/mp3/5ab759_8af0777597b34ee8ab1a264352c7fc7c.mp3
menbook1_3: https://static.wixstatic.com/mp3/5ab759_5a5b4e847f3846fda064373bedca18c0.mp3
menbook2_1: https://static.wixstatic.com/mp3/5ab759_b53836fb8ee84da7a62ab3f6102f200e.mp3
menguide1: https://static.wixstatic.com/mp3/5ab759_b2ff13fc231348a698cda8cbf2156405.mp3
menguide2: https://static.wixstatic.com/mp3/5ab759_37cd4b95b94e4ab39891cef9c9b10a83.mp3
menlao1_1: https://static.wixstatic.com/mp3/5ab759_fe6aedfbbb57439884023b59024d5f72.mp3
menlao1_2: https://static.wixstatic.com/mp3/5ab759_9ba6af2df3c24418af74ea625b0b847b.mp3
menlao2_1: https://static.wixstatic.com/mp3/5ab759_0f938aed2d8a41caac7d025990a080b2.mp3
menlao2_2: https://static.wixstatic.com/mp3/5ab759_8f1bde0ab378435496b6bf14820040c6.mp3
fallenbrownie1_1: https://static.wixstatic.com/mp3/5ab759_8103ecd8830d4c358c0552c5c429b1ba.mp3
fallenbrownie1_2: https://static.wixstatic.com/mp3/5ab759_023164e8ac29480794a36ae8e0a122d3.mp3
fallendagh1: https://static.wixstatic.com/mp3/5ab759_5e9b0a26928c44199f321e33c3dbc2f3.mp3
fallendagh2: https://static.wixstatic.com/mp3/5ab759_81aaaba7a47c4664b67ce9379331a588.mp3
fallendagso1: https://static.wixstatic.com/mp3/5ab759_48efa45e40f84484b91ae07503c8c3c0.mp3
fallendagl1: https://static.wixstatic.com/mp3/5ab759_0bbab1e7501c445695554c88433f7d4d.mp3
fallendagh_solow3_distance: https://static.wixstatic.com/mp3/5ab759_3e539a9cb8bb45b4968cf9524ce7940f.mp3
fallendagh_solow3_nodistance: https://static.wixstatic.com/mp3/5ab759_ed7ae0203436454aa77128ab14737856.mp3
fallenacc1: https://static.wixstatic.com/mp3/5ab759_d34cf054a4d44205a888b6b775d5f3e0.mp3
fallenacc2: https://static.wixstatic.com/mp3/5ab759_e5d97166250a460b8d238d7b1bd1835a.mp3
fallenacc3: https://static.wixstatic.com/mp3/5ab759_8fc56218ce104e57b1591d5c7e587b80.mp3
fallenacc4: https://static.wixstatic.com/mp3/5ab759_b076294b6136421ca898055c07dc679a.mp3
fallenbail1: https://static.wixstatic.com/mp3/5ab759_669f8a7161ab4b33981c40cb4549605f.mp3
fallenbail2: https://static.wixstatic.com/mp3/5ab759_d2c93ec77b2346c595f410e3bee69cfe.mp3
fallenbeseech1: https://static.wixstatic.com/mp3/5ab759_7efdbc7d54bd4aaa92cedfdbfee7e114.mp3
fallenbeseech2: https://static.wixstatic.com/mp3/5ab759_343e579237904e7eaa16003dbdda9803.mp3
fallenbeseech3: https://static.wixstatic.com/mp3/5ab759_939cb3ed4a08423f99a48f205d625798.mp3
fallenbeseech4: https://static.wixstatic.com/mp3/5ab759_0412cc4cf8674b2da4c7a0e0e8bb2cc2.mp3
fallenbeseech5: https://static.wixstatic.com/mp3/5ab759_6a9476ee77b240ffbd5b4ce4b7e76523.mp3
fallenbeseech6: https://static.wixstatic.com/mp3/5ab759_b0953272a86b4f149c6c4e70118bff32.mp3
fallencalm1: https://static.wixstatic.com/mp3/5ab759_62b1cd38e7314ba4b52ffdd19b94b07a.mp3
fallencalm2: https://static.wixstatic.com/mp3/5ab759_24242403aeec4149b680c46a18b6a3bc.mp3
fallencalm3: https://static.wixstatic.com/mp3/5ab759_0d0cf3af905d4faa8bdd5a451932edde.mp3
fallennormal1: https://static.wixstatic.com/mp3/5ab759_0fa46ff28ede4f7f8573263b3f0d8c6c.mp3
fallennormal2: https://static.wixstatic.com/mp3/5ab759_af09c5b02a994d7cb02fc4ca17c77087.mp3
dress04_1: https://static.wixstatic.com/mp3/5ab759_8f71e26ef9ce4a29a1bdfa503842f0b2.mp3
dress04_2: https://static.wixstatic.com/mp3/5ab759_7ad7896ac6c440799fb3e22ee8f10ba5.mp3
dress05_1: https://static.wixstatic.com/mp3/5ab759_8d40a63968274d478df39319c549b66c.mp3
dress05_2: https://static.wixstatic.com/mp3/5ab759_ab3aa4b92f744755bd48414e40027ea8.mp3
dress06_1: https://static.wixstatic.com/mp3/5ab759_346487b1ee6641d190d7b84310f36071.mp3
dress06_2: https://static.wixstatic.com/mp3/5ab759_6554b01e582545f190d3736fe5d566fc.mp3
dress09: https://static.wixstatic.com/mp3/5ab759_59dba22031c44d4392dd7cce67aa6142.mp3
piecenorm1: https://static.wixstatic.com/mp3/5ab759_5082969b62294c38ba254266d55fdb1e.mp3
piecenorm2: https://static.wixstatic.com/mp3/5ab759_791ddbf968054616af7a4e74fa2f9552.mp3
pieceno1: https://static.wixstatic.com/mp3/5ab759_5221d7f67a5145c7aea384c4d9c0254e.mp3
pieceno2: https://static.wixstatic.com/mp3/5ab759_764c6724dde6486fb22bd6759f37008a.mp3
piecesilence: https://static.wixstatic.com/mp3/5ab759_882626c544174f06b0a8e1469321a078.mp3
revel01: https://static.wixstatic.com/mp3/5ab759_b339f9b05dd44ac3bdd8d65c29a034e8.mp3
revel02: https://static.wixstatic.com/mp3/5ab759_01a3b09eb226405bbb05555d01e2cd5a.mp3
revel04_1: https://static.wixstatic.com/mp3/5ab759_33e691f3a1524d5db3092d6d9f0dc1c2.mp3
revel04_2: https://static.wixstatic.com/mp3/5ab759_22b14fcbf8ab406ba2081effc17d0d11.mp3
revel05_1: https://static.wixstatic.com/mp3/5ab759_23c7da077db643c79d7c5401cd9da233.mp3
revel05_2: https://static.wixstatic.com/mp3/5ab759_3275443193a34c72b082f008abfeae08.mp3
revel05_3: https://static.wixstatic.com/mp3/5ab759_c7d9c5b9b8c348528b42f36144aef0c7.mp3
revel06_1: https://static.wixstatic.com/mp3/5ab759_9dbd1b720ab7491c8247fc7024f3f068.mp3
revel06_2: https://static.wixstatic.com/mp3/5ab759_ff6937b6ebad4ff78666d4badd76d631.mp3
revel06_3: https://static.wixstatic.com/mp3/5ab759_e5956a7d089945e5afd5952abd260800.mp3
revel07: https://static.wixstatic.com/mp3/5ab759_cc11417fabe641ef8f6f4d865940d61c.mp3
revel08_1: https://static.wixstatic.com/mp3/5ab759_595831824d3847bca4254044ddc0c7c2.mp3
revel08_2: https://static.wixstatic.com/mp3/5ab759_36778876e23445e8afc7646bfda436a0.mp3
encouragehim1: https://static.wixstatic.com/mp3/5ab759_35dc7df9d1ae4f3786632f440cd20feb.mp3
encouragehim2: https://static.wixstatic.com/mp3/5ab759_e3a1007a10e641e1974b4451586a0adb.mp3
stophim1: https://static.wixstatic.com/mp3/5ab759_4d80d34272c44d3ea65927f0bf04f6e3.mp3
faeriesdontlie: https://static.wixstatic.com/mp3/5ab759_78bd416da3fb4fdc89bc2978b039d41f.mp3
revel09_1: https://static.wixstatic.com/mp3/5ab759_b8c5c510ade04a768e26d3d9612b74ab.mp3
revel09_3: https://static.wixstatic.com/mp3/5ab759_89f671019853404881c7c7ecd44d807d.mp3
revel09_4: https://static.wixstatic.com/mp3/5ab759_12025fddcd2447f29717ce75f830bcdc.mp3
revel09_5: https://static.wixstatic.com/mp3/5ab759_051c46c99bc846aea6767432fcbcf4f2.mp3
revel09_6: https://static.wixstatic.com/mp3/5ab759_bc64509b6f9a4e619ac0293e7ae41043.mp3
revel09_7: https://static.wixstatic.com/mp3/5ab759_81d8a3d5f75b47978b4c81bbf1f12492.mp3
sean04_1: https://static.wixstatic.com/mp3/5ab759_9f878eb344eb45b7bbf9cb8a91234d6a.mp3
sean04_2: https://static.wixstatic.com/mp3/5ab759_9f73f6d8f9cf4b6da3252e3a7221a5f9.mp3
approach1: https://static.wixstatic.com/mp3/5ab759_f84eac64f783413394450500d3ded13f.mp3
approach2: https://static.wixstatic.com/mp3/5ab759_793b801f6d7a44bfa5dea57637eaf27e.mp3
approach3: https://static.wixstatic.com/mp3/5ab759_97526dad988d43bd8c5abe8d731745fa.mp3
approach4: https://static.wixstatic.com/mp3/5ab759_62cbc13665374ccaa21af0b7621f016c.mp3
approach5: https://static.wixstatic.com/mp3/5ab759_6de605d409604bf0aa80b5af7218c160.mp3
notapproach1: https://static.wixstatic.com/mp3/5ab759_ac36fe4123644209b1cb64edb0a98d55.mp3
notapproach2: https://static.wixstatic.com/mp3/5ab759_4f8443d482634f1c98212b88d7fa6df2.mp3
notapproach3: https://static.wixstatic.com/mp3/5ab759_951cbe801fa14fa899392096a36039d5.mp3
sean06_1: https://static.wixstatic.com/mp3/5ab759_a5e59ff752f64d878217bdbe8701df57.mp3
sean06_2: https://static.wixstatic.com/mp3/5ab759_a3419843699a45e7bbd021d19ee7dc05.mp3
sean07_1: https://static.wixstatic.com/mp3/5ab759_6f061aa7522144b0b4d5de43593d3a64.mp3
sean07_2: https://static.wixstatic.com/mp3/5ab759_85b337e3e3e6461888858d3842430ac0.mp3
sean07_3: https://static.wixstatic.com/mp3/5ab759_9d1b5d3b2f174ea6afd7dc07cb10caf0.mp3
sean08_1: https://static.wixstatic.com/mp3/5ab759_cc2798aacfab46a6857087537896fa9a.mp3
sean08_2: https://static.wixstatic.com/mp3/5ab759_028ed018482b450c8376820112df110a.mp3
</tw-passagedata><tw-passagedata pid="47" name="Loop: portraits" tags="" position="975,3600" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(set: $library to true)The first things you notice on the wall are several portrait paintings and photos; they must be the Doyle descendants.


You walk closer and inspect the portrait of . . .
{
(mouseover:&quot;mail&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
(mouseover:&quot;a homemade children&#39;s book&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
(mouseover:&quot;a note&quot;)[(track: &#39;select&#39;, &#39;play&#39;)]
}

(link-repeat: &quot;Sir Benjamin Leslie Doyle&quot;)[(replace:?c4)[(display: &quot;bldd&quot;)]]
(link-repeat: &quot;Winnifred Doyle Woods&quot;)[(replace:?c4)[(display: &quot;wwd&quot;)]]
(link-repeat: &quot;William Doyle Woods&quot;)[(replace:?c4)[(display: &quot;willyd&quot;)]]
(link-repeat: &quot;Elizabeth Winnifred Woods Kingsley&quot;)[(replace:?c4)[(display: &quot;ewwkd&quot;)]]
(link-repeat: &quot;Alwyn Snr Woods&quot;)[(replace:?c4)[(display: &quot;aswd&quot;)]]
(link-repeat: &quot;Imogen Woods Kingsley&quot;)[(replace:?c4)[(display: &quot;ikwd&quot;)]]
(link-repeat: &quot;Alwyn Jnr Woods&quot;)[(replace:?c4)[(display: &quot;ajwd&quot;)]]
(link-repeat: &quot;Laoise Woods&quot;)[(replace:?c4)[(display: &quot;lwd&quot;)]]
[]&lt;c4|


(link-goto: &quot;Return&quot;, &quot;library&quot;)</tw-passagedata><tw-passagedata pid="48" name="lw" tags="" position="975,3850" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;&quot; class=&quot;medium&quot;/&gt;
***Laoise Woods (1931-2020)

I had travelled far, 
Time to return to the star,
Take care of my car.
***
</tw-passagedata><tw-passagedata pid="49" name="ajw" tags="" position="775,3850" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/sAihgCG.png&quot; class=&quot;medium&quot;/&gt;
***Alwyn Jnr Woods (1910-1941)

RAF
WWII
Dulce et decorum est pro patria mori.
***</tw-passagedata><tw-passagedata pid="50" name="enterstudy" tags="" position="1475,2800" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
The second you step into the room and see whats in front of you, a sense of nausea  sweeps over you, almost knocking you to the ground.


Its a typical old fashioned study with a cozy small fireplace, a coffee table, some leather chairs, curios, and bookshelves. Whats so unusual about it is that many things are either knocked over or askew. Books lie flat on the ground, as well as pieces of a shattered mug. Though messy, the room itself is very clean, not a single layer of dust on any object.


Its as if someone broke into the room long ago and wrecked the place, yet its owner somehow decided to leave it that way as a piece of installation art.


But you know its not like that because you have done the same thing. After the accident, you dared not touch or move anything in the house as if keeping things the way your parents had left them could bring them back to life. 


It certainly couldnt. It was just you being unable to accept the fact that they were no longer around.


[[Next|enterstudy02]]</tw-passagedata><tw-passagedata pid="51" name="noenterstudy" tags="" position="1675,2800" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
You decide not to enter the study, just as you dont want anyone else to approach your parents room and mess up their things.



{(if: $library is false)[(link: &#39;Go downstairs&#39;)[(track: &#39;laoisetheme&#39;, &#39;fadeout&#39;, 2)(goto: &#39;phooka03&#39;)]]
(else:)[(link: &#39;Go to the yard&#39;)[(track: &#39;laoisetheme&#39;, &#39;fadeout&#39;, 2)(goto: &#39;yard1&#39;)]]}</tw-passagedata><tw-passagedata pid="52" name="yard2" tags="" position="1675,3725" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	(track: &#39;yard1&#39;, &#39;stop&#39;)
	}
&lt;==&gt;
Time slowly passes by, draining your stamina as well as your patience. Staring at too much green makes your eyes wearyyou thought you saw a fox when it was a log with some orange mushrooms; you thought you saw a clover when it turned out to be a frog. 

At this point, you even start to hallucinate as you seem to catch sight of a dog in a tree.

You rub your tired eyes harshly and open them again. A dog is sitting indeed on a branch, wagging its long tail.



(click-replace: &quot;&quot;)[(track: &#39;yard2&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Well, why not. A dog that climbs trees!]To your surprise, your hallucination blinks and smiles at you as if saying hello. The dogs face has an uncanny resemblance to that of a human, and something tells you that this time your eyes dont trick you.


[[Next|yard3]]]</tw-passagedata><tw-passagedata pid="53" name="yard3" tags="" position="1675,3850" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	(track: &#39;yard2&#39;, &#39;stop&#39;)
	}
&lt;==&gt;
The ugly dog on the tree branch licks its nose, fixing its eyes on you like a greedy wolf.

(track: &#39;yard3_1&#39;, &#39;play&#39;)My, my, the new keeper! //**Ten** years of long wait in the forest ghast, finally here comes a jolly lass!//


(track: &#39;yard3_2&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)What are you then?]After the initial shock, you calm down quickly as you figure it must be one of the faeries in the sanctuary. 


(track: &#39;yard3_3alas&#39;, &#39;play&#39;)//Alas, alas, how short will this one last?// 


The dog jumps to another branch, stealthy as a panther. It stretches out its disproportionately small wingsthe wings of a dragonflyand wags its long tail. Sniffing your face, it flinches and then yells. 


(track: &#39;yard3_3leather&#39;, &#39;play&#39;)//Human leather, one of a kind! Fellow faeries, watch your behind! Black mist unfolds, hearts turn stone-cold!//


Eyes wide open, you dont understand a word this creature is saying. But you dont like it; in fact, you hate it!


(track: &#39;yard3_4&#39;, &#39;play&#39;)Back off, you sneaky little bastard. A familiar voice roars. It was Dag the Brownie. He stands right between you and the dog. 


(link-reveal-goto: &quot;Appreciate his help.&quot;, &quot;grateful&quot;)[(set: $dagfriendship to it +3)]
(link-goto: &quot;Tease him for showing up late.&quot;, &quot;ungrateful&quot;)
(link-reveal-goto: &quot;Doubt his intention.&quot;, &quot;agitated&quot;)[(set: $dagfriendship to it -3)]</tw-passagedata><tw-passagedata pid="54" name="yard5" tags="donotshowinventory" position="1875,3625" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Hahaha, the phooka lets out a repulsive laugh, The human lass will contemplate my words and ready herself for a fight! Lass, your brownie cannot protect you forever; hes sick! So long for now! 


The phooka leaps down from the tree, splashing some dirt on your clothes, and runs swiftly away like a feline. In seconds, it is nowhere to be seen, leaving you and Dag standing in silence.


Great job! I see you have found nothing yet. The tension in Dags voice fades away. He returns to being the sassy idle brownie you have known for the last two days.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)No, nothing, thanks to the overgrown flora in the yard. What was that thing, the phooka? It was saying something about human leather? What a creep!(if: $dagfriendship &gt;= 3)[ What about you, are you okay, Dag? It said youre sick . . . ]] 


[[Next|yard6]]</tw-passagedata><tw-passagedata pid="55" name="yard6" tags="" position="1875,3300" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Youll know exactly what it is after you find the guide! Do you have any clues? Because Im not giving you any. Dag giggles maliciously, dissolving into the air again.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Ha ha, very funny.]You comb your hair with your fingers, looking into the distance where the phooka disappeared. Some tiny footprints were left on the trail, and


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Wait . . .]You mumble in disbelief, crawling closer to one of the footprints. A glimpse of green appears to be in the footprint. It is a plant with heart-shaped leaves. 
 
 
***One, two, three . . . four!***


Its a four-leaf clover! Although it seems to have been trotted on repeatedly, it is indeed a four-leaf clover.


Hurray!


[[Next|nextday]]</tw-passagedata><tw-passagedata pid="56" name="maddox01" tags="" position="1875,3025" size="100,100">{
(display: &quot;setmidday&quot;)(track: &#39;yard&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
]
}
&lt;==&gt;
It was pure luck that you found the four-leaf clover on the first day of your quest. 


Ever since you found it, you see more weird stuff in the yard: humanoid bugs, flowers with smiley faces flying in the sky, giant fleas with grass tufts on their backs leaping about at ease. 


Thickheaded as you are, you know these are all faeries and that the clover helps you to see their true forms. However, you dont see Dag very often, but your guess is that he prefers to stay stealthy and hidden within the walls, like cockroaches. 


These two days, no matter how many times you rummaged through the bookshelves in the houseyou couldnt spot any book titled The Keepers Guide. You begin to think that this is all but a trick, and that Dag is just a genetically mutated child trying to troll you and watch you suffer to his tiny hearts content. 


[[Next|maddox02]]</tw-passagedata><tw-passagedata pid="57" name="maddox02" tags="" position="1875,2900" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Today, you confront him with this speculation. To your surprise, hes quite offended.


What are you saying? I know youre ignorant, but it is common sense that fairies cannot lie. Only humans can. He sneers, still nowhere to be seen. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Yeah, sure. I bet its written in the 12th grade bio textbook.]You flip through another stack of books.


Ha! A straight lie, you see!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Its called verbal irony. Nice try though!] You snort, yet secretly feel safer knowing that hes around. 


In fact, youve been avoiding going into the attic and the cellar on purpose. The least thing you want is to go somewhere dark and bump into another creepy looney faerie, despite the fact that Dag may just come to your rescue if anything happens. (if: $dagfriendship &gt;= 3)[Though being his keeper, you feel that he is your keeper as well.]


[[Next|maddox03]]</tw-passagedata><tw-passagedata pid="58" name="maddox03" tags="" position="1875,2775" size="100,100">{
(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Still, you sigh, you gotta do what you gotta do.


You find the attic ladder, pull it down and climb up. As you enter the attic,  you find that it&#39;s not as dark as you thought. 


(display: &quot;setattic&quot;)Beams of sunlight leaking from the quilt windows slash the darkness like a fine blade cutting throats. Reflecting the sun beams, spider webs in the corners gleam like little stars. 


Under white linen cloths, objects sit neatly against walls, occupying every corner of the attic: worn-out furniture, antique decorations, but mostly luggages and chests with tarnished name tags attached on them. You read the tags and know that these once belonged to the past keepers.


[[Next|maddox04]]</tw-passagedata><tw-passagedata pid="59" name="maddox04" tags="" position="1875,2650" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You quickly flip through these luggages and chests, and the closest thing to a guide is journals and diaries. You sigh and turn, ready to go downstairs. While climbing down, you catch sight of someone in white standing in a corner. Startled, you give a little jump, which almost throws you off the ladder.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)Holy moly!]You quickly steady yourself. Turning on the flashlight on your phone, you wield it to that particular corner.


Its only a sewing mannequin, with an unfinished flutter sleeve lace gown pinned on it. When the light shines upon the mannequin, its hollow torso lets out an ivory glow like a paper lantern, very subtle and almost unnoticeable. This is when you spot something unusual. Instead of glowing, the chest area remains dark, not as translucent as the other parts of the torso. 


//There&#39;s something hidden inside it!//


[[Next|maddox05]]</tw-passagedata><tw-passagedata pid="60" name="maddox05" tags="" position="1875,2525" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You come closer to the mannequin and peel the white gown off of it. With the help of the flashlight, you make out a flat rectangular shape from the thing inside the chest, which can easily be the size of a book. //Thank goodness!// You thought you had to go down to the cellar or tear up the walls to find that bloody guide!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)Ah-ha, Dag! I found it! I found the guide!]You cry, your cheeks burning from excitement.


Hmm, is that so? Dag&#39;s voice comes from the roof, But the question is: Can you GET it?


Ever since you met this sarcastic brownie, you know hes nothing but a Debbie downer who has fun spoiling your mood. However, this time hes right in every way. You soon calm down and start to inspect the mannequin. 


[[Next|maddox06]]</tw-passagedata><tw-passagedata pid="61" name="maddox06" tags="" position="1875,2400" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
It consists of a head, two arms, a torso, and a wooden stand. Weirdly enough, theres no fabric cover at all; rather, its surface feels smooth and metallic to the touch, probably made of gold judging from the color. You can hardly find seams or obvious joints on the torso so you have no idea where to open the chest or how Dag managed to put the book in. 


You scrabble around the mannequin in search for a button or any hidden mechanism to unlock the ribcage. As both of your hands move onto its cheeks, you frown. Its the kind of mannequin that has an actual face with a static expression. Its eyes are two bright red rubies the size of a ping-pong ball. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)I wonder how much this mannequin is worth.]Unlike the torso, two visible seams sit around the mouth area like smile lines. Your instinct tells you this must be the key to open the ribcage; you just need to figure out how.


Wait a sec . . . (link-reveal: &quot;the eyes!&quot;)[

&lt;img src=&quot;https://i.imgur.com/Ck2Fy9m.jpg&quot; class=&quot;centerBOOK&quot;&gt;
Thats it! If those two rubies are not suspicious, you dont know what else is! They must be buttons.


{
(link: &#39;Press the buttons.&#39;)[
    (track: &#39;unlock&#39;, &#39;play&#39;)
    (goto: &#39;maddox07&#39;)
]
}]</tw-passagedata><tw-passagedata pid="62" name="maddox07" tags="" position="1725,2400" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
To your surprise, it takes almost all your strength to press them down. As the ruby eyeballs sink into the sockets, you hear a clear clank. The mannequin opens its mouth!

&lt;img src=&quot;https://i.imgur.com/8v2jtMw.jpg&quot; class=&quot;centerBOOK&quot;&gt;
An object rolls out from the mannequins mouth but doesnt fall off as the tongue seems to hold it firmly. What a strange design! You take a good look at this delicate device. Its a golden cylinder wrapped around with nine tiny wheels of brass stacked and affixed to one another. You try rotating one of the wheels and see that its inscribed with the entire alphabet. All of them are, in fact. You have a bad feeling that your search isnt over yet. Now you need to get the password in order to open the ribcage! 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;atired1&quot;)Dag, why are you doing this to me? Can we talk it out please? Im really not interested in being Nancy Drew!]No ingredient brews better than patience! 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Not funny at all!] Sometimes you just want to strangle this brownie.


[[Next|maddox08]]</tw-passagedata><tw-passagedata pid="63" name="maddox08" tags="" position="1575,2400" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
It gives you a headache just to think about rummaging through the house again for the right combination of letters. If its a number lock, you could just try all the combinations out. However, you dont know what to do with an alphabet lock of nine letters. Youre not even sure if the password is a meaningful word or a combination of random letters.


After pondering over it for a while, you know what youre going to do next. Its the only choice you have now if you dont want to spend eternity breaking the code. You leave the attic and return to the ground floor.


What are you doing? Given up already? Dag follows you to the storage room. You put all the tools here the first day you got here. 


You ignore him. Youre looking for a hammer, or anything that seems solid enough to break the mannequin. Its quite savage yet efficient!


Oh I get it. Youre not thinking about wrecking the dummy, eh? 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)What? Are you going to stop me?] 

[[Next|maddox09]]</tw-passagedata><tw-passagedata pid="64" name="maddox09" tags="" position="1425,2400" size="100,100">{
(display: &quot;setattic&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
He lets out those malicious giggles of his. Hehehe, no, Im not. You could try, but Im telling you its impossible, at least not in your mortal ways.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)Im not quitting. You cant make me!]You look through the clutter, only to find a shovel and a basic tool kit that contains 4 screwdrivers, a wench and a pair of pliers. Nothing really helpful. 


Theres gotta be a hammer or a chainsaw in the house! You decide to check out the cellar.


(display: &quot;setbunker&quot;)The cellar door is outside of the house, right next to the backdoor that leads from the kitchen. You lift up the double door and go down the stone brick stairway, holding your phone to light up the dark. 


It takes you 10 tiers to reach the end. 


Theres a wooden door with a sign on it saying DO NOT ENTER.


(link-reveal-goto: &#39;Push it regardless.&#39;, &#39;maddox10&#39;)[(alert: &quot;Your phone battery just died!&quot;)(set: $phonedead to $phonedead +1)]</tw-passagedata><tw-passagedata pid="65" name="maddox10" tags="" position="1275,2400" size="100,100">{
(display: &quot;setbunker&quot;)
(unless: (track: &#39;attic&#39;, &#39;isplaying&#39;))[
(track: &#39;attic&#39;, &#39;volume&#39;, 0.1)
(track: &#39;attic&#39;, &#39;fadein&#39;, 3)
(track: &#39;attic&#39;, &#39;loop&#39;, true)]
(track: &#39;opendoor&#39;, &#39;play&#39;)
(track: &#39;attic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You hunt for the light switch along the wall near the door. Different from the attic, the cellar is bleach dark; there is no window for any natural light sources  to come in.


Tock! You switched on the lights. Following a series of sizzles, a flicker of brightness bursts out but dies down in the blink of an eye. Its all dark again.
(click: &quot;switched on&quot;)[(track:&#39;lightsonoff&#39;, &#39;play&#39;)(display: &quot;setbunkerlightup&quot;)(live:2s)[(t8n:&quot;dissolve&quot;)[(display:&quot;setbunker&quot;)(stop:)]]] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Whats going on? Did the bulb just go out?]You turn on the switch again to check if it was just a temporary blackout or a blown fuse. However, the lights turn on but soon go off as they did seconds ago. You frown, starting to think it was a prank from a certain brownie.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)Dag, is that you? Dont mess with the lights. Its dangerous!] You shout to the engulfing darkness, but Dag doesnt answer back.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Dag? I swear to God, once I find the guide, Im going to]Someone in the dark interrupts you. Pardon, lass. Suppose you dont ever live with a roommate? Has anyone ever told you it is quite rude to turn on the lights or speak loudly when somebody is still asleep?


[[Next|maddox11]]</tw-passagedata><tw-passagedata pid="66" name="maddox11" tags="" position="1125,2400" size="100,100">{(display: &quot;setbunker&quot;)(track: &#39;attic&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)](track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)}
&lt;==&gt;
(live:2s)[(t8n:&quot;dissolve&quot;)[(display:&quot;setbunkerlightup&quot;)(track:&#39;lightson&#39;, &#39;play&#39;)(stop:)]]You jump, switching on the lights once more.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)+(text-style: &quot;shudder&quot;)[(display: &quot;ashocked1&quot;)Who the hell is there?!]This time, the lights stay on, and you see clearly what the cellar looks like. The space down here isnt big. An easel stands right upon the doorway, as if to block anyone who attempts to get in. Canvases of various sizes are leaning randomly upon the walls. In the center of the space is a tea table, on top of which are scattered paint tubes and brushes, along with other art supplies. 


Against the farthest  wall from you is a single wood-framed bed. Sitting on it, a young man with red hair in a sage green hoodie frowns at you. His right eye is the shade of forest green, yet his left eye an eerie gleaming silver that doesnt look natural to you. The scar across his left eye might explain the peculiarity. 


At first you think he is human, but later you realize that he is one of the fae, given his pointy ears. Somehow he looks a bit familiar to you, like someone you saw recently, but you cannot put your finger on whom.


[[Next|maddox12]]</tw-passagedata><tw-passagedata pid="67" name="maddox12" tags="" position="1125,2275" size="100,100">{(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)](track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mirritated&quot;)Manners, lass. Shouldnt you introduce yourself first, considering that youre trespassing my personal space?]He sneers and stands up, walking in your direction. His movement is a little wobbly, probably because of drowsiness. He stops before the easel and bends down so that his chin and forearms can rest upon its top. He looks straight into your eyes, head tilted, waiting for you to speak.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashy1&quot;)Uh, um . . .]You want to argue back but cant help but think hes right. Embarrassed, you dart away from his gaze and take a step back. Hes way too close. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)My name is Alexia. Im the new . . . keeper? At least thats what Dag said. And you? No one tells me I have a . . . ]You cannot think of a proper word to describe him; you dont even know what species of faeries he is.


[[Next|maddox13]]</tw-passagedata><tw-passagedata pid="68" name="maddox13" tags="" position="1125,2150" size="100,100">{(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)](track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)A changeling I am. They call me Maddox. Dags told me about you. Welcome to the Doyle Estate.]He smiles, but somehow it sends chills down your spine. 


***Maddox?*** The name sounds awful familiar as well, but your poor memory fails you again.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Sorry. I didnt know someone lived down here. I was just looking for a hammer to break that . . . Never mind. Imma just leave. Nice to meet you, bye.]You dont feel like explaining that much. You turn to the door.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)The pleasures all mine, lass. You can visit me anytime, for its not like Im going anywhere.]

(link-reveal-goto: &quot;Ask why.&quot;, &quot;question&quot;)[(set: $maddoxromance to it +1)]
(link-reveal-goto: &quot;Swallow your question.&quot;, &quot;swallow&quot;)[(set: $maddoxromance to it +1)]
(link-reveal-goto: &quot;Lash out at him.&quot;, &quot;distance&quot;)[(set: $maddoxromance to it -1)(set: $aggression to it +1)]</tw-passagedata><tw-passagedata pid="69" name="question02" tags="donotshowinventory" position="1125,1900" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Staring at Maddox, you suddenly remember who he reminds you of. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)Alwyn Jr., cousin Laoises father! He was the stolen child, wasnt it? You look exactly like him!]You marvel at his face and the faerie magic. Indeed, without pointy ears, the scar, and the prosthetic eye, Maddox could easily pretend to be Alwyn Jr. with his hair dyed red. 


You cant help but think of one thing. You dont really mean it. Its just a random possibility that hovers in your head and somehow escapes your lips.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)If you had enlisted instead of him, he wouldnt have died in the war.]You dont realize how cruel this thought is until you actually utter it out. Immediately, gloom looms over Maddoxs face.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mbereft&quot;)Well, about that, lass, I think you are right. Thats the answer to your first question. I failed Alwyn and his loved ones, so I atoned for that, being confined in this bunker.]

(link-reveal-goto: &quot;Apologize.&quot;, &quot;guiltymad&quot;)[(set: $empathy to it +1)(set: $maddoxromance to it +1)]
(link-reveal-goto: &quot;Change the subject.&quot;, &quot;awkwardmad&quot;)[(set: $indifference to it +1)(set: $maddoxromance to it -1)]
(link-reveal-goto: &quot;Defend yourself.&quot;, &quot;ragemad&quot;)[(set: $aggression to it +1)(set: $maddoxromance to it -2)]</tw-passagedata><tw-passagedata pid="70" name="swallow" tags="" position="1000,2025" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Why not? You swallow the question, unsure if its a good idea to poke your face into others business, even when the person is technically your . . . fae ward/tenant? 


You nod to Maddox as a sign to leave without being impolite. Yet somehow you cant take your eyes off his eerie silver eye. Raising an eyebrow, he senses your underlying curiosity. 


He points at his scar and silver eye. This crystal eye was the result from a case of fae kidnapping.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashy1&quot;)What do you mean . . .]You cover up your mouth the moment you blurt out the question.


He smirks, arms crossed. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)Excuse me. I thought you were leaving, lass?]
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Yeah right, bye.]You regret having let your curiosity get the better of you.


[[Next|swallow02]]</tw-passagedata><tw-passagedata pid="71" name="question" tags="" position="1125,2025" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Why not? Why do you live in the cellar? What is a changeling by the way? And what happened to your eye?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)Hmm, a curious keeper you are! Where do I start? Your last question.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Long story short, lets just say that my biological mother wanted a human child, so she ditched me here to substitute for the Doyle boy she stole away. To make it not suspicious, she made sure that I looked exactly like himand this is what a changeling does, a faerie child left behind to replace the more desirable human child. Well, the story didnt end well,  Elizabeth, the keeper at that time, found out anyway. And this]

He points at his scar and silver eye. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)This crystal eye was the cost.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ashocked1&quot;)What do you mean? Did that Elizabeth take out your eye in retaliation?] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)Not exactly. Hurting the changeling lures out the faerie mother and grants the human family a chance to win the stolen child back. A heated poker or iron rod placed onto the skin would have sufficed surely, but it was Elizabeth the Crackenstein after all. She had her . . . fierce ways in dealing with things.] 

As ambiguous as it is, the story still sounds horrible. You recall loosely from the family tree that Elizabeth was the seventh keeper and cousin Laoises great grandmother. You wonder who the stolen Doyle boy was. He must have been returned to the family given what happened to Maddox.


[[Next|question02]]</tw-passagedata><tw-passagedata pid="72" name="distance" tags="" position="1250,2025" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You feel awash in mixed feelings when you look into his green eye. A stubborn loneliness constantly battles against the longing for company.


Part of you can relate to him. You want to be around friends after your parents passed away, scared to be lonely. Yet when youre actually with them, guilt rips you apart from the inside.


Part of you wants to take it out at him for reminding you too much of yourself and of your anguish. (if: $laoisestudy is true)[Youre growing tired of sharing others woe as if you asked for it.] 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)This is just absurd! Everything here is absurd! I came here to deal with my own mortal crises, but look what craps I got myself into? The land I inherit from some unknown cousin is a bloody FAIRY SANCTUARY! I was bullied around by an imp the first day I got here, and the other day a faerie dog threatened my life! Heaven knows what it wanted with human leather, a pair of fancy gloves maybe?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;aangry1&quot;)And you sir? What misery have you got? Whatever it is, I dont want to hear it. Ive got enough on my plate already! And right now, youll have to excuse me if you have nothing else to say!]


(link-reveal-goto: &quot;Next&quot;, &quot;distance02&quot;)[(set: $distance to true)]</tw-passagedata><tw-passagedata pid="73" name="autosavefooter" tags="footer" position="1575,0" size="100,100">{
&lt;span class=&quot;autosavefooter&quot;&gt;
(unless: (passage:)&#39;s tags contains &quot;nosave&quot;)[
{ (if:(save-game:&quot;paiiautosave&quot;))[
    (font: &quot;Special Elite&quot;)[GAME SAVED]
  ](else: )[
    (font: &quot;Special Elite&quot;)[Sorry, I couldn&#39;t save your game. This is due to either private browsing or full browser storage.]
  ](save-game:&quot;paiiautosave&quot;)}]&lt;/span&gt;}</tw-passagedata><tw-passagedata pid="74" name="phooka01" tags="donotshowinventory" position="675,2750" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;nightfall&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
(track: &#39;nk12_banshee&#39;, &#39;stop&#39;)
}
&lt;==&gt;
When the sunlight creeps into the room through the curtain, you yawn and stretch your arms. Hair-fuzzed and mouth-dried, you are desperate for something refreshing. You go downstairs to the kitchen and pour yourself (link-repeat: &#39;a glass of water&#39;)[(track: &#39;glassofwater&#39;, &#39;play&#39;)]//Thank God, the tap still works!// You gulp it down and return upstairs to change your clothes.



(click-replace: &quot;&quot;)[(track: &#39;pk_01&#39;, &#39;play&#39;)Bronagh sent you her regards.


The moment you pull up the straps of your overalls, a hoarse voice rings sharply upon your right ear, invading your personal space. For a second, you almost stop breathing. Then you realize that it was Dag talking to you.



(button:)(link-goto: &quot;Hey! Some privacy please?&quot;, &quot;sassy&quot;)
(link-reveal-goto: &quot;Morning, Dag!&quot;, &quot;polite&quot;, (button:))[(set: $dagfriendship to it + 1)]
(link-reveal-goto: &quot;Get out!! You pervert!&quot;, &quot;agressive&quot;, (button:))[(set: $dagfriendship to it - 1)(set: $pervert to true)]]</tw-passagedata><tw-passagedata pid="75" name="agressive" tags="" position="800,2875" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)(track: &#39;pk_agg_1to4&#39;, &#39;play&#39;)Get out!! You little perv!]***PERV?*** You ungrateful brat! A filthy Macodrum descendant. I shant be surprised!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;aangry1&quot;)My last name is NOT Macodrum. Stop calling me that!]Lets wait and see if Bronagh mourns for you when you have your last breath! Well know if you deserve this position like a proper Doyle, he snorts.


To be honest, you dont understand a word he was saying, and nor do you really care. You decide not to ask him about the (if: $banshee is true)[ghost lady wandering in the yard last night.](else:)[demonic bird cry.]


(button:)[[Next|phooka02]]</tw-passagedata><tw-passagedata pid="76" name="polite" tags="" position="675,2875" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;apleased1&quot;)(track: &#39;pk_polite_1n2&#39;, &#39;play&#39;)Good morning, Dag! Slept well? Did you . . . um, hear something last night?]Bronagh, like I JUST said, he snorts.



(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(if: $banshee is true)[(track: &#39;pk_polite_bant_alex&#39;, &#39;play&#39;)Brr . . . what? Come again? You mean that ghost lady wandering in the yard?](else:)[(track: &#39;pk_polite_banf_alex&#39;, &#39;play&#39;)Brr . . . what? Come again? You mean that demonic cry? Never heard of a bird cry like that before.]]
]
(click-replace: &quot;&quot;)[(track: &#39;pk_polite_bant_alex&#39;, &#39;stop&#39;)(track: &#39;pk_polite_banf_alex&#39;, &#39;stop&#39;)(if: $banshee is false)[(track: &#39;pk_sassy_banf_dag&#39;, &#39;play&#39;)A bird? Nonsense! A lazy banshee she is! Always this late. Its been 1 month already! Or should I say shes early this time? Last time when a Woods died, she showed up 2 years after the funeral.](track: &#39;pk_sassy_polite_dag&#39;, &#39;play&#39;)Always this late. Its been 1 month already! Or should I say shes early this time? Last time when a Woods died, she showed up 2 years after the funeral!


](click-replace: &quot;&quot;)[(track: &#39;pk_sassy_polite_dag&#39;, &#39;stop&#39;)(track: &#39;pk_sassy_banf_dag&#39;, &#39;stop&#39;)(track: &#39;bronaghsong&#39;, &#39;play&#39;)(track: &#39;pk_sassy_banf_dag&#39;, &#39;stop&#39;)//Bronagh the banshee, as dumb as a sheep, never forewarns death, but cries after rest!//


Rather than answering you, hes mumbling to himself.


To be honest, you dont understand a word he was saying. (If: $banshee is true)[Is that white lady some kind of fairy? All you know is that Bronagh seems to suck at her job and that Dag isnt very pleased about it.](else:)[Is a banshee some kind of fairy bird that harbingers death?]


(if: $banshee is true)[(link-reveal-goto: &quot;Next&quot;, &quot;phooka02&quot;, (button:))[(set: $gal to $gal + (a: &quot; Bronagh&quot;))(alert:&quot;You unlock a new character card! Please check your gallery!&quot;)]](else:)[(button:)[[Next|phooka02]]]]</tw-passagedata><tw-passagedata pid="77" name="sassy" tags="" position="550,2875" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)(track: &#39;pk_sassy_1n2&#39;, &#39;play&#39;)Hey! Some privacy please?]Yes, of course. The whole house is my personal space and Im sharing it with you, am I not? How generous I am! Dont be ungrateful. 


Ok, he just ruins your mood. In light of the brief encounter yesterday, you decide not to argue back.



(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(track: &#39;pk_sassy_1n2&#39;, &#39;stop&#39;)(display: &quot;ablank1&quot;)(if: $banshee is true)[(track: &#39;pk_sassy_bant_alex&#39;, &#39;play&#39;)Brr . . . what? Come again? You mean that creepy lady in white who cried blood by my window?](else:)[(track: &#39;pk_sassy_banf_alex&#39;, &#39;play&#39;)Brr . . . what? Come again? By the way, have any idea what was that demonic cry anyway? I think it was some bird from the yard.]]
]
(click-replace: &quot;&quot;)[(track: &#39;pk_sassy_bant_alex&#39;, &#39;stop&#39;)(track: &#39;pk_sassy_banf_alex&#39;, &#39;stop&#39;)(if: $banshee is false)[(track: &#39;pk_sassy_banf_dag&#39;, &#39;play&#39;)A bird? Nonsense! A lazy banshee she is! Always this late. Its been 1 month already! Or should I say shes early this time? Last time when a Woods died, she showed up 2 years after the funeral.](track: &#39;pk_sassy_polite_dag&#39;, &#39;play&#39;)Always this late. Its been 1 month already! Or should I say shes early this time? Last time when a Woods died, she showed up 2 years after the funeral!


](click-replace: &quot;&quot;)[(track: &#39;pk_sassy_polite_dag&#39;, &#39;stop&#39;)(track: &#39;pk_sassy_banf_dag&#39;, &#39;stop&#39;)(track: &#39;bronaghsong&#39;, &#39;play&#39;)(track: &#39;pk_sassy_banf_dag&#39;, &#39;stop&#39;)//Bronagh the banshee, as dumb as a sheep, never forewarns death, but cries after rest!//


Rather than answering you, hes mumbling to himself.


To be honest, you dont understand a word he was saying. (If: $banshee is true)[Is that white lady some kind of fairy? All you know is that Bronagh seems to suck at her job and that Dag isnt very pleased about it.](else:)[Is a banshee some kind of fairy bird that harbingers death?]


(if: $banshee is true)[(link-reveal-goto: &quot;Next&quot;, &quot;phooka02&quot;, (button:))[(set: $gal to $gal + (a: &quot; Bronagh&quot;))(alert:&quot;You unlock a new character card! Please check your gallery!&quot;)]](else:)[(button:)[[Next|phooka02]]]]</tw-passagedata><tw-passagedata pid="78" name="ninnyhammer" tags="donotshowinventory" position="1100,2925" size="100,100">{
(display:&quot;setwhite&quot;)(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;shelf2_2&#39;, &#39;stop&#39;)
}
&lt;div class=&quot;hammerheadcovertext&quot;&gt;Ninnyhammer and the Featherhead that Follows&lt;/div&gt;
&lt;div class=&quot;hammerheadsmallertext&quot;&gt;by Alwyn Ninnyhammer &amp; Maddox Featherhead&lt;/div&gt;
(set: $hammerhead to true)
(live:1.5s)[(t8n:&quot;dissolve&quot;)[(display:&quot;cover&quot;)(stop:)]]</tw-passagedata><tw-passagedata pid="79" name="dontlook" tags="donotshowinventory" position="1100,2800" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;librarystroll&#39;, &#39;isplaying&#39;))[
    (track: &#39;librarystroll&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;librarystroll&#39;, &#39;fadein&#39;, 3)
	(track: &#39;librarystroll&#39;, &#39;loop&#39;, true)]
	(track: &#39;librarystroll&#39;, &#39;mute&#39;, false)
	(track: &#39;shelf2_2&#39;, &#39;stop&#39;)
}
&lt;==&gt;
Well, interesting choices for pseudonyms! you mumble and return the book to the shelf.


(display: &quot;library&quot;)</tw-passagedata><tw-passagedata pid="80" name="dress01" tags="" position="2600,575" size="100,100">{(display: &quot;setdusk&quot;)(alert:&quot;You got a new mail! Please check your phone!&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Today is the day. The revel begins at moonrise, some time past dusk. 
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)

Just as Maddox had predicted, the invitation from the elven Crown appeared on your front porch the next day. It was a **walnut**. 


At first you didnt realize that was something of significance. In fact, you were about to clear the walnut out of your way by kicking it aside.


Fortunately, Maddox stopped you just in time. He picked it up and cracked it open. Inside the shells was a delicate miniature nightingale of gold, a royal token from the Court of Nightingales. Those elves didnt even bother to write you a note.  


[[Next|dress02]]</tw-passagedata><tw-passagedata pid="81" name="p1" tags="donotshowinventory nosave" position="1075,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;cover&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p1&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;Once upon a time, two twin brothers were born. 
One trained very hard. The other read a lot.&lt;div&gt;
{|p1&gt;[&lt;img src=https://i.imgur.com/hN0ysO8.jpg class=centerBOOK&gt;](click: ?p1)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p2&#39;)]}</tw-passagedata><tw-passagedata pid="82" name="cover" tags="donotshowinventory nosave" position="975,2525" size="100,100">{(track: &#39;librarystroll&#39;, &#39;fadeout&#39;, 5)(track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)(live: 0.5s)[(stop:)(track: &#39;cover&#39;, &#39;play&#39;)]}{|cover&gt;[&lt;img src=&quot;https://i.imgur.com/KZuARON.jpg&quot; class=&quot;centerBOOK&quot;&gt;](click: ?cover)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p1&#39;)]}
	=&gt;&lt;=
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)Click the image to flip.</tw-passagedata><tw-passagedata pid="83" name="p2" tags="donotshowinventory nosave" position="1175,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p1&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p2&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;One day, a dragon appeared and took Princess Imogen away.&lt;div&gt;
{|p2&gt;[&lt;img src=https://i.imgur.com/hWgJWAl.jpg class=centerBOOK&gt;](click: ?p2)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p3&#39;)]}</tw-passagedata><tw-passagedata pid="84" name="p3" tags="donotshowinventory nosave" position="1275,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p2&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p3&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;The twins went on a journey to rescue the princess, who was confined in the dragons castle.&lt;div&gt;
{|p3&gt;[&lt;img src=&quot;https://i.imgur.com/P9H2cRR.jpg&quot; class=&quot;centerBOOK&quot;&gt;](click: ?p3)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p4&#39;)]}</tw-passagedata><tw-passagedata pid="85" name="p4" tags="donotshowinventory nosave" position="1375,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p3&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p4&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;The battle was epic.&lt;div&gt;
{|p4&gt;[&lt;img src=https://i.imgur.com/XlFiEx2.jpg class=centerBOOK&gt;](click: ?p4)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p5&#39;)]}</tw-passagedata><tw-passagedata pid="86" name="finish" tags="donotshowinventory nosave" position="1675,2525" size="100,100">(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p6&#39;, &#39;stop&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(if: $laoistudy is true)[(if: $laoisetalk is true)[(if: $tapestry or $portraits is true)[(track: &#39;bookfini_study_talk_tapepor&#39;, &#39;play&#39;)Maddox? Was that Cousin Laoises Uncle Maddox? And this Alwyn, was it Laoise father or Alwyn Snr? Also I wonder who tore the last page.](else:)[(track: &#39;bookfini_study_talk_notapepor&#39;, &#39;play&#39;)Maddox? Was that Cousin Laoises Uncle Maddox? And this Alwyn, was it Laoise father? Also I wonder who tore the last page.]](else:)[(if: $tapestry or $portraits is true)[(track: &#39;bookfini_study_notalk_tapepor&#39;, &#39;play&#39;)Maddox? Was that Cousin Laoises Uncle Maddox? Which Alwyn was this, Snr or Jnr? Also I wonder who tore the last page.](else:)[(track: &#39;bookfini_nostudy_notapepor&#39;, &#39;play&#39;)Maddox? Was that Cousin Laoises Uncle Maddox? And who was this Alwyn anyway? Also I wonder who tore the last page.]]](else:)[(if: $tapestry or $portraits is true)[(track: &#39;bookfini_nostudy_tapepor&#39;, &#39;play&#39;)Which Alwyn was this, Snr or Jnr? And who was this Maddox anyway?](else:)[(track: &#39;bookfini_nostudy_notapepor&#39;, &#39;play&#39;)Were they the Doyle or Woods children? I wonder who tore the last page though.]]]


(live:15s)[(stop:){You keep the book.(alert:&quot;You obtained a new item!&quot;)(set: $inv to $inv + (a: &quot; a homemade childrens book&quot;))
(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)(display: &quot;library&quot;)}]</tw-passagedata><tw-passagedata pid="87" name="caesarcipher" tags="" position="325,1100" size="100,100">---
The note explains what Caesar cipher is. Basically it means that you cyclically shift the whole alphabet A-Z by ***n*** letters backwards.


If the key ***n*** is 1. Then A-Z moves 1 letter backwards and becomes B-A.


&lt;img src=https://i.imgur.com/dBWUZIX.jpg class=centerBOOK&gt;
(if: $nohammerhead is true)[
You found this note in a childrens book which from a stack of books with weird titles. 
(link: &quot;What are the names though?&quot;)[
Ah right! They are . . . 

&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;//(font: &quot;Special Elite, cursive&quot;)[Cyanite and Kyanite: Chemical-Mineral Mixtures in Practice
Making your First Pot of Rice! A Guide to Oriental Cuisine
Youngsters of the Heart
Effects of Symbolism and Structuralism
Xystus, Amphitheater, Coliseum: A Brief History of Military Training
Ninnyhammer and the Featherhead that Follows
Beowulf
Occident Without Incidents
Varney the Vampire]//&lt;/div&gt;]
]</tw-passagedata><tw-passagedata pid="88" name="phooka" tags="nosave" position="475,1350" size="100,100">---
(track: &#39;select&#39;, &#39;play&#39;)
You dont know what kind of faerie a phooka is and how many of them there are in the sanctuary, but you hate the one you bumped into that day.

Somehow you cant get his weird songs out of your head:

(align:&quot;&lt;==&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[//
**Ten** years of long wait in the forest ghast, 
	finally here comes a jolly lass!
Alas, alas, how short will this one last?//

//
Human leather, one of a kind! 
	Fellow faeries, watch your behind! 
		Black mist unfolds, 
			hearts turn stone-cold!//			
//
Dag-gart the brownie, 
a heart so stony; 
dashing from the outside, 
rotten from the inside!//					
]
</tw-passagedata><tw-passagedata pid="89" name="punctuation" tags="" position="2075,775" size="100,100">



---
Your Text Here</tw-passagedata><tw-passagedata pid="90" name="p6" tags="donotshowinventory nosave" position="1575,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p5&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p6&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;They rode on the dragons back.
Together, the three flew to the unknown but splendid adventures ahead of them.
The princess was left behind. She was very mad.
The end.&lt;div&gt;
&lt;img src=&quot;https://static.wixstatic.com/media/5ab759_ee60267082bf45dc97dc418e1022382f~mv2.png&quot; class=&quot;centerBOOK&quot;&gt;
[[Close the book.|finish]]</tw-passagedata><tw-passagedata pid="91" name="fallenbrownie1" tags="" position="1075,1025" size="100,100">{
(display: &quot;setnight&quot;)(track: &#39;maddoxtheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;nightfall&#39;, &#39;isplaying&#39;))[
    (track: &#39;nightfall&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;nightfall&#39;, &#39;fadein&#39;, 3)
	(track: &#39;nightfall&#39;, &#39;loop&#39;, true)
	(track: &#39;nightfall&#39;, &#39;mute&#39;, false)
]
}
&lt;==&gt;
You spend the rest of the day digging for clues in the house but have yet to come up with anything. 


//Perhaps Im too dumb for this.// 


You havent heard Dag after going down to the bunker. You wanted to tell him about your encounter with Maddox the changeling. Youre roaming in the house, knocking at the walls. The moon tonight is extremely round, like a humongous  silver disk. Somehow this unsettles you.


Suddenly, a huge thud comes from the third floor, as if something is knocked down. You rush to the third floor and see Dag lying lifeless on the floor.


[[Next|fallenbrownie2]]</tw-passagedata><tw-passagedata pid="92" name="fallenbrownie2" tags="" position="1075,900" size="100,100">{
(display:&quot;setnight&quot;)(track: &#39;nightfall&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked1&quot;)Dag! Oh my god, what happened to you!?]You come to his side and get down on your knees. 


Dags brown skin turns into a pale grey. You stroke his tiny body, and it feels so cold and stiff, like a stone statue. The subtle rise and fall of his chest proves that hes still alive though it seems very unlikely. You completely space out, not knowing what to do.


Alexia, someone calls you. You turn your head and see its Maddox.


(if: $dagfriendship &gt;=1)[(link-goto: &quot;Next&quot;, &quot;dagfhigh&quot;)](if: $dagfriendship &lt;=0 and $dagfriendship &gt;=-2)[(link-goto: &quot;Next&quot;, &quot;dagfsoso&quot;)](if: $dagfriendship &lt;=-3)[(link-goto: &quot;Next&quot;, &quot;dagflow&quot;)]</tw-passagedata><tw-passagedata pid="93" name="normal" tags="" position="1000,525" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mangry&quot;)I dont know. But it was very powerful. Something older than you and I. Something greater than all the faeries in this sanctuary. We need help. Three days later, there will be a revel under the Mount of Nightingales, and you will attend it. The invitation from the Crown should arrive these days.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Who do I see?]You gently carry Dag up and hold him in your arms.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mserious&quot;)The wood elves, the queen and kings. No worries. I shall go with you. What you will do beforehand is to find the guide. It contains faerie secrets that only the keeper can get access to. It should help you.]


Uttering nothing, you nod.


[[Next|endch1]]</tw-passagedata><tw-passagedata pid="94" name="bail" tags="" position="1150,525" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)I dont know. But it was very powerful. Something older than you and I. Something greater than all the faeries in this sanctuary. We need help. Three days later, there will be a revel under the Mount of Nightingales, and you will attend it. The invitation from the Crown should arrive these days.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)Wait a minute. What do you mean //We need help//? What does any of this have to do with //me//?]You point a finger angrily at Maddox.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf1&quot;)There is potentially a murderer on the loose, and you want me, a normal college dropout, to help catch them?]Maddox tilts his head slightly. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I will not ask you to capture the force inflicting the curse on Dag. Rather, I am humbly asking you, as a ward in your sanctuary, to fulfill your duty as a keeper. At least investigate the source of the curse. If its contagious, take measure to prevent that.]

You stare at him with your right hand still awkwardly in the air. Maddox looks sincere, genuinely asking for your help.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashy1&quot;)But . . . what if its dangerous? Im just a mortal . . .]Maddox snuggles beside you and looks at you. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Lass, my keeper, I will protect you at all costs. However, please know that its not my intention to drag you in the mud. There are certain strengths processed by you humans that are unique.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;) . . . Who do I see in the revel?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mserious&quot;)The wood elves, the queen and kings. No worries. I shall go with you. What you will do beforehand is to find the guide. It contains faerie secrets that only the keeper can get access to. It should help you.]

Uttering nothing, you nod.


(link-reveal-goto: &quot;Next&quot;, &quot;endch1&quot;)[(set: $maddoxromance to it -2)]</tw-passagedata><tw-passagedata pid="95" name="endch1" tags="" position="1075,375" size="100,100">{
(display:&quot;setwhite&quot;)(track: &#39;panic&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;chapterend&#39;, &#39;isplaying&#39;))[
    (track: &#39;chapterend&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;chapterend&#39;, &#39;fadein&#39;, 3)
	(track: &#39;chapterend&#39;, &#39;loop&#39;, true)]
}
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;END OF CHAPTER I&lt;/span&gt;&lt;/span&gt;
(track: &#39;chapterend&#39;, &#39;mute&#39;, false)
&lt;==&gt;
You need to find the Keepers Guide in order to unlock the next chapter.


Check out the clues and character information you got in the inventory, gallery and phone, which will help you crack the code on the mannequin.


&lt;img src=&quot;https://i.imgur.com/Ck2Fy9m.jpg&quot; class=&quot;centerBOOK&quot;&gt;

[[Im ready|password]]</tw-passagedata><tw-passagedata pid="96" name="mailb" tags="nosave donotshowinventory" position="175,1350" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[Dear keepers and breeders,

Starting from mid-April, griffins and hippogriffs will migrate from the southern hemisphere to the northern hemisphere in search of breeding grounds and territories.

Both griffin and hippogriff eggshells can be refined into accipitridite, a substance often used in medicine or in drugs. In this time of the year, poachers are commonly seen around the potential nesting sites. When spotting a flock, please locate their nesting sites and observe these fantastic beasts without disturbing them.

If an adult griffin is poached, save the eggs or hatchlings as possible as you can and send them to the nearest mixtidae breeding center. If an adult hippogriff is poached, youre not required to acquire the eggs, but please report to the RSPF so that we may estimate their number.

SOP: Record griffin/hippogriff calls  analyse the recorded echolocation signals to locate their nesting sites  observe the nests and report to the RSPF on a regular basis.

For any sanctuary or breeding center that does not own the needed equipment to analyze echolocation signals, please contact (if: $foucoming4u is true)[[[the RSPF|rspf]]](else-if: $foucoming4u is true and $nestingsite is true)[the RSPF](else:)[the RSPF] for the device.

For more information on these creatures, please refer to the attached article.

Best,
Anglea and Luisa
Ministry of Administration, RSPF]
(click:&quot;attached article&quot;)[(display: &quot;griffin&quot;)]</tw-passagedata><tw-passagedata pid="97" name="mailc" tags="nosave donotshowinventory" position="175,1475" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[A Celebration of Alexandria Eisners 193th Birthday!

20th of May is Lady Alexandria Eisners 193th birthday! As always, the Society will host a 11-day festival at our headquarters in Brighton in celebration of this special day. The festival activities include a series of exhibitions and workshops. For more details, please see the table below. We look forward to seeing you here!

In addition, we will be introducing to fae-novices the life of this legendary scholar, who helped lay the foundation of Modern Faeology and promoted the protection of faeries. Please refer to the attached article.

Happy Eisner Festival!

Best,
Anglea and Luisa
Ministry of Administration, RSPF]
(click:&quot;attached article&quot;)[(display: &quot;eisnerintro&quot;)]</tw-passagedata><tw-passagedata pid="98" name="guiltymad" tags="" position="900,1475" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Im sorry. I didnt mean to . . . ]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)I wanted to take his place, but he didnt want it. //Dulce et decorum est pro patria moriIt is sweet and fitting to die for the homeland.// He wanted to be like his father.]He moves away from the easel and lies down on the bed. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mserious&quot;)I made a deal with Elizabeth and Imogen. I could never leave the cellar, forever living in the dark. This is my sufferance for not taking Alwyns place]You dont know what to say or how to feel. Though he was Alwyn Jr.s changeling, Maddox was his own person and had every right to decide for himself, which included not risking his life for his friend. However, the woe in his eyes tells you that hes the kind of person that would sacrifice himself for beloved ones. Or are you thinking too much? The world of faeries is way more complicated than you thought. 


You try to come up with something to break the ice.


(if: $laoisestudy is true)[(link-reveal-goto: &quot;Mention Cousin Laoise.&quot;, &quot;menlao&quot;)[(set: $menlao to true)(set: $maddoxromance to it +1)(set: $empathy to it +1)]](else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Mention Cousin Laoise.]]
(if: $hammerhead is true)[(link-reveal-goto: &quot;Mention the childrens book.&quot;, &quot;menbook&quot;)[(set: $maddoxromance to it +1)]](else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Mention the childrens book.]]
(link-goto: &quot;Mention the guide.&quot;, &quot;menguide&quot;)</tw-passagedata><tw-passagedata pid="99" name="awkwardmad" tags="" position="1100,1475" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You know you ought to apologize, but youre that kind of person who feels awful awkward and just wants to escape when having done or said something wrong. 


Youre simply a stranger who has no clue about the situation. Youre no different than those family friends who questioned why you werent there with your parents the night they died. The damage is done, and nothing you say will comfort this faerie wallowing in guilt.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)I made a deal with Elizabeth and Imogen. I could never leave the cellar, forever living in the dark. This is my sufferance for not taking Alwyns place.]He moves away from the easel and lies down on the bed.


You feel like this is not the whole picture, but youre desperate to change the subject to avoid this awkward situation.


You fiddle with your phone, trying to come up with something to say.


(if: $laoisestudy is true)[(link-reveal-goto: &quot;Mention Cousin Laoise.&quot;, &quot;menlao&quot;)[(set: $maddoxromance to it +1)(set: $empathy to it +1)]](else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Mention Cousin Laoise.]]
(if: $hammerhead is true)[(link-reveal-goto: &quot;Mention the childrens book.&quot;, &quot;menbook&quot;)[(set: $maddoxromance to it +1)]](else:)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Mention the childrens book.]]
(link-goto: &quot;Mention the guide.&quot;, &quot;menguide&quot;)</tw-passagedata><tw-passagedata pid="100" name="ragemad" tags="" position="1300,1475" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You know you ought to apologize , but somehow your weird pride stops you from backing up. Youre upset at yourself for hurting his feelings and also at him for being so easily hurt.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)What now? Isnt that the reason why youre prisoned down here? You said you failed (if: $curiosity is true)[Alwyn Jr. ](else:)[a friend], which means you couldve replaced him easily but you didnt! Am I not right on this?]You press the issue in the hope of covering up your feelings of guilt, but it only seems to make them all the more prominent. Youre acting like a total dickhead. Your cheeks being hot from turning red, you feel so stupid. 


He sneers, moving away from the easel. He lies down on the bed.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mangry&quot;)Humph, Lady Holmes you! Im speechless. I made a deal with Elizabeth and Imogen. I could never leave the cellar, forever living in the dark. This is my sufferance for not taking Alwyns place.]


[[Next|ragemad2]]</tw-passagedata><tw-passagedata pid="101" name="swallow02" tags="" position="1000,1900" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
(track: &#39;doorslam&#39;, &#39;play&#39;)
}
&lt;==&gt;
The basement door slams in front of you when your toes touch the threshold. You jump aback, rubbing your poor nose that almost got hit. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)You faeries need to stop using magic to door-slap defenceless humans!]He chuckles. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)Humph, leaving so soon? That was a pretty decent start for a nice conversation.]
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Fine. Not leaving now. Let me guess . . . you kidnapped some human and got prisoned here? And somehow they gouged out your left eye for it?]
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)What a logic! Yet it strays too far away from the truth.]You try hard not to roll your eyes. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;atired1&quot;)Spit it all out at once then, PLEASE.]
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Long story short, lets just say that my biological mother wanted a human child, so she ditched me here to substitute for the Doyle boy she stole away. To make it not suspicious, she made sure that I looked exactly like himand this is what a changeling does, a faerie child left behind to replace the more desirable human child. Well, the story didnt end well.  Elizabeth, the keeper at that time, found out and . . .] 


[[Butt in.|swallow03]]</tw-passagedata><tw-passagedata pid="102" name="ragemad2" tags="" position="1300,1350" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You feel like this is not the whole picture and that you have somehow wronged him, but before you have the time to apologize, he signals you to leave.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mangry&quot;)Dont you have other more pressing tasks to accomplish than listening to my miseries?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;asad1&quot;) . . . ]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;) . . . Some hints on that mannequin. Each brownie has their own habits of organizing a human house. Dag likes to arrange books by the first letter of their titles. Not only that, the letters usually spell out a word or a message, like an acrostic. Hes also fond of cryptography.]

You recall picking up a note about some encryption method in the library. Perhaps you could check it out later.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Dag always leaves clues. Watch for unusual or suspicious things. Keep in mind that this is his message to YOU, the 10TH KEEPER. Now off you go.] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Sorry and thank you.]

(link-reveal-goto: &quot;Return upstairs.&quot;, &quot;fallenbrownie1&quot;)[(set: $phonedead to it +1)(set: $maxdag to true)(alert: &quot;You gain a piece of new information on Dag! Check out his character card in the gallery!&quot;)]</tw-passagedata><tw-passagedata pid="103" name="ungrateful" tags="" position="1900,3750" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
You roll your eyes at the tiny creature in front of you. 


(track: &#39;yard_ungrateful&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Here you are, its about time! I wonder when youll finally stop torturing me.]He ignores you and focuses on the dog. Phooka, I thought too highly of your kind. You dare enter the yard and be greeted by my wrath, eh?


Tut-Tut! What do we have here? The dog, no, the phooka turns its attention to the brownie. Sniff, sniff! //Daggart the brownie, a heart so stony; dashing from the outside, rotten from the inside!// I simply am checking out this human lass . . . It takes a deep breath, Sweet, sweet flesh indeed!


Be gone and stop with your nonsense, or stay and challenge my patience.


(link-reveal-goto: &quot;Next&quot;, &quot;yard5&quot;)[(set: $gal to $gal + (a: &quot; Phooka&quot;))(alert:&quot;You unlock a new character card **Phooka**!&quot;)]</tw-passagedata><tw-passagedata pid="104" name="agitated" tags="" position="2000,3750" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
A sudden rage bursts out of your chest. The sense of unfairness that you have been suppressing at last gets the better of you.


(track: &#39;yard_agitated&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Cut the crap, you freak. Just admit that you are both messing with me, alright?]You think youve had enough!


He ignores you and focuses on the dog. Phooka, I thought too highly of your kind. You dare enter the yard and be greeted by my wrath, eh?


Tut-Tut! What do we have here? The dog, no, the phooka turns its attention to the brownie. Sniff, sniff! //Daggart the brownie, a heart so stony; dashing from the outside, rotten from the inside!// I simply am checking out this human lass . . . It takes a deep breath, Sweet, sweet flesh indeed!


Be gone and stop with your nonsense, or stay and challenge my patience.


(link-reveal-goto: &quot;Next&quot;, &quot;yard5&quot;)[(set: $gal to $gal + (a: &quot; Phooka&quot;))(alert:&quot;You unlock a new character card **Phooka**!&quot;)]</tw-passagedata><tw-passagedata pid="105" name="grateful" tags="" position="1800,3750" size="100,100">{(display: &quot;setmidday&quot;)
(unless: (track: &#39;yard&#39;, &#39;isplaying&#39;))[
    (track: &#39;yard&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;yard&#39;, &#39;fadein&#39;, 3)
	(track: &#39;yard&#39;, &#39;loop&#39;, true)]
	(track: &#39;yard&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Hearing Dags wary voice, you let out a sigh of relief. Though no larger than a water bottle, he looks like a ten feet tall giant in your eyes now.


(track: &#39;yard_grateful&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Dag, thank you.]He ignores you and focuses on the dog. Phooka, I thought too highly of your kind. You dare enter the yard and be greeted by my wrath, eh?


Tut-Tut! What do we have here? The dog, no, the phooka turns its attention to the brownie. 


Sniff, sniff! //Daggart the brownie, a heart so stony; dashing from the outside, rotten from the inside!// I simply am checking out this human lass . . . Sweet, sweet flesh indeed!


Be gone and stop with your nonsense, or stay and challenge my patience.


(link-reveal-goto: &quot;Next&quot;, &quot;yard5&quot;)[(set: $gal to $gal + (a: &quot; Phooka&quot;))(alert:&quot;You unlock a new character card **Phooka**!&quot;)]</tw-passagedata><tw-passagedata pid="106" name="p5" tags="nosave donotshowinventory" position="1475,2525" size="100,100">(display: &quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p4&#39;, &#39;stop&#39;)(live: 1.5s)[(stop:)(track: &#39;p5&#39;, &#39;play&#39;)]
&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;It turned out that the dragon kidnapped the Princess only because it felt lonely.
The twins decided to make friends with it.
Its name was (text-style: &quot;strike&quot;)[Spikey] Dark Lord (obviously better, Alwyn approved).
It was a {(text-style: &quot;strike&quot;)[boy dragon]} (text-style: &quot;strike&quot;)[girl unicorn] boy dragon.&lt;div&gt;
{|p5&gt;[&lt;img src=&quot;https://i.imgur.com/A4WSxst.jpg&quot; class=&quot;centerBOOK&quot;&gt;](click: ?p5)[
    (track: &#39;fliponepage&#39;, &#39;play&#39;)
    (goto: &#39;p6&#39;)]}</tw-passagedata><tw-passagedata pid="107" name="maddox" tags="" position="475,1475" size="100,100">---
Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="108" name="kor" tags="nosave" position="475,1725" size="100,100">---
Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="109" name="setbunker" tags="" position="975,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;bunker&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="110" name="setdusk" tags="" position="1375,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;dusk&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="111" name="setmorning" tags="" position="1075,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;morning&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="112" name="setafternoon" tags="" position="1275,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;afternoon&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="113" name="setattic" tags="" position="875,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;black&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="114" name="setbunkerlightup" tags="" position="775,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;bunkerlightup&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="115" name="setmidday" tags="" position="1175,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;midday&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="116" name="setquickmorning" tags="" position="1475,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;quickmorning&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="117" name="nextday" tags="donotshowinventory nosave" position="1875,3150" size="100,100">(display:&quot;setquickmorning&quot;)**The next day . . .**

(live:1s)[(t8n:&quot;dissolve&quot;)[(display:&quot;maddox01&quot;)(stop:)]]</tw-passagedata><tw-passagedata pid="118" name="setinvgal" tags="" position="1575,100" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;dusk&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;white&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="119" name="hammerhead" tags="" position="325,1225" size="100,100">---
You found this book in the library. 

You also rememnbered that it was from a stack of books with weird titles. 
(link: &quot;What are the names though?&quot;)[
Ah right! They are . . . 

&lt;div class=&quot;hammerheadsmallertextthin&quot;&gt;//(font: &quot;Special Elite, cursive&quot;)[Cyanite and Kyanite: Chemical-Mineral Mixtures in Practice
Making your First Pot of Rice! A Guide to Oriental Cuisine
Youngsters of the Heart
Effects of Symbolism and Structuralism
Xystus, Amphitheater, Coliseum: A Brief History of Military Training
Ninnyhammer and the Featherhead that Follows
Beowulf
Occident Without Incidents
Varney the Vampire]//&lt;/div&gt;
] </tw-passagedata><tw-passagedata pid="120" name="specialthx" tags="" position="1675,0" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;SPECIAL THANKS&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;

**Professors Kate Liu &amp; Wenling Su **, project initiators. They offered us this great opportunity to design a game where we could tell our story. Without their support and encouragement, this project wouldnt be possible.


**Professor Lynn Zhou **, who introduced Twine to us. Luisa attended her course on game-based programming and learned a lot there.


**Iris Su, Riley Ku &amp; Rita Li  **, SLC assistants, who have accompanied us since Project Alexia I.


**Phoebe Hemsly &amp; Ceria Huang **, editors, who saved our English.


**Brendan Patrick Hennessy**, author of //Birdland//. We referred to his story stylesheet (the 2015 version) to see how CSS worked in Twine. We knew nothing about CSS when starting the project, so this helped a lot. Check out (link-repeat: &quot;his beautiful work&quot;)[(open-url: &#39;https://birdland.camp/&#39;)]!


**Gersande la Flche**. Without her inventory system, this Twine remake would be impossible. We modified her model based on new features in Harlowe 3.2. See her original post on how to make a beginner-friendly inventory system in Harlowe (link-repeat: &quot;here&quot;)[(open-url: &#39;https://gersande.com/blog/designing-inventories-in-twine-2-with-the-built-in-harlowe-macros/&#39;)].</tw-passagedata><tw-passagedata pid="121" name="musiccredits" tags="" position="1675,100" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;MUSIC CREDITS&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;

**Music by Darren Curtis**
Main Title: Into Oblivion


**Music by Purrrple Cat Music**
Alexias Theme: Green Tea
Maddoxs Theme: Forget-Me-Not
Seans Theme: Going with the Wind
Chapter End: Field of Fireflies
Revel: Lullaby
Nightfall: Cat Nap
RSPF: Frolic
Poetic Justice: Ofelias Dream


**Music by Nightmargin Music**
Maddox and His Love: Nikko and the World Machine
Attic: Simple Secrets
Banes Theme: Indoors
Laoises Theme: Alula
Yard: Wishing Well
Dags Theme: Panic
Inventory: Inventory
Library: Library Stroll
Quarry: Abandoned Factory
Foufous Theme: Nikkos Theme


**Music by Alexander Nakarada**
White Dullahan: Battle of the Creek


**Anonymous Copyright Free Music**
Bad End: Wisful Cello 


All music employed in the game is for non-commercial use.</tw-passagedata><tw-passagedata pid="122" name="references" tags="donotshowinventory nosave" position="1775,0" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;REFERENCES&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;


Black, Holly and Tony DiTerlizzi. //Arthur Spiderwicks Field Guide to the Fantastical World around You: Movie Tie-in Edition//. Simon &amp; Schuster Books for Young Readers, 2005.


Briggs, Katharine Mary. //An Encyclopedia of Fairies: Hobgoblins, Brownies, Bogies and Other Supernatural Creatures//. Pantheon Books, 1976.


Froud, Brian and Alan Lee. //Faeries//. Harry N. Abrams, Inc., 1978.


Thomson, David. //The People of the Sea: Celtic Tales of the Seal-Folk//. Canongate Canons, 2018.


These books are where we drew our faerie knowledge from.</tw-passagedata><tw-passagedata pid="123" name="iris" tags="nosave" position="50,1350" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(font: &quot;courier&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[**Alexia, Im so very sorry for what had happened, and Im worried about you.
Just want to let you know that Im always here. And I love you a lot. Please contact me when you see this. xoxo**]</tw-passagedata><tw-passagedata pid="124" name="phone" tags="nosave" position="125,975" size="100,100">{(display: &quot;setcard&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menuback&quot;&gt;(link: &#39; Back&#39;)[(track: &#39;inventory&#39;, &#39;stop&#39;)(goto: (history:)&#39;s last)]&lt;/span&gt;&lt;span class=&quot;menupage&quot;&gt;PHONE&lt;/span&gt;&lt;/span&gt;
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, true)(track: &#39;panic&#39;, &#39;mute&#39;, true)(track: &#39;heartbeats&#39;, &#39;mute&#39;, true)(track: &#39;nightfall&#39;, &#39;mute&#39;, true)(track: &#39;librarystroll&#39;, &#39;mute&#39;, true)(track: &#39;yard&#39;, &#39;mute&#39;, true)(track: &#39;laoisetheme&#39;, &#39;mute&#39;, true)(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, true)(track: &#39;attic&#39;, &#39;mute&#39;, true)(track: &#39;chapterend&#39;, &#39;mute&#39;, true)(track: &#39;revel&#39;, &#39;mute&#39;, true)(track: &#39;seantheme&#39;, &#39;mute&#39;, true)(track: &#39;foufoutheme&#39;, &#39;mute&#39;, true)(track: &#39;quarry&#39;, &#39;mute&#39;,true)(track: &#39;revel&#39;, &#39;mute&#39;,true)(track: &#39;banetheme&#39;, &#39;mute&#39;,true)(track: &#39;poeticjustice&#39;, &#39;mute&#39;, true)(track: &#39;badend&#39;, &#39;mute&#39;, true)
(track: &#39;inventory&#39;, &#39;volume&#39;, 0.1)(track: &#39;inventory&#39;, &#39;fadein&#39;, 3)(track: &#39;inventory&#39;, &#39;loop&#39;, true)(track: &#39;inventory&#39;, &#39;play&#39;)(track: &#39;click&#39;, &#39;play&#39;)
}

&lt;==&gt;
Welcome back, Alexia!

Messages|Mailbox
{(click: &quot;Messages&quot;)[(replace:?c4)[(display: &quot;messages&quot;)]]
(click: &quot;Mailbox&quot;)[(replace:?c4)[(display: &quot;mailbox&quot;)]]
}
[]&lt;c4|</tw-passagedata><tw-passagedata pid="125" name="messages" tags="noosave" position="50,1100" size="100,100">(track: &#39;click&#39;, &#39;play&#39;)
---
New messages from Rita
New messages from Riley
New messages from Iris

[]&lt;c2|
(click: &quot;New messages from Rita&quot;)[(replace:?c2)[(display: &quot;rita&quot;)]]
(click: &quot;New messages from Riley&quot;)[(replace:?c2)[(display: &quot;riley&quot;)]]
(click: &quot;New messages from Iris&quot;)[(replace:?c2)[(display: &quot;iris&quot;)]]</tw-passagedata><tw-passagedata pid="126" name="mailbox" tags="nosave donotshowinventory" position="175,1100" size="100,100">(track: &#39;click&#39;, &#39;play&#39;)
---
Congradulations on Joining the RSPF!
(if: $guide is true)[Griffin &amp; Hippogriff Migration!]
(if: $eisner is true)[HAPPY EISNER FESTIVAL!!!]
(if: $ereading is true)[ Highlight of the Reading Session with ER]

[]&lt;c1|
{(click: &quot; Highlight of the Reading Session with ER&quot;)[(replace:?c1)[(display: &quot;maild&quot;)]]
(click: &quot;HAPPY EISNER FESTIVAL!!!&quot;)[(replace:?c1)[(display: &quot;mailc&quot;)]]
(click: &quot;Griffin &amp; Hippogriff Migration!&quot;)[(replace:?c1)[(display: &quot;mailb&quot;)]]
(click: &quot;Congradulations on Joining the RSPF!&quot;)[(replace:?c1)[(display: &quot;maila&quot;)]]}

(if: $erensie is true)[(link: &quot;Compose&quot;)[(display: &quot;draft&quot;)]]</tw-passagedata><tw-passagedata pid="127" name="rita" tags="nosave" position="50,1225" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(font: &quot;courier&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[**Im worriedsick about you. Where have you been?? You cant blame anyone for what happened, not us and certainly not yourself! Dont do anything stupid ok?**]</tw-passagedata><tw-passagedata pid="128" name="riley" tags="nosave" position="50,1475" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(font: &quot;courier&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[**Alexia, how have you been? Havent heard from u for a while. We miss u so much. The board game club just didnt feel right without you. Please come back when you feel better!**]</tw-passagedata><tw-passagedata pid="129" name="rspf" tags="donotshowinventory nosave" position="325,1350" size="100,100">{
(display: &quot;setmessenger&quot;)(track: &#39;inventory&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;rspf&#39;, &#39;isplaying&#39;))[
    (track: &#39;rspf&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;rspf&#39;, &#39;fadein&#39;, 3)
	(track: &#39;rspf&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
(t8n:&quot;dissolve&quot;)+(t8n-delay:1s)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[...

(t8n:&quot;dissolve&quot;)+(t8n-delay:2s)[Luisa: 
Greetings! How may I help you?]

(t8n:&quot;dissolve&quot;)+(t8n-delay:3s)[You: (force-input-box: &quot;XXXXXXXXXXXXXXXX=&quot;, &quot;May I borrow the echolocation analyzer? I looked around the estate and didnt find any . . . &quot;)]
(t8n:&quot;dissolve&quot;)+(t8n-delay:23s)[...]

(t8n:&quot;dissolve&quot;)+(t8n-delay:24s)[Luisa: 
Ah! Youre Miss Twine! The new keeper! Let me check.]


(t8n:&quot;dissolve&quot;)+(t8n-delay:25s)[[[Wait.|wait]]]]</tw-passagedata><tw-passagedata pid="130" name="griffin" tags="nosave donotshowinventory" position="175,1725" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;How to Distinguish Griffins from Hippogriffs?&lt;/span&gt;&lt;/span&gt;

(font:&quot;Times New Roman&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[A griffin is the offspring of an eagle and a lion. Its plumage ranges from cream to deep brown, yet some specimens have feathers with a deep, dark bluish sheen. Griffins are very hostile to horses. For this reason, the offspring of a griffin and a horsethe hippogriffis considered to be a symbol of the enduring power of love.


A hippogriff has the body, hind legs, and tail of a horse, but the front legs, wings, and head of a giant eagle. Its feathers cover only the parts resembling an eagle. The coat of his body and hind legs takes after the horse parent. Because of its horse lineage, a hippogriff is milder by nature compared to a griffin. However,  the sharp talons on their front legs are no less deadly.


 A griffin may be born in three different ways, which depends on the species of the female parent. If the mother is an eagle, the griffin will be hatched from an eagle egg. If the mother is a lion, it will then be born from the womb. Likewise, a baby hippogriff will be hatched from an egg if the mother is a griffin and be born from the womb if the mother is a mare. Though being hybrid, griffins are able to produce fertile offsprings if breeding with their own kind. They are oviparous and usually incubate their eggs for about 15 days. Griffin hatchlings are capable of flying within a day, but it will take a month before they become strong enough to accompany their parents on longer flights. 
 
 
Griffins sometimes do interbreed with other species such as horses, but studies have shown that reproductive isolation is inevitable. For example, though still capable of mating behaviors, hippogriffs are sterile and can only lay infertile eggs. On the 14th of June, 2007, faeologist Dr. Scarlet Herring posted on her blog claiming that she had discovered a subspecies of hippogriffs that can reproduce via parthenogenesis. She took down the post 3 months later.


When breeding, griffins and hippogriffs prefer to build their nests on trees; they lay about 3 to 5 eggs. Usually, it is a male griffin/hippogriff that builds the nest; it then lets out mating calls that emit echolocation signals to inform a female of an available nest. Therefore, analyzing the calls can get a rough idea of the location of the nest.


The following picture shows the difference between a griffin and a hippogriff egg. A griffin egg has speckles that shine like red agate, whereas a hippogriff egg has matte green flecks.]
</tw-passagedata><tw-passagedata pid="131" name="eisnerintro" tags="nosave" position="175,1850" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;Alexandria Eisner (1784-1827?)&lt;/span&gt;&lt;/span&gt;
(font:&quot;Times New Roman&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[
Alexandria Isabelle, Lady Eisner (ne Huxley 20 May 1784-???), better known by her nickname Alexia, was an English folklore poet, novelist, playwright, environmental activist, and faeologist.

**Early Life**
---
Alexandria was the last of the four children of Thomas Huxley, an antique dealer, and his wife Isabelle. She was born and raised in Brighton in the United Kingdom. Educated at home, she spent most of her childhood in Brighton, in which she developed her interest in folklore and animal behaviour. Inspired by legends of the seal people, Alexandria started to compose fictions and poems on faeries and fantastic beasts. It was at the age of 13 when she found and tried the method to see the Invisible World, and she devoted her life to the subject ever since then.

**Career**
---
Sometime around 1803, Alexandria came with her father to London for an Antique Fair in the British Museum, where she met Hal Eisner, 2nd Baron Eisner (1774-1810), who was working there at the time. Due to their mutual interest in the Invisible World, the two soon developed a romantic relationship and were married in 1804. In the same year, the couple co-founded the Royal Society of Faeology, calling for those who shared the same enthusiasm and interest. In 1806, the couple gave birth to twin brother and sister, Timothee and Charlotte.

On behalf of the RSF, the Eisners set out for numerous survey expeditions in search of faeries said to have gone extinct or for cultural exchanges with different fae species. From the published journals written by Lady Eisner, their research covered a wide spectrum from natural history and evolution to the habitats and ethology of faeries. In addition to her scientific research papers and journals, Alexandria published several collections of her short novels, plays, and poetry, which brought her some fame in the field of Humanities and Literature. 

Unfortunately, in 1810, Lord Eisner lost his life during a negotiation with an ogre. Considering the nature of her husbands death, Lady Eisner faded out of the Invisible World for the safety of her children. In 1811, she had completely stopped attending any of the survey expeditions and instead advocated for the protection of faeries and their habitats. In that year, she officially renamed the organization the Royal Society for the Protection of Faeries and initiated Project Alexia.

**Later in Life**
---
After the death of Lord Eisner, Lady Eisner raised both her children on her own, solely depending on the income from her publications. It was recorded that she would only wear mourning dress ever since the tragic event. In the following ten years, seven sanctuaries were erected with the funds from Project Alexia.

Alexandria also published several verse collections of faery tales for her children. However, they were seen inappropriate at the time and received malicious criticism. The dark nature of the tales lead to many theorists hypothesising the purpose of the writings. Some even suspected that the dangerous creatures and twisted plotlines were non-fiction. 

**Disappearance**
---
On November 17, 1827, Alexandrias mysterious missing hit the national headline. Despite the collective effort of the Marine Police Force and Bow Street Runners, the poet and faeologist was never seen again. Since she was reported last seen near a dock, some said she might have eloped with a fisherman. Some said she might have been murdered by the serial killer Ida Murphy, while others said that she might have finally taken her own life. Critic Adam Pope, a fae non-believer and rival poet, made a sarcastic comment on her death that she might have [been] taken under one of those faerie mounts so frequently appearing in her work. However, fae-believers from the fields of literature, faeology, and environmental protection all deeply mourned for the loss of this legendary scholar, who had contributed enormously to various academic fields. 
]</tw-passagedata><tw-passagedata pid="132" name="dress02" tags="" position="2600,700" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
In the following days, you were busy collecting clues to crack the code, so it didnt occur to you that you had nothing formal in your wardrobe to wear to the revel until now. 
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)

You couldnt possibly wear a sweater and jeans to it. 


Though you havent yet mastered the faerie ways, you figure that a little respect and discretion are never too much for a royal audience. But what else do you have? You had thrown away all your dresses and skirts back then when packing for the move. 


[[Next|dress03]]</tw-passagedata><tw-passagedata pid="133" name="dress03" tags="" position="2600,825" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
While you are poking around in your pockets and drawers for your car key, ready to rush to the nearest shopping mall, Maddox shows up by your open door and gives a gentle knock. 
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)

Hes very different from Dag, who would just breach your personal space with his omniscient voice invading from every corner of the house. Maddox, on the other hand, never does that. 


(unless: $aggression &gt;= 1)[Hes polite and consideratewhich makes you even more guilty for having hurt his feelings once. ]As one of the fae, he surely is magical to some degree but rarely shows it to you. Despite his pointy ears, he looks very human and normal.


[[Next|dress04]]</tw-passagedata><tw-passagedata pid="134" name="dress04" tags="" position="2600,950" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Hes holding a white gown in his hands, though not the undone one you saw on the golden mannequin. 
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Lass, I thought you might not have a proper outfit. This gown belonged to Imogen. She wouldnt mind if it is you who borrows it.]You frown at the leg-of-mutton sleeves and the long lace tail trailing behind the gown. How are you supposed to walk in that, let alone weave between trees in the woods? 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)Fab! This is just what I need. Let me see if I can fit into it.]You force a smile as genuine as it possibly can be. Dag said faeries couldnt lie. You hope that Maddox also sucks at detecting lies somehow, though he has lived with a human household for over a century.


You fling the gown on and it fits you perfectly. To your surprise, the fabric is so soft and light that you can barely sense its existence, as if youre wearing air. You walk about your room and find no trouble moving around. You were a little worried to wear a gown as its quite chilly today. However, the fabric seems to warm up your body like fine merino wool despite being cool and slippery to the touch.


[[Next|dress05]]</tw-passagedata><tw-passagedata pid="135" name="piecenorm" tags="" position="2475,1250" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;aangry2&quot;)Whats that? Uh-uh, Im not wearing a tiara! Its too much.]
Well, you can accept wearing a gown, considering you have nothing else more suitable, but a bridal tiara is really //unnecessary//.

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;msmirk&quot;)It surely adds to the look, but this is not the sole function.]He flips the mimosas over to reveal several red beads underneath. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Rowan berries. These may keep you safe from faerie magic and glamours. Discreet and useful.]He then looks at you with those puppy eyes, expecting you to take up the offer. He has a prosthetic eye, so you dont know how he manages to pull off the cat-in-boots look.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;) . . . . . . Fine.]You take the headpiece reluctantly and place it onto your head, but it refuses to stay put and keeps falling off.
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Allow me.]He guides you to the mirror and adjusts the headpiece from behind. While fixing your hair, he warns you of the taboos for attending a faerie revel.

&lt;img src=&quot;https://i.imgur.com/K4TyEyY.png&quot; class=&quot;centerBOOK&quot;&gt;

[[Next|dress06]]</tw-passagedata><tw-passagedata pid="136" name="pieceno" tags="" position="2600,1250" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf2&quot;)Ugh, seriously? A bloody tiara? Do you realise how much it looks like Im getting married? And for Gods sake spare me with that cat-in-boots look! Im not wearing it no matter what!!!]
Maddox seems taken aback for a brief moment. He flips the mimosas over to reveal several red beads underneath.
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;). . . Rowan berries. These may keep you safe from faerie magic and glamours. Discreet and useful. Im not attempting to  . . . make a bride out of you, lass. I apologize if Ive ever offended you. That was not my intention.] 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashy2&quot;) . . . ]
//Great//. You seem to embarrass yourself again. You just want to dig a hole and bury yourself in it now.

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;) . . . Fair enough.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Allow me.] He approaches you and seems to want to help you put on the headpiece, yet you pull a long face. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated1&quot;)Thank you, but //no, thank you.//]
You snatch the tiara from his hand and reluctantly place it onto your head. While youre fixing your hair in front of the mirror, he warns you of the taboos for attending a faerie revel.


[[Next|dress06]]</tw-passagedata><tw-passagedata pid="137" name="piecesilence" tags="" position="2725,1250" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;) . . . ]//A tiara? Really?// Well, you can accept wearing a gown, considering you have nothing else more suitable, but a bridal headpiece is really **unnecessary**.
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

You think about complaining, but then you figure who knows better than Maddox about those fae rules and shenanigans?

Sensing your reluctance, Maddox quickly explains.

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)This head piece surely adds to the look, but this is not the sole function,]He flips the mimosas over to reveal several red beads underneath. 
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;msmirk&quot;)Rowan berries. These may keep you safe from faerie magic and glamours. Discreet and useful.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ahappy2&quot;)Okay. Thank you.]You accept his kind gesture. 


He guides you to the mirror and adjusts the headpiece from behind. While fixing your hair, he warns you of the taboos for attending a faerie revel.


[[Next|dress06]]</tw-passagedata><tw-passagedata pid="138" name="dress05" tags="" position="2600,1100" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;msmirk&quot;)Are you done, lass? I have something else for you.]
Maddox knocks again. You let him in, feeling a bit uneasy. Upon seeing you, his silver eye flickers. He seems to want to compliment you but decides not to after noticing your embarrassment. You appreciate his thoughtfulness.
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Whats that?]
In Maddoxs hand is a bridal headpiece adorned with mimosa flowers.


(link-goto: &quot;Disdain his offer.&quot;, &quot;piecenorm&quot;)
(link-reveal-goto: &quot;Refuse him point-blank.&quot;, &quot;pieceno&quot;)[(set: $maddoxromance to it -1)(set: $aggression to it +1)]
(link-reveal-goto: &quot;. . .(awkward silence)&quot;, &quot;piecesilence&quot;)[(set: $indifference to it +1)]</tw-passagedata><tw-passagedata pid="139" name="dress06" tags="" position="2600,1400" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)On revel nights, wild faeries nearby are allowed entry into the sanctuary. Some of them are not as friendly as us who live here. Never take any foods or drinks provided from anyone. One tiny bite from faerie fruits or a single sip of faerie wine can enslave you or detain you there under the hill forever. If someone asks you for a dance, reject or cleverly defer it with politeness. This headpiece works as extra protection. I know you already have the four-leaf clover; hide it somewhere the fae cannot see in case some mischievous ones manage to get it off from you.]
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

You nod. Youve already slipped the clover into the hidden pocket of the gown. He seems anxious about the revel and for you. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Its not like youre not going with me.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mserious&quot;)I am. Its just . . . ]He pauses, frowning as if thinking of something unpleasant. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)Chances are that I might not be by your side the whole time tonight.]You wonder what he is referring to. He seems extremely troubled by it.


[[Next|dress07]] </tw-passagedata><tw-passagedata pid="140" name="dress07" tags="" position="2600,1525" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
There are tons of methods of protection against faeries in the keepers guide. You successfully cracked the code last night and spent hours leafing through it, taking in as much information as you could. 
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

Speaking of the guide, you still cant believe the password to the chest is such a nasty word. 


Maddox said it was Dags message for you. He has the habit of assigning a specific epithet to each Doyle descendant. Elizabeth was //Cranckenstein//. Alwyn Jr. was //Ninnyhammer//. Maddox, technically speaking not a Doyle, is //Featherhead//. Even the infamous Bridget whom Dag favors the least got a less offensive nickname, //Dingbat//. 


But ***you***? What exactly did you do to deserve this? Youll definitely question Dag about his word choice after you cure him.


[[Next|dress08]] </tw-passagedata><tw-passagedata pid="141" name="dress08" tags="" position="2600,1650" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
It makes you sad to think about Dag. 
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

He currently lies in a bed of packing peanuts inside a sturdy wooden case in Maddoxs bunker, which has been enchanted to shun away other faeries. You did everything you could to keep Dag warm, but his body was getting colder and stiffer as time went by. 


During the first two days, he seemed to fight to regain his consciousness and woke up twice. However, all he was able to utter were shattered dreams and random memories. One time he mistook you for Winnifred and Maddox for Alwyn Jr; the other time he couldnt remember you two at all and was about to attack you for invading Sir Doyles estate. At the end, he couldnt even recall his own name. 


This morning you went to check on him, only to find that he had turned into a stone statue, an inanimate object that displayed no sign of life or activity. Maddox assures you once the glamour is reversed, Dag would turn back to his old self, but you are afraid that you might fail as his keeper, unable to save him.


[[Next|dress09]] </tw-passagedata><tw-passagedata pid="142" name="dress09" tags="" position="2600,1775" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Its time to go. 


You snap out of your wandering thoughts at the sound of Maddoxs voice.
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

What? Arent you changing?


Nah, I think not, he says, with that disturbed expression again. I have no attempt to win any more favor from the Crown.&quot;


Hes being weird about it. You can tell hes definitely hiding something from you. You guess you can only find out when you get there.


[[Next|revel01]] </tw-passagedata><tw-passagedata pid="143" name="revel01" tags="" position="2600,1900" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
According to the guide, the Mount of Nightingales is the only active elf hill in the sanctuary, located deep in the woods south of Keepers Keep. You have checked the map; its quite some distance in between. 
(track: &#39;revel&#39;, &#39;mute&#39;, false)


On the way there, myriad sparkling lights of various colors are floating in the air, seemingly marking the path for you. It takes you about 15 minutes to finally arrive at the hill. Maddox is lifting up the tail of your gown all the way through without complaint.


The hill seen from afar looks like any normal low hill ablaze with the glow from will-o-the-wisps. However, upon your arrival, the earth shakes. Pillars of trunks emerge from the ground, slowly raising up the hollow hill to reveal the open palace hall underneath. Its out of this world. A wistful air comes from a nearby creek, which sounds like the flute or something of the sort. You recall theres a nixie dwelling in the stream that flows through the sanctuary.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Come, lass.]Maddox urges you forwards. 


[[Next|revel02]] </tw-passagedata><tw-passagedata pid="144" name="revel02" tags="" position="2600,2025" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
The hall is filled with creatures you have never seen in your life, either beautiful or hideous. 
(track: &#39;revel&#39;, &#39;mute&#39;, false)

As you two enter the hall, they all stop to look at you, whispering. 


In the center of the hall is a dais, upon which stand three occupied thrones, the middle one larger than the other two. Lounging, the three elven monarchs are talking with one another. They dont seem to notice or mind your presence.


Greetings, your majesty. The keeper has arrived. Maddox bows to the elves. 


You do your best to curtsy but still lose your balance when rising back up, almost tripping on that stupid tail. 


Maddox flings his arm out to stop you falling. 


[[Next|revel03]] </tw-passagedata><tw-passagedata pid="145" name="revel03" tags="" position="2600,2150" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(display: &quot;goatking&quot;)The king on the left curls his lip, letting out a slight sneer at your mistake. He has bluish dark hair and ivory goat horns, with an aura of undeniable wickedness that spells hazard. 
(track: &#39;revel&#39;, &#39;mute&#39;, false)



(display: &quot;queen&quot;)The other two elves also turn to you. The queen herself is extremely pale and beautiful, and the nonchalance in her steely stare seems cold enough to freeze the air. 







(display: &quot;moth&quot;)The other king, dressed in autumn colors, frowns faintly at you. Different from the wicked king with goat horns, he possesses certain insect-like features, including feathered antennae and colorful moth wings that drape down his shoulders like a cape. He appears to be older than the other two, not in appearance but in manners.


The guide doesnt mention their names, which is quite reasonable as the fae are usually very discreet about personal information for fear that it might be used against them. 
 

[[Next|revel04]] </tw-passagedata><tw-passagedata pid="146" name="revel04" tags="" position="2600,2275" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Keeper, Maddox, the queen greets back. In contrast to her appearance, her soft voice sounds warm, like a summer breeze.
(track: &#39;revel&#39;, &#39;mute&#39;, false)

10 years it has been ever since the last keeper trod our hill. Long for you, short for us.


She then raises her hand and makes a dainty swing. A group of faeries whose species you couldnt identify come forward at her signal and stand right next to you. They smell like swamps and rotten woods.


Keeper, we call you forth to apprise you of a peculiar phenomenon. Or should we say a grave danger? 


She gestures at the swamp faeries.


[[Next|revel05]] </tw-passagedata><tw-passagedata pid="147" name="revel05" tags="" position="2600,2400" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
They live by a neighboring wetland. 7 days ago, an unusual veil of smoke or mist shrouded their home. After it was gone, some of them started to get ill. First their body turned cold and rigid. Then comas took their memories and eventually their senses. They became nothing but a dead stone.
(track: &#39;revel&#39;, &#39;mute&#39;, false)

Bane befalls and we fall!!! one swamp faerie shouts, and the others start to repeat after it. Bane befalls and we fall! Bane befalls and we fall! Bane . . . . . .


Silence! the moth king scolds. The swamp faeries recoil, startled, but dont shut up, continuing to mumble the phrase Bane befalls and we fall.


The wetland is not the only place that fell. the queen says. Keeper, were afraid that this Bane has gotten here as well. Most sprites in the west woods have been petrified. The other day we found a goblin statue. According to the nixie, the Bane is now hovering over the south lake.


[[Next|revel06]] </tw-passagedata><tw-passagedata pid="148" name="revel06" tags="" position="2600,2525" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	(track: &#39;revel&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)What is this thing? Is . . . is there any way to cure those faeries? Or . . . or any way to stop the mist?]You ask drily, your heart sinking into your stomach. So Dag isnt the only victim after all.


We dont know, nor do we care, says the king with goat horns. We have kindly informed you of this. Be greedy not, //human//.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf2&quot;)How could you say this? Theyre all faeries, your]Maddox stops you from saying anything more. Though you have read that elves or faeries in general are capricious, still you cant believe how heartless some of them can be. 


Am I their keeper? The king with goat horns snorts with barely disguised contempt. This rhetorical question shuts you up. Hes right. You are their keeper, not him or anyone in this bloody court.


We come and go as we please, says the moth king. If theres danger, we leave.


We need no defence; neither do we protect, agrees the queen. She turns to the guests. Fret not over peril, for tonight we revel. The rest of the fae rejoice at her words, resuming their dancing and singing as if nothing had happened.


[[Next|revel07]] </tw-passagedata><tw-passagedata pid="149" name="revel07" tags="" position="2600,2650" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)But . . . ]You try to approach the queen, yet she walks past you directly toward Maddox. She takes his hand to pull him into the dance circle. The two kings follow their queen into the circle as well.
(track: &#39;revel&#39;, &#39;mute&#39;, false)

//Whats going on?!// 


(link-reveal-goto: &quot;Watch him go.&quot;, &quot;watchhim&quot;)[(set: $indifference to it +1)]
(link-reveal-goto: &quot;Stop him.&quot;, &quot;stophim&quot;)[(set: $maddoxromance to it +2)(set: $aggression to it +1)]
(link-reveal-goto: &quot;Encourage him to have fun.&quot;, &quot;encouragehim&quot;)[(set: $maddoxromance to it -1)(set: $empathy to it +1)]</tw-passagedata><tw-passagedata pid="150" name="revel08" tags="" position="2600,2900" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Keeper! 

Master! 

Save us! 

We beseech you! 

Lets make a deal! 

Take these gold leaves! 

Take this vat of berries, the best of the year! 

Help your humble servants!
(track: &#39;revel&#39;, &#39;mute&#39;, false)

Their poignant screeches drum upon your ears, and their webbed claws pierce through the fabric of the gown and scratch your arms. 

Four-leaf clovers and rowan berries can protect you from faerie magic, but certainly not from physical damage! 


//Ouch!// 


As the keeper of a faerie sanctuary, theoretically you need to take in those who seek refuge under your protection. But man, theyre scaring you! Youll help, but not like this! 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked2&quot;)Please calm down! Lets arrange for a time to sit down and have a rational talk!]A sudden thundering roar echoes over your heads.


[[Hide!|revel09]] </tw-passagedata><tw-passagedata pid="151" name="revel09" tags="" position="2600,3025" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;revel&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)
]
(track: &#39;dragonroar&#39;, &#39;play&#39;)
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
[You manage to get their claws off you and sneak away while theyre distracted by the roar. 


You rush behind a pillar that is out of their sight. You rip the veil off the headpiece and use it to bandage your bleeding arms.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;revel09_1&#39;, &#39;play&#39;)Keeper! Hey! This way! Up here! 


Someone calls you. Startled, you think its those swamp faeries again. You look up. 


A giant hamster is clinging to the trunk pillar youre leaning against. Its wearing a burgundy sweater with a satchel across his shoulder.


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;revel09_2&#39;, &#39;play&#39;)Swamp trolls are all dummies. A dragon roar can scare them away.


]]
(click: &quot;&quot;)[(replace: ?c4)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)(track: &#39;revel09_3&#39;, &#39;play&#39;)That roar was you?]

]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;revel09_4&#39;, &#39;play&#39;)Who else would that be, witty-brain! 


He spirals down the pillar like a squirrel and lands before you. He spits on your arms.

]]
(click: &quot;&quot;)[(replace: ?c4)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked2&quot;)(track: &#39;revel09_5&#39;, &#39;play&#39;)Ew! Gross!]


You yelp, wiping its saliva off onto the pillar. However, you soon feel the pain is away. You take a look. The wounds are all closed up without a trace.


]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;revel09_6&#39;, &#39;play&#39;)Keeper, Foufou did you three favors! I scared the trolls and healed you. And I revealed my secret ability so that you could write it down in that book of yours! Im generous. Therefore, Foufou only asks for a small favor back!


]]
(click: &quot;&quot;)[(replace: ?c4)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)(track: &#39;revel09_7&#39;, &#39;play&#39;)What?!]//Why all of a sudden you are dragged into another deal with the fae?// 


(link-goto: &quot;Well, maybe later . . . &quot;, &quot;later&quot;)
(link-goto: &quot;Okay!&quot;, &quot;okay&quot;)
(link-reveal-goto: &quot;Hell no!&quot;, &quot;hellno&quot;)[(set: $refusefou to true)]]]</tw-passagedata><tw-passagedata pid="152" name="revel12" tags="" position="2600,3400" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Wait, what do you mean by that?]
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

It ignores your question.


You humans are easily forgetful! For your later reference, I shall do it again . . .


(if: $yesfou is true)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;)Wait!! Just . . . try not to make it too loud this time.]](else:)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Wait!! I ***didnt*** say Id help . . . ]Then you stop, noticing a flash of disappointment across its hamster face. ***Darn it!*** You blame it on the cutesy sweater.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;)Fine! Ill do it! Just . . . try not to make it too loud this time.]]


Sighing, you take out your phone and find the recorder.


Gaaaaaaawwwwwww


(link-reveal-goto: &quot;Record.&quot;, &quot;revel13&quot;)[(set: $inv to $inv + (a: &quot; the recording of hippogriff sounds&quot;))(alert:&quot;You obtain a new item! Please check your inventory!&quot;)]</tw-passagedata><tw-passagedata pid="153" name="revel13" tags="" position="2600,3525" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
After its done, you slip your phone back to the pocket. 
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)But I have more urgent things to do now. Youll have to . . .]Bouncing around, Foufou purrs loudly like a contented cat. Its apparently not listening to you.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf2&quot;)Hey! Do you hear me? Youll have to wait until later! Stop bouncing and listen!]You try to grab it, but a yell coming from the entrance interrupts you.


This is Prince Seaghn from the Court of Ashes. I demand an audience with the local Crown!


(link-reveal-goto: &quot;Next&quot;, &quot;sean01&quot;)[(set: $gal to $gal + (a: &quot; Foufou&quot;))(alert:&quot;You unlock a new character card! Please check your gallery!&quot;)]</tw-passagedata><tw-passagedata pid="154" name="sean01" tags="" position="2600,3650" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;foufoutheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Startled gasps, excited whispers, stomping feet, and flapping wings. The intruder captures everyones attention at once. 
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

You hear faeries talking about how they will teach the intruder a lesson for such a scene he made, how they will hang him from the ceiling like a jamn, and how they will have a taste of him from head to toe.


The hosts of the revel hush the guests as the intruder walks in. 


Curious, you squeeze to the center of the fuzz to take a look at the intruder. Surrounded by the crowd is a child in a black raincoat, their face covered in the hoodie. The top of the hoodie is bulged like the shape of a pair of cat ears, and you cant help but think of Batmans cowl.


[[Next|sean02]]</tw-passagedata><tw-passagedata pid="155" name="sean02" tags="" position="2600,3775" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
The intruder takes the hoodie off, revealing his face. He appears to be a boy no more than 12 years old (that is, if he were a human child) with a proud but somewhat juvenile expression. He ignores the glares, whispers, and even sarcastic greetings surrounding him. Judging from his lack of reaction to the aggression towards him, you highly suspect that he is rather used to it.
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

The boy has smooth brown skin that resembles the color of rich caramel. His doe eyes are of the same warm tone but a couple of shades deeper. His wavy hair falls to his shoulders, a silvery blonde that seems to glow on its own. White freckles dot his cheeks, which reminds you of the white speckles on the back of a fawn. The bumps on his head turn out to be two tiny horns rather than cat ears you suspected earlier.


Hes probably the most beautiful child you have ever seen in your life so far, an innocent beauty instead of a menacing spectacle as are the three elven monarchs.


[[Next|sean03]]</tw-passagedata><tw-passagedata pid="156" name="sean03" tags="" position="2600,3900" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Speaking of which, the Nightingales are lounging nonchalantly in the center of the dance circle and seem to be at ease with the foreign guest. 
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

Other faeries resume their activities, talking, laughing and revelling, completely diverting their attention away from the boy. 


You watch the boy trying to get to the center, but no one is parting ways for him. He has no choice but to give up. 


Kneeling on one knee, he declares with a voice firm and clear.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Your majesty, as the son of Prince Oisin, I demand trial against Kor the dwarf! He has stolen away a thing from me.]


None of the elves bothers to move a finger. Hell, they even look reluctant to set eyes on the boy.


[[Next|sean04]]</tw-passagedata><tw-passagedata pid="157" name="sean04" tags="" position="2600,4075" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
The moth king finally waves his arm and says: Who is that Prince . . . ***raisin***? Audible chuckles can be heard among the crowd. You begin to feel sorry for the boy.
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

If you are fatuous enough to be outsmarted by Kor, do me a favor, the king with goat horns  says with a despising smirk, go back to your mother, lad.


This hits home. The second the boy hears the statement, an anguished blush paints his face red. He gets up, wanting to protest, yet the queen simply waves him away, disregarding whatever he is about to say.


(if: $indifference &gt;= 3)[[[Next|notapproach]]](else:)[[[Approach the boy.|approach]]] </tw-passagedata><tw-passagedata pid="158" name="approach" tags="" position="2700,4000" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You decide to approach the boy. (if: $refusefou is true)[](else:)[Foufous voice trails behind you as you leave.


Forget not the hippogriff egg! Im waiting for you later!]


You manage to quietly move towards him without drawing too much attention, and this isnt hard for the elven monarchs are already back to their dancing. 
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

Well, so is Maddox, who seems happy that his queen has finally returned to his side so that they can dance the night away. You pull the boy aside before he can realize what is happening or protest against it.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sbirdface&quot;)Hey, hey, hey . . .]Taken aback by your bold move, the boy tries to shake your hand off. Who are you and what are you doing?


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Shhhh . . .]You find yourself treating him like a human child even though you understand that as a fae, he would look a lot younger than his actual age. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;)I am Alexia, and Id like to listen to your story. I am the keeper of this sanctuary, so Im sure theres something I can do for you.] 


You almost bite your tongue. 


//Silly me, did I just give another promise to a faerie?//


The boy stops struggling abruptly and grabs you by the arm.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)You . . . You are the keeper? So . . . are you a human child?]]


[[Next|sean06]]</tw-passagedata><tw-passagedata pid="159" name="sean06" tags="" position="2825,4075" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You are caught off guard. 
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ahappy2&quot;)I wouldnt say that Im a child given that Im legally an adult . . . arent you a child, though?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)Yeah, I guess, Ive just turned 52 years old. My name is Seaghn. Its nice to have humans around me again.]The boy scratches his head. 


He grins at you, showing his small canine teeth.


You smile back at him. His innocence and genuine attitude have already won your trust. At the end of the day, you still remember Maddoxs advice: dont trust any faeries. However, your gut tells you that Seaghn isnt faking any of his emotions since he entered the room. 


You lead Seaghn to a corner where no other faeries are around. You sit with the boy and hand him some snacks you fetch from the table. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;)Now, would you tell me your story?]


[[Next|story01]]</tw-passagedata><tw-passagedata pid="160" name="story01" tags="" position="2950,4075" size="100,100">{
(display: &quot;setcard&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Seaghn grew up in an elven court, the Court of Ashes, deep in a mountain across the continent, which no human civilization could ever reach. He had never seen another human except for one: his birth mother. 
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

His father, Prince Oisin, fell in love with a human woman around 1970s and thus had Seaghn. However, this favor didnt last long, as elves are fickle in nature. The woman stayed in Faerie to take care of her son, which was something that never happened in this court. Therefore, gossip surrounded them as Seaghn grew up. 


Sheltered and well-taught by his mother, Seaghn proudly embraced the fact that he is half-human, and he truly believed that his father was just too busy to be around him. Even when every gentry child of his age refused to play with him, or when all adult elves looked at him as if seeing an abomination, he grew up practically care-free.


[[Next|story02]]</tw-passagedata><tw-passagedata pid="161" name="story02" tags="" position="2950,3950" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
One month ago, an albatross, on behalf of the Court of Deep Sea, sent a message to the Ash King, pleading for an audience. 
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

The king assembled a few elves from the gentry and came to the designated shore to meet the merfolk. 


According to a trio of mermaid ambassadors, very recently a mysterious curse broke free from the seal and ventured ashore. They beseeched the Ash Kings help to curb the evil before it could wreak havoc on land. 


One of the gentry stood out and questioned, Why is it we who have to help? Are you not fully responsible for losing control over the curse?


[[Next|story03]]</tw-passagedata><tw-passagedata pid="162" name="story03" tags="" position="2950,3825" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
One of the merfolk answered in monotoneous and distant voice.
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

We did our best. Two Hundred of years ago, the spectre was seen raging along the shore and in the Shallow Sea, turning every faerie it touched into stone. It is said to be a faerie once who violated its own geis and thus was devoured by it, becoming a force of destruction. We tried to communicate with it yet to no avail. Many of our kind fell, so we had no choice but to confine it under the Deep Sea. However . . . She quivers a little, uncomfortable to breathe using nostrils. Its power is growing stronger and stronger year after year. Before we could sense the prevailing evilness, it was too late. The curse has escaped.


&lt;img src=https://i.imgur.com/0TaHmEh.jpg class=centerBOOK&gt;

Another mermaid says, As you can see, we merfolk are, by nature, ill-suited to fight on land. We have been rejected by many land courts, but we hope that you can kindly offer a helping hand to right the wrong.


The elves looked at one another, feigning nonchalance. Some fixed their gaze on the sea horizon while some on a rock, a shell, or the sand. Then someone broke the silence.


[[Next|story04]]</tw-passagedata><tw-passagedata pid="163" name="story04" tags="" position="2950,3700" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Ill go. It was Seaghn, who had secretly followed behind the king and the gentry.
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

For the first time, he became the focus among all elves. Seaghn slightly recoiled when he saw everyone staring at him, but he advanced anyway. As the son of Oisin, Prince of the Court of Ashes, I will go. I want to help.


You? A halfling? one of the gentry yelled. Enough of the grandiose titles. You will not bring shame upon our court!


I am almost in my teenage years, and I demand a quest! Seaghn insisted.


Very well. You may go, says the Ash King. Yet you shall not return before accomplishing your quest.


Seaghn couldnt suppress his happiness for getting the approval from the king himself: Thank you, grampy! I mean . . . your majesty.


The Kings eyes narrowed and said, You may take Heartsworn with you.


[[Next|story05]]</tw-passagedata><tw-passagedata pid="164" name="story05" tags="" position="2950,3575" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Hearing this order, all the elves widened their eyes and started to whisper in each others ear.
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

That useless sword forged by Queen Maebs blacksmith?


Useless? The sword can cut through anything, I heard.


No one has been able to unsheath it. A sword unreachable!


A piece of ancient scrap it is then!


The King cleared his throat to quieten down the crowd. Get the sword and leave at dawn. 


This was apparently a quest of no return, yet Seaghn didnt realize it.


[[Next|story06]]</tw-passagedata><tw-passagedata pid="165" name="story07" tags="" position="2950,3325" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Seaghn then packed for the first quest in his life. He mounted his peta wyvern named Pineapple, and left the mountain in which he grew up, tracing and seeking the curse. 
(track: &#39;banetheme&#39;, &#39;mute&#39;, false)

After a month of searching, the signs finally led him to FJCU Sanctuary.


As he flew over the sanctuary this afternoon, he accidentally ran into a flock of huge flying beastspossibly griffins or hippogriffshe couldnt tell in the chaos. 


His wyvern was knocked over, and they both fell into the forest down below. Seaghn was unconscious for a few hours. When he regained consciousness, his wyvern was nowhere to be seen, and a  dwarf was holding his sword Heartsworn.


Hey, give it back, thats mine! Seaghn cried out as he reached out for the sword. The dwarf jumped back nimbly, despite having short and thick legs.


Yours? But I didnt see you holding it. It was there on the ground when I found it. the dwarf said. Who takes it, owns it!&quot;


&quot;Bullshit! Seaghn snarled. He lunged at the dwarf, yet the latter gracefully dodged away.


Ah, how precious! The dwarf caressed the sword, his eyes gleaming with excitement. A fine sword for King Kort the Magnificent, who escaped death! When Seaghn attempted another attack, the dwarf swung the sheathed sword at Seaghns stomach and ran off immediately.


Ouch! What the heck . . .  Seaghn quickly got up and went after him.


[[Next|sean07]]</tw-passagedata><tw-passagedata pid="166" name="sean07" tags="" position="2950,3200" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;banetheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)Now you know why and how I got here.]The elven boy shrugs, swallowing the last bit of the faerie snacks on the plate.
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)So I guess you didnt get your sword back, huh?]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)Well, I lost the dwarf in the woods, and then I stumbled upon the revel. I wrongly assumed that the local Crown would serve justice. I should have known better.]The elf sighed.


//Tell me about it! Those selfish pricks//. You almost say it out loud, but then you remember that Seaghn is still half-elf, and he might not like your comments. The curse, or the Bane as those swamp trolls like to call it, has a more ancient origin than you have thought. Theres one thing you dont quite grasp.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashy2&quot;)May I askWhat is a geis? Im new to this. Couldnt quite remember all the details about faeries.] You ask, cheeks burning. However, Seaghn doesnt seem to mind. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)A geis? How do I put it? Its like a spell put on someone that restricts them from doing certain things, and woe betide those who ever breaches it.]You nod, wondering what geis exactly this Bane has that turned it into such a monster.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)Do you have any clue what kind of faerie it was?]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;striumph&quot;)Nah. The mermaids didnt say. It could well be a merperson or one of any other existing sea folks. Its hard to say.] 


[[Next|sean08]]</tw-passagedata><tw-passagedata pid="167" name="sean08" tags="" position="2950,3075" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
It seems that Heartsworn is your only chance to defeat the Bane and save Dag. Though its a sword that cant be unsheathed, what else better do you get? You need to help Seaghn get it back. 
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

You read about this dwarf Kor in the guide. Hes no king, at least not a monarch by birth as are the three elves. He was a nobody until his home was destroyed by human wars. A plan quickly forms in your mind.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;)I think I know how to take down the dwarf.] 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Really? Can I get my sword back?]Seaghns eyes brightens, and you know that he would be wagging his tail if he had one. You swear that this is the last time you are defeated by those puppy eyes of a faerie!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)I&#39;ll see what I can do, but I will need your help.]This time, you are more careful about promises. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;)Seaghn, youre half human. Is there anything you can do, or cannot do? I see that you have no trouble eating faerie food. But can you lie?]


[[Next|kor01]]</tw-passagedata><tw-passagedata pid="168" name="castandcrew" tags="" position="1775,100" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;CAST&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;

**Mandy Lee **, voice actress of //Alexia Twine//, //Swamp Troll 1//, //Mermaid 1//, //Mermaid 2//


**Tyler Wang **, voice actor of //Maddox the Pixie//, //the Moth-Winged King//, //Kor the Dwarf//, //Sir Benjamin Leslie Doyle//, //We//, //Swamp Troll 2//


**Steven Hsu **, voice actor of //Seaghn of House Ashes//, //Dag the Brownie//, //the Goat-Horned King//, //Swamp Troll 3//, //Merrow//


**Irene Yang **, voice actress of //Foufou the Hobgoblin//, //the Elf Queen//, //the Hazel Treewoman//, //the Bane//


**Luisa Cheng **, voice actress of //the Phooka//, //Grinchy the Mechanical Hornbill//, //Elf Gentry//


**Angela Ko **, voice actress of //the White Dullahan//


**Ceria Huang **, voice actress of //Mrs. Twine//, //Blanchette Dubois//, //The Ash Queen// 


**Simon Wang **, voice actor of //Prof. Edward Rensie//</tw-passagedata><tw-passagedata pid="169" name="kor01" tags="" position="2950,2825" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You and Seaghn are on your way to the quarry, where the dwarf lives. You took a photo of the sanctuarys map from the guide with your phone before the revel, so you have a rough idea of the location. You marvel again at how vast the land is that the Doyles have. 


Imogens dress at this point is torn and shabby due to the swamp trolls claws and all the walking. You feel sorry about it, wondering if you can find a tailor in the neighboring towns to fix it.
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

You had to ditch Maddox at the elf hill, who was too immersed in revelling to notice that you were gone. You hope that he will be home before you finish this. Youre a bit worried about Dag being alone in the house though its protected by magic.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)So is he your boyfriend?]

(if: $maddoxromance &gt;=1)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked2&quot;)Who!?]You choke on his diction. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashy2&quot;)I dont know what youre talking about.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)Is he not then? The redhead pixie. Thats odd. You were staring at him like a dragon at their treasure, or a leprechaun at their gold.]You cringe at his similes.
](else:)[You freeze for a second and roll your eyes.


 (align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)I seriously dont know whom youre talking about.]
 
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)Is he not then? The redhead pixie. Thats odd. You were staring at him intensely before we left.]]


[[Next|kor02]]</tw-passagedata><tw-passagedata pid="170" name="kor02" tags="" position="2950,2700" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked2&quot;)Maddox? No, hes not my //boyfriend//. Hes a housemate.]Or a //cousin// so to speak? Not blood related though. You shake your head. 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)I was just wondering why he was acting weird after we got to the hill. He was like, enchanted or something. He didnt seem to be interested in the revel back home but turned into a single-minded dancing machine on the spot.]
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)Hm . . . not that weird at all. Faeries in general are drawn to revelling by nature. Even I sometimes cant resist the urge to dance whenever I hear nice music.]He looks kind of embarrassed. Somehow you just want to stroke his head. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ssad&quot;)Its all the more so for trooping faeries like elves and pixies. You say he lives in a human house? Well that explains why. Hes probably away from his own kind for too long.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;asad2&quot;)Yeah, probably.] 


This is a bit sad. You hadnt thought about this. 


You know that what Elizabeth did to Maddox to punish his mother was cruel. However, she also took him in when his own mother had abandoned him. He could have returned to Faerie after he grew up or when he broke free from the promise he had made, but he didnt, which suggests that to some degree he has affection towards the Doyles as his family. 


However, does this mean that he longs not for Faerie? No, this only means that he has to pretend to be human. You have no idea how much else he has sacrificed in order to suppress his faerie nature. Its like forcing your cat or pet snake to live on veggies. You feel pity for him.


//Ok, I guess a night of partying isnt too much to ask.// 


[[Next|kor03]]</tw-passagedata><tw-passagedata pid="171" name="kor03" tags="" position="2950,2575" size="100,100">{
(display: &quot;setnight&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
You two finally arrive at the quarry. The quarry itself doesnt look that much different from any other quarries you have seen in pictures or on TV channels. Its barren around this area, only a few withered trees and clamps of coarse grassso far the ugliest place in the Doyle Estate in your opinion. 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

Theres a small lake in the center of the pit, and certain shadows stir the reflection of the moon in the water. 


You direct your phone toward the lake to see what those area small school of fish are swimming at ease. They may be koi fish, judging from their looks; however something feels very off about their movement and colors. It takes you a while to realize that these arent organic beings at all but mechanical replicas of real koi fish!


[[Next|kor04]]</tw-passagedata><tw-passagedata pid="172" name="kor04" tags="" position="2950,2425" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You hear flapping wings and rustling branches. You look up and see on one tree a mechanical owl staring at you, its head twisted 360 degrees. Its ruby eyes look familiar to you, glistening under the moonlight, as red as blood. Its prying on the uninvited guests, and thats you two.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

\image of owl/

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sbirdface&quot;)Spooky . . . ]Seaghn notices the owl as well. Youre surprised to hear a slight tremble in his voice. Before you can ask, he gives it away himself. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sbirdface&quot;)Oh how I hate BIRDS.]


(link-reveal-goto: &quot;Tease him.&quot;, &quot;makefun&quot;)[(set: $seanfriendship to it -2)(set: $aggression to it +1)]
(link-reveal-goto: &quot;Be curious about why.&quot;, &quot;becurious&quot;)[(set: $seanfriendship to it +1)(set: $empathy to it +1)]
(link-reveal-goto: &quot;Make no comment.&quot;, &quot;nocomment&quot;)[(set: $indifference to it +1)]</tw-passagedata><tw-passagedata pid="173" name="kor05" tags="" position="2950,2175" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
That you could never imagine.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sbirdface&quot;)Also I think it might be my fault that we fell from the sky. I was too . . . overwhelmed by those griffins or hippogriffs. They look a lot more like birds . . . ]


Youre near an immense arched door embedded in the granite wall, which should be the entrance into the dwarfs house. 


Upon your approach, a mechanical hornbill in a bird cage hung from the arch shouts. 


Guests arrive! Guests arrive! Who is itwho is it that comes to King Kor the Magnificent, the chosen one that escaped death? . . . 


By your side, Seaghn flinches. 


(link-reveal-goto: &quot;Squeeze his hand.&quot;, &quot;squeeze&quot;)[(set: $seanfriendship to it +2)(set: $empathy to it +2)]
(link-reveal-goto: &quot;Act protective.&quot;, &quot;protective&quot;)[(set: $seanfriendship to it +1)(set: $empathy to it +2)]
(if: $curiousbird is true)[(text-style: &quot;strike&quot;)+(colour: &quot;#696969&quot;)[Tell him to man up.]](else:)[(link-reveal-goto: &quot;Tell him to man up.&quot;, &quot;manup&quot;)[(set: $seanfriendship to it -1)(set: $aggression to it +2)]</tw-passagedata><tw-passagedata pid="174" name="kor06" tags="" position="2950,1850" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You then take a deep breath and present yourself. 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)This is Alexia, the keeper. Im here to demand an audience with the one and true king, King Kor the Pithe Magnificent. I have brought forth my new servant.]You bite your tongue, almost letting out the word pitiful. King Kor the Pitiful is how every other faerie in this sanctuary addresses him. It became so well known that some Woods wrote it down in the guide. 


Kor went looney after surviving the bombing that took out his clan. Thinking he fooled death, he has crowned himself king and crafted his own subjectsthe mechanical animals. The best way to catch him off guard is to play up to him.


A few moments later, the door opens. A cranky old man as tall as the height of your chest walks out of it. Hes wearing a bronze armor, underneath which are a normal tattered shirt and shabby overalls. A loupe of brass hangs from his glasses. His silver beard drags on the ground like the tail of your gown.


[[Next|kor07]]</tw-passagedata><tw-passagedata pid="175" name="kor07" tags="" position="2950,1725" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Keeper? Nonsense! The voice of a young woman I heard! How on earth could mortal time reverse ?
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

He raises a fluffy brow at you. You curtsy. This time, you do not trip.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;asad2&quot;)You mean Cousin Laoise, your majesty? Sadly, she passed away not long ago.]


He squints his eyes and strokes his beard. 


What a fleeting life! Alas, alas! He looks to your side and notices Seaghn.


Isnt this the elfling who happened to nap by my sword earlier?


His words get on Seaghns nerves. He would have lunged at him if it werent for you. You grab him by his arm. Hes breathing heavily due to anger. You cant let his impulsive temper ruin your only chance.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)About that. My servant owes you an apology, your majesty. He never meant to offend you like that. He didnt think straight then, thinking that your sword was his.


An elf servant for a human lass? How peculiar! How come it ended up like this? Hes greatly amused at the idea that an elf, as arrogant as their species is, would ever condescend to serve a human.


[[Next|kor08]]</tw-passagedata><tw-passagedata pid="176" name="kor08" tags="" position="2950,1600" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You try your best not to laugh.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)He was banished from his court and sought refuge under my protection. However, your majesty, as you have known, elves are not the easiest to get along with. Three is enough for this sanctuary.]Humph, thats true. Those idling bastards, he agrees.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)He pleaded. So I offered a deal that I would take him in only if he served me for a hundred and one years. He agreed.]


Very clever diction, keeper! However, the greatest merit ever bestowed upon the human race is the ability to lie! says Kor, who is still quite skeptical of your words. He turns to Seaghn and asks, Is what she said true, elfling? 


[[Next|kor09]]</tw-passagedata><tw-passagedata pid="177" name="kor09" tags="" position="2950,1475" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Faeries cant lie. You thought Maddox had lied about not wanting to get close to the Nightingales, but after what Seaghn has said about faerie nature, you know Maddox meant every word he said back then. At least, thats what he truly thought, until his nature later compelled him to go against it.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

Seaghn, on the other hand, is indeed able to lie because hes half-human, half-elf.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ssad&quot;)Y-yes, it is true.]He bites his lower lip and finally replies. 


Hahaha! How peculiar, how peculiar! Kor laughs. Fortunately, he sees Seaghns stammer as nothing more than reluctance and shame. He yells to the hornbill, Behold, Grinchy! An elf servant and a human master! Elfling, all ears I am! Apologize once!


Letting out a weary sigh, Seaghn closes his eyes and says, Sorry. You know how upset Seaghn is right now. Before tonight, only his mother knew he could lie and taught him not to. What you ask of him challenges his moral principles.


//Sorry//, Seaghn, you think.


Apology accepted! The best gift ever, keeper! You made my day. What kind of reward do you want? A mechanical blooming flower ring? An automated clockwork cat? Name it as you wish!


[[Next|kor10]]</tw-passagedata><tw-passagedata pid="178" name="kor10" tags="" position="2950,1325" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You have earned his trust. Now here comes the last step. You clear your throat. 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)I want nothing from you except for one thinga good look at that sword of yours.]My sword?


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ahappy2&quot;)Yes. Id like to see what kind of sword it is thats worthy enough to grace King Kor the Magnificent!]You bow your head, hoping the flattery works.


Indeed! Its hard to find a sword on earth worthy enough of me. I forged and melted many. As you have hoped, he takes the bait!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;)A comprehensive look, and then it will be returned to you later.]You dont specify when and who will return it.


Later? Dont try to play on words with me!, he snarls. Im not as dumb as that elfling. Ill allow you one minute, no more and no less.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Fair enough. Ill have my elf servant hand it to you one minute later.]Your heart races as Kor goes into the cave. When he returns, hes holding Heartsworn. 


[[Next|kor11]]</tw-passagedata><tw-passagedata pid="179" name="kor11" tags="" position="2950,1200" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Go fetch it, my //servant//.]Pouting, Seaghn takes the sword from Kor and hands it to you. Youre caught off guard by its weight. You use both hands but are only able to lift it to your waist. You have a good look at Heartsworn.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

The blade is covered in a bronze scabbard carved with ornate patterns. The only visible part of the sword is the hilt. The grip is wrapped with leather strings, and the pommel is a heart-shaped ruby. Its a very beautiful sword. You try to pull it out from the scabbard, but as the rumor has it, the sword is stuck.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)What a fine sword. Its a shame that Im not worthy enough to unsheathe it. I bet you can, your majesty?]Youre slowly backing off, ready to run at any time.


Not yet. She says Im not yet there, but very soon! As long as I make out my hearts desire! Kor says.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)Who?]Youre baffled by his words.


The sword, of course! Dont you hear her speak?


[[Next|kor12]]</tw-passagedata><tw-passagedata pid="180" name="kor12" tags="" position="2950,1075" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You and Seaghn exchange looks. You see utter confusion on his face. Apparently as its owner, he has never heard Heartsworn speak. Ok, this dwarf is indeed crazy. You return the sword to  Seaghn.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

Thats enough. Time to return my precious! Kor yells at you.


align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf2&quot;)***No can do!*** I said I would have my elf servant return it to you, but you see, Seaghn is not an elf but a half-elf. So no one can return the sword to you. Were claiming back what is ours. Im afraid that you have to deal with it, your majesty.] 

Yougrab Seaghns hand and off you run!


You horrible cheating girl! Kor snarls, realizing this trick too late. Youll pay for this! Guards, guards, attack!! Go after them, rip them asunder!


[[Next|kor13]]</tw-passagedata><tw-passagedata pid="181" name="kor13" tags="" position="2950,950" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
//Guards?// You look back while sprinting forward//Holy moly//. What are those?
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

Coming after you two are three humongous mechanical hounds or wolves, each the size of a brown bear! Theyre growling and howling, showing those diamond fangs of theirs. Their one leap equals your ten steps!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;shappy&quot;)Keep going. Ive got this!]Seaghn turns around and runs toward the opposite way, toward the hounds!


(link-reveal-goto: &quot;Run.&quot;, &quot;run&quot;)[(set: $indifference to it +1)]
(link-reveal-goto: &quot;Stay.&quot;, &quot;stay&quot;)[(set: $seanfriendship to it +2)(set: $empathy to it +1)]</tw-passagedata><tw-passagedata pid="182" name="stay" tags="" position="2850,825" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashocked2&quot;)What are you doing?! Come back here!]Of course you cannot leave him alone!
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

However, it seems that youre over-reacting. Seaghn does have something. He leaps in the air and strikes the alpha hound in the eye with Heartsworn, whose scabbard is no lesser than the sword itself. One down, two more! He backflips and lands on the back of one hound, which successfully leads the other into attacking its partner. They crash into each other and both fall. 


Seaghn jumps off from the hound. He raises up his hand and gives you a thumb up, grinning like a puppy who expects treats. Speaking nothing, you run to him and give him a big hug no matter how he struggles.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Look! My wyvern! Shes back!]He cries out, pointing to the night sky.


[[Next|kor14]]</tw-passagedata><tw-passagedata pid="183" name="kor14" tags="" position="2950,700" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Youre riding with Seaghn on the back of his wyvern on your way home.


Youre grabbing his hoodie as tightly as you can, which almost strangles him. 


Youre not afraid of heights in general, but riding on a wyvern without any measures of protection unnerves you. After all, Seaghn //did// fall off from the sky once, didnt he? You sincerely hope youre not going to bump into another flock of birds or hippogriffs!


Seen from up here, the Fourth Sanctuary is all the more breathtaking. 


You notice from afar a lake that is engulfed in a veil of black mist. By the lake is a small cottage. Now you know where to find the Bane once you figure out how to use the sword.


[[Next|flytransition]]</tw-passagedata><tw-passagedata pid="184" name="bookmark" tags="nosave" position="125,800" size="100,100">{(display: &quot;setcard&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menuback&quot;&gt;(link: &#39; Back&#39;)[(track: &#39;inventory&#39;, &#39;stop&#39;)(goto: (history:)&#39;s last)]&lt;/span&gt;&lt;span class=&quot;menupage&quot;&gt;BOOKMARK&lt;/span&gt;&lt;/span&gt;
(track: &#39;alexiatheme&#39;, &#39;mute&#39;, true)(track: &#39;panic&#39;, &#39;mute&#39;, true)(track: &#39;heartbeats&#39;, &#39;mute&#39;, true)(track: &#39;nightfall&#39;, &#39;mute&#39;, true)(track: &#39;librarystroll&#39;, &#39;mute&#39;, true)(track: &#39;yard&#39;, &#39;mute&#39;, true)(track: &#39;laoisetheme&#39;, &#39;mute&#39;, true)(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, true)(track: &#39;attic&#39;, &#39;mute&#39;, true)(track: &#39;chapterend&#39;, &#39;mute&#39;, true)(track: &#39;revel&#39;, &#39;mute&#39;, true)(track: &#39;seantheme&#39;, &#39;mute&#39;, true)(track: &#39;foufoutheme&#39;, &#39;mute&#39;, true)(track: &#39;quarry&#39;, &#39;mute&#39;,true)(track: &#39;revel&#39;, &#39;mute&#39;,true)(track: &#39;banetheme&#39;, &#39;mute&#39;,true)(track: &#39;poeticjustice&#39;, &#39;mute&#39;, true)(track: &#39;badend&#39;, &#39;mute&#39;, true)
(track: &#39;inventory&#39;, &#39;volume&#39;, 0.1)(track: &#39;inventory&#39;, &#39;fadein&#39;, 3)(track: &#39;inventory&#39;, &#39;loop&#39;, true)(track: &#39;inventory&#39;, &#39;play&#39;)(track: &#39;click&#39;, &#39;play&#39;)
}
(link-repeat: &quot;Keepers Guide&quot;)[(open-url: &#39;http://bit.ly/password_SCOUNDREL&#39;)]

---
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;CHAPTERS&lt;/span&gt;&lt;/span&gt;
(link-repeat: &quot;Chapter I&quot;)[(open-url: &#39;&#39;)]
(if: $eisner is true)[(link-repeat: &quot;Chapter II&quot;)[(open-url: &#39;&#39;)]](else:)[Chapter II]
(if: $ereading is true)[(link-repeat: &quot;Chapter III&quot;)[(open-url: &#39;&#39;)]](else:)[Chapter III]
---
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;TASKS&lt;/span&gt;&lt;/span&gt;
**CH I**
(link-repeat: &quot;CHI TASK 1&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSel8lB690v8fVTvNex_3ivh32Gm6fA2fnWeTx7conjcdzkESg/viewform&#39;)]
(link-repeat: &quot;CHI TASK 2&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLScglV1jLVslv8OxmQI6_jLsv9OXvB9fDvAucP2eOEIEzVoCrQ/viewform&#39;)]
(link-repeat: &quot;CHI TASK 3&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSeqEVKVIQ81EDXDYNhrOIbQrC1fRJv4KAO8AmUTXOHSAgxTIQ/viewform&#39;)]

**CH II**
(if: $eisner is true)[(link-repeat: &quot;CHII TASK 1&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLScjtbGIPlbvb_o8r5UYoeC_jJphrLwjz-d7aNUEO18bi6kz4g/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHII TASK 1]]
(if: $eisner is true)[(link-repeat: &quot;CHII TASK 2&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSdnpi6qwOcwKjaAWNbcTknWeaBqIR60y4fBqk5lCsYnHj39Wg/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHII TASK 2]]
(if: $eisner is true)[(link-repeat: &quot;CHII TASK 3&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSfPfy281GhjLAPtzgAu5AqoZ4RkP83p3nBhPDD6mjULJE_pdA/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHII TASK 3]]

**CH III**
(if: $ereading is true)[(link-repeat: &quot;CHIII TASK 1&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSex7yIrP2aooKKUMHWpytBmqfyt4pwL4abx-KVzFuzUPutIfw/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHIII TASK 1]]
(if: $ereading is true)[(link-repeat: &quot;CHIII TASK 2&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSdlhLKpMvmSXSN5wxAqp467S3qDsCxd3OUAWULMai17-rK8eQ/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHIII TASK 2]]
(if: $ereading is true)[(link-repeat: &quot;CHIII TASK 3&quot;)[(open-url: &#39;https://docs.google.com/forms/d/e/1FAIpQLSeG47bQhOOeYq8Kqf185uzUfaEl9QQRYfh-Fgcri2S9VXWf0Q/viewform&#39;)]](else:)[(colour: &quot;#696969&quot;)[CHIII TASK 3]]

**BONUS**
</tw-passagedata><tw-passagedata pid="185" name="ww" tags="" position="775,3750" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/ymE2Lv3.jpg&quot; class=&quot;medium&quot;/&gt;
***Winnifred Doyle Woods (1814-1891)

To strive, to seek, to find, and not to yield. 
***</tw-passagedata><tw-passagedata pid="186" name="ikw" tags="" position="875,3850" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;&quot; class=&quot;medium&quot;/&gt;
***Imogen Kingsley Woods (1908-1950)

Dulce non, decorum non, est pro partria mori.
***</tw-passagedata><tw-passagedata pid="187" name="ewwk" tags="" position="675,3850" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/UuCYL39.jpg&quot; class=&quot;medium&quot;/&gt;
***Elizabeth Winnifred Woods Kingsley (1865-1942)

Rage, rage against the dying of the light.
***</tw-passagedata><tw-passagedata pid="188" name="willy" tags="" position="875,3750" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;&quot; class=&quot;medium&quot;/&gt;
***William Woods (1838-1911)

Death, be not proud.
***</tw-passagedata><tw-passagedata pid="189" name="asw" tags="" position="975,3750" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;&quot; class=&quot;medium&quot;/&gt;
***Alwyn Snr Woods (1878-1915)

Kitcheners Army, fallen in the Battle of Loos
Dulce et decorum est pro patria mori.
***
</tw-passagedata><tw-passagedata pid="190" name="bld" tags="" position="675,3750" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;&quot; class=&quot;medium&quot;/&gt;
***William Woods (1780-1872)

Non scholae sed vitae discimus.
***</tw-passagedata><tw-passagedata pid="191" name="run" tags="" position="3025,825" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You hesitate for a moment but decide to trust the elf prince, so you sprint forwards like a shooting star. 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

Soon several consecutive booms draw your attention. You stop and turn, afraid that it was Seaghn.


All the three mechanical hounds now lie dead on the ground.


Seaghn stands atop the back of one hound. His face splits into a triumphant grin. 

You raise up both hands and give him two thumbs up.


align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Look! My wyvern! Shes back!]He cries out, pointing to the night sky.


[[Next|kor14]]</tw-passagedata><tw-passagedata pid="192" name="wait" tags="nosave donotshowinventory" position="325,1475" size="100,100">{
(display: &quot;setmessenger&quot;)
(unless: (track: &#39;rspf&#39;, &#39;isplaying&#39;))[
    (track: &#39;rspf&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;rspf&#39;, &#39;fadein&#39;, 3)
	(track: &#39;rspf&#39;, &#39;loop&#39;, true)]
}
(t8n:&quot;dissolve&quot;)+(t8n-delay:1s)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[...

(t8n:&quot;dissolve&quot;)+(t8n-delay:2s)[Luisa: 
Indeed, the 4ths was reported broken in 2007. Laoise didnt apply for a new one. Will send one to you via Dullahan Express. It should arrive within 10 minutes!]

(t8n:&quot;dissolve&quot;)+(t8n-delay:3s)[You: (force-input-box: &quot;XXXXXXXXXXXXXXXX=&quot;, &quot;Wait, Dullahan Express? 10 minutes?!&quot;)]
(t8n:&quot;dissolve&quot;)+(t8n-delay:33s)[...]

(t8n:&quot;dissolve&quot;)+(t8n-delay:34s)[Luisa: 
Yes! Ah, youre lucky. Our white Dullahan is on duty today, it should arrive now!] 


(t8n:&quot;dissolve&quot;)+(t8n-delay:35s)[3,](t8n:&quot;dissolve&quot;)+(t8n-delay:36s)[ 2,](t8n:&quot;dissolve&quot;)+(t8n-delay:37s)[ 1 . . . ]


(text-style: &#39;rumble&#39;)+(t8n:&quot;dissolve&quot;)+(t8n-delay:38s)[ (link-goto: &quot;hoooooooo!!!!!&quot;, &quot;dullahan&quot;)]]</tw-passagedata><tw-passagedata pid="193" name="countdown example from bl" tags="" position="1625,1875" size="100,100">(set: $stop to false)*(You take a deep breath and then dive under the surface.(live:1s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 1...(stop:)]]](live:2s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 2...(stop:)]]](live:3s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 3...(stop:)]]](live:4s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 4...(stop:)]]](live:5s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 5...(stop:)]]])*(live:5s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[

YOU: mmf.

(set: $stop to false)*(You open your eyes.(live:1s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 6...(stop:)]]](live:2s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 7...(stop:)]]](live:3s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 8...(stop:)]]](live:4s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 9...(stop:)]]](live:5s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 10...(stop:)]]])*(stop:)]]](live:10s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[

YOU: mhgfff

(set: $stop to false)*(A few bubbles escape from your mouth.(live:1s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 11...(stop:)]]](live:2s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 12...(stop:)]]](live:3s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 13...(stop:)]]](live:4s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 14...(stop:)]]](live:5s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 15...(stop:)(set:$breath to 1)]]])*(stop:)]]](live:15s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[

YOU: fgggg

(set: $stop to false)*(More and more bubbles are escaping.(live:1s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 16...(stop:)]]](live:2s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 17...(stop:)]]](live:3s)[(t8n:&quot;dissolve&quot;)[(if: $stop is false)[ 18...(stop:)(t8n:&quot;dissolve&quot;)[(set: $stop to true)(replace:?stopper2)[(t8n:&quot;dissolve&quot;)[(display:&quot;boystuff10&quot;)]](replace:?stopper)[]]]]])*(stop:)]]]
(live:3s)[(t8n:&quot;dissolve&quot;)[
[]&lt;stopper2|[Come up for air.]&lt;stopper|(stop:)]
](click: ?stopper)[(t8n:&quot;dissolve&quot;)[(set: $stop to true)(replace:?stopper)[(display:&quot;boystuff10&quot;)]]]</tw-passagedata><tw-passagedata pid="194" name="dullahan" tags="donotshowinventory" position="3325,2800" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;rspf&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;dullahan&#39;, &#39;isplaying&#39;))[
    (track: &#39;dullahan&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;dullahan&#39;, &#39;fadein&#39;, 3)
	(track: &#39;dullahan&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Accompanied by a swift gale, a headless lady knight in silver armor riding on an aflamed skeleton horse halts in front of you. 


She holds one thing under each arm. On the right is a delivery box stamped with a giant RSPF logo. You figure that must be the echolocation analyzer. On the left, however, is her dismembered head. Her silvery vvoluminous locks peek out from the helmet, graciously swaying with the wind.


Delivery. Please sign here.


Wait, how do I use the analyzer?


//Malaka// . . . theres clearly a user guide. Don&#39;t you see? She points at the box.


Uh . . . Yeah shes right. It&#39;s right written on the box **USER MANUAL INCLUDED**. How did you miss that?


Dont bother me with such trifles. If thats not bright enough, ask the RSPF, not me. Im simply a delivery person. A keeper shall not be **BRAINLESS**--get it? BRAINLESS! She rocks her head.


 . . .  


You hate jokes.


(link-reveal-goto: &quot;Next&quot;, &quot;foufouthehamster02&quot;)[(set: $echolocationanalyzer to true)(set: $inv to $inv + (a: &quot; a Dullahan Express package&quot;))(alert: &quot;You got a new item! Please check your inventory.&quot;)]</tw-passagedata><tw-passagedata pid="195" name="queen" tags="" position="3500,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/kqHr62o.jpg&quot; class=&quot;small&quot;/&gt;
***The Queen***</tw-passagedata><tw-passagedata pid="196" name="ablank1" tags="" position="2100,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/AOAamsY.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="197" name="aangry1" tags="" position="2300,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/twFTwpB.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="198" name="ascared1" tags="" position="2200,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/sLqHrUx.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="199" name="asad1" tags="" position="2400,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/KXPEb9I.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="200" name="goatking" tags="" position="3400,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/kqHr62o.jpg&quot; class=&quot;small&quot;/&gt;
***The Goat-Horned King***</tw-passagedata><tw-passagedata pid="201" name="moth" tags="" position="3600,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/21YpoLl.jpg&quot; class=&quot;small&quot;/&gt;
***The Moth-Winged King***</tw-passagedata><tw-passagedata pid="202" name="mserious" tags="" position="3800,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/MnVeSmY.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="203" name="mbereft" tags="" position="3900,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/4JOc5Qk.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="204" name="mirritated" tags="" position="4000,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/9wloJU4.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="205" name="liam" tags="" position="50,1600" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(font: &quot;courier&quot;)+(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[**Alexia, how have you been? Havent heard from u for a while. We miss u so much. The board game club just didn&#39;t feel the same since you were gone. Please come back when you feel better!**]</tw-passagedata><tw-passagedata pid="206" name="ashy1" tags="" position="2500,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/2EV0v7C.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="207" name="ahappy1" tags="" position="2600,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/I3pE21Z.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="208" name="apleased1" tags="" position="2700,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/i9UqkKo.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="209" name="ashocked1" tags="" position="2800,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/fonqBtc.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="210" name="awtf1" tags="" position="2900,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/yJxrC61.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="211" name="airritated1" tags="" position="3000,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/FO55eNc.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="212" name="atired1" tags="" position="3100,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/4iA40vr.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="213" name="abereft1" tags="" position="3200,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/KS94PRo.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="214" name="dumb" tags="" position="1400,675" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;HINTS&lt;/span&gt;&lt;/span&gt;
You should pay attention to . . .
* (link-repeat: &quot;Caesar Ciphier&quot;)[(open-url: &#39;https://www.xarg.org/tools/caesar-cipher/&#39;)]
* The weird pile of books . . . Check out their titles in the inventory!
* Dags little habit . . . Check out his character card in the gallery!
* A number that recurs in the story should be the key ***n***. Check out the gallery and mailbox!
* The password should be a meaningful word.</tw-passagedata><tw-passagedata pid="215" name="user instruction" tags="nnosave donotshowinventory" position="550,375" size="100,100">(display:&quot;setcard&quot;)(display:&quot;undo-off&quot;)&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;

[(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[****]Android Mac Google Chrome Ipadiphone Safari  Chrome 

(t8n:&quot;dissolve&quot;)+(t8n-delay:1.5s)[]]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;click&#39;, &#39;play&#39;)(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[****] (font: &quot;Special Elite&quot;)[GAME SAVED]  Continue 

(t8n:&quot;dissolve&quot;)+(t8n-delay:1.5s)[]]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;click&#39;, &#39;play&#39;)(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[****] New Game  cookies 

(t8n:&quot;dissolve&quot;)+(t8n-delay:1.5s)[]]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;click&#39;, &#39;play&#39;)(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[****] BOOKMARK

(t8n:&quot;dissolve&quot;)+(t8n-delay:1.5s)[]]]
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;click&#39;, &#39;play&#39;)(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[****] **** 


(t8n:&quot;dissolve&quot;)+(t8n-delay:1.5s)[[[|ch1.0]]]
]]</tw-passagedata><tw-passagedata pid="216" name="makefun" tags="" position="2850,2300" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ahappy2&quot;)Haha, //okay//.] 


You laugh but stop when you see his embarrassed face. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)//Wait//, you cant be serious, right? You LITERALLY live in the mountains. How come youre afraid of birds? And you have a pet wyvern. Its like a giant bird, well sort of.]His face swells like a pufferfish. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Thats not true! Shes more like a giant flying lizard!]He darts away from the owl. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)Our people live in trees. Youll never know what it is like to have bird poops on your face whenever you wake up in the morning.]


[[Next|kor05]]</tw-passagedata><tw-passagedata pid="217" name="becurious" tags="" position="2950,2300" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Why? I thought you grew up in the mountains.]You let out a little chuckle. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)And you have a pet wyvern. Its like a giant bird, well sort of.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)Thats not true! Shes more like a giant flying lizard!]He darts away from the owl. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;apleased2&quot;) . . . Its ok! Tell you what, I have a friend who is scared of butterflies, like really //scared of them//. She once fainted just because a butterfly **rested** on her ankle. She wore too much perfume that day.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sbirdface&quot;)Butterflies? No way! They dont attack you like some birds do!! But I get it, poor thing!]He shakes his head and sighs.

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)Our people live in trees. Youll never know what it is like to have bird poops on your face whenever you wake up in the morning.]


(link-reveal-goto: &quot;Next&quot;, &quot;kor05&quot;)[(set: $curiousbird to true)]</tw-passagedata><tw-passagedata pid="218" name="nocomment" tags="" position="3050,2300" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Hmm, I see.]Actually, you dont quite get it. Seaghn told you that he lived in the mountains, and youre sure they must have crossed their paths //literally// every single day. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)Yeah . . . our people live in trees. Youll never know what it is like to have bird poops on your face whenever you wake up in the morning.]


[[Next|kor05]]</tw-passagedata><tw-passagedata pid="219" name="squeeze" tags="" position="2850,2025" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You squeeze his hand and smile at him, who looks like hes going to faint over a fake bird(if: $curiousbird is true)[, just like Eloise over that bloody butterfly]. 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

You try to divert his attention.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Do you still remember the plan?]He still looks hesitant but nods. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ssad&quot;)Its . . . for the sword.]


[[Present yourself.|kor06]]</tw-passagedata><tw-passagedata pid="220" name="protective" tags="" position="2950,2025" size="100,100">{(display: &quot;ssetnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You casually walk your way in front of the elf boy, protecting him from the sight of his nemesis and a potential faint. (if: $curiousbird is true)[You dont want him to faint like Eloise did.] 
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

You try to divert his attention.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Do you still remember the plan?]He still looks hesitant but nods. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ssad&quot;)Its . . . for the sword.]


[[Present yourself.|kor06]]</tw-passagedata><tw-passagedata pid="221" name="manup" tags="" position="3050,2025" size="100,100">{(display: &quot;setnight&quot;)
(unless: (track: &#39;quarry&#39;, &#39;isplaying&#39;))[
    (track: &#39;quarry&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;quarry&#39;, &#39;fadein&#39;, 3)
	(track: &#39;quarry&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You sigh.
(track: &#39;quarry&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)Seaghn, I really need you to pull yourself together, okay? If youre gonna act like a crybaby who gets upset over fake birds, how can I trust you on this? Do you still remember the plan?]

He looks down at his feet while youre talking. Youre not sure whether he is ashamed of himself or simply avoiding the sight of the mechanical hornbill. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ssad&quot;)Ill try. Its . . . for the sword.]


You hear him whisper.


[[Present yourself.|kor06]]</tw-passagedata><tw-passagedata pid="222" name="home" tags="" position="3325,525" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Are you sure that you are alright? Seaghn kneels beside you with a cold, wet towel in hand, eyebrows curled into a worried expression. You weakly wave at him, gesturing that you are fine.
(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

Im okay. Thank you. Its just . . . this is nothing like riding a bike. You pale at the mere thought of being high in the sky. The view was indeed very pleasant while flying up there, but the joy wore off after landing because you were immensely sick and nauseous. Seaghn, do you mind fetching me a bottle of sports drink from the fridge? Thanks.


Seaghn opens his eyes ever-so-wide, to a point that you almost think you are looking at a curious owl. He tilts his head to one side, stands up, and runs about the mansion. 


Theres a fridge? Is there an AC? Or a hair dryer? I want to see them ALL! You seem to have led him into a new world.


(if: $refusefou is true)[[[Next|fouhome01]]](else:)[[[Next|nofou01]]]</tw-passagedata><tw-passagedata pid="223" name="fouhome01" tags="" position="3200,650" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Errr . . . 


Your jaws drop the moment you set foot in the mansion. If horror was your impression of the house, it now becomes total nightmare fuel. 


Hmm, interesting, I didnt know that humans liked to decorate their house with cracked eggs! And . . . is that a FRIDGE? Aw, its open, so chiling! What is that noise? Is that a HAIRDRYER? Alexia, I thought you said no one was home? Or . . . 


The elf prince tilts his head, and then abruptly raises his head.


I know! Humans turn on all electronics even when they arent home! Am I correct? //King of deduction//, aint I?


You facepalm so hard. 


[[Next|fouhome02]]</tw-passagedata><tw-passagedata pid="224" name="flytransition" tags="nosave donotshowinventory" position="2950,575" size="100,100">(display:&quot;setblack&quot;)**20 minutes later . . .**
{
(track: &#39;quarry&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
(live:1s)[(t8n:&quot;dissolve&quot;)[(display:&quot;home&quot;)(stop:)]]</tw-passagedata><tw-passagedata pid="225" name="setnight" tags="" position="775,200" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;night&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;black&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="226" name="nofou01" tags="" position="3450,650" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Raising an eyebrow, you watch the young elf prince jumping up and down, skipping and staring while exploring around the house, and then you decide that getting the drink yourself is way more efficient than waiting for this super hyper boy.


Please dont break anything,  You remind him, who is scampering in and out of different rooms. My brownie Dag will be pissed if we make a mess.


Okie-dokie! Seaghns voice echoes in the hallway, and then he quickly adds, like a student who is caught skipping class, Um, Alexia . . . do you still need the drink?


No, thank you. You smile as the cool liquid sweeps away the last bit of discomfort, You can take your time exploring the mansion later. Id like to show you your room for the night. 


[[Next|nofou02]]</tw-passagedata><tw-passagedata pid="227" name="nofou03" tags="" position="3450,900" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
You smile. 


Even though you and Seaghn have only known each other for less than a day, the adventure you had together brought you closer, binding you two with a tight knot called friendship. 

Still, your smile fades as you recollect the Bane that is looming over the sanctuary. You know that you are on the right track, yet, the uncertainties ahead still gnaw at your nerves. Will you defeat the Bane and break the curse? Will Dag recover? Will you be able to keep all the creatures in the sanctuary safe and sound? The stakes are high, especially for a college dropout who decided to inherit an estate on impulse without any prior knowledge about faeries or the Invisible World.


{
(if: $dagfriendship &gt;=1)[[[Next|tobunker]]]
(if: $dagfriendship &gt;=-2 and $dagfriendship&lt;=0)[[[Next|tobunker]]]
(if: $dagfriendship &lt;=-3)[[[Next|nobunker]]]
}</tw-passagedata><tw-passagedata pid="228" name="nofou02" tags="" position="3450,775" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Seaghn suddenly shows up in front of you, eyes sparkling with excitement, Really? Can I stay for the night? In a human house?


Well, I do have other faerie housemates, so . . .  You lead Seaghn to the guest room, and he seems to try hard to suppress the urge to throw himself right onto the queen-size bed. You can use anything in the room. If youre hungry or thirsty, feel free to grab a drink and some biscuits from the kitchen, but keep clear of the honey jars labelled For Dag or the cabinet tagged Featherhead. Let me know if you need anything, alright?


 Affirmative! The elf prince gives you a salute by resting his right fist upon his heart. He grins and says with a sincere attitude, Thank you for letting me stay for the night!


[[Next|nofou03]]</tw-passagedata><tw-passagedata pid="229" name="fouhome03" tags="" position="3200,900" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;foufoutheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Seaghn blinks, I suppose . . . your house doesnt  usually look like this? 


You shake your head.


And you would turn the hairdryer off when not using it. 


You nod.


And you would close the fridge door and turn it off. 


You nod, and then shake your head. Seaghn runs back to your side.


Alright, to show gratitude to your hospitality, I will help you set things back in place, and slay this insolent creature named Foufou!


Theres no need to slay anyone! But thanks for offering help. Let&#39;s do it later. Id like to show you your room for the night.. 


You really hope that it isnt trashed like the communal area!


Seaghn tosses whatever he has in his hands away, eyes sparkling with excitement, Really? Can I stay for the night? In a human house?


Well, I do have other faerie housemates, so . . .  


[[Next|fouhome04]]</tw-passagedata><tw-passagedata pid="230" name="endch2" tags="" position="3325,2675" size="100,100">{(display: &quot;setwhite&quot;)(track: &#39;foufoutheme&#39;, &#39;fadeout&#39;, 5)(unless: (track: &#39;chapterend&#39;, &#39;isplaying&#39;))[(track: &#39;chapterend&#39;, &#39;volume&#39;, 0.1)(track: &#39;chapterend&#39;, &#39;fadein&#39;, 3)(track: &#39;chapterend&#39;, &#39;loop&#39;, true)(track: &#39;chapterend&#39;, &#39;play&#39;)]}
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;END OF CHAPTER II&lt;/span&gt;&lt;/span&gt;
(track: &#39;chapterend&#39;, &#39;mute&#39;, false)
&lt;==&gt;
It seems that you have to help Foufou locate the nesting site. Only by doing so can you move onto your own business.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated3&quot;)Argh! How in the world do I know where the nesting site is!! Maybe I should check out the RSPFs latest mail. I remember it said something about the migration . . . Though Maddox said I shouldnt trust them, but it should be ok on this matter . . . ]</tw-passagedata><tw-passagedata pid="231" name="foufouthehamster" tags="" position="3325,2275" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
When you and Sean are about to leave the yard, some creature pops out of the blue and stands in your way. You thought it was a cat, but . . .
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Holy cow.


It is Foufou the hamster . . . uh no, the BLOODY hobgoblin.


(if: $refusefou is true)[[[Next|refusefou]]](else:)[[[Next|otherfou]]]</tw-passagedata><tw-passagedata pid="232" name="nextday2" tags="donotshowinventory novsave" position="3325,2150" size="100,100">(display:&quot;setquickmorning&quot;)**The next day . . .**
{
(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
(live:1s)[(t8n:&quot;dissolve&quot;)[(display:&quot;foufouthehamster&quot;)(stop:)]]</tw-passagedata><tw-passagedata pid="233" name="setmessenger" tags="" position="875,200" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;

&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;messenger&#39;)&lt;/script&gt;

&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;card&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="234" name="ch3" tags="donotshowinventory nosave" position="3700,450" size="100,100">(display:&quot;setmidday&quot;)**A few hours later . . .**
{
(track: &#39;foufoutheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
(live:1.5s)[(t8n:&quot;dissolve&quot;)[(display:&quot;hazel01&quot;)(stop:)]]
}</tw-passagedata><tw-passagedata pid="235" name="hazel01" tags="" position="3700,575" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Are you sure you are able to identify him? 


You ask, staring at the elf prince who is sniffing the air and tasting fallen leaves on the ground.


Yes, Im quite sure a treewoman smells different from a normal tree, especially in the afternoon breeze. 


You said the same thing about the morning air **five hours earlier**.


Oh, DID I?


//Argh.// You cover your face with your palm.


[[Next|hazel02]]</tw-passagedata><tw-passagedata pid="236" name="hazel02" tags="" position="3700,700" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The helping hand Maddox mentioned last night is a hazel treewoman, which according to the guide, is said to be the only treeperson in this sanctuary that has ever spoken to a human. That lucky human happened to be Sir Benjamin Doyle himself. However, he didnt specify where he met this hazel treewoman. Maddox explained that Sir Doyle did so out of his respect for the fae as some faeries like to stay hidden from mortal attention. 


Alwyn and I used to hunt for this hazel treewoman for years, but she never answered. Treefolk hide from other species of faeries too. Theyre extremely secretive.


What makes you think I can find her within such a short time, while you spent years and failed? 


You were not meant to be this salty but couldnt help it. 


I said she didnt answer us, but we did find her. Shes in the west woods. Treefolk are patient, but they will give themselves away if you do something nasty to provoke them.


He smiled in that amused and unruffled air of his, which made you want to punch him in the face. 


Ok, whatever that means! 


You certainly werent interested in what he and Alwyn had done!.


You two go see the Hazel. Ill stay and watch for Dag.


[[Next|hazel03]]</tw-passagedata><tw-passagedata pid="237" name="hazel03" tags="" position="3700,825" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
So here you are, in the woods, looking for a hazel treewoman who delights in pretending to be a normal tree. Somehow this reminds you of the day when you were looking for the four-leaf clover. 


You had memorized the characteristics of treefolk from the guide beforehand, yet its still a boring and tormenting task. Seaghn, who confidently claims that he can distinguish treefolk from normal trees, has been dragging you around aimlessly the entire morning! You decide its time to take a break.


Seaghn, looking defeated with his shoulders dropped, is about to sit on a tree stump. However, he trips on Heartsworn, which was fastened on his belt, and almost falls. This little accident makes you chuckle. 


Embarrassed, the elf prince protests.


Dont laugh! One day I will grow taller than your boyfriend!


You soon put away your smiley face and argue back.


You:Ive told you hes not my . . .


[[Next|hazel04]]</tw-passagedata><tw-passagedata pid="238" name="home04" tags="" position="3325,1850" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;maddoxtheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Once you got the sword back, you were thinking about how to unsheathe it, and Kors words about Heartsworn speaking lingered on your mind. If no one in this sanctuary can explain this to you, youre indeed planning to write to the Royal Society. Theyre all fae-experts after all; there must be somebody that could help. 
(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)

Besides, if you fail to stop the Bane, it may go on spreading its curse outside of the estate. Its best that the Royal Society be informed of this calamity.


However, Maddox doesnt agree.


No, you must keep out of any contact with the Society. Maddoxs tone suddenly tenses up. 


Its best for those who have been petrified and for your new friend as well.


What do you mean? 


His cautionary words terrify you. Meeting your sacred and confused gaze, he explains gently.


[[Next|home05]]</tw-passagedata><tw-passagedata pid="239" name="home05" tags="" position="3325,2000" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Lets just say that corruption thrives wherever there is organization, and that faction starts whenever there is disagreement. The man currently in charge of the Royal Society lusts for power and wealth. He and his henchmen go against the wishes of Alexandria Eisner the founder. They secretly collude with black marketeers that sell faeries as products or slaves and then encroach on their private properties. Laoise and her friends have evidence that they are even conducting bio-experiments on faeries. With this reason alone, you may never reveal what happened here to the Society, or Dag and the others might be taken away to their laboratory. That sword Heartsworn as well, it might fall into the hands of some greedy scholar and never come back. 
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)

Thats A LOT to take in. You gasp in horror, I used to be really glad to receive the e-mails from the RSPF! How disgusting! Theyre supposed to PROTECT faeries!


Maddox shakes his head, As far as I am concerned, not all members are so. However, we cannot take the risk. We will have to solve it on our own.


Heavy-hearted, you nod in reply. Maddoxs lips curl, Right now, have a good night sleep, lass. Tomorrow, I will introduce you to another helping hand.


[[Next|nextday2]]</tw-passagedata><tw-passagedata pid="240" name="mheh" tags="" position="3275,1425" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Maddox, welcome back. You say, without any sarcasm or rapprochement, simply relief.


After Seaghns explanation, it dawned on you that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He had been heartbroken because of your ancestors and sacrificed far too much for this family. Maddox . . . have you ever thought about leaving?


The hand on your shoulder stiffens, and then slowly relaxes as if letting go of something important.


Yes. Voice soft as a sigh, Maddox responds gently. He seems careful with his wording, as if choosing diction for a poem. Regardless of my wish, I have chosen to stay. And now, this will forever be my home, for it has been so for the past decades.


Maddox . . . you dont need to do this. You try to find the right words to comfort this century-old pixie. You have already done enough for this family. I know that, and I believe Dag feels the same, too. Though I could really use your help in this difficult time, and youve been helping me ever since Dag . . . 


You take a deep breath to calm yourself down. Sorry about the babbling. All I want to say is, you are free, Maddox. You are always free and can go anywhere you want.


Maddox blinks, his eyelashes fluttering as if they were the flapping wings of a heron. His whisper is so soft that you almost miss it. Peradventure, . . . I have been, and shall always be, the Featherhead that follows. He smiles at you and says, Your words are deeply appreciated, lass. Thank you. You find it difficult to meet his gaze, so you dart away, feeling a warm flush upon your cheeks.


So youre staying? I mean, Im more than happy if you are, but if not . . . maybe I can turn to the Royal Society for help . . . 


He raises an eyebrow, surprised at you mentioning the Royal Society. Lounging, he waits for you to share your plan. You tell him everything that happened tonight when he was away, except for the part where Seaghn asked you if he was your boyfriend.


[[Next|home04]]</tw-passagedata><tw-passagedata pid="241" name="foufouthehamster02" tags="" position="3325,2925" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;dullahan&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
You thank the white Dullahan and watch her gallop off.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Sean: Wow, Ive never seen a Dullahan before. Theyre a pretty rare sight nowadays. So its not a rumor that they work for humans . . .


You: Well, I hope not all Dullahans have such a bad sense of humor.


So wheres the nesting site??? As you unbox the package, Foufou demands, attempting to squeeze itself into the box.


Get out, youll break it!


You grab Foufou out by the collar of its sweater, and to prevent it from making a mess, you hold it in your arms. Somehow it stays quiet like this.(if: $refusefou is true)[ You just cant believe this is the same creature that wrecked your house.]


A few minutes later, with the help of the user guide, you figure out how to use the analyzer.


[[Tell Foufou the location.|coordinates]]</tw-passagedata><tw-passagedata pid="242" name="coordinates" tags="nosave" position="3325,3050" size="100,100">(set: $coordinates to (prompt: &quot;Enter the coordinates.&quot;,&quot;******.*********.**&quot;) )
(set: $time2 to it + 1)
(if: $coordinates is &quot;250205.6N1212556.6E&quot; or $coordinates is &quot;2502056N12125566E&quot; or $coordinates is &quot;250205 6N1212556 6E&quot;)[(go-to: &quot;foufouthehamster03&quot;)](elseif: $coordinates is &quot;******.*********.**&quot;)[Cmon! At least try! Failing five times will reveal the hints.  [[Try again-&gt;coordinates]].](else:)[Dont give up! Do you check all the clues and the user guide?  [[Try again-&gt;coordinates]].]
(if: $time2 &gt;= 5)[
---
(display: &quot;dumb2&quot;)]
</tw-passagedata><tw-passagedata pid="243" name="dumb2" tags="" position="3325,3175" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;HINTS&lt;/span&gt;&lt;/span&gt;
You should pay attention to . . .
* The hipogriff recording in the inventory. You should download it.
* The echolation analyzer and its user guide in the inventory. You should install it on your computer.</tw-passagedata><tw-passagedata pid="244" name="foufouthehamster03" tags="" position="3325,3300" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Here, take it. You quickly draw a map and circle the location the coordinates indicate.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Foufou understands that Miss Keeper has so much to do, so Foufou will just have to do this on his own. Wait . . . Foufou is indeed doing another favor for Miss Keeper, is he not? Then I shall ask another favor in return . . .


 . . . Argh! Buzz off please!!


You heard her. BUZZ OFF, hamster! Sean draws his sheathed sword, which makes Foufou swallow back whatever it originally wanted to say.

I shall come back if the coordinates are incorrect . . . ***Hamster?*** Foul outsider, you shall pay for this humiliation one day . . . Foufou shall have his revenge after he has his feast of eggs!


You and Sean finally are able to carry on with your quest. You two head to the deep forest. 


(link-reveal-goto: &quot;Next&quot;, &quot;ch3&quot;)[(set: $eisner to true)(alert: &quot;You got a new email! Please check your mailbox!&quot;)]</tw-passagedata><tw-passagedata pid="245" name="hazel04" tags="" position="3700,950" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
His mind is certainly not on Maddox though. He holds Heartsworn to his nose, murmuring. 


Screw that hazel tree. Perhaps I should make friends with you. They say youre rubbish, but I dont think so.  Youre fantabulous. Speak to me, pretty please!


You freeze. Did King Kor the Pitiful get into his head? You certainly hope not! Before you can ask, Seaghn grabs the sword by its grip and tries to unsheathe it by force.


Come out, you stupid sword! Cmon! 


His cheeks bulge like a hamster, red and sweaty due to his endeavor to pull it out. 


Alack! This is not how you treat a fine sword, young lad! 

A hoarse and husky female voice says. Startled, you and Seaghn look at each other. Is that Heartsworn? Yet you remember Kor referred to the sword as a she. 


Then, all of a sudden, Seaghn falls flat on his face, almost breaking his nose. He looks terrified when he lifts his head up and whispers to you. 


Is that a gho


[[Next|hazel05]]</tw-passagedata><tw-passagedata pid="246" name="hazel05" tags="" position="3700,1075" size="100,100">{
(display: &quot;setafternoon&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;hazel&#39;, &#39;isplaying&#39;))[
    (track: &#39;hazel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;hazel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;hazel&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Such a boorish behaviour, lad!


As Seaghn seems about to panic, you point behind him. 


I think we found the hazel treewoman! 


A towering hazel stands out from the other hazels around it. Its foliage forms a perfect spade shape, and on its greyish white trunk emerges a wrinkled face.


Bingo! A hazel tree I am! Is that what you young people say? Hohoho . . . 


Greetings, Madam . . .  //Hazel//? Im the new keeper of this sanctuary, coming forth to seek wise advice from you.


Hohoho, the last time I talked to a keeper was over two centuries ago. What was his name? Benny? Oh, how clear the sky was, and how quiet the nights used to be . . . What do you wish to learn from me?


Excuse me, my lady, have you ever heard of the sword Heartsworn, forged by Queen Maebs smith? The sword that cuts through anything? The sword unsheathable? How do I unsheathe it?  


Seaghn does a somersault to get back on his feet, letting out a series of questions.


[[Next|hazel06]]</tw-passagedata><tw-passagedata pid="247" name="hazel06" tags="" position="3700,1200" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;hazel&#39;, &#39;isplaying&#39;))[
    (track: &#39;hazel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;hazel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;hazel&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The hazel treewoman narrows her eyes to take a good look at the sword.


Hmm, my little birds told me long ago about a sword that can cut through anything. Now that I think of it, the name is Heartsworn indeed! Heartsworna sword of irreversible curse that tears asunder the heart it aims. However, the name entails something about its wielder as well. Heartsworn speaks the heart of its wielder. In turn, the striker has to know exactly their hearts desire, or they might destroy what they do not wish to destroy. Oh yes, Heartsworn can only take off its scabbard once the wielder makes up their mind.


But how do I make sure I know what my heart desires?


That depends on the thing or the person you want to cut through. What do you want to cut off from your target? A lock of hair, the tip of the left ring finger, or their //life//?


**Life?** You dont know. Does defeating someone mean to claim their life? Youre not sure if you like the idea. However, Seaghn gets really thrilled about this.


[[Next|hazel07]]</tw-passagedata><tw-passagedata pid="248" name="hazel07" tags="" position="3700,1325" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;hazel&#39;, &#39;isplaying&#39;))[
    (track: &#39;hazel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;hazel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;hazel&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Life of course! Only by ending a faeries life can their magic be gone! 


Youre surprised at this statement. Does he really know what death means? You doubt it, since elves are practically immortal beings, and their magic can prevent his mother from aging. To him, this seems like a game in which he plays the hero that saves the day.


Maam, another thing. How can a geis be removed?


You think of the Bane that is looming over the south lake. It had broken its own geis, and this turned it into a force of curse. Will lifting the geis turn it back to what it used to be?


The treewoman shakes her branches, which makes her leaves rustle. 


Oh child, sadly it cannot. I have never heard of such a thing. Once laid upon, the geis follows you until your doom. Let me tell you the story of a hero, who was forbidden to eat dog meat. However, he also had to respect hospitality. One day, his enemy made use of these conflicting geasa to set him up by inviting him to eat dog meat. One way or the other, he would break one. Eventually he yielded to the law of hospitality and ate the meat. Breaking the geis weakened his power, which led to his downfall.


[[Next|hazel08]]</tw-passagedata><tw-passagedata pid="249" name="hazel08" tags="" position="3700,1450" size="100,100">{
(display: &quot;setafternoon&quot;)
(unless: (track: &#39;hazel&#39;, &#39;isplaying&#39;))[
    (track: &#39;hazel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;hazel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;hazel&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Studying Heartsworn in Seaghns hands, the hazel treewoman continues.

Hmm . . . However, with that sword you may try. It cuts through anything. A geis is an intangible thing! Why not? 


//What? Thats absurd!//


You laugh at this old trees imagination. Is it possible to cut through //the geis// though?


Cmon, Alexia. You heard the old treewoman! Lets go. I know what I should do! The life of the Bane is there for us to claim!!! 


He stares at you, eyes full of excitement, waiting for your response.


[[Next|transition]]</tw-passagedata><tw-passagedata pid="250" name="heartsworn01" tags="" position="3700,1700" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Eventually you have no choice but to yield, hopping up on the wyverns back. As her wings flap, you rise from the ground. 


Your hair and clothes wave like crazy because of the whipping wind. You lean closer to Seaghn to grab his waist. 


You can hear his fast breathing; hes hyperventilating now.


[[Next|heartsworn02]]</tw-passagedata><tw-passagedata pid="251" name="heartsworn02" tags="" position="3700,1825" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
According to the hazel treewoman, Heartsworn is a sword of curse that never shows mercy to its victim. To prevent unwanted calamity, he who wields the sword can only unsheathe it if he knows exactly where his heart is. 


However, you dont think Seaghn knows what he should be dealing with.


There were so many emotions in his brown doe eyes back then when he stared at you: ambition, ecstasy, fever, and a faint disbelief that one could have towards something seemingly too good to be true. 


This quest serves as his chance of proving himself worthy to his clan, and apparently this is the only thing in his mind right now. 


You sigh. Its definitely not a good idea to fly straight to the Bane, but there is no way of stopping Seaghn. Its his sword and his wyvern afterall. All you can do is stick with him, making sure that he doesnt hurt himself too badly. 


[[Next|heartsworn03]]</tw-passagedata><tw-passagedata pid="252" name="heartsworn03" tags="" position="3700,1950" size="100,100">{
(display: &quot;setdusk&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
Pineapple soon takes you to the south lake which the Bane occupies. A swathe of impenetrable vaporous substances, darker and thicker than last night, is hovering over the entire lake, completely concealing the water surface. It was too dark last night, so you didnt see it clearly. However, with the help of the setting sun, you get a much clearer view of the Bane. 


A towering  waterspout rises sheer from the center of the lake; its funnel takes in the lake water as if to absorb life from the earth. It spins fiercely and seems to want to suck everything into itself to fill out that insatiable void deep inside. Still, this isnt enough; it still feels empty despite its humongous size. 


At the sight of the waterspout, Pineapple rears in terror, letting out a rumbling whimper from her throat. This almost throws you and Seaghn off from her back. 


Keeping your weight forward, you hold him tightly and clamp your legs to her sides with all your strength. Fortunately, Seaghn quickly soothes Pineapple and brings her back to the horizontal position. 


Yet, he doesnt look good himself either. Sensing wetness his wet shirt, you bend his head around. His face is as pale as a sheet; cold sweat is streaming down from his forehead. He looks as if he might faint at any second. There are no birds around this area, so you figure it might have to do with the Bane.


[[Next|heartsworn04]]</tw-passagedata><tw-passagedata pid="253" name="heartsworn04" tags="" position="3700,2075" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Your heart sinks. You thought since Seaghn is half-elf half-human, he might get away with the curse. However, the reality hits you hard.


Are you feeling okay? You dont look well.


Youre worried sick about him. You wipe the sweat off his cheeks; his wavy hair is all wet as well. Last night it was you who got airsick, and he had to look after you. The tables seem to have turned completely now. 


I dont think we should advance any further. We should go back and discuss with Maddox for a better plan . . . Ahhhhhhh!


All of a sudden, Pineapple seems to lose her balance, and all of you are dropping downward for a second or two. She flaps her winged forelegs hard to stop herself  from falling. She manages to get back in the air but still has a hard time coordinating her voluntary muscles. 


You think of the elven queens words: //First their body turned cold and rigid. Then coma took their memories and eventually their senses. They became nothing but a dead stone.//


You pale. The Bane is indeed taking its toll on both Seaghn and Pineapple, even when you are such a far distance away. No, this cannot be! You wont allow this to happen again.


[[Next|heartsworn05]]</tw-passagedata><tw-passagedata pid="254" name="heartsworn05" tags="" position="3700,2200" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Determined, you shout to the wyvern. 


Pineapple, we have to turn off! Please, its too dangerous for you two. Please turn off! 


She turns off as you have demanded. Youre not sure if she does it because she understands what youre saying, or she does it because she wants to get out of here as well.


What are you doing?! We cant leave right now! Its so close! Seaghn brushes your hand away and takes the reins to direct the wyvern back toward the waterspout.


Have you lost your mind!? This is no game of heroes, Seaghn. You might literally **DIE**!&quot; 


You yell at him, feeling only frustration and despair. You try to snatch the reins from his hands but to no avail. You can only watch the three of you get closer and closer to the Bane. Seaghn is like Icarus who insists on flying toward the sun knowing that he shouldnt. The only difference is that at least Icarus doesnt drag his dad Daedelus along with him. Youre certain that youre going to die along with Seaghn!


Youll see, Alexia! I know exactly what I should do! Once I get to the Bane, the scabbard will fall off, and then I swing**Ta-da**! The curse is //overrr//!! Easy peasy!


Yeah, right, sure. Why not? You smack your forehead. Closing your eyes, you wait for the inevitable doom.


[[Next|heartsworn06]]</tw-passagedata><tw-passagedata pid="255" name="heartsworn06" tags="" position="3700,2325" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
What does it feel like to fall from the sky? Youre actually surprised at how familiar the feeling of falling is when the waterspout strikes Pineapple and Seaghn, and then you all fall. Perhaps its because of your dreams. You dream of falling from a high place a lot, yet in all these dreams you dont really hit the ground. You always wake up before you do. This time, you only hope that death is faster than pain.


***Splash!***


***Splash!!***


***Splaaaaaaash!!!***


Thank goodness! You land in water! You cant feel more glad that you learned how to swim last summer and that you were good enough to even get a certification in lifeguarding!


[[Next|heartsworn07]]</tw-passagedata><tw-passagedata pid="256" name="heartsworn08" tags="" position="3700,2575" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Up above, something hidden inside the waterspout is letting out a series of terrifying shrieks. The funnel is twisting in every direction, seemingly looking for something. It doesnt take long before it figures out where to go. ***Its making its way toward you!*** 


What Seaghn did just now must have offended the Bane! You need to take cover, like, now! You see the cabin from not afar. Though shabby from lack of maintenance, its still better than nothing!


Cmon, Seaghn. We need to move. Dont worry. Pineapple seems fine for now. 


You fling one of his arms around your shoulder and carry half of his weight. As you stumble your way to the cabin, you hear him whisper. 


S-sorry . . .


(link-reveal-goto: &quot;Comfort him.&quot;, &quot;comfort&quot;)[(set: $seanfriendship to it +1)(set: $empathy to it +1)]
(link-reveal-goto: &quot;Scold him.&quot;, &quot;scold&quot;)[(set: $agression to it +1)]
(link-reveal-goto: &quot;Say nothing.&quot;, &quot;nothing&quot;)[(set: $indifference to it +1)]</tw-passagedata><tw-passagedata pid="257" name="heartsworn07" tags="" position="3700,2450" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You swim to the surface and gasp for air, and then you dive down to reach for Seaghn, who drops somewhere near you. Hes struggling, unable to find a way to push himself up. 


You approach him from behind and grab underneath his arms. You kick your legs and return to the surface. The shore is not too far away, so you get you both ashore without too much trouble. Lying on the ground for a little rest, youre glad that Seaghn is only a child. If it were Maddox, you might not be able to save him.


Seaghn is still conscious, coughing water out of his lungs next to you. However, hes trembling all over, and from the physical contact earlier, his limbs are rigid as hell. Hes cursed. You look up, trying to force your tears back. Its no use crying now. 


You take a look around and gladly find that Pineapple manages to get out of water too. She must be sick from the curse as well, lying paralyzed on the ground, but shes definitely breathing.


[[Next|heartsworn08]]</tw-passagedata><tw-passagedata pid="258" name="comfort" tags="" position="3600,2700" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
 . . . Its ok. Were cool! Cmon, hold tight! Here, this way . . . youre doing fine!


Its no use rubbing his nose in the dirt. Hes just a kid. The most important thing is youre both alive . . . well, hes cursed, but youll figure out the way to cure him. 


[[Next|cabin01]]</tw-passagedata><tw-passagedata pid="259" name="scold" tags="" position="3700,2700" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
. . . I dont want to say I told you so, but //I told you so//!!! This is no game, and youre no hero! There are better ways to die, and I certainly dont want my life to end in the hands of some impetuous elf prince whos ardent for some //desperate glory//!


 . . . 


It doesnt make you feel any better to rub his nose in the dirt, and you dont really want to be this harsh on a kid. However in the end youre just being you, a total asshole.


[[Next|cabin01]]</tw-passagedata><tw-passagedata pid="260" name="nothing" tags="" position="3800,2700" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
 . . . 


You want to yell at him, saying I told you so. You also want to ruffle his hair, saying its alright. However in the end you utter nothing and just let it slide.


Whats the point of comforting or scolding him? Damage is done, and hes cursed. Nothing you say will help now.


[[Next|cabin01]]</tw-passagedata><tw-passagedata pid="261" name="cabin01" tags="" position="3700,2825" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The cabin has a large hole on the roof, which allows the orange sunlight to leak in. Once you help Seaghn sit against a wall, you start to inspect the cabin. 


According to Maddox, it once belonged to Sir Benjamin Doyle. He used to store fishing gears here. When he was younger, during the summers he would invite his close friends over for a competition to see who could come up with the best summer poem or horror story. 


However, ever since a dreadful kelpie was relocated to the nearby lake during Winnifreds time, people stopped coming here. Its been practically abandoned for centuries now. 


You spot in the corner an open suitcase, inside which is a stack of yellowed and decayed papers. You flip through them; theyre all Sir Benjamins letters to his friends. Most of them are hard to read due to the faded ink and termites. You pick up the only one that is legible.


July, 14th, 1827 . . . Dear //Lexie// . . . 


You pause, a bit stunned. 


Your parents used to call you Lexie as well.  Shaking your head, you read on.


[[Next|cabin02]]</tw-passagedata><tw-passagedata pid="262" name="cabin02" tags="" position="3700,2950" size="100,100">{
(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
(char-style: via (text-style:(either:&#39;none&#39;,&#39;blur&#39;)))[//November, 14th, 1827


Dear Lexie,


It has been a long time since our last correspondence. How have you been? How are Timothee and Charlotte? Me and Jane are well, and so are our Winnie and Bridgie. Speaking of Winnie, your Unsettling Fae Verses seems to cast a spell on her. Every night, she has to read at least two pages before going to sleep. She carries it with her everywhere she goes, even forcing the fae in the sanctuary to listen to her recitation. Could you imagine that? Among all, she likes Seven Teardrops the most. She adapted it into a short play, in which she herself played the selkie and her poor sister the heartless mistress! Hope you dont mind her taking liberties with your work.


Regarding the thing you were saying last time, I did a considerable research, and my answer is still negative. No, Im afraid that they dont exist anymore. So whatever that thing you rescued is, it must be a normal . . .//]


[[Next|cabin03]]</tw-passagedata><tw-passagedata pid="263" name="cabin03" tags="" position="3700,3075" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Then the letter stops here; the rest is totally blank. Sir Doyle didnt finish it back then. You wonder what happened. 


Did he get caught up by something else and forget to resume his writing? 


Or was the Lexie he was writing to suddenly //gone//, so that there was no need of writing to her anymore? 


Somehow, a chill crawls up your spine.


[[Next|cabin04]]</tw-passagedata><tw-passagedata pid="264" name="cabin04" tags="" position="3700,3200" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Thud!! 


Something falls off from the hole on the roof, almost squishing you like a bug. 


Thanks to your reflexes, you roll to the other side of the cabin and dodge just in time. 


Hands on your heart, you take a look at the thingits an entire bloody tree! 


//What the heck!?//


You want to wait for the Bane to calm down and then sneak back to the mansion, but it shows you its everlasting rage! The wind is howling like crazy outside, thrashing the poor cabin relentlessly. It might fall apart and crash you two in no time.


[[Next|cabin05]]</tw-passagedata><tw-passagedata pid="265" name="cabin05" tags="" position="3700,3325" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Clenching your fists, you feel powerlessness and rage. 


You just dont want anybody to die, but why is it so hard to achievedo? In the end you couldnt protect Dag, Seaghn, or any other faeries, just as you couldnt stop death for your parents. 


You unfasten Heartsworn from Seaghns belt and hold it in your hands. Feeling its weight, you ponder over the hazel treewomans words.


(if: $aggression &gt;= 5)[What do I want to cut through? Certainly the Banebut do I want to hurt him? . . . I dont know. Maybe.](else:)[What do I want to cut through? Certainly the Banebut do I want to hurt him? Certainly not. I dont want anybody to die. Love makes one want to protect, and hate makes one want to hurt . . . but what will happen when these feelings collide though?]


[[Next|cabin06]]</tw-passagedata><tw-passagedata pid="266" name="geis" tags="" position="3350,3600" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You choose to cut through the geis, which is the shackles that restraint the Bane from having conflicting actions or feelings. You think its the right thing to do because you hope that it turns back to what it used to be, a faerie. 


As you slice the dense dark mist with Heartsworn, the figure within it quivers and shrieks in agony. You almost think you hurt it physically. The vaporous creature starts twisting itself, slowly forming into something else. 


First are the sleek black and watery eyes, into which you are pulled as if crossing to another dimension. There, in this stream of consciousness, you play a different role. You are the Bane itself, seeing things from its point of you. Scenes from its past jump randomly.


[[Next|geis02]] </tw-passagedata><tw-passagedata pid="267" name="love" tags="" position="3600,3600" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You choose to cut through love, as it is one of the conflicting factors that violates the geis. You think its the right thing to do. 


As you slice the dense dark mist with Heartsworn, the figure within it quivers and shrieks in agony. You almost think you hurt it physically. 


Images start to flash into your head. You seem to be sucked into another dimension by an uncontrollable force. There, in this stream of consciousness, you play a different role. You are the Bane itself, seeing things from its point of view. 


[[Next|love02]] </tw-passagedata><tw-passagedata pid="268" name="memories" tags="" position="3875,3600" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You choose to cut through the memory, which will wash away everything from the Banelove, hatred, as well as struggles. You think its the right thing to do because you hope that it can start over with a new life, setting aside all its woes and troubles. 


As you slash through the dense dark mist with Heartsworn, the figure within it quivers and shrieks in agony. You almost think you hurt it physically. The vaporous creature starts twisting itself, slowly forming into something else. 


First are the sleek black and watery eyes, in which you see nothing but a blank white sheet. Then the head, the torso, and the limbs. The strong wind accompanying the transformation blows Heartsworn off your hands. It falls to the ground.


[[Next|memories02]] </tw-passagedata><tw-passagedata pid="269" name="bane" tags="" position="4050,3600" size="100,100">{
(display: &quot;setblood&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You choose to cut through the Bane itself, as you think of what Seaghn said earlier: //Only by ending a faeries life can their magic be gone.//


You think its the right thing to do because once its dead for good, itll no longer pose any threat to anyone. Once you end his life, his faerie magic should wear away and so should his geis. Dag will recover. Those wild swamp trolls and your fae wards will recover. Sean and Pineapple will be fine again.


This is the first time you killed something other than bugs . . . or your ***second time***? The death of your parents was never an accident.


Its not hard to leave holes on things, be it some //tires// or //flesh//.


Still, your hands tremble as Heartsworn strikes the dense dark mist. The figure within it quivers and shrieks in pain. You screw the blade and then pull it out with all your might. Blood dark as ink splatters your face and then dribbles down your neck, seeping into your shirt as if poisonous twining vines. 


The vaporous creature starts twisting itself, slowly forming into something else. 


[[Next|bane02]] </tw-passagedata><tw-passagedata pid="270" name="geis02" tags="" position="3350,3725" size="100,100">{
(display: &quot;setwhite&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
(char-style:(text-style:&quot;fidget&quot;))+(text-style:&quot;buoy&quot;)[//Blood. Flesh. Pelts. Cracking of spines and skulls. Slicing of knives through fles and skin. Dripping blood on the ground and in water. White being painted red. Ice and snow being melted by warm blood. Shrieking, whimpering, and then silence, muffled by human laughter. The smell of iron, and the smell of despair. Mother, father, brother and sister, beat to death and none alive. You took cover behind a rock but was discovered. A sharp thing penetrated you, yet you managed to flee into water. 


Drifting in water, drifting in nightmares. Until a warm hand woke you up.


You vowed to be an avenger, so you did the same thing to herlured, smashed, nibbled, flayed, and discarded. 


Yet you kept your favorite part of her as you realized your affection for her. Too late.


How could you . . . how dare you . . . she was one of them . . . no, she did nothing!


(text-style:&quot;rumble&quot;)[Ahhhhhhhh!!!!!!!!!!]//]
{
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setblood&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setwhite&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setblood&quot;)]]
}

[[Next|geis03]] </tw-passagedata><tw-passagedata pid="271" name="geis03" tags="" position="3350,3850" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Such is its pain that you have to dart away from those despaired eyes, or youre afraid you might be stuck there forever. 


You drop Heartsworn and cover your ears with both hands, waiting out its afflicting wailing. 


The rest of its body continues to formthe head, the torso and then the limbs. As the mist completely dissipates, crouching in front of you, a withered, skinny young lad in a white furred robe huddles himself up. 


His straight hair, a purply-black with a silvery sheen, resembles the color of the night sky during a full moon, draping down from his shoulder blades and covering his entire body. Though a teen, he seems to shrink into a small child, disoriented and drowning in the sea of regret. 


[[Next|geis04]] </tw-passagedata><tw-passagedata pid="272" name="geis04" tags="" position="3350,3975" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You . . . 


You have imagined before what to say to the Bane after you defeat him. You would grab it by the collar and smack it hard in the face or noseeven kick its balls if it had ones. You would question why it hurt your friends, and then you could teach it the proper way to let out bad feelings instead of taking them out on others. However, when the Bane is right in front of you, you have nothing to say. 

What should you do now? Now that you have defeated him, should you relocate him somewhere in the sanctuary or release him into the wild? Still, youre not sure what kind of sea faerie he is. Like Maddox and Seaghn, he looks very human to you. 


Hey, my name is Alexia, and Im the keeper of this sanctuary. Sorry to strike you with a sword earlier. Emm, whats your name? Do you want me to . . .


The Bane rises up, wobbling his way toward the lake. He doesnt seem used to walking upright with legs and keep stumbling. Every time he falls down, he gets back to his feet. 


[[Next|geis05]]</tw-passagedata><tw-passagedata pid="273" name="geis05" tags="" position="3350,4100" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
D-do you want some water? 


You think as a sea faerie he may need moisture from water, so you advance, wanting to help him get to the lake. However, he flings away your arms and gives you a cold look. His watery black eyes are full of sorrow.


No . . . 


You shake your head. You recognize that feeling of despair, and you have a sudden premonition that his story may not end well despite your wish that he lives.


The cadaverous lad struggles his way on the timber boat dock, whose end leads to the center of the lake. When reaching the end, he lets out a long sigh of relief, as if reaching the end of his world where he could finally rest. Then something sucks away all his strength, he lets himself fall face forward into the water. He sinks quickly and never returns to the surface. 


The last bit of him you see is that hollow, white fur robe of his, floating on the water surface and slowly dissolving into bubbles. 


[[Next|geis06]] </tw-passagedata><tw-passagedata pid="274" name="geis06" tags="" position="3350,4225" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
//Oh, no. What did I do?//


Tears swelling up from your eyes, you collapse on both knees and cover your mouth in terror.

It takes you quite some time to calm down. Then you force yourself to check on Seaghn. On your way, you pick up Heartsworn from the ground, but something is stuck on the edge of the blade. At first glance, it looks like a piece of decayed paper, like the one you found in the cabin. You take it off from the sword for a closer look.


Greyish pink, it is thin and feels very smooth, but the texture isnt like any kind of paper you have ever touched before. Furthermore, you used to work in a printing store, so that says something about its novelty. You dust the dirt off the piece of paper, wondering how it reminds you of the feeling of when you wiped the sweat off Seaghns forehead . . .


[[Next|geis07]] </tw-passagedata><tw-passagedata pid="275" name="love02" tags="" position="3600,3725" size="100,100">{
(display: &quot;setlove&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
//(char-style:(text-style:&quot;fidget&quot;))[A gentle hand was rubbing you on the head. The warmth of the hand melted the sea salt, and you couldnt help but lick it off the hand. 


You hear the womans laugh, so full of life and joy that you would never be tired of hearing. 


The woman threw a ball afar, gesturing for you to retrieve it, but you chose to ignore the ball and threw yourself into the loving arms of the woman. 


Lightly, you kissed her with the tip of your moist nose and then slid away as fast as possible, too bashful to see her reaction. 


The woman was surprised, as this was the first time you displayed this degree of affection. 


You hid your face under a rug so as to not see her, but soon, you were lured once more by her leniency and came back to her embrace.


How could one be so merciful? She melted your heart like sunshine in the winter and broke the fortress you had built to trap yourself. You just wanted to put everything behind and enjoy every second of your life with her. 


**Yet . . . why didnt you?**]//
(t8n-delay: 60s)+(t8n:&quot;fade&quot;)[(display: &quot;setblood&quot;)]

[[Next|love03]]</tw-passagedata><tw-passagedata pid="276" name="love03" tags="" position="3600,3850" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You shout as you slice through the dark mist, and Heartsworn is bounced back, flying out of your hand and out of reach. 


In the center of the mist, a dark silhouette composed of small particles forms. 


What catches your attention first is its pair of red eyes, full of resentment and rage that threatens to kill and destroy all signs of life it comes across.


The shadow approaches you, and you can feel its blood thirst even when you cant figure out its facial expression. 


Loathe, dejection, and despair seep into your mind, making your head ache so much that you feel your life slowly drained away by all those intense sentiments . . .


(if: $maddoxromance &gt;=3)[[[Next|lovemad01]]](else)[[[Next|lovenomad01]]]</tw-passagedata><tw-passagedata pid="277" name="lovemad01" tags="" position="3675,3975" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Alexia! 


A familiar voice cries out from behind. You then feel two strong arms round up tight around your waist, and somehow youre lifted off the ground! 


You unconsciously grab the arms and turn your head.


Maddox! You can fly??? 


You glance over his shoulder and see a pair of . . . translucent insect WINGS. Before you can see any better, he bends your head over. 


Pixies do have wings; its up to us whether to show them or not. Anyway, what are you going to do with that abomination?


His pointy ears turn red, almost as vibrant as his hair color. You decide to let up on the wings and save him from dying of embarrassment. He takes you inside the cottage and gently puts you on the ground.


Something clicks the moment you see Seaghn.


The merfolks artefact! How could I forget about that! It should be able to hold the Bane now that Heartsworn has weakened its power!


[[Next|lovemad02]]</tw-passagedata><tw-passagedata pid="278" name="lovemad03" tags="" position="3675,4225" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You snuggle up to him and hug him as tightly as you can, still trembling like a rustling leaf. The Bane itself is not horrifying, but the emotions it evokes in you are something that you never wish to recall. Maddoxs shoulders tighten, temporarily stunned by your bold move, but he soon eases and comforts you with reassuring pats on the back.


You did great, lass. Now, let&#39;s go home. 


Maddox smiles and releases you. You feel a bit embarrassed, but grateful for his presence. At last, everything is over.


You go pick up Heartsworn, but something is attached to the edge of the blade. At first glance, it looks like a piece of decayed paper, like the one you found in the cabin. You take it off from the sword.


Greyish pink, it is thin and feels very smooth, but the texture isnt like any kind of paper you have ever touched before. Furthermore, you used to work in a printing store, so that says something about its novelty. You dust the dirt off the piece of paper, wondering how it reminds you of the feeling of when you wiped the sweat off Seaghns forehead . . .


[</tw-passagedata><tw-passagedata pid="279" name="memories02" tags="" position="3875,3725" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
After the dark mist dissipates, in front of you, a beautiful young lad dressed in a white furred robe is sitting on the ground. His straight hair, purply-black with a silvery sheen, resembles the color of the night sky during a full moon, draping down from his shoulder blades and covering his entire body. 


He gets up and takes a step forward. However, he seems unfamiliar with his own legs and keeps tripping over. Hes inspecting the surroundings, and the utter confusion in his watery eyes shows how disoriented he feels. Then he notices you and wobbles his way toward you. The next second you watch this handsome lad fall flat on his face on the ground. His robe is rolled up to his hips, revealing his private parts that shouldnt be showing in the public. 


You shut your eyes right away. //I didnt see anything!//


[[Next|memories03]] </tw-passagedata><tw-passagedata pid="280" name="memories03" tags="" position="3875,3850" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
What should you do now? Now that you have defeated him, should you relocate him somewhere in the sanctuary or release him into the wild? Still, youre not sure what kind of sea faerie he is. Like Maddox and Seaghn, he looks very human to you. 


Trying not to look, you advance toward him.


Excuse me . . .


Upon your approach, the lad gets back on his feet (and thankfully his robe gets back to his ankles as well). He observes you warily, like a startled bunny. If you hadnt witnessed it with your own eyes, you would never believe that this lad used to be the dark power impending in the sanctuary. 


Sensing you have no ill intention, he lets down his guard.


Who are you? Where is this place? How did I get here? 


You smack your forehead. //What else do I expect? I took away his memory!// 


[[memories04]] </tw-passagedata><tw-passagedata pid="281" name="memories04" tags="" position="3875,3975" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Youre in the Fourth Sanctuary, and Im the keeper Alexia. Dont worry. No one is going to harm you here. D-do you remember anything at all? What faerie are you and where are you from?


I-I dont know. I only remember swimming in the vast ocean, hunting for fish, avoiding sharks and bears. I . . . I remember dancing with others like me under the moonlight, toes buried in sands. And then I left without telling anyone . . .  


He  seems obnoxiously troubled by memory loss, smacking his head over and over.


Hey! 


You rush to his side, trying to stop him from hitting himself. However he flinches away from you, as if your touch is a heated branding iron. Eh? Why do I look like the bad guy here?


You give up and step backward. You think of Maddox and try to imitate his soothing voice. You comfort the lad, Hey, its alright. You can stay here until you figure out who and what you are. This place is your home until you remember yours.


[[Next|memories05]] </tw-passagedata><tw-passagedata pid="282" name="memories05" tags="" position="3875,4100" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
He loosens up at your words, but he soon shakes his head.


I need to go. I need to return to the sea, thats where I belong even if I dont know the exact place.


Alright. I can take you to the sea if thats what you want.


He doesnt say anything but stares at you with those longing watery eyes. You sigh, gesturing to him to wait. You pick Heartsworn from the ground. Just when youre going to put it back into its scabbard, you find something stuck on the edge of the blade. At first glance, it looks like a piece of decayed paper, like the one you found in the cabin. 


You take it off from the sword for a better look. Grayish pink, it is thin and feels very smooth, but the texture isnt like any kind of paper you have ever touched before. Furthermore, you used to work in a printing store, so that says something about its novelty. You dust the dirt off the piece of paper, wondering how it reminds you of the feeling of when you wiped the sweat off Seaghns forehead.


You look to the direction of the lad and quiver. 


You decide not to ask anything. He wont remember anyway.

</tw-passagedata><tw-passagedata pid="283" name="geishome01" tags="" position="3925,450" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Morning, everyone. 


Maddox walks into the dining room. He looks much healthier than before. He helps himself to bread and honey on the counter and sits down next to you. Youre glad that gloom no longer shows on his face now, thanks to increased social interaction.


How was your night, lass?


You let out a bitter smile and shake your head. 


Still the same.


You have the same nightmares ever since the day you witnessed the Banes suicide. You have a hard time falling asleep at night because of them. On some nights, youll dream of being bathed in the blood and gore in his flashbacks. 


Sometimes you are one of the victims, but for most of the time you are the victimizer, staining your hands with his blood. Sometimes, the blood and gore merge with the brutal death scene of your parents. 


On the others, youll dream of that withered young lad who throws himself tirelessly again and again into the water, and that sometimes YOU become the body of water hes plunging himself into. You see him guttering, choking and drowning in your face. Then youll wake up early in the morning, soaked in sweat and tears. 


{
(if: $seanfriendship &gt;=3 and $empathy&gt;=5)[[[Next|sheh]]]
(if: $seanfriendship &gt;=3 and $aggression&gt;=4)[[[Next|shah]]]
(if: $seanfriendship &gt;=3 and $indifference&gt;=3)[[[Next|shih]]]
(if: $seanfriendship &lt;=2 and $empathy&gt;=5)[[[Next|sleh]]]
(if: $seanfriendship &lt;=2 and $aggression&gt;=4)[[[Next|slah]]]
(if: $seanfriendship &lt;=2 and $indifference&gt;=3)[[[Next|slih]]]
}</tw-passagedata><tw-passagedata pid="284" name="eisner01" tags="" position="4100,975" size="100,100">{
(display: &quot;setnight&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxandhislove&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxandhislove&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxandhislove&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxandhislove&#39;, &#39;loop&#39;, true)
]
}
That night in your bedroom, youre checking your emails. These days youre busy saving some faerie arses so you havent had the chance to. However, there arent too many important emails. Most of them are greetings from your university friends and professors. 


//Oh, and the emails from the Royal Society.// 


After what Maddox has said about the RSPF, you dont know what to think of them. Hesitant, you click their latest email titled Happy Eisner Festival! 


There is a gentle knock on the door. You know who it is.


Come in!


[[Next|eisner02]]</tw-passagedata><tw-passagedata pid="285" name="eisner02" tags="" position="4100,1100" size="100,100">Just to check on you,  lass. What are you doing? 


Maddox hands you a mug of warm milk, staring at your laptop curiously. 


Though not as new to the human world as Seaghn, he was still missing a 100-years of the evolution of human technology. 


You share your screen with him, and together you two finish reading an article on Lady Eisners life attached in the mail. The guide has mentioned her as the founder of the RSPF and even a close friend of Sir Doyle, and she went missing one day. 


//So mysterious!//


You look through the schedule of activities for Eisner Festival and get really interested in the Reading Session with Edward Rensie on 5/21. Hes the descendant of Lord and Lady Eisner and will be reading her poetry and answering questions from the audience. Sadly, the reading session was yesterday. 


[[Next|eisner03]]</tw-passagedata><tw-passagedata pid="286" name="memories06" tags="" position="3875,4225" size="100,100">{
(display: &quot;setnight&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The moment you defeated the Bane, Seaghn and Pineapples temperatures stopped dropping. They soon got better. You introduced the lad to the elf prince, and he offered you a ride, flying you to the nearest beach on Pineapple. As soon as the wyvern hovered over the sea, the lad merrily plunged himself into the middle of the ocean as if skydiving. Swells washed away all traces of him. 


In the end, you still didnt know what species he was. Seaghn said that he couldnt be a merrow because the merfolk dont walk on land. However, he couldnt pinpoint what he was as he himself grew up in the mountains. Whatever the lad was, you truly believe that he is now living a new happy life. 


After sending the lad home, you came home late at night. 


The mansion became significantly cleaner than before you left the house, so you knew Dag was okay. 


When you greeted him with a face full of tears and snot, the old brownie just stiffened.


There, there. 


He did his best to squeeze out a word of comfort and then vanished. However, you do notice that he shows himself more often in the house now, which may signify his approval of your ability as the keeper.


[[</tw-passagedata><tw-passagedata pid="287" name="love04" tags="" position="3600,4375" size="100,100">{
(display: &quot;setnight&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The evening you came home after defeating the Bane, the mansion became significantly cleaner than before you left the house, so you knew Dag was okay. 


When you greeted him with a face full of tears and snot, the old brownie just stiffened.


There, there. 


He did his best to squeeze out a word of comfort and then vanished. However, you do notice that he shows himself more often in the house now, which may signify his approval of your ability as the keeper.

</tw-passagedata><tw-passagedata pid="288" name="lovehome01" tags="" position="4075,450" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Another day on a good Friday, but another mess is made today. Featherhead is now out of the cellar, the new prisoner is a sour feller! 


Cmon Dag, no need to diss me like that. 


Yeah Dag, you gotta thank Alexia and my Heartsworn!


Shush boy! Aint no talkin to ya! Dag replies to Seaghn with a snort. Much to your relief, there is no visible after-effect of the curse, and Dag seems as sassy as he has always been. 


{
(if: $seanfriendship &gt;=3 and $empathy&gt;=3)[[[Next|sheh]]]
(if: $seanfriendship &gt;=3 and $aggression&gt;=3)[[[Next|shah]]]
(if: $seanfriendship &gt;=3 and $indifference&gt;=3)[[[Next|shih]]]
(if: $seanfriendship &lt;=2 and $empathy&gt;=3)[[[Next|sleh]]]
(if: $seanfriendship &lt;=2 and $aggression&gt;=3)[[[Next|slah]]]
(if: $seanfriendship &lt;=2 and $indifference&gt;=3)[[[Next|slih]]]
}</tw-passagedata><tw-passagedata pid="289" name="memhome01" tags="" position="4225,450" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Morning, everyone. 


Maddox walks into the dining room. He looks much healthier than before. He helps himself to bread and honey on the counter and sits down next to you. Youre glad that gloom no longer shows on his face now, thanks to increased social interaction.


{
(if: $seanfriendship &gt;=3 and $empathy&gt;=3)[[[Next|sheh]]]
(if: $seanfriendship &gt;=3 and $aggression&gt;=3)[[[Next|shah]]]
(if: $seanfriendship &gt;=3 and $indifference&gt;=3)[[[Next|shih]]]
(if: $seanfriendship &lt;=2 and $empathy&gt;=3)[[[Next|sleh]]]
(if: $seanfriendship &lt;=2 and $aggression&gt;=3)[[[Next|slah]]]
(if: $seanfriendship &lt;=2 and $indifference&gt;=3)[[[Next|slih]]]
}</tw-passagedata><tw-passagedata pid="290" name="eisner03" tags="" position="4100,1225" size="100,100">What do you think happened to her? Could she have been taken to an elven court just like Seaghns mother was and have lived there ever since?


Youre not thinking about going to their headquarters, are you? 


Nah. 


You respond, feigning nonchalance. However, deep down you really want to go. Aside from the reading session, there are a lot of other fun activities. Unfortunately, that day youre invited to attend a revel hosted by the swamp trolls in the neighboring wetland. Theyre thanking you for breaking the curse. If you could go to the reading session, you would want to ask Mr. Rensie about Lady Eisners disappearance. There must be some secrets not open to the public.


Your gaze wanders off to the sheet of greyish pink paper hung from the back of your chair. A lingering question you dared not ask before now emerges in your mind.


***What is it though?***


(link-reveal-goto: &quot;Next&quot;, &quot;endch3&quot;)[(set: $erensie to true)]</tw-passagedata><tw-passagedata pid="291" name="we01" tags="donotshowinventory" position="4350,450" size="100,100">{
(display:&quot;setcard&quot;)(track: &#39;poeticjustice&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Yesterday, some of us were surprised they calledour brothers and sisters, all college and university students now.


It was quite peculiar that they somehow all decided to call on the same day. They said a forlorn memory suddenly flooded back, and they felt a desperate need to tell us about it, about that pearl-white pony they bumped into by a lake inside the Doyle estate.


The estate once belonged to Miss Woods, who passed away a few weeks ago. Our parents and grandparents referred to her as a fallen monument. She was the last Doyle, or at least that was what we thought until Miss Twine came.


It was about 10 years ago when Miss Woods was last seen in public, and soon after that she was hospitalised for another decade before her actual demise. Our brothers and sisters were around 11 then.


[[Next|we02]] </tw-passagedata><tw-passagedata pid="292" name="endch3" tags="" position="4100,1350" size="100,100">{
(display:&quot;setwhite&quot;)(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;chapterend&#39;, &#39;isplaying&#39;))[
    (track: &#39;chapterend&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;chapterend&#39;, &#39;fadein&#39;, 3)
	(track: &#39;chapterend&#39;, &#39;loop&#39;, true)]
}
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;END OF CHAPTER III&lt;/span&gt;&lt;/span&gt;
(track: &#39;chapterend&#39;, &#39;mute&#39;, false)
&lt;==&gt;
The story isnt over yet. The mysteries regarding the Bane and Lady Eisner are waiting for you to unfold.


What faerie species could the Bane be? Why did the Bane carry the sheet of paper with him? What was the sheet of paper made of?


What happened to Lady Eisner, founder of the RSPF? 


You cant help but has the feeling that these two matters are connected together. Could you find other clues?


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank3&quot;)I missed the //Reading Session with Edward Rensie//. Could I write to him though? I should check the RSPFs latest email.]
</tw-passagedata><tw-passagedata pid="293" name="draft" tags="nosave" position="175,2075" size="100,100">---
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;Draft&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;
(force-input-box:&quot;===XXXXXXXXXXXXXX===&quot;,9,&quot;Dear Professor Edward,

Hello from the outside~~~~



Best regards,
Alexia

---
Alexia Twine
Keeper
Faerie Sanctuary, DSGN 4&quot;)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank3&quot;)I think this will do. I shall look for Professor Rensies email address and send it to him.](set: $time3 to it +1)
(if: $time3 &gt; 5)[(display: &quot;dumb3&quot;)]</tw-passagedata><tw-passagedata pid="294" name="ablank2" tags="" position="2100,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/AOAamsY.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="295" name="aangry2" tags="" position="2200,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/twFTwpB.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="296" name="ascared2" tags="" position="2300,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/sLqHrUx.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="297" name="awtf2" tags="" position="2900,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/yJxrC61.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="298" name="asad2" tags="" position="2400,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/KXPEb9I.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="299" name="ashocked2" tags="" position="2800,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/fonqBtc.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="300" name="ahappy2" tags="" position="2600,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/i9UqkKo.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="301" name="ashy2" tags="" position="2500,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/2EV0v7C.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="302" name="apleased2" tags="" position="2700,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/i9UqkKo.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="303" name="airritated2" tags="" position="3000,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/FO55eNc.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="304" name="atired2" tags="" position="3100,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/4iA40vr.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="305" name="abereft2" tags="" position="3200,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/KS94PRo.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="306" name="ablank3" tags="" position="2100,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/Q1OwUAE.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="307" name="ascared3" tags="" position="2300,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/PY1G9wM.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="308" name="aangry3" tags="" position="2200,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/u59zJVr.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="309" name="asad3" tags="" position="2400,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/7is2PRW.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="310" name="ashocked3" tags="" position="2800,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/r37jEdv.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="311" name="ashy3" tags="" position="2500,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/eOfsiy1.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="312" name="ahappy3" tags="" position="2600,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/wTMfSIK.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="313" name="apleased3" tags="" position="2700,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/QOKGXCu.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="314" name="airritated3" tags="" position="3000,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/rWhOvCY.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="315" name="awtf3" tags="" position="2900,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/w770hT2.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="316" name="atired3" tags="" position="3100,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/c8G4idG.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="317" name="abereft3" tags="" position="3200,200" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/mUEM6OM.png&quot; class=&quot;small&quot;/&gt;
***Alexia***</tw-passagedata><tw-passagedata pid="318" name="dumb3" tags="" position="4100,1475" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;HINTS&lt;/span&gt;&lt;/span&gt;
You should pay attention to . . .
* The mail box. Check the third email from the RSPF. Look for Professor Rensie&#39;s email address.
* Copy the content you got in the force-input box from the draft section. Literally send it to Professor Rensie using Gmail/whatever email services of your choice.
* If Professor Rensie doesn&#39;t reply within 24 hrs, chances are that your email or his email get blocked. If so, please provide a screenshot to the current SLC Designer, that can prove you&#39;ve actually sent him the request email.
* Whatever problems you have regarding the puzzles or tasks, do not send emails to Luisa and Angela because by the time you play this remake, we&#39;re long gone! Please contact the current SLC Designer or the SLC.</tw-passagedata><tw-passagedata pid="319" name="maild" tags="nosave" position="175,1600" size="100,100">---
(track: &#39;click&#39;, &#39;play&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[Greetings, members of RSPF and participants! 

Todays reading session with Dr. Edward Rensie has ended successfully. As requested, were posting the highlights of the session, so that fans who werent able to participate wouldn&#39;t miss his wonderful recitation! We also include an excerpt of the QA session where he shed light on Lady Eisners mysterious disappearance!


Listen to the Q&amp;A session transcription.


Best,
Anglea and Luisa
Ministry of Administration, RSPF]
(display: &quot;seventeardrops&quot;)</tw-passagedata><tw-passagedata pid="320" name="authors" tags="" position="1875,0" size="100,100">&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;AUTHORS&lt;/span&gt;&lt;/span&gt;
&lt;==&gt;

**Luisa Cheng ** 
* ESL Designer Numbah 1, SLC FJCU (2017-2021)
* MA English Literature, Fu Jen Catholic University, Taiwan (2018-2020)
* My jam: reading, gaming, drawing, fantasy literature, poetry, anything about faeries, poetic justice, fooling around with my cat
* Responsible for: scriptwriting, Twine programming, art/graphic design, web design
* Say something: I NEED A JOB!!!


**Angela Ko **
* ESL Designer Numbah 2, SLC FJCU (2017-2021)
* MA Gender Studies, University of Sussex, UK (2018-2019)
* MA Translation and Interpreting, Graduate Institute of Cross-Cultural Studies, Fu Jen Catholic University, Taiwan (2017-present)
* My jam: gaming, literature, research in humanities, true-crime documentary, bad puns and dad jokes, chilling with my snakes
* Responsible for: scriptwriting, Twine programming, audio editing
* Say something: I want a enjoyable job!</tw-passagedata><tw-passagedata pid="321" name="tobunker" tags="" position="3225,1225" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
The touch of something cold pulls you back to reality. 
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)

You realize that you have unconsciously wound up in Maddoxs bunker, where you put the stone statue, once Daggart the brownie. Running your hands over its cool surface, you dust the statue. 


Meanwhile, a hand is placed on your shoulder. You turn, looking into a gleaming silver eye full of resignation.


{
(if: $dagfriendship &gt;=1 and $maddoxromance is  -1 and $aggression is 3 and $empathy is 1)[[[Next|mlah]]]
(if: $dagfriendship &gt;=1 and $maddoxromance is  1 and $aggression is 3 and $empathy is 1)[[[Next|mlah]]]
(if: $dagfriendship &gt;=1 and $maddoxromance is  2 and $aggression is 3 and $empathy is 1)[[[Next|mlah]]]
(if: $dagfriendship &lt;=0 and $dagfriendship &gt;=-2 and $maddoxromance is  -1 and $aggression is 3)[[[Next|mlah]]]
(if: $dagfriendship &lt;=0 and $dagfriendship &gt;=-2 and $aggression is 3)[[[Next|mlah]]]
(if: $dagfriendship &lt;=0 and $dagfriendship &gt;=-2 and $maddoxromance is  2 and $aggression is 3)[[[Next|mlah]]]
(if: $dagfriendship &lt;=-3 and $maddoxromance is  -1 and $aggression is 4)[[[Next|mlah]]]
(if: $dagfriendship &lt;=-3 and $aggression is 3)[[[Next|mlah]]]
}</tw-passagedata><tw-passagedata pid="322" name="nobunker" tags="" position="3425,1225" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;seantheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You grab the Keepers Guide and come to the library. Though some may find it creepy to be surrounded with the portraits of dead people, somehow it soothes your nerves and helps you concentrate. 


You flip through the guide hoping to find any other faeries in the sanctuary that can help you solve the mystery of Heartsworn. 


You were hoping to find books or journals on fae artefacts in general, but weird enough, there aren&#39;t any other faer-facts related books in the mansion. 


You wonder where they go. //Did Dag hide them all?// 


A gentle tap on your shoulder pulls you back to reality. 


You turn, looking into a gleaming silver eye full of resignation.


{
(if: $maddoxromance &gt;=3 and $empathy&gt;=3)[[[Next|mheh]]]
(if: $maddoxromance &gt;=3 and $aggression&gt;=3)[[[Next|mhah]]]
(if: $maddoxromance &gt;=3 and $indifference&gt;=3)[[[Next|mhih]]]
(if: $maddoxromance &lt;=2 and $empathy&gt;=3)[[[Next|mleh]]]
(if: $maddoxromance &lt;=2 and $aggression&gt;=3)[[[Next|mlah]]]
(if: $maddoxromance &lt;=2 and $indifference&gt;=3)[[[Next|mlih]]]
}</tw-passagedata><tw-passagedata pid="323" name="mleh" tags="" position="3375,1425" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Maddox, welcome back. 


You say, without any sarcasm or rapprochement, simply relief. 


After Seaghns explanation, it dawned on you that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He had been heartbroken because of your ancestors and sacrificed far too much for this family. 


Maddox . . . have you ever thought about leaving?


The hand on your shoulder stiffens, and then slowly relaxes as if letting go of something important.


Voice soft as a sigh, Maddox responds gently. He seems careful with his wording, as if choosing diction for a poem. 


Yes. Regardless of my wish, I have chosen to stay. And now, this will forever be my home, for it has been so for the past decades.


Maddox . . . you dont need to do this. 


You try to find the right words to comfort this century-old pixie. 


You have already done enough for this family. I know that, and I believe Dag feels the same, too. Though I could really use your help in this difficult time, and youve been helping me ever since Dag . . . Sorry about the babbling. All I want to say is, you are free, Maddox. You are always free and can go anywhere you want.


A faint smile flickers across his face. He ruffles your hair with his hand, saying softly.


Your words are deeply appreciated, lass. Thank you.


Dont do that! Im not 10 anymore! 


You bend down to dodge his touch. A flush of embarrassment rises to your cheeks.


Youre certainly not, but Im over a century old. So strictly speaking, youre still a child in my eyes.


 . . . Fair enough. Cant argue with that.(if: $laoisestudy is true)[ Uncle Maddox.](else:)[A 100-year old dancing machine though, what a SIGHT! And those bold twerks, how did you do that? Cuz I really cant . . .] 


You grin with triumph seeing him choke up. Look whos more embarrassed now, ha!  You almost forget what it is like to chill out with friends.


So youre staying? I mean, Im more than happy if you are, but if not . . . maybe I can turn to the Royal Society for help . . . 


He raises an eyebrow, surprised at you mentioning the Royal Society. Lounging, he waits for you to share your plan. You tell him everything that happened tonight when he was away, except for the part where Seaghn asked you if he was your boyfriend.


[[Next|home04]]</tw-passagedata><tw-passagedata pid="324" name="mhah" tags="" position="3275,1525" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Look whos back. You attempt to hide the saltiness in your voice but fail. 


After Seaghns explanation, it dawned on you that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He had been heartbroken because of your ancestors and sacrificed far too much for this family. Maddox . . . have you ever thought about leaving?


The hand on your shoulder stiffens, and then slowly relaxes as if letting go of something important.

Yes. Voice soft as a sigh, Maddox responds gently. He seems careful with his wording, as if choosing diction for a poem. Regardless of my wish, I have chosen to stay. And now, this will forever be my home, for it has been so for the past decades.


Maddox . . . you dont need to do this. You try to find the right words to comfort this century-old pixie. You have already done enough for this family. I know that, and I believe Dag feels the same, too. Though I could really use your help in this difficult time, and youve been helping me ever since Dag . . . 


You take a deep breath to calm yourself down. Just ignore my babbling. All I want to say is, you are free, Maddox. You are always free and can go anywhere you want.


Maddox blinks, his eyelashes fluttering as if the flapping wings of a heron. His whisper is so soft that you almost miss it. 


Peradventure, . . . I have been, and shall always be . . . 


You feel like hes going to blurt out some really mushy stuff that will make you cringe, so you stop him before he can go any further.


Stop right there!(if: $menlao is true)[ Uncle Maddox!] 


(if: $menlao is true)[I thought you didnt want to call me uncle. ]Alright, just to let you know, your words are deeply appreciated, lass. Thank you. He puts on that smug grin again, with a wicked twinkle in his eyes . He looks all the more faerie-like whenever he does that.


You find it difficult to meet his gaze, so you dart away, feeling a warm flush upon your cheeks.


So youre staying? I mean, Im more than happy if you are, but if not . . . maybe I can turn to the Royal Society for help . . . 


He raises an eyebrow, surprised at you mentioning the Royal Society. Lounging, he waits for you to share your plan. You tell him everything that happened tonight when he was away, except for the part where Seaghn asked you if he was your boyfriend.


[[Next|home04]]</tw-passagedata><tw-passagedata pid="325" name="mhih" tags="" position="3275,1625" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Maddox, welcome back. You say, without any sarcasm or rapprochement, simply relief. 


After Seaghns explanation, it dawned on you that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He had been heartbroken because of your ancestors and sacrificed far too much for this family. Maddox . . . have you ever thought about leaving?


The hand on your shoulder stiffens, and then slowly relaxes as if letting go of something important.


Yes. Voice soft as a sigh, Maddox responds gently. He seems careful with his wording, as if choosing diction for a poem. Regardless of my wish, I have chosen to stay. And now, this will forever be my home, for it has been so for the past decades.

Maddox . . . you dont need to do this. You try to find the right words to comfort this century-old pixie. You have already done enough for this family. I know that, and I believe Dag feels the same, too. Though I could really use your help in this difficult time, and youve been helping me ever since Dag . . . 


You take a deep breath to calm yourself down. Sorry about the babbling. All I want to say is, you are free, Maddox. You are always free and can go anywhere you want.


Maddox blinks, his eyelashes fluttering as if they were the flapping wings of a heron. His whisper is so soft that you almost miss it. 


Peradventure, . . . I have been, and shall always be, the Featherhead that follows. He smiles at you and says, Your words are deeply appreciated, lass. Thank you. 


Your heart leaps with joy knowing that your feelings for him got reciprocated. However, a sharp pang of guilt sears you because youre unsure how long youll stay. Do you really want to devote the rest of your life to the sanctuary? If not, then you should probably nip this love in the bud before it turns ugly.(if: $laoisetalk is true)[ Though Dag said faeries are fickle in love, youre more afraid of hurting Maddox.]


Torn between happiness and sadness, you find it difficult to meet his gaze, so you dart away. 


So youre staying? I mean, Im more than happy if you are, but if not . . . maybe I can turn to the Royal Society for help . . . 


He raises an eyebrow, surprised at you mentioning the Royal Society. Lounging, he waits for you to share your plan. You tell him everything that happened tonight when he was away, except for the part where Seaghn asked you if he was your boyfriend.


(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
[[Next|home04]]</tw-passagedata><tw-passagedata pid="326" name="mlah" tags="" position="3375,1525" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
Look whos back. Having fun with your queen? 


Anger rises like a tidal wave inside you just by looking at him alone.


You remember what Seaghn has told you, that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He suffered because of your ancestors and even sacrificed his freedom for this family.


You understand, you really do, that he is the one that has been wronged all his life, not you. But is it fair that youre forced to carry several lives on your shoulders when you just lost your parents?


You look at Maddox, who seems to be wallowing in guilt for having dumped you at the revel.


Why are you looking at me like that? Go have fun with your people as you will. Dont let me stop you. Im totally fine with it! 


No, youre not. And you can see from the look on his face that he knows it as well. Hes not like Dag. He can tell whether or not youre telling a lie, or another verbal irony as you so like to call it. He knows you lie only to get away with things rather than to hurt someone else. 


You lie to conceal your true feelings. You put on a mask of anger to hide whatever underneath it, be it grief or insecurity.


Thats probably why youre mad at him, for knowing you like the back of his hand when youre only strangers. Tears brim in your eyes, and you immediately wipe them off.


Lass . . . Im really sorry . . . 


What! Do you think I cried because of you? Save it! Im not the one who was left behind! 


//Yes, you are.//


You! You are! 


//Stop it.//


Your own mother didnt want you. Elizabeth hated you. Alwyn chose Imogen and his glory over you. And Imogen? She literally DIED because of you! I dont know what was between you and Laoise but shes gone too! Stay here, and youll always be left behind! So go, just frigging leave for Gods sake!


The pixie falls silent. What you have said must surely hurt him, but you dont really give a damn anymore.


Who needs you anyway . . . Ill just go to the RSPF . . . At least they sent me real letters . . . that alone is better than your condescending elf queen.


What were you saying? The Royal Society?


He grabs you by the shoulders.


What? You care now?


 . . . Im truly sorry lass. Youre right about everything. Just . . . let me make it up to you later. But first, tell me what happened tonight while I was  . . . absent.


You pull yourself together and spit it all out.


[[Next|home04]]</tw-passagedata><tw-passagedata pid="327" name="mlih" tags="" position="3375,1625" size="100,100">{(display: &quot;setblack&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
 . . . Youre back.


You remember what Seaghn told you, that Maddoxhowever humanlike he looksis a trooping faerie and belongs with his kind. He suffered because of your ancestors and even sacrificed his freedom for this family.


Maddox, why havent you left and gone back to your people? 


The pixie falls silent. After a long moment, he finally responds to your question.


I have thought about leaving, he exhales, Regardless of my wish, I have chosen to stay. And now, this will forever be my home, for it has been so for the past decades.


I dont understand. This family has done nothing good for you . . . you were dragged into this since little. You didnt have a choice then, but you do now! Its not like you have nowhere else to go . . . 


//Just go. Run away. Escape all that pains you, like what I did//. 


You think but dare not say it out loud for fear of revealing your weakness. Thats how you deal with your loss; you just shun away everything. 


I understand. I really do. But lass, you cant run away from what made you ***you***. And sometimes we have to fulfill our duties to make space for ourselves. 


Maddox smiles though there is pain and anguish in his natural eye.


I stayed, even when I didnt feel welcomed here because I promised Alwyn to watch over his family. As long as Im still his Featherhead, Ill stay.


Okay, I get it.


At least you have a choice to leave after all this. //Youre not anyones anything.//


 You gather the strength to think of your next move. 


Ive been thinking about asking for help from the Royal Society. 


He raises an eyebrow, surprised at you mentioning the Royal Society. You tell him everything that happened tonight when he was away and your plan so far to defeat the Bane.


[[Next|home04]]</tw-passagedata><tw-passagedata pid="328" name="transition" tags="" position="3700,1575" size="100,100">(display:&quot;setdusk&quot;)**A few moments later . . .**
{
(track: &#39;hazel&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
(live:1.5s)[(t8n:&quot;dissolve&quot;)[(display:&quot;heartsworn01&quot;)(stop:)]]
}</tw-passagedata><tw-passagedata pid="329" name="cabin06" tags="" position="3700,3450" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You step out of the cabin, and Heartsworn is clanking hard because of your trembling. Whether that is out of fear or rage, you cant be sure. 


The Bane floats right there, a couple of yards away, no longer a waterspout but a swirl of dense dark mist that seems to delineate a loose shape. You cant make out what though; its too abstract to even form into a definitive thing. 


Its a cluster of nothingness, complete chaos.


You raise Heartsworn as the Bane devours you whole, incorporating you into its void. 


You hear a slight clank, and the scabbard slides off the sword.


//A voice inside your head asks you what you wish to cut through//


(if: $dagfriendship &lt;1 and $maddoxromance &lt;1 and $seanfriendship &lt;1 and $aggression &gt;3)[[[The Bane|bane]]](else:)[
[[Geis|geis]]
[[Love|love]]
[[Memories|memories]]
]</tw-passagedata><tw-passagedata pid="330" name="setlove" tags="" position="1075,200" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;love&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="331" name="setblood" tags="" position="1175,200" size="100,100">&lt;div style=&quot;display:none;&quot;&gt;&lt;script&gt;$(&#39;body&#39;).removeClass().addClass(&#39;blood&#39;)&lt;/script&gt;&lt;script&gt;$(&#39;tw-story&#39;).removeClass().addClass(&#39;day&#39;)&lt;/script&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="332" name="bonus" tags="" position="4700,825" size="100,100">When we decided to remake Project Alexia II in Twine, we also decided to offer a short bonus that allows the player to know more about the characters after the main plot is over.


However, you may only access the bonus content once you solve the final puzzle.


[[I&#39;m ready. Challenge me!|firstpuzzle]]</tw-passagedata><tw-passagedata pid="333" name="firstpuzzle" tags="" position="4700,700" size="100,100"></tw-passagedata><tw-passagedata pid="334" name="secondpuzzle" tags="" position="4825,700" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="335" name="thirdpuzzle" tags="" position="4950,700" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="336" name="enterstudy02" tags="" position="1475,2925" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	}
&lt;==&gt;
[You knew from Cousin Laoises lawyer and banker that her health deteriorated the older she got. She refused to stay in the hospital for some personal reason until the day she finally collapsed. They didnt explain what reason back then, but now you know it was because of the sanctuary. 


This room hasnt changed a bit ever since the night she fainted and got sent to the hospital. And it was a decade ago.


And theres only one person who could have done itDag.


Before coming here, you thought Cousin Laoise lived alone. Her lawyer and banker said that few came to her funeral as her family and close friends were long gone. So it didnt occur to you that someone might still be mourning for her. 


And the lamentation started so, so long ago, even before her exact demise.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;abereft1&quot;)(track: &#39;enterstudy02_1&#39;, &#39;play&#39;)Oh, Dag . . .]You sigh, feeling something wet rolling from your cheeks.



]]
(click-replace: &quot;&quot;)[(track: &#39;enterstudy02_1&#39;, &#39;stop&#39;)(track: &#39;enterstudy02_2&#39;, &#39;play&#39;)You may look, but keep your hands to yourself. I didnt hide the guide here.


(link-reveal-goto: &quot;Pretend you didnt cry.&quot;, &quot;nocry&quot;)[(set: $empathy to it +1)(set: $dagfriendship to it +1)]
(link-reveal-goto: &quot;Ask him about Laoise.&quot;, &quot;ask&quot;)[(set: $empathy to it +2)(set: $dagfriendship to it +2)(set: $laoisetalk to true)]]</tw-passagedata><tw-passagedata pid="337" name="nocry" tags="" position="1425,3050" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	(track: &#39;enterstudy02_2&#39;, &#39;stop&#39;)
	}
&lt;==&gt;
[You quickly wipe off your tears. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(live:2s)[(stop:)(track: &#39;nocry1&#39;, &#39;play&#39;)]Got it. Just gonna check around and get to know more about her. Dont worry, Im not touching anything!]He doesnt respond, but you think its a yes. You look around but still dont see him. You hope he didnt see you cry, or else its just embarrassing.


You come to a shelf with medals and trophies. Theyre all about faelife rescue.


A photo shows a bandaged fantastic beast, a griffin you guess, rubbing its head on young Cousin Laoise to show its gratitude. The description said that she freed it from some illegal breeding farm. She almost got knocked over by its giant head; it looks kind of funny.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(track: &#39;nocry2&#39;, &#39;play&#39;)Wow, she accomplished a lot during her lifetime, and she seemed to have some really good friends.] There are tons of photos showing her with the same group of people at many different events. They seemed to always have fun with each other.


]]
(click-replace: &quot;&quot;)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;asad1&quot;)(track: &#39;nocry3&#39;, &#39;play&#39;)I wish I met her when she was alive. How come no one in my family knew about her . . . ?]You then look to the desk, carefully avoiding the shattered mug. Theres a letter with Laoises shaky but beautiful handwriting.


[[Next|common01]]]</tw-passagedata><tw-passagedata pid="338" name="ask" tags="" position="1525,3050" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	(track: &#39;enterstudy02_2&#39;, &#39;stop&#39;)
	}
&lt;==&gt;
[You burst out into sobs.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;abereft1&quot;)(live:2s)[(stop:)(track: &#39;asklao01_1&#39;, &#39;play&#39;)]Im so very sorry. I didnt know you were close . . . Wh-what was she like?]For a while theres only silence accompanied with your gulping sobs and hiccups. Then Dag shows up, standing on the coffee table wringing his hat.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;asklao01_1&#39;, &#39;stop&#39;)(track: &#39;asklao01_2&#39;, &#39;play&#39;)Laoise was only 10 when Ninnyha- . . . Alwyn died in the war. Elizabeth passed away before long because of old age. Imogen . . . was a frail woman too immersed in grief; she wasnt there anymore the moment she lost him. Laoise had to take care of both her ill mother and herself. I helped . . . but really there wasnt much I could do other than keeping the house organized and protected, and filling plates whenever needed. She was a very capable and independent child, awful cheerful, always smiling. She thought being cheerful could cure her poor mother, but Imogen hanged herself anyway. She was around your age when she lost her mother.


]]
(click-replace: &quot;&quot;)[(track: &#39;asklao01_2&#39;, &#39;stop&#39;)(track: &#39;asklao01_3&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;asad1&quot;)They said she didnt get married. Was she all alone?](live:5s)[(stop:)(track: &#39;asklao01_4&#39;, &#39;play&#39;)]She had many friends; some knew about us while others didnt. And if youre talking about MENno she had men all the time, be it fae or human. She didnt want marriage because she was born from a consanguineous one. Human men left her for that.


(if: $tapestry is true)[Ah, right. Alwyn Jr. and Imogen were close related cousins, you recall.](else:)[That wasnt uncommon back then though, marriages between cousins, you thought.]


[[Next|ask02]]]</tw-passagedata><tw-passagedata pid="339" name="ask02" tags="" position="1525,3175" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	(track: &#39;asklao01_3&#39;, &#39;stop&#39;)
	(track: &#39;asklao01_4&#39;, &#39;stop&#39;)
	}
&lt;==&gt;
[(track: &#39;asklao02_1&#39;, &#39;play&#39;)The favor of the fae lasts short because we live long. Her relationships with those faerie men didnt go far. The most infamous one should be the one with that blasted elf king living in the sanctuary, the one with goat horns I mean. I already told her not to go near him at revels and she just didnt bother to listen! Shouldve locked her in the house. It was the first time she ever fell in love and he broke her heart. //That despicable lying goat// . . . what? What are you laughing at?


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)(live:49s)[(stop:)(track: &#39;asklao02_2&#39;, &#39;play&#39;)]Nothing. Its just . . . you sound like a dad.](live:56s)[(stop:)(track: &#39;asklao02_3&#39;, &#39;play&#39;)]Humph, rubbish!


You come to a shelf full of medals and trophies. There are also tons of photos showing her with the same group of people at many different events. They seemed to always have fun with each other.


]&lt;c4|
(click: &quot;&quot;)[(replace: ?c4)[(track: &#39;asklao02_1&#39;, &#39;stop&#39;)(track: &#39;asklao02_2&#39;, &#39;stop&#39;)(track: &#39;asklao02_3&#39;, &#39;stop&#39;)(track: &#39;asklao02_4&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)But she accomplished a lot during her lifetime, and she had some really good friends I guess.](live:7s)[(stop:)(track: &#39;asklao02_5&#39;, &#39;play&#39;)]She was a competent keeper, busy flying around, tracking illegal faelife trade and saving captive faeries and fantastic creatures.


(live:19s)[(stop:)(track: &#39;asklao02_6&#39;, &#39;play&#39;)](align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)I wish I met her when she was alive. How come no one in my family knew about her . . . Dag?]You turn but Dag is no longer there.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)Cool, just turn on your invisibility! Im sure it must be really convenient!]You then look to the desk, carefully avoiding the shattered mug. Theres a letter with Laoises shaky but beautiful handwriting.


[[Next|common01]]]]</tw-passagedata><tw-passagedata pid="340" name="common01" tags="" position="1475,3300" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	(track: &#39;nocry3&#39;, &#39;stop&#39;)
	(track: &#39;asklao02_5&#39;, &#39;stop&#39;)
	(track: &#39;asklao02_6&#39;, &#39;stop&#39;)
	(track: &#39;enterstudy_common01&#39;, &#39;play&#39;)
	}
&lt;==&gt;
For my dear old friend Dag,

I know my own health conditions. I might need to stay in the hospital in no time. Id like you to do the following things for me until I return or ***die I suppose?*** Ive prepared tons of jars of honey, lavender flavor your favorite! Theyre all in the kitchen cabinet. I know you hate bidding farewell, so Im not saying goodbye.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXXX&quot;)[1. If I faint somewhere in the house one day, take my cell phone and press 0I taught you how to use it once, so you got this! A Dullahan will come pick me up and drop me to the nearest hospital. Shes a loyal and trustworthy friend who masters the human way. Leo and Natalie, my banker and lawyer, you know them right? Theyll help with the hospitalization procedure. Ive arranged everything. Theres no need to panic when the time comes!

2. Patrol the borders and reinforce the cloaking and protective spells, especially around the kelpie lake. Dont let those little rascals from the neighboring towns venture into the sanctuary. I dont want any human body or dismembered limb on my land! Ah, kids nowadays arent scared of anything, are they?

3. Dont let the goblins break into the mansion. I dont want Mayor Whiskers torn apart! Also, help him clean himself; hes an old cat now and cant do it himself properly. Rinse the towel in warm water and wring it dry, and gently rub him with it.

4. Keep an eye on the guests during revel nights. If they wreak havoc somewhere else in the sanctuary, inform **him** of this. Hell help. He **owes me** that. Do not fight them all alone. I want you safe and sound!

5. If Kor sends Grinchy for me, tell him Im away for work. Ill attend his royal ball when Im back.

6. If Foufou comes, tell him Im away too. 

7. Ill ask the Dullahan to buy some new clothes and art supplies for Uncle Maddox every once in a while. Please help hand them to him. If he ever asks about me, tell him Im well.]

[[Next|common02]]</tw-passagedata><tw-passagedata pid="341" name="common02" tags="" position="1475,3425" size="100,100">{(display: &quot;setmorning&quot;)
(unless: (track: &#39;laoisetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;laoisetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;laoisetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;laoisetheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;laoisetheme&#39;, &#39;mute&#39;, false)
	(track: &#39;enterstudy_common01&#39;, &#39;stop&#39;)
	(track: &#39;enterstudy_common02_1&#39;, &#39;play&#39;)
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)***Uncle Maddox?*** I dont recall Cousin Laoise had any family left. If she called him uncle, he must have been really old . . .]//and probably dead by now.//  


(live:15s)[(stop:)(track: &#39;enterstudy_common02_2&#39;, &#39;play&#39;)Youd like to read on, but Dag interrupts you. Hurry up on your quest!


You sigh and leave.


{(if: $library is false)[(link: &#39;Go downstairs&#39;)[(track: &#39;enterstudy_common02_1&#39;, &#39;stop&#39;)(track: &#39;enterstudy_common02_2&#39;, &#39;stop&#39;)(track: &#39;laoisetheme&#39;, &#39;fadeout&#39;, 2)(goto: &#39;phooka03&#39;)]]
(else:)[(link: &#39;Go to the yard&#39;)[(track: &#39;enterstudy_common02_1&#39;, &#39;stop&#39;)(track: &#39;enterstudy_common02_2&#39;, &#39;stop&#39;)(track: &#39;laoisetheme&#39;, &#39;fadeout&#39;, 2)(goto: &#39;yard1&#39;)]]}]</tw-passagedata><tw-passagedata pid="342" name="swallow03" tags="" position="1000,1775" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)She took out YOUR EYE for your mothers crime? But that was not even your fault! And doing this wouldnt even help get that stolen child back! They already prisoned you here. The eye was totally unnecessary!]Maddox seems astonished at your response. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Hurting the changeling lures out the faerie mother and grants the human family a chance to win the stolen child back. A heated poker or iron rod placed onto the skin would have sufficed surely, but it was Elizabeth the Crackenstein after all. She had her . . . fierce ways in dealing with things.]
You shake your head and cant believe that Maddox just laughs it off like that. You genuinely hope its not a sign of Stockholm syndrome. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)My confinement is . . . another story. I failed a friend and his loved ones, so I atone for that.]He keeps something unsaid, and you totally respect that.


[[Next|swallow04]]</tw-passagedata><tw-passagedata pid="343" name="swallow04" tags="" position="1000,1650" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You recall loosely from the family tree that Elizabeth was the seventh keeper and cousin Laoises great grandmother. You wonder who the stolen Doyle boy was. He must have been returned to the family given what happened to Maddox.


Staring at him, you suddenly remember who he reminds you of. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)Alwyn Jr., cousin Laoises father! He was the stolen child, wasnt it? You look exactly like him!]You marvel at his face and the faerie magic. Indeed, without pointy ears, the scar, and the prosthetic eye, Maddox could easily pretend to be Alwyn Jr. with his hair dyed red. 


You cant help but think of one thing. You dont really mean it. Its just a random possibility that hovers in your head and somehow escapes your lips.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)If you had enlisted instead of him, he wouldnt have died in the war.]You dont realize how cruel and unfair this thought is until you actually utter it out. Immediately, gloom looms over Maddoxs face.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mbereft&quot;)Well, about that, lass, I think you are right.]

(link-reveal-goto: &quot;Apologize.&quot;, &quot;guiltymad&quot;)[(set: $empathy to it +1)(set: $maddoxromance to it +1)]
(link-reveal-goto: &quot;Change the subject.&quot;, &quot;awkwardmad&quot;)[(set: $indifference to it +1)]
(link-reveal-goto: &quot;Defend yourself.&quot;, &quot;ragemad&quot;)[(set: $aggression to it +1)(set: $maddoxromance to it -1)]</tw-passagedata><tw-passagedata pid="344" name="distance02" tags="" position="1250,1900" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Maddox frowns, apparently not expecting you to lash out like this. He remains silent and slowly backs off to an obscure corner. His face shadowed and the expression unreadable. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mserious&quot;)Very well then. One last thing, I believe youre here for the guide. To be precise, the mannequin?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)You know the password? What is this bloody book about anyway?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)The guide documents biographies and characteristics of all the faeries dwelling here, including their vulnerabilities, weaknesses, and flaws. It teaches you how to deal with us, as some of us can be dangerous to ignorant humans.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Youll have to figure out the password yourself, but I dont want to stress you out further. Some little hints. Each brownie has their own habits of organizing a human house. Dag likes to arrange books by the first letter of their titles. Not only that, the letters usually spell out a word or a message, like an acrostic. Hes also fond of cryptography.] 

You recall picking up a note about some encryption method in the library. Perhaps you could check it out later.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mserious&quot;)Dag always leaves clues. Watch for unusual or suspicious things. Keep in mind that this is his message to YOU, the 10TH KEEPER.] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Thank you . . . and what I said earlier, no offence. Im dead from the neck up today.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)None taken . . . and good luck with your quest.]


(link-reveal-goto: &quot;Return upstairs.&quot;, &quot;fallenbrownie1&quot;)[(set: $phonedead to it +1)(set: $maxdag to true)(alert: &quot;You gain a piece of new information on Dag! Check out his character card in the gallery!&quot;)]</tw-passagedata><tw-passagedata pid="345" name="menlao" tags="" position="850,1350" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Suddenly you remember why Maddoxs name sounds familiar. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Laoise mentioned in her letter to Dag that she has an Uncle Maddox, was that you?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)Laoise . . . ?]For a moment he just stares at you without a word. You feel like hes looking at someone else though. Youre starting to think perhaps its a bad idea to bring up Cousin Laoise. Since Maddox was close to Alwyn Jr., he might be upset about his daughters passing as well. (if: $laoisestudy is true)[Also, he might still be mourning for her like Dag is.]


Then he blinks and  lets out a weary sigh.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mbereft&quot;)Living with humans is all about the art of losingyou lose them every second, every hour, every day . . . And when the century passes, you find yourself all alone.]He flashes you a mirthless smile.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;asad1&quot;) . . . ]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mserious&quot;)The Woods are my world, but now theyre all gone, and my whole existence along with them. I bear witness of their life and death, yet who could mine?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;) . . . I could.]He looks fairly surprised.


[[Next|menlao02]]</tw-passagedata><tw-passagedata pid="346" name="menguide" tags="" position="1000,1350" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Well, I need to get the guide. Its a . . . um, small challenge from Dag to test if I have what it takes to be a keeper, you say, trying to change the topic. I found this sewing mannequin with a hidden locked chest. I need to find the password, a combination of 9 letters. Do you have any ideas or clues? I could really use some help, please?]

Maddox turns his back on you. Just when you dont think hell ever respond, he speaks.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)The guide documents biographies and characteristics of all the faeries dwelling here, including their vulnerabilities, weaknesses, and flaws. It teaches you how to deal with us, as some of us can be dangerous to ignorant humans.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Im not supposed to tell you this. Dag forbids me to. But since you ask, I can only tell you that each brownie has their own habits of organizing a human house. Dag likes to arrange books by the first letter of their titles. Not only that, the letters usually spell out a word or a message, like an acrostic. Alwyn was fond of cryptography. He had studied and learned a variety of encryption methods. He and Dag belonged with each other in that aspect.] 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Encryption methods?]You recall spotting something of the sort in the library but cant remember what it was. Perhaps you should go back to check it out

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Dag always leaves clues. Watch for unusual or suspicious things. Keep in mind that this is his message to **YOU**, the ***10TH KEEPER***.]He raises an arm and waves at you.

  (align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Thank you.]


(link-reveal-goto: &quot;Return upstairs.&quot;, &quot;fallenbrownie1&quot;)[(set: $phonedead to it +1)(set: $maxdag to true)(alert: &quot;You gain a piece of new information on Dag! Check out his character card in the gallery!&quot;)]</tw-passagedata><tw-passagedata pid="347" name="menbook" tags="" position="1150,1350" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Suddenly you remember why Maddoxs name sounds familiar. Hes one of the authors and protagonists of that illustrated childrens book //Ninnyhammer and the Featherhead that Follows//. The blonde swordsman and redhead wizard must be Alwyn Jr. and Maddox himself. Despite the faerie kidnapping, they must have been really close friends, almost like twins.


You take out the book and hand it to him.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Look. I found this.]At the sight of the book, Maddoxs face softens. He smiles. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mconfused&quot;)It survives the century. We . . . I didnt expect that. His fingers brush through the delicate cover.] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)A certain brownie preserves it well, I guess.]You notice that he just said we there. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)What happened to the last page? It was ripped apart from the middle.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)It was Imogen. She detested the ending, and that was the first time Id ever seen Alwyn being truly mad at her.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)You three were close?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)We grew up together. She was two years older, always chasing after us and reporting whatever we did to Elizabeth. We were friends as children. However things changed. Alwyn and I were still close, but she . . . ]

He doesnt finish it, but you understand. (if: $laoisetalk is true)[Though Dag said faeries are fickle, yet people change as well. ]Affections of all kinds die down due to various reasons. Love is fragile by nature.


[[Next.|menbook02]]</tw-passagedata><tw-passagedata pid="348" name="menbook02" tags="" position="1150,1200" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
He returns the book to you.
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Dont you want to keep it?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mserious&quot;)The basement is not an ideal place to store a one-century-old book.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Ok . . . ]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mbalnk&quot;)But I appreciate that you brought it to me. To return the favor, Ill give you some hints on that mannequin. Each brownie has their own habits of organizing a human house. Dag likes to arrange books by the first letter of their titles. Not only that, the letters usually spell out a word or a message, like an acrostic. Hes also fond of cryptography.] 


You recall picking up a note about some encryption method in the library. Perhaps you could check it out later.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Dag always leaves clues. Watch for unusual or suspicious things. Keep in mind that this is his message to **YOU**, the ***10TH KEEPER***.] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;apleased1&quot;)Thank you . . . and what I said earlier, no offence. Im dead from the neck up today.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)None taken . . . and good luck with your quest.]


(link-reveal-goto: &quot;Return upstairs.&quot;, &quot;fallenbrownie1&quot;)[(set: $phonedead to it +1)(set: $maxdag to true)(alert: &quot;You gain a new piece of information on Dag! Check out his character card in the gallery!&quot;)]</tw-passagedata><tw-passagedata pid="349" name="dagfhigh" tags="" position="975,775" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)Maddox?] 


You stagger to your feet, wobbling towards him.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;abereft1&quot;)How come you got out of the bunker? Daghes not moving! What should I do? Is this some kind of faerie illness? I dont know! The phooka said he was sick. I shouldve . . .]

You start to sob at the thought of Dag dying on you. You also think of your parents who walked out of your life so abruptly, leaving you caught off guard. You cant afford to lose anyone now.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mserious&quot;)//I, Maddox, confine myself to the underground. Until and unless Daggart the brownie falls down, let me set no foot out of this site, see no glimpse of sunlight, or forfeit my life.//]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;abereft1&quot;)&quot;Wh-what are you . . . t-talking about?] You choke with sobs, confused by his words.


(if: $distance is true)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I was Alwyn Jr.&#39;s changeling. My biological mother made me look like him so that she could swap us. Elizabeth found out and took action to take him back. I stayed and grew up here as a ward. When Alwyn got enlisted into the RAF, Elizabeth and Imogen wanted me to replace him but he refused. He ended up dying in the war. I vowed to them that I would never leave the cellar. You just heard the vow. Dag&#39;s down now. Thats why Im out.]](else:)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)The deal I made with Elizabeth and Imogen. Hes down now. Thats why Im out.]He whispers, ever so lightly, as if his voice was rustling leaves.]


(link-reveal-goto: &quot;Accuse him of hurting Dag.&quot;, &quot;accuse&quot;)[(set: $maddoxromance to it -1)(set: $empathy to it +1)]
(link-reveal-goto: &quot;Ask again calmly.&quot;, &quot;calm&quot;)[(set: $maddoxromance to it +1)(set: $empathy to it +1)]
(link-reveal-goto: &quot;Beseech his help.&quot;, &quot;beseech&quot;)[(set: $maddoxromance to it +2)(set: $empathy to it +1)]</tw-passagedata><tw-passagedata pid="350" name="dahfsoso" tags="" position="1075,775" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)Maddox? How did you get out of the bunker? Dagwhat happened to him? He just . . . ***stopped moving?***]Youe voice cracks at the end of the utterance, for this reminds you greatly of your parents who walked out of your life so abruptly. How come a living thing just ***ceases living*** like that?


//Not this again//.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mserious&quot;)//I, Maddox, confine myself to the underground. Until and unless Daggart the brownie falls down, let me set no foot out of this site, see no glimpse of sunlight, or forfeit my life.//]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)What are you talking about?]

(if: $distance is true)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I was Alwyn Jr.&#39;s changeling. My biological mother made me look like him so that she could swap us. Elizabeth found out and took action to take him back. I stayed and grew up here as a ward. When Alwyn got enlisted into the RAF, Elizabeth and Imogen wanted me to replace him but he refused. He ended up dying in the war. I vowed to them that I would never leave the cellar. You just heard the vow. Dag&#39;s down now. Thats why Im out.]](else:)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)The deal I made with Elizabeth and Imogen. Hes down now. Thats why Im out.]He whispers, ever so lightly, as if his voice was rustling leaves.]


(link-reveal-goto: &quot;Accuse him of hurting Dag.&quot;, &quot;accuse&quot;)[(set: $maddoxromance to it -1)]
(link-goto: &quot;Ask again calmly.&quot;, &quot;calm&quot;)
(link-reveal-goto: &quot;Beseech his help.&quot;, &quot;beseech&quot;)[(set: $maddoxromance to it +2)]</tw-passagedata><tw-passagedata pid="351" name="dagflow" tags="" position="1175,775" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)Maddox? How did you get out of the bunker? What happened to Dag? Have you seen anything like this before?]You inspect Dags motionless body. The brownie seemed to go into shock for reasons unknown. With neither the knowledge of advanced medicine nor faery anatomy, you cannot figure out what to do with him now.


To be honest, rather than worries, feelings of irritability wash over you like a summer heat wave. Nothing has gone smoothly since the moment you set foot in this estate, and God knows what else is waiting ahead. 


//What was I expecting when I dropped out of school?// Life is ultimately a deprivation of anything good. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I, Maddox, confine myself to the underground. Until and unless Daggart the brownie falls down, let me set no foot out of this site, see no glimpse of sunlight, or forfeit my life.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)What are you talking about?]

(if: $distance is true)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I was Alwyn Jr.&#39;s changeling. My biological mother made me look like him so that she could swap us. Elizabeth found out and took action to take him back. I stayed and grew up here as a ward. When Alwyn got enlisted into the RAF, Elizabeth and Imogen wanted me to replace him but he refused. He ended up dying in the war. I vowed to them that I would never leave the cellar. You just heard the vow. Dag&#39;s down now. Thats why Im out.]](else:)[(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)The deal I made with Elizabeth and Imogen. Hes down now. Thats why Im out.]He whispers, ever so lightly, as if his voice was rustling leaves.]


(link-reveal-goto: &quot;Accuse him of hurting Dag.&quot;, &quot;accuse&quot;)[(set: $maddoxromance to it -1)(set: $aggression to it +1)]
(link-goto: &quot;Ask again calmly.&quot;, &quot;calm&quot;)</tw-passagedata><tw-passagedata pid="352" name="accuse" tags="" position="975,650" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;aangry1&quot;)YOU! You monster! How dare you!]Trembling with rage, you swing your fist at his face. He dodges to avoid the punch, which almost makes you fall to the ground. However, he catches you in his arms just in time. You struggle to get away from him but fail to slip from his grasp.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf1&quot;)Get the hell away from me!]He grabs you by the shoulders and shakes you slightly. 


Listen to me. It wasnt I who did this, he says, with his head drooping, expression unreadable. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mbereft&quot;)When I made my vow, Dag wanted to free me from incessant guilt and self-blame, so he came up with this loophole: //Until and unless Daggart the brownie falls down//. A trip-over is also counted as a fall. If I wanted out, I could just ask Dag to trip.]


The regret and self-loathing in his eyes, you understand. You know how that feels because you live in the same hell every day since your parents died in the car accident. You were supposed to go to see a musical with them that evening, but dropped out at the last minute because a group of college friends invited you for a drink. You would have died with them.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Then who did this?]You loosen up a bit(if: $dagfriendship &gt;=1)[ and wipe your eyes with a sleeve].


(if: $dagfriendship &lt;=-3)[(link-goto: &quot;Next&quot;, &quot;bail&quot;)](else:)[(link-goto: &quot;Next&quot;, &quot;normal&quot;)]</tw-passagedata><tw-passagedata pid="353" name="calm" tags="" position="1075,650" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Something doesnt add up. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)Wait . . . youre saying that youre out only because Dag turned into this stone-cold mess? What are you implying?]Alerted, you narrow your eyes.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Are you saying that youve **caused** this?]Maddox blinks and sighs. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)Im simply explaining the reason Im out. When I made my vow, Dag wanted to free me from incessant guilt and self-blame, so he came up with this loophole: //Until and unless Daggart the brownie falls down//. A trip-over is also counted as a fall. If I wanted out, I could just ask Dag to trip.] 


The regret and self-loathing in his eyes, you understand. You know how that feels because you live in the same hell every day since your parents died in the car accident. You were supposed to go to see a musical with them that evening, but dropped out at the last minute because a group of college friends invited you for a drink. You would have died with them.


As for Dag . . .  Maddox kneels down beside the brownie shoulder-to-shoulder with you, No, never in my life have I seen such a powerful curse.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Then who do you think did this?]


(if: $dagfriendship &lt;=-3)[(link-goto: &quot;Next&quot;, &quot;bail&quot;)](else:)[(link-goto: &quot;Next&quot;, &quot;normal&quot;)]</tw-passagedata><tw-passagedata pid="354" name="beseech" tags="" position="1175,650" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;panic&#39;, &#39;isplaying&#39;))[
    (track: &#39;panic&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;panic&#39;, &#39;fadein&#39;, 3)
	(track: &#39;panic&#39;, &#39;loop&#39;, true)]
	(track: &#39;panic&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared1&quot;)You sound really suspicious, but I dont think you did this. Please help me, I dont know who else I can turn to now.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)Of course I didnt do this, lass. When I made my vow, Dag wanted to free me from incessant guilt and self-blame, so he came up with this loophole: //Until and unless Daggart the brownie falls down//. A trip-over is also counted as a fall. If I wanted out, I could just ask Dag to trip.] 


The regret and self-loathing in his eyes, you understand. You know how that feels because you live in the same hell every day since your parents died in the car accident. You were supposed to go to see a musical with them that evening, but dropped out at the last minute because a group of college friends invited you for a drink. You would have died with them.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Ok, I get what you mean. Just check on him, please?]Maddox kneels down before Dag and starts to inspect his cold rigid body. He might seem unruffled but you notice his trembling hands however hard he tries to hide them. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mconfused&quot;)I . . . This is not illness; its a curse. Ive never seen such a thing before.]He lives long enough to see many Woods and other humans die, but really, losing someone is not something one can ever get used to. You put a hand on Maddoxs forearm to comfort him. He turns in surprise. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank1&quot;)Well face this together.]You look firmly into his eyes. He opens his mouth as if to say something, but no words ever come out.


His eyes widens to a point that you thought his prosthetic eye would roll out of the socket. For a fleeting moment, his natural eye dilates with a surge of unbelievable elation. Though he pulls himself together very quickly, youre certain that something other than sobriety and melancholy was there.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;)Yes, I would do anything to help you and Dag.]You back off a bit and clear your throat. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ashy1&quot;)Who do you think did this to Dag?] 


(link-goto: &quot;Next&quot;, &quot;normal&quot;)</tw-passagedata><tw-passagedata pid="355" name="lwd" tags="" position="975,4100" size="100,100">
&lt;==&gt;
(display: &quot;lw&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ahappy1&quot;)//I have travelled far / Time to return to the Star / Take care of my car// . . . what a bright haiku for last words!]
(track: &#39;lw&#39;, &#39;play&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)



Her portrait is the only colored photo in the room, standing out from the other photos. She must have been in her early fifties when the picture was taken. 


She had fair hair with strands of white locks, almond green eyes, and a hawk nose. She might have looked like an uptight and serious kind of person if not for her casual posture and warm smile. </tw-passagedata><tw-passagedata pid="356" name="ikwd" tags="" position="875,4100" size="100,100">
&lt;==&gt;
(display: &quot;ikw&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)//Dulce non, decorum non, est pro patria mori// . . . Woah, she must have been really against the Woods going to wars.]
(track: &#39;ikw&#39;, &#39;play&#39;)(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="357" name="ewwkd" tags="" position="675,4100" size="100,100">
&lt;==&gt;
(display: &quot;ewwk&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)//Rage, rage against the dying of the light!// . . . ah, Dylan Thomas! Its a bit uncanny though that Elizabeth died at the same age as her grandmother.]
(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;play&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="358" name="willyd" tags="" position="875,4000" size="100,100">
&lt;==&gt;
(display: &quot;willy&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)//Death, be not proud//, John Donne! Well, like mother, like son!]
(track: &#39;willy&#39;, &#39;play&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="359" name="bldd" tags="" position="675,4000" size="100,100">
&lt;==&gt;
(display: &quot;bld&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(if: $tapestry is true)[//(track: &#39;bld_tape&#39;, &#39;play&#39;)Non scholae sed vitae discimus Learn for life not for school//, Seneca! Hew, my LATIN . . . Its also the family motto!](else:)[//(track: &#39;bld_notape&#39;, &#39;play&#39;)Non scholae sed vitae discimus Learn for life not for school//, Seneca! Hew, my LATIN . . . ]]
(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="360" name="aswd" tags="" position="975,4000" size="100,100">
&lt;==&gt;
(display: &quot;asw&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)A Kitchener . . . //Dulce et decorum est pro patria mori//, Horace! //Its sweet and fitting to die for the homeland//, the biggest old lie!]
(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;play&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="361" name="wwd" tags="" position="775,4000" size="100,100">
&lt;==&gt;
(display: &quot;ww&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)Umm . . . Lord Tennysons Ulysses! //To strive, to seek, to find, and not to yield//. What an attitude! Winnifred did live long for a Victorian lady.]
(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;play&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ajw&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)</tw-passagedata><tw-passagedata pid="362" name="ajwd" tags="" position="775,4100" size="100,100">
&lt;==&gt;
(display: &quot;ajw&quot;)
(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)He was a pilot during WWII. He had the same last words as his father . . . They both perished during the wars.]
(track: &#39;ajw&#39;, &#39;play&#39;)(track: &#39;willy&#39;, &#39;stop&#39;)(track: &#39;bld_notape&#39;, &#39;stop&#39;)(track: &#39;wdw&#39;, &#39;stop&#39;)(track: &#39;asw&#39;, &#39;stop&#39;)(track: &#39;ewwk&#39;, &#39;stop&#39;)(track: &#39;ikw&#39;, &#39;stop&#39;)(track: &#39;lw&#39;, &#39;stop&#39;)(track: &#39;bld_tape&#39;, &#39;stop&#39;)


The black and white photo on the left is a portrait of a man whose name was Alwyn Woods Jr. He looks quite young, around your age, maybe in his late twenties at most. 


The fact that there arent photos showing him in his later life suggests that he probably died young.You read the tag carefully and find that he served in the Royal Air Force during WWII and died at the age of 31. 


Alwyn Jr. had the same almond eyes and hawk nose as cousin Laoise, but his lips were thinner and elegantly curved into a smirk, the kind of sassy smile that would have made you believe nothing in the world could have stopped him had it not been for the war. </tw-passagedata><tw-passagedata pid="363" name="bronaghcard" tags="" position="175,2200" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/hBROXp4.jpg&quot; class=&quot;large&quot;/&gt;</tw-passagedata><tw-passagedata pid="364" name="dagcard" tags="" position="175,2300" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/5ycUikf.jpg&quot; class=&quot;large&quot;/&gt;</tw-passagedata><tw-passagedata pid="365" name="foucard" tags="" position="175,2400" size="100,100">&lt;span class=&quot;portraitbox&quot;&gt;&lt;img src=&quot;https://i.imgur.com/5277cfA.jpg&quot; class=&quot;large&quot;/&gt;</tw-passagedata><tw-passagedata pid="366" name="mblank" tags="" position="3400,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/TpAUIOK.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="367" name="mconfused" tags="" position="3500,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/PQCXDDE.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="368" name="mangry" tags="" position="3600,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/q73fxK2.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="369" name="msmirk" tags="" position="3700,0" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/moIKaZl.png&quot; class=&quot;small&quot;/&gt;
***Maddox***</tw-passagedata><tw-passagedata pid="370" name="menlao02" tags="" position="850,1200" size="100,100">{
(display: &quot;setbunkerlightup&quot;)
(unless: (track: &#39;maddoxtheme&#39;, &#39;isplaying&#39;))[
(track: &#39;maddoxtheme&#39;, &#39;volume&#39;, 0.1)
(track: &#39;maddoxtheme&#39;, &#39;fadein&#39;, 3)
(track: &#39;maddoxtheme&#39;, &#39;loop&#39;, true)]
(track: &#39;maddoxtheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ascared1&quot;)I mean Im not a Woods, but Im a Doyle too. So . . . technically speaking Im also your family? Im a healthy human so its not like Im gonna die //in seconds//. We have plenty of time to know each other. So dont think of it that way . . . just live in the moment.]
//Yeah right. Live in the moment.//


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Well, what a pleasant surprise, lass. Like a true Doyle.]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;airritated1&quot;)But Im not calling you //uncle//!!]


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)Simply ***Maddox*** will do.]This is the first time you see a genuine and happy smile on his face since your encounter.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)You lit my day, lass. To return the favor, Ill give you some hints on that mannequin. Each brownie has their own habits of organizing a human house. Dag likes to arrange books by the first letter of their titles. Not only that, the letters usually spell out a word or a message, like an acrostic. Hes also fond of cryptography.] 


You recall picking up a note about some encryption method in the library. Perhaps you could check it out later.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;mblank&quot;)Dag always leaves clues. Watch for unusual or suspicious things. Keep in mind that this is his message to **YOU**, the ***10TH KEEPER***.] 

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;apleased1&quot;)Thank you . . . and what I said earlier, no offence. Im dead from the neck up today.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;msmirk&quot;)None taken. Good luck with your quest.]


(link-reveal-goto: &quot;Return upstairs.&quot;, &quot;fallenbrownie1&quot;)[(set: $phonedead to it +1)(set: $maxdag to true)(alert: &quot;You gain a new piece of information on Dag! Check out his character card in the gallery!&quot;)]</tw-passagedata><tw-passagedata pid="371" name="hipporecording" tags="" position="325,1600" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="372" name="benletter" tags="" position="325,1725" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="373" name="echoanalyzer" tags="" position="325,1850" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="374" name="seventeardrops" tags="nosave" position="175,1950" size="100,100">---
(align:&quot;=&gt;&lt;=&quot;)+(box:&quot;X&quot;)[Seven Teardrops (1809) by Lady Alexandria Eisner
Recited by Edward Rensie, on 5/21 2020]
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;===XXXXXXXXXXXXXX===&quot;)[Boy, at the heart of this pouch was sawn the last pearl 
That Id fetched for her, a lone mistress of some earl.
I see, it soothed you to stroke its sleek white fur, eh? 
Would you like to know how it came to be? I may
Tell the tragedy of a selchie from the sea
Who used to on land frolic and in water dream
Until a summer night he heard a lass weeping
And saw her teardrops churning the deep sea, turning
Into seven pear shaped pearls, pale as his white skin.
Pelt-shed, he sang to the maiden behind the whin.
Fair lass, greet not. Be my love and come live with me.
Find me my first teardrop, and I shall go with thee.
So he dived for the pearl, yet she refused his plea.
Find my second teardrop, and I shall go with thee.
So he went plunge after plunge til the last one found.
He crawled ashore, yet she was no longer around.
Angus Ruadh saw a seal whimpring on the beach,
Smashed its skull with a rod, regardless of its  screech,
Peeled the pelt off the flesh with his dirk in chuckle.
The paw made into a pouch, the pearl its buckle.
Twas sold to an earl who bought it for his countess.
She was once his mistress.
This was how I became the toy with which you played.
I was that selchie flayed.]</tw-passagedata><tw-passagedata pid="375" name="stophim" tags="" position="2600,2775" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Maddox! Where are you going?] 
(track: &#39;revel&#39;, &#39;mute&#39;, false)

You manage to tug him by the sleeve. He stops and turns, all puzzled. The queen shoots an icy glare at you for spoiling her fun. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)Have you forgotten why were here in the first place?]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mblank&quot;) . . . ]He seems somewhat absent-minded or . . . //high//?


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ascared2&quot;)Are you alright?]You reach out to touch his cheek but he clasps your hand instead. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mbereft&quot;)I-Im sorry . . . ]As the queen pulls him away, he gives you a doleful look and gradually loosens his grip, letting go of your hand. 


You see in his eyes a little bit of struggle but mostly longing and desire, which you have trouble understanding. Completely baffled, you shake your head, moving across the hall toward the entrance, ready to go home. Screw the elves. Screw Maddox.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)Oh we need help from the elves. Oh I dont want to gain any more favor from the Crown. Liar! And Dag said faeries dont lie!!]Just when youre frustrated about not being able to save Dag or other victims, the group of swamp faeries swarm around you, blocking your way.


[[Next|revel08]]</tw-passagedata><tw-passagedata pid="376" name="watchhim" tags="" position="2475,2775" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Your jaw drops at  Maddoxs submissiveness. 
(track: &#39;revel&#39;, &#39;mute&#39;, false)

He gives you a look before being pulled away. You see in his eyes a little bit of struggle but mostly longing and desire, which you have trouble understanding. 


Completely baffled, you shake your head, moving across the hall toward the entrance, ready to go home. Screw the elves. Screw Maddox.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)//Oh we need help from the elves. Oh I dont want to gain any more favor from the Crown//. Liar! And Dag said faeries dont lie!!]Just when youre frustrated about not being able to save Dag or other victims, the group of swamp faeries swarm around you, blocking your way.


[[Next|revel08]]</tw-passagedata><tw-passagedata pid="377" name="encouragehim" tags="" position="2725,2775" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;revel&#39;, &#39;isplaying&#39;))[
    (track: &#39;revel&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;revel&#39;, &#39;fadein&#39;, 3)
	(track: &#39;revel&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Maddox! Where are you going?] 
(track: &#39;revel&#39;, &#39;mute&#39;, false)

You manage to tug him by the sleeve. He stops and turns, all puzzled. The queen shoots an icy glare at you for spoiling her fun. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;mbereft&quot;) . . . ]You see in his eyes a little bit of struggle but mostly longing and desire, which you can somehow understand. Were talking about an almost-immortal being who has spent most of his life alone underground. You remember how weirdly he was acting back home. Perhaps . . . he longs for company after all.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ahappy2&quot;)Have fun. Ill see you at home!]Then the queen pulls him away. 


Its not fair to ask him to separate from his people when you actively choose to dive down into this rabbit hole. Or rather, this faery reveal, you think bitterly.
  
  
Just when youre frustrated about not being able to save Dag or other victims, the group of swamp faeries swarm around you, blocking your way.


[[Next|revel08]]</tw-passagedata><tw-passagedata pid="378" name="hellno" tags="" position="2725,3150" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You remember reading about this Foufou in the guide. Hes a hobgoblin, a troublemaker according to Cousin Laoises notes. If you give it an inch, itll take a mile.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;)Thank you for your help. But sorry I cant help you. I have other more urgent things to do. //Cmon//, you dont need //me//. All these years you survived without the keeper, so Im sure you can get the eggs yourself.]


You totally forget what Maddox said earlier about //cleverly deferring an offer with politeness//.


***!!!!*** Foufou lets out a shocked gasp, apparently not expecting a no from you. It arches its back, its hair standing up all over its round body.


[[Take a step back|hellno2]]</tw-passagedata><tw-passagedata pid="379" name="later" tags="" position="2475,3150" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You remember reading about this Foufou in the guide. Hes a hobgoblin, a troublemaker according to Cousin Laoises notes. If you give it an inch, itll take a mile.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

However, you dont want to refuse it directly for fear of upsetting it, which means MORE TROUBLES. So you decide to beat around the bush.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)Well, Id like to help, but you see this is really not the right time, perhaps . . .]Before you can finish, it suddenly lets out an obnoxious shriek, which sounds like something is dying. 


[[Stop it.|revel11]]</tw-passagedata><tw-passagedata pid="380" name="okay" tags="" position="2600,3150" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Ugh, Okay, I guess. 
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

You remember reading about this Foufou in the guide. Hes a hobgoblin, a troublemaker according to Cousin Laoises notes. If you give it an inch, itll take a mile.


//But why did you just say yes?// You can only blame it on its cutsey hamster face and that tiny sweater. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;ablank2&quot;)But could you wait . . .]Before you can finish, it suddenly lets out an obnoxious shriek, which sounds like something is dying. 


(link-reveal-goto: &quot;Stop it.&quot;, &quot;revel11&quot;)[(set: $yesfou to true)]</tw-passagedata><tw-passagedata pid="381" name="hellno2" tags="" position="2725,3275" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Youre taken aback by the baleful look on its face.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Foufou will give Miss Keeper more time to //reconsider// her decision. I shall come back and when I do, I hope to hear //good news//!


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;awtf2&quot;)Is that a //threat//?! What youre gonna do, //huh//? Hey, dont go! Do you hear me? //Im not gonna do it!// I promise ***nothing***!!!]Foufou sprint forwards and vanishes into the crowds. You try to catch up, but a yell coming from the entrance gets your attention.


This is Prince Seaghn from the Court of Ashes. I demand an audience with the local Crown!


(link-reveal-goto: &quot;Next&quot;, &quot;sean01&quot;)[(set: $gal to $gal + (a: &quot; Foufou&quot;))(alert:&quot;You unlock a new character card! Please check your gallery!&quot;)]</tw-passagedata><tw-passagedata pid="382" name="revel11" tags="" position="2600,3275" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Are you losing your mind? 


You cover his mouth with one hand.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

You look aroundfortunately it hasnt seemed to draw anyones attention.


Hippogriff sounds! They tell you where their nest is! Foufou doesnt understand their language, but you do, Miss Keeper. Laoise did it once and found me a big round juicy egg!


//Do I?// How come you have no idea that being a keeper gives you the superpower to talk to fantastic beasts?


[[Ask why.|revel12]]</tw-passagedata><tw-passagedata pid="383" name="refusefou" tags="" position="3200,2400" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Foufou has come to hear Miss Keepers answer!
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Do I really have a choice? You made a mess of my house!


Very well then! Caaaaaaaaaaawwwwwwww!


Stop it! What the heck!!


You feel like your ears are bleeding! (if: $banshee is true)[Its even more demonic than Bronaghs wailing!]


Hippogriff sounds! They tell you where their nest is! Foufou doesnt understand their language, but you do, Miss Keeper. Laoise did it once and found me a big round juicy egg!


Do I? How come you have no idea that being a keeper gives you the superpower to talk to fantastic beasts?


[[Ask why.|refusefou2]]</tw-passagedata><tw-passagedata pid="384" name="otherfou" tags="" position="3425,2400" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
//WHERE IS MY EGG???// Miss Keeper!!! Ive been waiting for you! You didnt specify ***when your later is***. So, Foufou reckons it should be ***now***! Ive come to collect my rewards!
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

Oh craps! You totally forgot about Foufou.

Uh . . . 

Youre not getting me my egg????

I will, I will. Its just . . . I have several lives to rescue. How about this? I find out the whereabouts of those hippogriffs, and you get the egg yourself? Youre a brave ham . . . hobgoblin. Im sure you can do it!

Ok, Ill wait here for you.


[[Next.|otherfou2]]</tw-passagedata><tw-passagedata pid="385" name="refusefou2" tags="" position="3200,2525" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Wait, what do you mean by that? It ignores your question.
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

You humans are easily forgetful! For your later reference, I shall do it again . . .


Fair enough. Just . . . try not to make it too loud this time.


Sighing, you take out your phone and find the recorder.


Gaaaaaaawwwwwww


Never seen such a needy hobgoblin. Thats strange. Theyre solitary faeries!


Tell me about it.


(link-reveal-goto: &quot;Next&quot;, &quot;endch2&quot;)[(set: $foucoming4u to true)(set: $inv to $inv + (a: &quot; the recording of hippogriff sounds&quot;))(alert:&quot;You obtain a new item! Please check your inventory!&quot;)]</tw-passagedata><tw-passagedata pid="386" name="story06" tags="" position="2950,3450" size="100,100">{(display: &quot;setcard&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
Seaghn nodded cheerfully and was ready to run back home to tell his mother about his quest. 


However, before the assembly was dismissed, the eldest among the merfolk ambassadors approached him. She reached her cupped palms to the princeling.


Young champion, please take this with you on your journey. This might not help much, but it used to hold the bane before it broke free. Weve mended it and its now yours.


Seaghn took the artefact from her. It was a miniature hollow pyramid made of precious coral. 


He thanked the mermaid for her kindness.


[[Next|story07]]</tw-passagedata><tw-passagedata pid="387" name="notapproach" tags="" position="2700,4150" size="100,100">{(display: &quot;setdusk&quot;)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	}
&lt;==&gt;
You have sympathy for the boy, who was publicly humiliated by those arrogant monarchs. 

(track: &#39;seantheme&#39;, &#39;mute&#39;, false)

However, what happened with Foufou makes you hesitate. You cant just hastily approach the boy, lend him a sympathetic ear and then get yourself another faerie deal. The boy has his own troubles at hand, and you definitely dont want to be caught in the middle of this.


Afterall, youve already got (if: $refusefou is true)[a cursed brownie, a possibly drugged faerie housemate/cousin, a bunch of crying tolls, and a hamster blackmail](else:)[a cursed brownie, a possibly drugged faerie housemate/cousin,, a bunch of crying tolls, and a needy hamster].


So you just stand there like a wallflower to wait out the revel. The elven monarchs are already back to their dancing. Well, so is Maddox, who seems happy that his queen finally returns to his side so that they can dance the night away.


In sharp contrast to the merry dancing crowd, the elf-prince slouches toward your direction with a long face. He happens to stop right beside you. 


The boy lets out an awkward laugh and sighs. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sblank&quot;)That has gone poorly, hasnt it? I guess Im just desperate.]

(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;atired2&quot;) . . . I totally get it.]You respond before even realizing it. The feeling of being rejected in desperate times is certainly mutual. 


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;airritated2&quot;)And they just sent me a ***walnut*** . . .]and a ***gold*** token, but still you want to complain.


The boys eyes light up. He grabs you by the arm.


(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#C8A365&quot;)[(display: &quot;sirritated&quot;)You . . . You are a keeper? So . . . are you a human child?]


[[Next|sean06]]</tw-passagedata><tw-passagedata pid="388" name="sblank" tags="" position="3400,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/zez5UI6.jpg&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="389" name="striumph" tags="" position="3500,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/kV4oGcY.jpg&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="390" name="ssad" tags="" position="3600,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/momaHPf.png&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="391" name="sbirdface" tags="" position="3700,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/PKNfWRd.png&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="392" name="swtf" tags="" position="3800,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/HZI7Lma.png&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="393" name="shappy" tags="" position="3900,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/vfeGaYL.png&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="394" name="otherfou2" tags="" position="3425,2525" size="100,100">{
(display: &quot;setmorning&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Is this a hobgoblin?
(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)

No, it&#39;s a bloody hamster!! Argh!


Youre lying to me now!! Why???


 . . . No, verbal . . . nevermind.


Thats strange. Hobgoblins are solitary faeries. They dont usually interact with other species other than foods . . . 


Mine is genetically mutated . . . 


Hm . . . what are you saying?


 . . . 


(link-reveal-goto: &quot;Next&quot;, &quot;endch2&quot;)[(set: $foucoming4u to true)]</tw-passagedata><tw-passagedata pid="395" name="fouhome04" tags="" position="3200,1025" size="100,100">{
(display: &quot;setblack&quot;)(track: &#39;foufoutheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;seantheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
You lead Seaghn to one of the guest rooms, and fortunately, everything in the room is intact. The boy seems to try hard to suppress the urge to throw himself right onto the queen-size bed. 


You can use anything in the room. If youre hungry or thirsty, feel free to grab a drink and some biscuits from the kitchen, but keep clear of the honey jars labelled For Dag or the cabinet tagged Featherhead. Let me know if you need anything, alright?


 Affirmative! The elf prince gives you a salute by resting his right fist upon his heart. He grins and says with a sincere attitude, Thank you for letting me stay for the night!


You smile. Even though you and Seaghn have only known each other for less than a day, the adventure you had together brought you closer, binding you two with a tight knot called friendship. 


Still, your smile fades as you recollect the Bane that is looming over the sanctuary. You know that you are on the right track, yet, the uncertainties ahead still gnaw at your nerves. Will you defeat the Bane and break the curse? Will Dag recover? Will you be able to keep all the creatures in the sanctuary safe and sound? The stakes are high, especially for a college dropout who decided to inherit an estate on impulse without any prior knowledge about faeries or the Invisible World.


{
(if: $dagfriendship &gt;=1)[[[Next|tobunker]]]
(if: $dagfriendship &gt;=-2 and $dagfriendship&lt;=0)[[[Next|tobunker]]]
(if: $dagfriendship &lt;=-3)[[[Next|nobunker]]]
}</tw-passagedata><tw-passagedata pid="396" name="ssmile" tags="" position="4000,100" size="100,100">&lt;span class=&quot;sideboxleft&quot;&gt;&lt;img src=&quot;https://i.imgur.com/IpAaoof.jpg&quot; class=&quot;small&quot;/&gt;
***Seaghn***</tw-passagedata><tw-passagedata pid="397" name="bane02" tags="" position="4050,3725" size="100,100">{
(display: &quot;setblood&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
First are the sleek black and watery eyes, in which you surprisedly capture tears of relief. Then the head, the torso, and the limbs. 


As the mist completely dissipates, crouching in front of you is a withered, skinny young lad in a white furred robe. His straight hair, a purply-black with a silvery sheen, resembles the color of the night sky during a full moon, draping down from his shoulder blades and covering his entire body. Though a teen, he seems to shrink into a small child squirming in his death agonies.


He cups his hands over the big hollow in the left side of his chest, where his heart used to pound.


His eyes drift and wander over to you. He opens his mouth and utters something, but you have to come really close to be able to hear it.


 . . . Lex-lexie. Alexia . . . 


You take a step back, wiping the blood off your face. You dont know how the Bane knows your name, or whether hes calling you or somebody else. You just stand there and watch him guttering, choking, and drowning in his own blood.


Just like you left the phone on when the accident happened. You wanted to hear them shriek.


At last, its all over now.


[[Next|bane03]]</tw-passagedata><tw-passagedata pid="398" name="bane03" tags="" position="4050,3850" size="100,100">{
(display: &quot;setblood&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You look for Heartsworn, and spot it somewhere nearby the cottage . . . or the remnant of it to be precise. The Banes blood somehow erodes the sword, melting away the blade. The tilt with a heart-shaped ruby pommel is the only thing left of the legendary Heartsworn, the sword that can cut through anything, the sword unsheathable.


Just when youre going to pick it up, you find something stuck on the jagged remains of the blade. At first glance, it looks like a piece of decayed paper, like the one you found in the cabin. 


You take it off for a better look. 


Grayish pink, it is thin and feels very smooth, but the texture isnt like any kind of paper you have ever touched before. Furthermore, you used to work in a printing store, so that says something about its novelty. You dust the dirt off the piece of paper, wondering how it reminds you of the feeling of when you wiped the sweat off Seaghns forehead.


You turn to the direction of the bloody corpse and narrow your eyes.


[[Next|banefewdays]]</tw-passagedata><tw-passagedata pid="399" name="bane04" tags="" position="4050,4100" size="100,100">{
(display:&quot;setdusk&quot;)(track: &#39;banetheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
However, things didnt turn out the way you thought it would be.


After you slain the Bane, those cursed fae didnt recover, including Dag, Sean and Pineapple. You had no idea what went wrong.


Pineapple was left there at the kelpie lake to die alone, but you and Maddox managed to take Sean back to the mansion. The poor boy then went through everything Dag had gone through: comas, memory loss, and then petrifaction.


//Mummy, it hurts . . . //These were his last words.


Maddox carried Sean to the bunker and laid him beside Dag. He hummed a hauntingly wistful lament for him, which seemed to be one of those faerie mourning practices. You didnt even know why he was sad; they barely knew each other.


It didnt really stir anything in you to this point though. The moment you pierced through the Banes heart, you guess it took something away from you too.


[[Next|bane05]]</tw-passagedata><tw-passagedata pid="400" name="bane05" tags="" position="4050,4225" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
This morning you went to the wetland to send condolences and apologies to those swamp trolls. You come home late at night.


Tomorrow a Dullahan will come pick you up.  Youll return the elf prince and his wyvern back to the Court of Ashes. Youll also have to apologize to the Ash King for breaking his sword.


//So much to do//, you sigh.


Maddox is waiting for you in the lounge room.


[[Next|bane06]]</tw-passagedata><tw-passagedata pid="401" name="lovemad02" tags="" position="3675,4100" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You rush to the elf princes side and scrabble about his pockets. You find the hollow pyramid just when the Bane swishes into the cottage.


Take that!


You throw the artefact at the shadow before Maddox can react. You only hope it doesnt require any enchantment to activate! 


The vaporous figure screams in agony, unable to take this inflicting pain. It starts to dissipate, like smoke evacuated by the kitchen hood. The sky clears  as the dense dark mist is slowly sucked into the artifact. Eventually, the swathe of shadow is gone as if it has never existed. 


With a mysterious gesture, Maddox commands the artifact to return to his hand. He checks it thoroughly and lets out a sigh of relief. 


I think its fine now, lass. It will no longer pose any threat.


[[Next|lovemad03]] </tw-passagedata><tw-passagedata pid="402" name="lovenomad01" tags="" position="3525,3975" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
(char-style:(text-style:&quot;fidget&quot;))[//Dduu . . . 


. . .  yeah?


Lexie? Thank goodness you picked up the phone. Are you drunk? Where are you? You were supposed to meet us at the theater! Really, whats wrong with you these days? Your dad and I are . . . 


Thats all you wanna say? Save your bullshit. Not interested in playing a happy perfect family. You and Dad can pretend like nothing happened, but I cant! Is Dad next to you? Tell him to go fu . . . 


Booooooom!!!!!


Dduu . . . 


. . . Mum?//]


[[Next|lovenomad02]] </tw-passagedata><tw-passagedata pid="403" name="lovenomad02" tags="" position="3525,4100" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
Nooooooo! You dont want to remember it at all!


You force yourself to turn and run back to the cottage.


Something clicks the moment you see Seaghn. The merfolks artefact! It should be able to hold the Bane now that Heartsworn has weakened its power.


You rush to the elf princes side and scrabble about his pockets. You find the hollow pyramid just when the Bane swishes into the cottage.


Take that!


You throw the artefact at the shadow, hoping it doesnt require any enchantment to activate.


The vaporous figure screams in agony, unable to take this inflicting pain. It starts to dissipate, like smoke evacuated by the kitchen hood. The sky clears as the dense dark mist is slowly sucked into the artifact. Eventually, the swathe of shadow is gone as if it has never existed. 


You move forwards and pick the pyramid up from the ground. Its not hollow anymore but all sealed up with five liquidy sides. It does feel wet and watery to the touch but doesnt leak at all. 


The misty creature now coils itself up at the center of the miniature pyramid. It seems to fall into a deep sleep.


You let out a sigh of relief. At last, everything is over.


[[Next|lovenomad03]]</tw-passagedata><tw-passagedata pid="404" name="lovenomad03" tags="" position="3525,4225" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
You go pick up Heartsworn, but something is attached to the edge of the blade. At first glance, it looks like a piece of decayed paper, like the one you found in the cabin. You take it off from the sword.


Greyish pink, it is thin and feels very smooth, but the texture isnt like any kind of paper you have ever touched before. Furthermore, you used to work in a printing store, so that says something about its novelty. You dust the dirt off the piece of paper, wondering how it reminds you of the feeling of when you wiped the sweat off Seaghns forehead . . .


</tw-passagedata><tw-passagedata pid="405" name="bane06" tags="" position="4050,4350" size="100,100">{
(display: &quot;setdusk&quot;)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Two humans came this afternoon for you.


Who? What for? How could they possibly enter the sanctuary?


I let them in. They came from London . . . //the Met//.


 . . . Oh. They could well be here for the accident. What did they say?


They said they were from ***MIT 8***. They kindly explained what that meant. I told them you were out of town . . . //What did you do lass?//


Under his piercing gaze, you can hardly maintain your composure. 


What do you mean?


He corners you till your back touches against the wall.


(char-style:(text-style:&quot;fidget&quot;))[//Gerald Twine// . . . ***did you do it?***]


Youre a bit surprised that he mentions your father. What a family guardian angel.


This time you dont answer but only sneer. You watch him clench his fist, wavering, and eventually bang it on the wall.


The corners of your mouth turned even higher up.
(live:20s)[(t8n:&quot;dissolve&quot;)[(display:&quot;setblood&quot;)(stop:)]]

[[Next|we01]] </tw-passagedata><tw-passagedata pid="406" name="we02" tags="donotshowinventory" position="4350,575" size="100,100">{
(display:&quot;setcard&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
The Doyles and the Woods were always the towns mystery.


You know kids, always playing heroes and seeking adventures. That summer they learned from the elders about the ivory pony. It was heresy from 130 years ago; no one in the town was old enough to be sure about it.


There had been a time when people wandered to the riverside at night and just vanished there. A couple of days later, the smell came, and bloated remains of human corpses started emerging on the bank. They found animal bite marks, probably from dogs or wolves. But why were those bodies all disposed of in the river though?  Surely it couldnt have been the wolves.


Then there were sightings of an ivory pony, with its dripping silky mane. Then more lost souls. Then more mutilated bodies. People started to think it was the peculiar horse. Then people saw Lady Winnifred in her wheelchair and her son William, along with four strangers, heading toward the river one night. No one knew what they were doing. Afterwards, no more disappearances, no more dead bodies.


[[Next|we03]]</tw-passagedata><tw-passagedata pid="407" name="badend" tags="donotshowinventory" position="4350,1825" size="100,100">{
(display:&quot;setwhite&quot;)(track: &#39;poeticjustice&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;badend&#39;, &#39;isplaying&#39;))[
    (track: &#39;badend&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;badend&#39;, &#39;fadein&#39;, 3)
	(track: &#39;badend&#39;, &#39;loop&#39;, true)]
}
&lt;span class=&quot;menuhead&quot;&gt;&lt;span class=&quot;menupage&quot;&gt;END OF CHAPTER III&lt;/span&gt;&lt;/span&gt;
(track: &#39;badend&#39;, &#39;mute&#39;, false)
&lt;==&gt;
Youre dead.


However, the story isnt over yet. The mysteries regarding the Bane are waiting for you to unfold.


Perhaps you want to start a new round?


This time be a **milder** Alexia!


(link-goto: &quot;Start over.&quot;, &quot;newgame&quot;)</tw-passagedata><tw-passagedata pid="408" name="banefewdays" tags="" position="4050,3975" size="100,100">(display:&quot;setquickmorning&quot;)
**A few days later . . .**
{(track: &#39;banetheme&#39;, &#39;mute&#39;, false)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)
]
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setmorning&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setafternoon&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;bane04&quot;)]]
}</tw-passagedata><tw-passagedata pid="409" name="memofewdays" tags="" position="3875,4350" size="100,100">(display:&quot;setquickmorning&quot;)**A few days later . . .**
{(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
(track: &#39;banetheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setmorning&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setafternoon&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;dress01&quot;)]]
}</tw-passagedata><tw-passagedata pid="410" name="geis07" tags="" position="3350,4375" size="100,100">{
(display: &quot;setnight&quot;)
(unless: (track: &#39;banetheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;banetheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;banetheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;banetheme&#39;, &#39;loop&#39;, true)]
}
&lt;==&gt;
The evening you came home after defeating the Bane, the mansion became significantly cleaner than before you left the house, so you knew Dag was okay. 


When you greeted him with a face full of tears and snot, the old brownie just stiffened.


There, there. 


He did his best to squeeze out a word of comfort and then vanished. However, you do notice that he shows himself more often in the house now, which may signify his approval of your ability as the keeper.

</tw-passagedata><tw-passagedata pid="411" name="geisfewdays" tags="" position="3350,4500" size="100,100">(display:&quot;setquickmorning&quot;)**A few days later . . .**
{(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
(track: &#39;banetheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setmorning&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setafternoon&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;dress01&quot;)]]
}</tw-passagedata><tw-passagedata pid="412" name="lovefewdays" tags="" position="3600,4500" size="100,100">(display:&quot;setquickmorning&quot;)**A few days later . . .**
{(track: &#39;alexiatheme&#39;, &#39;mute&#39;, false)
(track: &#39;banetheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;alexiatheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;alexiatheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;alexiatheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;alexiatheme&#39;, &#39;loop&#39;, true)
]
(after: 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;setmorning&quot;)(after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=
(t8n:&quot;dissolve&quot;)[(display:&quot;setafternoon&quot;)](after: time + 1s, (cond: visits &gt; 0, 100ms, 0))[=(t8n:&quot;dissolve&quot;)[(display:&quot;dress01&quot;)]]
}</tw-passagedata><tw-passagedata pid="413" name="sheh" tags="" position="4025,600" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


You put a hand on his shoulder, ignoring Dags protest.


Are you sure about that? I want you to know that you can stay here as long as you want.


Yes, I have made up my mind. Even though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings.


Seaghn takes your hand and Maddoxs hand.


Bye and bye, and be safe! I promise to visit you in the future, and let me know when you are getting married!


You blush as if someone has set fire to your head, and Maddox chokes on the piece of bread he has in his mouth.


Seaghn! What did I tell you!!! 


You yell at his back, but he escapes from an open window. His laughter echoes in the mansion, and you know he must be teasing you on purpose! Before long, you hear the roar of the wyvern, and the flapping of her wings. You rush out to the front yard, but the elf prince is nowhere to be seen.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="414" name="sleh" tags="" position="4150,600" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


Ignoring Dag, you put a hand on his shoulder.


Thank you for being here. I hope you have found what you came for.


Well, even though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings.


You shake Seaghns hand and formally thank him.


Have a safe ride!


I will Alexia, you take care! 


He gives you a big, toothy grin and jumps through an open window. Before long, you hear the roar of the wyvern, and the flapping of her wings. You ran out to the front yard, but the elf prince is nowhere to be seen.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="415" name="shih" tags="" position="4025,850" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


You put a hand on his shoulder, ignoring Dags protest.


Are you sure about that? Wouldnt you want to see more of the human world? 


I might later, but I have made up my mind. Even though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings. 


Seaghn hugs you and whispers thank you in your ears. You stiffen up, for you havent been this intimate with anyone recently. He already releases you before you can push him away.


Bye and bye, and be safe! I promise to visit you in the future, and let me know if there will be another revel to crash!


You laugh out loudly, feeling the last bit of the remaining stress fading away with the boys toothy grin.


Ill see you later, Seaghn! Try not to get in trouble! 


You yell at his back as he waves and jumps through an open window. Before long, you hear the roar of the wyvern, and the flapping of her wings. You shake your head and sign, but you don;t have to look in the mirror to realize that you have been smiling.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="416" name="slah" tags="" position="4150,725" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
&lt;==&gt;
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


Agreed.


Dag look at you suspiciously. This might be the first time you aren&#39;t against his idea. 


Seaghn pouts, looking slightly disappointed. Seeing him like this, you almost ask him to stay. However, you feel kind of overwhelmed in his presence to be honest. Hes too . . . energetic. You really don&#39;t expect him to be this forgiving to bear with your temper.


Before you go, I want to thank you for being here. I hope you have found what you came for.


Well, even though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings.


You nod and wave at Seaghn.


Have a safe ride.


I will Alexia, you . . . take care.


He gives you a big, toothy grin and jumps through an open window. Before long, you hear the roar of the wyvern, and the flapping of her wings. You know that the elf prince is gone.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="417" name="slih" tags="" position="4150,850" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


Ignoring Dag, you put a hand on his shoulder.


Thank you for being here. I hope you have found what you came for.


Well, even though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings.


You nod at Seaghn.


Have a safe ride.


I will Alexia, you take care! 


He gives you a big, toothy grin and jumps through an open window. Before long, you hear the roar of the wyvern, and the flapping of her wings. You ran out to the front yard, but the elf prince is nowhere to be seen.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="418" name="shah" tags="" position="4025,725" size="100,100">{
(display: &quot;setmorning&quot;)(track: &#39;alexiatheme&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;seantheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;seantheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;seantheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;seantheme&#39;, &#39;loop&#39;, true)
]
}
A-hem! I think it&#39;s time for me to return home! 


Seaghn clears his throat and stands up. He brushes the bread crumbs off his raincoat, fastens Heartsworn to his belt.


Yeah, buzz off!


Ignoring Dags protest, you raise an eyebrow to the half-elf.


Already? I thought you will never get enough of the ice cream.


Seaghns face twists into a painful look for a second.


Yes, although it is very difficult indeed, I have made up my mind to live a few days without the terribly-delicious-devilish-captivating . . . Anyway, though it wasnt I who defeated the Bane, it was defeated after all. Also, I have proven Heartsworn to be a useful sword. I can go back to my people and bring them the tidings.


With sparkly eyes, Seaghn tries to hug you. You back off and pull a long face, trying to keep your cool composure. Seaghns smile doesnt fade a bit. He seems to have seen right through your masquerade.


Bye and bye, and be safe! I promise to visit you in the future! Dont forget to hoard some ice cream!


Dont you come back just for the ice cream! ! 


You yell at his back, but he escapes from an open window. Before long, you hear the roar of the wyvern, and the flapping of her wings. You let out a little laugh, knowing that the elf prince is now soaring in the sky. You wish him good luck in silence.


(link-reveal-goto: &quot;Next&quot;, &quot;eisner01&quot;)[(set: $eisner to true)]</tw-passagedata><tw-passagedata pid="419" name="we03" tags="donotshowinventory" position="4350,700" size="100,100">{
(display:&quot;setcard&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
It was said that Lady Winnifred captured the pony and raised it somewhere on her land, in that private forest and that it somehow lives till today. Our brothers and sisters wanted to see it,  and so they sneaked into the estate.


Tyler, Stevens brother who was the one to lead everybody in, said that not long after things started to get really weird. Their phones, torches and even walkie-talkies stopped working all of a sudden, and then those fireflies appeared. They werent just any normal fireflies. They were bigger and brighter, all weirdly lining up into one straight line as if pointing them the way out. 


As children they didnt think too much back then. They thought perhaps they could follow the fireflies and find the mansion, and then nicely ask Miss Woods to see them out. Yet they kind of hesitated on the idea as well, not only because they broke into her private property in the first place, but also because that mansion was haunted.


[[Next|we04]]</tw-passagedata><tw-passagedata pid="420" name="we04" tags="donotshowinventory" position="4350,825" size="100,100">{
(display:&quot;setcard&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Miss Woods mother Mrs. Woods hanged herself in her room. Or in the cellar. Or on the tree by the front porch. There were many different versions, but anyway she hanged herself, and because of this Mr. Grierson, Mandys grandfather, said that her spirit couldnt leave. 


When Mr. Grierson was still a young lad, he did the same thing every townsfolk did at least one time during their life. He also sneaked into the estate. 


It was about two years after her suicide. That night, he saw Mrs. Woods spirit. He didnt really see her face as everything happened all too fast, but he was sure it was her, or who else could that be? The woman was dressed in a white nightgown, her dark hair loose and swaying with the wind. She wandered about in the forest, howling and wailing, leaving drops of blood where she lingered.


He fled the moment she noticed him, almost wetting his pants. He told us that was one of the few things he regretted doing. 


[[Next|we05]]</tw-passagedata><tw-passagedata pid="421" name="we05" tags="donotshowinventory" position="4350,950" size="100,100">{
(display:&quot;setcard&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Back to our brothers and sisters. The fireflies didnt get them to the mansion. Instead, they took them to a lake. White flowers dotted the lake surface, yet underneath the lingering fragrance was the smell of something rotten and decayed. 


Like dead animals.


There, they saw the ivory pony with its dripping mane slowly emerging from the middle of the lake. It was strutting its way towards their direction. What was uncanny about the horse was not that it walked on water but that it was somehow . . . smiling.


Yes, a jagged and voracious grin, which revealed those deadly fangs that shouldnt appear on a horse.


[[Next|we06]]</tw-passagedata><tw-passagedata pid="422" name="we06" tags="donotshowinventory" position="4350,1075" size="100,100">{
(display:&quot;setcard&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Then it galloped, letting out bloodthirsty whinnies. Our brothers and sisters were terrified as hell and paralyzed on the ground. They all fainted, and some of them even wet themselves.


When they woke up, they found themselves all in Miss Woods car, safe and unscathed. They were already out of the estate; she was driving them home. She didnt seem mad at all. She even gave them some sweets.


Several questions pounded their heads. //What was that pony? How did they escape from it? And how did they end up in the car? It couldnt have been Miss Woods right?// 


She was just an old lady in her eighties.


However, they didnt ask Miss Woods anything, and as if things were not peculiar enough already, they somehow forgot about this adventure after getting home.


[[Next|we07]]</tw-passagedata><tw-passagedata pid="423" name="we07" tags="donotshowinventory" position="4350,1200" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
This morning we went to see Tyler. He graduated last year and came back to the town. He now works in his fathers antique shop as a clockmaker apprentice. He shooed us away, unwilling to talk about that night. He only warned us not to sneak into the estate, which is exactly what were doing right at the moment.


The Doyle estate is fenced up with high brick walls. Theres an iron gate that opens practically to no one else other than the Woods themselves, so nobody in the town knows what the mansion looks like. There are no pictures. So strange. Everything about the Doyles and the Woods is strange.


These bloody trees again!! Its Irene. She kicks a tree stump.


So far we havent encountered any technical problems yet. Our phones, torches and walkie talkies work just fine. However, we get disoriented and keep coming back to the same grove. We tried marking the trees yet the result was all the same. Its like getting lost during mining in Minecraft and being unable to find the way back.


[[Next|we08]] </tw-passagedata><tw-passagedata pid="424" name="we08" tags="donotshowinventory" position="4350,1325" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;us&#39;, &#39;isplaying&#39;))[
    (track: &#39;us&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;us&#39;, &#39;fadein&#39;, 3)
	(track: &#39;us&#39;, &#39;loop&#39;, true)]
	(track: &#39;us&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Hey, ya see dat shit? The fireflies!


Indeed, myriad sparkling lights of various colors start to emerge from the dark and flock around us. How hauntingly spectacular! Just like our brothers and sisters described.


We should follow them!


Dont be a fucking twat! What if they lead us to the bloody horse?


If youre such a smartass, why dont you lead the way then? Oh wait a sec, you just did, and look were still fucking  here! Nice job!


After a . . . rational discussion, we decide to follow the fireflies. We hope to find Miss Twine and the mansion . . . well, isnt everything uncannily familiar?


[[Next|we09]]</tw-passagedata><tw-passagedata pid="425" name="we09" tags="donotshowinventory" position="4350,1450" size="100,100">{
(display:&quot;setnight&quot;)(track: &#39;us&#39;, &#39;fadeout&#39;, 5)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
The fireflies dont take us to the lake. They lead us to the Doyle Graveyard.


We dare not enter the graveyard but all hide behind bushes because we see a man with fiery red hair there. He is carrying a dead body in his arms. We cant  see the face, but its a woman with chestnut hair, dressed in a beige lingerie frock that seems to be an antique dress from the last century.


He gently lays her down in a white coffin.


//Who is this man? Is that . . . Miss Twine? Bloody hell, murder!! How do we get out of here!?// Questions pound our head, but fate doesnt give us time to react. The most cliche thing under such circumstances happens. Theres always this one particular twat in a movie who just cant control themselves and has to snap a twig or two with their damn foot.


Crap!! Run!!


The moment the redheaded man turns to our direction, we sprint like theres no tomorrow.


[[Next|we10]]</tw-passagedata><tw-passagedata pid="426" name="we10" tags="donotshowinventory" position="4350,1575" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
We stop where it feels like a hundred yards away from the graveyard, gasping for air.


D-did we get rid of him? Bloody hell, what was //that//?


I saw Miss Twine this morning! It couldnt have been her, **right**?


Everyone falls dead silent for a while. Then a shriek breaks the silence.


Ahhhhhhh! Theres something over there!!


A tall figure walks out from the behind of a tree. Fiery red hair and pointy ears, his skin a sickly tint of mustard, very unnatural and inhuman. 


Some of us direct our phones and torches at him. He remains under the shadow of the tree, which obscures his face. The only thing we can make out of him is his one eye, gleaming eerily under the torch light.


He fumbles around in his pocket and then reaches out his hand. Were all paralysed on the ground, scared to death. We only hope gunshot takes life quicker than it gives pain. 


[[Next|we11]]</tw-passagedata><tw-passagedata pid="427" name="we11" tags="donotshowinventory" position="4350,1700" size="100,100">{
(display:&quot;setnight&quot;)
(unless: (track: &#39;poeticjustice&#39;, &#39;isplaying&#39;))[
    (track: &#39;poeticjustice&#39;, &#39;volume&#39;, 0.5)
	(track: &#39;poeticjustice&#39;, &#39;fadein&#39;, 3)
	(track: &#39;poeticjustice&#39;, &#39;loop&#39;, true)]
	(track: &#39;poeticjustice&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
Yet it wasnt a gun that the man took out. Not at all. 


Its a worn leather pouch. He flings it at Steven.


Grab one, each of you. Follow the lights, the purple ones. They take you to the gate.


Inside the pouch are six iron thumbscrews. All in a fancy ornate design recognized to the townspeople. Two twining stalks of sage flowers like a pair of cupped hands, **the Doyle arms**. These screws are for the coffin.


Goosebumps flood our skin. 


Were both terrified and puzzled. //What did you do to Miss Twine? You let us go, just like that? Why give us the screws? Whats with those fireflies? Are you even . . . HUMAN at all?//


Dont even think about it. I dont like using glamour on humans, so dont make me. Just go. Remember that this is not a place where you mortals should linger.


The solemnity in his voice shuts our mouth. We turn, each grabbing a screw. Before we dash off, some of us seem to hear him whisper.


Ill soon follow her, so I wont be around anymore . . . 


We turn back to check, but theres no one under the tree.


[[Next|badend]] </tw-passagedata><tw-passagedata pid="428" name="Untitled Passage 3" tags="" position="4500,3975" size="100,100">(char-style:(text-style:&quot;fidget&quot;))[Maybe you stayed up too late.]
(char-style: via (text-style:(either:&#39;none&#39;,&#39;blur&#39;,&#39;blurrier&#39;)))[My memory is patchy. You&#39;ll have to fill in the gaps yourself.]
(char-style: via (text-colour:(either:red,white,white)))[Blood? What blood? You&#39;re clean as a whistle.]

(b4r-color:magenta)+(b4r:&quot;ridge&quot;)[LEVEL 01: DREAM WORLD]

(b4r-color:red,yellow,green,blue)+(b4r:&quot;dotted&quot;)[Isn&#39;t it a lovely time?]

(background: (gradient: 0, 0,red, 1,black))[Red-black gradient background]

(enchant: ?passage, (box:&quot;XXX=&quot;))


(char-style: via (text-rotate: (either: 5, -5, 10, -10)))[Did you do it lass?]


(button:)[[Go to the cemetery]] </tw-passagedata><tw-passagedata pid="429" name="Go to the cemetery" tags="" position="4500,4125" size="100,100">(track: &#39;nk08_1&#39;, &#39;play&#39;)(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;awtf1&quot;)Whos there? Show yourself! Or Ill call the police!]You get up and look around, but see nothing but thin air.


(t8n:&quot;fade&quot;)+(t8n-delay:3s)[(track: &#39;nk08_1&#39;, &#39;stop&#39;)(track: &#39;nk08_2&#39;, &#39;play&#39;)Pee-ka-boo, I see you~]


There she was. (after: 2s, (cond: visits &gt; 0, 200ms, 0))[=
Covered in fur, (after: time + 2s, (cond: visits &gt; 0, 200ms, 0))[=
sitting on all fours, (after: time + 2s, (cond: visits &gt; 0, 200ms, 0))[=
and howling at the moon.


(t8n:&quot;fade&quot;)+(t8n-delay:10s)[The voice comes from above your head. You look up and see a small humanoid creature standing on the three-branch chandelier. Its no taller than a water bottle, dressed in a tattered doll-size plaid shirt, denim jeans and a beige cardigan. It has a squeezed brown face that looks like a bat, with black beady eyes and mousy, straw-like hair.]

(float-box: &quot;X=====&quot;,&quot;Y====&quot;)[CASH: $35,101] </tw-passagedata><tw-passagedata pid="430" name="Untitled Passage 2" tags="" position="2175,2875" size="100,100">(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p6&#39;, &#39;stop&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(if: $laoisetalk is true and $tapestry is true or $portraits is true)[***Maddox?*** Was that Cousin Laoises ***Uncle Maddox***? And this ***Alwyn***, was it Laoise father(if: $tapestry or $portraits is true)[ or Alwyn Snr]? Also I wonder who tore the last page.](else:)[(if: $tapestry or $portraits is true)[Which ***Alwyn*** was this, Snr or Jnr? And who was this ***Maddox*** anyway?](else:)[(track: &#39;bookfini_notapepor_nostudy&#39;, &#39;play&#39;)Were they the Doyle or Woods children? I wonder who tore the last page though.]]]
{You keep the book.(alert:&quot;You obtained a new item!&quot;)(set: $inv to $inv + (a: &quot; a homemade childrens book&quot;))
(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)(display: &quot;library&quot;)}


(track: &#39;maddoxandhislove&#39;, &#39;mute&#39;, false)(track: &#39;p6&#39;, &#39;stop&#39;)
(align:&quot;&lt;==&gt;&quot;)+(box:&quot;=XXXXXXXX=&quot;)+(text-color: &quot;#9E6300&quot;)[(display: &quot;ablank1&quot;)(if: $laoisetalk is true)[(if: $tapestry or $portraits is true)[(track: &#39;bookfini_study_tapepor&#39;, &#39;play&#39;)***Maddox?*** Was that Cousin Laoises ***Uncle Maddox***? And this ***Alwyn***, was it Laoise father or ***Alwyn Snr***? Also I wonder who tore the last page.](else:)[(track: &#39;bookfini_study_notapepor&#39;, &#39;play&#39;)***Maddox?*** Was that Cousin Laoises ***Uncle Maddox***? And this ***Alwyn***, was it Laoise father? Also I wonder who tore the last page.]](else:)[(if: $tapestry or $portraits is true)[(track: &#39;bookfini_nostudy_tapepor&#39;, &#39;play&#39;)Which ***Alwyn*** was this, Snr or Jnr? And who was this ***Maddox*** anyway?](else:)[(track: &#39;bookfini_nostudy_notapepor&#39;, &#39;play&#39;)Were they the Doyle or Woods children? I wonder who tore the last page though.]]]
{You keep the book.(alert:&quot;You obtained a new item!&quot;)(set: $inv to $inv + (a: &quot; a homemade childrens book&quot;))
(track: &#39;maddoxandhislove&#39;, &#39;fadeout&#39;, 5)(display: &quot;library&quot;)}</tw-passagedata><tw-passagedata pid="431" name="Untitled Passage 4" tags="" position="4500,4250" size="100,100">

(char-style: via (text-style: (either: &quot;fidget&quot;, &quot;blur&quot;, &quot;rumble&quot;, &quot;smear&quot;)))[Drifting in water, drifting in nightmares.]

(char-style: via (text-rotate: (either: 5, -5, 10, -10)))[Did you do it lass?]</tw-passagedata><tw-passagedata pid="432" name="fouhome02" tags="" position="3200,775" size="100,100">{
(display: &quot;setblack&quot;)
(unless: (track: &#39;foufoutheme&#39;, &#39;isplaying&#39;))[
    (track: &#39;foufoutheme&#39;, &#39;volume&#39;, 0.1)
	(track: &#39;foufoutheme&#39;, &#39;fadein&#39;, 3)
	(track: &#39;foufoutheme&#39;, &#39;loop&#39;, true)]
	(track: &#39;foufoutheme&#39;, &#39;mute&#39;, false)
}
&lt;==&gt;
No . . . Seaghn, theres graffiti on the wall!


The lounge room used to be furnished with elegant floral wallpaper, but now looks all shabby due to hideous tears here and there, even uglier than an abandoned parking lot in central London. Gigantic doodles of Foufous face at different angles occupy the walls. Theyre even wiggling! It must have been faerie magic. 


Under each face was written: (text-color: &quot;red&quot;)+(char-style: via (text-rotate: (either: 5, -5, 10, -10)))[Dont forget my egg! By Foufou]


&lt;img src=https://static.wixstatic.com/media/5ab759_c5a28475a99044f98a7018c21c892926~mv2.gif class=centerBOOK&gt;


A ludicrous red crayon lies suspiciously on the carpeted floor.


[[Next|fouhome03]]</tw-passagedata><tw-passagedata pid="433" name="inevitable01" tags="" position="4700,975" size="100,100">Today is Samhains Eve. 


Its generally believed that on this day, the boundary between the world of the living and the world of the dead is blurred, and spirits will wander into the mortal world. But really, what they perceive to be spiritual movement turns out to be the folk, who are often equally invisible to most humans.


As a keeper, youre already busy as a bee at this time of the year, since elven monarchs, wild ones and wards alike will lead evening cavalcades. Theyll all crawl out of their mounds and roam the streets, making mischief or doing harm. These mounted parades arent like monthly revels, where you only need to make sure the revelers dont get lost or wreak havoc in the sanctuary. Rather, in seasonal cavalcades, you have to protect the townspeople from your elven wards as well as their followers, which means taking necessary precautions against their forthcoming escapades. 


So, you went into town in the dead of night yesterday to spray whisky and scatter iron powder on walls and doors, just anywhere ignorant people might linger. You kept it low key so as not to get caught on CCTV cameras or by the homeless. Whats worse, you had to do this all alone without Maddox though he had insisted on coming along. You knew very little about faerie medication, but you did know that iron was fatal to the folk. The last thing you wanted was to get your pixie boyfriend sick from iron poisoning. 


[[Next|inevitable02]]</tw-passagedata><tw-passagedata pid="434" name="inevitable02" tags="" position="4700,1125" size="100,100">And the pandemic definitely didnt make things easier for a newbie keeper like you. You received notification and testing kits from the RSPFs Health and Social Care Division. You were required to help your wards get tested and then send the samples back to the lab before the Samhain Cavalcades. 


Fortunately, the Doyle Sanctuary is a relatively small one, and fortunately, certain species are immune to the coronavirus, such as the hamadryadidae, herbriformidae and cordimundidae, which populate most of the estate.  This alone saved you a lot of time and trouble. 


As for the rest, however, you took quite some EFFORT to get them to have the testthreats,  cajolery, pleading and mostly promises. Discreet ones though. Maddox and Dag helped you with their clever tongues. Maddox even managed to have the three elves get tested. You dont know how he did it, but you guess it had something to do with his ambiguous relationship with the queen.


You werent even mad about it anymore. You were just glad that it helped you get things done before the deadline, really.


[[Next|inevitable03]]</tw-passagedata><tw-passagedata pid="435" name="inevitable03" tags="" position="4700,1275" size="100,100">Due to Covid-19, trick-or-treating was highly discouraged this year. Still, you went out this evening to distribute special sweets made from anti-glamour ingredients like rowan berries and salt, just in case some kids and teens sneak into the forest. According to the townspeople, its a Doyle/Woods tradition. Laoise and many others before her used to do that every October 31st.


You come home by midnight. Maddox is waiting for you at the gate, dressed up as Connor, the android from Detroit: Become Human. 


Hes kind of . . . addicted to 21st century technologies. Once you took your PS4 out from your last moving box, his hands were basically glued to the controller, like TWENTY-FOUR SEVEN. In the end it was the stick drift that stopped him. He looked genuinely sad about it until you promised him a new controller as his Christmas gift. This childlike side of him is a big surprise to you.


Somehow he didn&#39;t want to join the cavalcade, and due to the pandemic, bonfire night had been cancelled. Even if it hadn&#39;t, it wasn&#39;t likely for him to go into town due to the powder. You wanted him to at least have fun back home, so you made him the Conner costume. You also sewed a tiny Palico onesie for Dag, yet he refused to put it on. 


//What a shame. It couldve been lovely.//


[[Next|inevitable04]]</tw-passagedata><tw-passagedata pid="436" name="inevitable04" tags="" position="4700,1425" size="100,100">Before you went out, Maddox said he wanted to take you to a place when you returned.


You snuggle beside him and slide your hand into his.


So where are we going?


The Doyle Graveyard.


//Argh, what a dream date.//


You raise a skeptical eyebrow but remain silent. These days you were too occupied with the test and everything. Its good to finally have a moment like this when its just you and him together. As long as its with him, you wouldn&#39;t even mind a graveyard picnic.


You two walk into the forest, shoulder by shoulder.


[[Next|inevitable05]]</tw-passagedata><tw-passagedata pid="437" name="inevitable05" tags="" position="4700,1575" size="100,100">However, someone is already there, standing still in front of a slab. 


Its the Goat-Horned King. Hes wearing a cloak woven with raven feathers and a silver branch circlet. Leafy gold flakes dot around his eyes, forming into an intricate design that makes him all the more regal and intimidating.


What is he doing here? The cavalcade isnt over yet . . .  You whisper to Maddox. The folk dont rest until dawn.


A frown knots his forehead. He gestures for you to stay back, but you squeeze his hand instead, signaling him that its ok. You step forward and greet the elf king with a curtsy.


Good evening, your majesty. 


Oh, its you, the clumsy lass. His eyes wander to you and Maddoxs laced fingers, and then his mouth curves into a supercilious smile. And you brought Cleenas puppy along.


It takes you a few seconds to realize he was referring to Maddox. 


So the elf queens name is Cleena, you think, wondering if you should write it down in the guide.


At the mention of the queen, Maddoxs jaw tightens, as well as his grip. Youre even more curious about him and the queen now, but its definitely not the right time to talk about it. 


[[Next|inevitable06]] </tw-passagedata><tw-passagedata pid="438" name="inevitable06" tags="" position="4700,1725" size="100,100">So, how was your night, my king?


It couldve been better, had it not been for the POWDER.


//Ok, a bad topic!// You just shot yourself in the foot!


What brought you here then?


What else could you possibly do here? I came to visit the grave of a friend. The same reason you came, isnt it, Cleenas puppy? You and that stolen child used to come here at this time of the year.


//Why!!! Why did it have to return to Maddox!? And the stolen child? That must have been Alwyn Jr.//


You came for Laoise. Why? Maddox looks as if hes going to rip his goat horns off from his head.


You look over and find that theres indeed a carpet of dainty little blue flowers around Cousin Laoises grave. The forget-me-nots. Oh shoot! You totally forgot that Laoise was once with the Goat-Horned King! Yet it seems that Dag has kept this from Maddox all this time.


[[Next|inevitable07]]</tw-passagedata><tw-passagedata pid="439" name="inevitable07" tags="" position="4700,1875" size="100,100">//She was my North, my South, my East and West / My working week and my Sunday rest / My noon, my midnight, my talk, my song / I thought that love would last for ever: I was wrong.//


He doesnt answer Maddoxs question directly but starts reciting a poem, which per se already hints at his affection for Laoise. The poem was written by W.H. Auden. You arent surprised that he knows about human poetry since the folk are naturally drawn to mortals with artistic talents of various kinds (and thus kidnap them to Faerie.) 


//Beauty is truth; truth beauty//. You mortals attempt to stop time through your art and poetry, making futile efforts just to preserve your story. How pathetic, when a sip from our wine or a bite from our fruits will suffice. Even so, she couldnt see it either; like a rose. her youth and beauty withered. At last, the long sleep that outlasts even us consumed her.


His words are ambiguous but bright enough for you to get the whole picture put together. Basically, he loved Laoise and thus wanted to detain her in Faerie by forcing her to have faerie wine or fruits, yet she refused and probably ended up dumping him for irreconcilable differences regarding this matter. This is entirely a different story from what you heard from Dag. Since the fae cant lie, you guess its just different perspectives on different parties.


[[Next|inevitable08]]</tw-passagedata><tw-passagedata pid="440" name="inevitable08" tags="" position="4700,2025" size="100,100">How dare you!! You had no right to dictate the path of her life!


Maddox apparently has guessed the underlying message too. He launches himself at the elf like a furious dad, grabbing him by the collar of his feathery cloak. You rush forwards and haul him off the king.


The king sneers at him, drawling.


One day, our paths shall meet; youll do the same thing I did.


As his voice falls, his amber eyes rest upon you. Something about them unsettles you; perhaps its the rectangular pupils. 


Will Maddox ever try to confine you in Faerie? Goosebumps flood your skin.


He falls dead silent, which shows a sign that he has at least thought about this. Since only truth can roll off their tongue, the folk for the most of time will just keep their mouths shut when they want to lie but cant.


Be careful what you wish for, lass. Our love does come with a price.


The king then whistles. Soon a silver winged-steed appears in the night sky, cantering in the air toward you. It lands before its master in an elegant swoop. He mounts the glowing horse and rides off.


[[Next|inevitable09]]</tw-passagedata><tw-passagedata pid="441" name="inevitable09" tags="" position="4700,2175" size="100,100">You turn to Maddox, still holding his hand. Before you can open your mouth, he speaks up.


I shall never force you to live in Faerie, if eternal youth is not what you ask for.


He mightve indeed thought about it, but he decided to let up the idea anyway, at least for now, or else he couldnt say it out loud like that.


We may call ourselves many things//godlike, immortal, a living monument//as our life for the most part doesnt fall into natural decay, but we stand absolutely no chance against death. //A simple dose of iron powder, a glass of rowan berry juice//you ought to believe me lass, its fairly easy. The folk arent as invincible as you might think. 


Under the moonlight, his cheeks and ears redden, and something gleams in his  green eye. Whatever that is, it&#39;s too intense. You try to dart away from his gaze, but he doesn&#39;t let you. He cups your face with his hands and forces you to drown in his eyes (puke of love XDDD).

If you don&#39;t want eternal life, then I shall follow you into the inevitable.


That carries a lot of weight, probably more than you can bear. You sigh, reach out for his cheeks, your fingers tracing the silhouette of his face and leaving gentle caresses.


How could you make such a hasty promise? What if things don&#39;t turn out the way we plan?


You stand on tiptoe and lower his head a bit so that you can press your forehead against his.


[[Next|inevitable11]]</tw-passagedata><tw-passagedata pid="442" name="inevitable11" tags="" position="4700,2325" size="100,100">(if: $empathy &gt;= 3)[Dont you ever die for love. It&#39;s rather foolish. Live for love. Live on for me once Im gone. Leave the sanctuary and go see the world. Its beautiful out there.](else-if: $aggression &gt;= 3)[Dags right. You really are a //featherhead//. Dont you ever die for me, or for love. Dont be a hopeless romantic! If Im pushing up the daisies, leave! Go find someone else! JUST LIVE ON.](else:)[//Nothing gold can stay//, Maddox. Love isnt linear. Its //a steep and thorny way//. I might love you now, but forget about you the next second. I might not stay here forever. Love isnt a log one clings to when drowning. You deserve so many other good things in this world.]


He seems to want to protest, and you know you should seal him up with a kiss, but you feel it&#39;s kind of inappropriate to do so in a graveyard.


Instead, you divert his attention to another topic.


So why exactly are we here? I assume you and the goat didnt plan to meet here and that it was just a coincidence?


 . . . I came here to bid farewell. When they sent Alwyns body back, I&#39;d already been in confinement. I also didnt have a chance to say goodbye to Laoise. It was something Alwyn and I used to do. His father died when he was five, so he couldnt quite remember him. Every Samhains Eve, we came here to recite poetry. He said this was how he connected with him. I guess Laoise received her share from his majesty. Ill just read the poem I prepared for Alwyn.


You two find Alwyns grave. You wait for Maddox to get prepared.


He takes out a piece of paper from his pocket and unfolds it. Letting out a deep breath, he starts.


[[Next|inevitable 12]]</tw-passagedata><tw-passagedata pid="443" name="inevitable 12" tags="" position="4700,2475" size="100,100">Last Post by Carol Ann Duffy


In all my dreams, before my helpless sight,
He plunges at me, guttering, choking, drowning.


If poetry could tell it backwards, true, begin
that moment shrapnel scythed you to the stinking mud
but you get up, amazed, watch bled bad blood
run upwards from the slime into its wounds;
see lines and lines of British boys rewind
back to their trenches, kiss the photographs from home-
mothers, sweethearts, sisters, younger brothers
not entering the story now
to die and die and die.
Dulce- No- Decorum- No- Pro patria mori.
You walk away.


You walk away; drop your gun (fixed bayonet)
like all your mates do too-
Harry, Tommy, Wilfred, Edward, Bert-
and light a cigarette.
There&#39;s coffee in the square,
warm French bread
and all those thousands dead
are shaking dried mud from their hair
and queuing up for home. Freshly alive,
a lad plays Tipperary to the crowd, released
from History; the glistening, healthy horses fit for heroes, kings.


You lean against a wall,
your several million lives still possible
and crammed with love, work, children, talent, English beer, good food.
You see the poet tuck away his pocket-book and smile.
If poetry could truly tell it backwards,
then it would.


[[Next|inevitable13]]</tw-passagedata><tw-passagedata pid="444" name="inevitable13" tags="" position="4700,2625" size="100,100">Wars are stupid, youve always known that. A mere read through All Quiet on the Western Front already made you quiver. 


Though you have your fair share of tragedies, it pains you to the core to watch your significant other wallowing in grief. 


You throw your arms around him and hold him tight. He remains like this for a while, face buried against your shoulder. Then, he pulls you away a bit to see you clear, gently touching your cheek. You know what hes going to do next. Though you dont think this is the right place, you cant care less.


He leans into you, closer and closer. You can feel . . .
 
 
A fierce gale blows from above and almost knocks you two to the ground.


Alexiaaaaaaa, Maddoooooooooox! I&#39;m baaaaaaack!


You look up. Its SEAN. You rub your eyes. Why on earth was he doing here!?


This was my first cavalcade!!! But I bumped into a flock of crows and got distracted for a while!!!! And the horde was //gooooooone//!


//Ok. Apparently, he got astray from the parade and somehow winded up here.//


Comeeeee, hop on!!! Ill take you back to the mansion!!


You and Maddox exchange looks and burst into laughter.


As you take off, Maddox whispers in your ear. 


Just so you know, the queen and I were never a thing. It was Alwyn that she loved, yet he loved somebody else. And now . . . I guess we can say that you and I are officially a thing.




</tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var requirejs,require,define,root,factory;!function(e){var t,n,r,i,a={},o={},s={},c={},u=Object.prototype.hasOwnProperty,l=[].slice,p=/\.js$/;function f(e,t){return u.call(e,t)}function d(e,t){var n,r,i,a,o,c,u,l,f,d,h,y=t&&t.split("/"),m=s.map,g=m&&m["*"]||{};if(e){for(o=(e=e.split("/")).length-1,s.nodeIdCompat&&p.test(e[o])&&(e[o]=e[o].replace(p,"")),"."===e[0].charAt(0)&&y&&(e=y.slice(0,y.length-1).concat(e)),f=0;f<e.length;f++)if("."===(h=e[f]))e.splice(f,1),f-=1;else if(".."===h){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((y||g)&&m){for(f=(n=e.split("/")).length;f>0;f-=1){if(r=n.slice(0,f).join("/"),y)for(d=y.length;d>0;d-=1)if((i=m[y.slice(0,d).join("/")])&&(i=i[r])){a=i,c=f;break}if(a)break;!u&&g&&g[r]&&(u=g[r],l=f)}!a&&u&&(a=u,c=l),a&&(n.splice(0,c,a),e=n.join("/"))}return e}function h(t,r){return function(){var i=l.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),n.apply(e,i.concat([t,r]))}}function y(e){return function(t){a[e]=t}}function m(n){if(f(o,n)){var r=o[n];delete o[n],c[n]=!0,t.apply(e,r)}if(!f(a,n)&&!f(c,n))throw new Error("No "+n);return a[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?g(e):[]}r=function(e,t){var n,r,i=g(e),a=i[0],o=t[1];return e=i[1],a&&(n=m(a=d(a,o))),a?e=n&&n.normalize?n.normalize(e,(r=o,function(e){return d(e,r)})):d(e,o):(a=(i=g(e=d(e,o)))[0],e=i[1],a&&(n=m(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},i={require:function(e){return h(e)},exports:function(e){var t=a[e];return void 0!==t?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:function(e){return function(){return s&&s.config&&s.config[e]||{}}}(e)}}},t=function(t,n,s,u){var l,p,d,g,b,w,T,S=[],x=void 0===s?"undefined":_typeof(s);if(w=v(u=u||t),"undefined"===x||"function"===x){for(n=!n.length&&s.length?["require","exports","module"]:n,b=0;b<n.length;b+=1)if("require"===(p=(g=r(n[b],w)).f))S[b]=i.require(t);else if("exports"===p)S[b]=i.exports(t),T=!0;else if("module"===p)l=S[b]=i.module(t);else if(f(a,p)||f(o,p)||f(c,p))S[b]=m(p);else{if(!g.p)throw new Error(t+" missing "+p);g.p.load(g.n,h(u,!0),y(p),{}),S[b]=a[p]}d=s?s.apply(a[t],S):void 0,t&&(l&&l.exports!==e&&l.exports!==a[t]?a[t]=l.exports:d===e&&T||(a[t]=d))}else t&&(a[t]=s)},requirejs=require=n=function(a,o,c,u,l){if("string"==typeof a)return i[a]?i[a](o):m(r(a,v(o)).f);if(!a.splice){if((s=a).deps&&n(s.deps,s.callback),!o)return;o.splice?(a=o,o=c,c=null):a=e}return o=o||function(){},"function"==typeof c&&(c=u,u=l),u?t(e,a,o,c):setTimeout(function(){t(e,a,o,c)},4),n},n.config=function(e){return n(e)},requirejs._defined=a,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(a,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
root=this,factory=function(){var e,t,n=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),i=Array.isArray,a=Object.keys,o=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},c=(e=o,function(){return!n(e,this,arguments)}),u=!!Object.defineProperty&&!o(function(){return Object.defineProperty({},"x",{get:function(){}})}),l="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),d=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),y=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},m=function(e,t,n){p(a(t),function(r){var i=t[r];y(e,r,i,!!n)})},g=Function.call.bind(Object.prototype.toString),v="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===g(e)}:function(e){return"function"==typeof e},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},w=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},T=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},S=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},x=function(e,t){t&&v(t.toString)&&y(e,"toString",t.toString.bind(t),!0)},k=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&a(t).forEach(function(e){S(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=k(e.prototype,{constructor:{value:n}}),t(n)})},j=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),A=j.isFinite,C=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),_=Function.call.bind(Array.prototype.concat),N=Function.call.bind(String.prototype.slice),P=Function.call.bind(Array.prototype.push),I=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),D=Math.max,R=Math.min,L=Math.floor,q=Math.abs,F=Math.exp,V=Math.log,H=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),$=function(){},B=j.Map,W=B&&B.prototype.delete,U=B&&B.prototype.get,G=B&&B.prototype.has,X=B&&B.prototype.set,Y=j.Symbol||{},J=Y.species||"@@species",K=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&A(e)},Q=v(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:K(t)?t:t<0?-1:1},ee=function(e){var t=Number(e);return t<-1||K(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(V(1+t)/(1+t-1))},te=function(e){return"[object Arguments]"===g(e)},ne=te(arguments)?te:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==g(e)&&"[object Function]"===g(e.callee)},re=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},ie=function(e){return"[object String]"===g(e)},ae=function(e){return"[object RegExp]"===g(e)},oe=function(e){return"function"==typeof j.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},se=function(e,t,n){var r=e[t];y(e,t,n,!0),x(e[t],r)},ce="function"==typeof Y&&"function"==typeof Y.for&&oe(Y()),ue=oe(Y.iterator)?Y.iterator:"_es6-shim iterator_";j.Set&&"function"==typeof(new j.Set)["@@iterator"]&&(ue="@@iterator"),j.Reflect||y(j,"Reflect",{},!0);var le,pe=j.Reflect,fe=String,de="undefined"!=typeof document&&document?document.all:null,he=null==de?function(e){return null==e}:function(e){return null==e&&e!==de},ye={Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!ye.IsCallable(e))throw new TypeError(e+" is not a function");return n(e,t,r)},RequireObjectCoercible:function(e,t){if(he(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))||e===de)},ToObject:function(e,t){return Object(ye.RequireObjectCoercible(e,t))},IsCallable:v,IsConstructor:function(e){return ye.IsCallable(e)},ToInt32:function(e){return ye.ToNumber(e)>>0},ToUint32:function(e){return ye.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===g(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ye.ToNumber(e);return K(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(q(t)):t},ToLength:function(e){var t=ye.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},IsIterable:function(e){return ye.TypeIsObject(e)&&(void 0!==e[ue]||ne(e))},GetIterator:function(e){if(ne(e))return new t(e,"value");var n=ye.GetMethod(e,ue);if(!ye.IsCallable(n))throw new TypeError("value is not an iterable");var r=ye.Call(n,e);if(!ye.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ye.ToObject(e)[t];if(!he(n)){if(!ye.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ye.GetMethod(e,"return");if(void 0!==n){var r,i;try{r=ye.Call(n,e)}catch(e){i=e}if(!t){if(i)throw i;if(!ye.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ye.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ye.IteratorNext(e);return!ye.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var i=void 0===n?e:n;if(!r&&pe.construct)return pe.construct(e,t,i);var a=i.prototype;ye.TypeIsObject(a)||(a=Object.prototype);var o=k(a),s=ye.Call(e,o,t);return ye.TypeIsObject(s)?s:o},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ye.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[J];if(he(r))return t;if(!ye.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var i=ye.ToString(e),a="<"+t;""!==n&&(a+=" "+n+'="'+ye.ToString(r).replace(/"/g,"&quot;")+'"');return a+">"+i+"</"+t+">"},IsRegExp:function(e){if(!ye.TypeIsObject(e))return!1;var t=e[Y.match];return void 0!==t?!!t:ae(e)},ToString:function(e){return fe(e)}};if(u&&ce){var me=function(e){if(oe(Y[e]))return Y[e];var t=Y.for("Symbol."+e);return Object.defineProperty(Y,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!oe(Y.search)){var ge=me("search"),ve=String.prototype.search;y(RegExp.prototype,ge,function(e){return ye.Call(ve,e,[this])});se(String.prototype,"search",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,ge);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(ve,t,[ye.ToString(e)])})}if(!oe(Y.replace)){var be=me("replace"),we=String.prototype.replace;y(RegExp.prototype,be,function(e,t){return ye.Call(we,e,[this,t])});se(String.prototype,"replace",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,be);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(we,n,[ye.ToString(e),t])})}if(!oe(Y.split)){var Te=me("split"),Se=String.prototype.split;y(RegExp.prototype,Te,function(e,t){return ye.Call(Se,e,[this,t])});se(String.prototype,"split",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,Te);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(Se,n,[ye.ToString(e),t])})}var xe=oe(Y.match),ke=xe&&((le={})[Y.match]=function(){return 42},42!=="a".match(le));if(!xe||ke){var Oe=me("match"),je=String.prototype.match;y(RegExp.prototype,Oe,function(e){return ye.Call(je,e,[this])});se(String.prototype,"match",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,Oe);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(je,t,[ye.ToString(e)])})}}var Ae=function(e,t,n){x(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?p(Object.getOwnPropertyNames(e),function(r){r in $||n[r]||w(e,r,t)}):p(Object.keys(e),function(r){r in $||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,T(e.prototype,"constructor",t)},Ce=function(){return this},Ee=function(e){u&&!z(e,J)&&b(e,J,Ce)},_e=function(e,t){var n=t||function(){return this};y(e,ue,n),!e[ue]&&oe(ue)&&(e[ue]=n)},Ne=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!ye.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Pe=function(e,t,n,r){if(!ye.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var i=t.prototype;ye.TypeIsObject(i)||(i=n);var a=k(i);for(var o in r)if(z(r,o)){var s=r[o];y(a,o,s,!0)}return a};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ie=String.fromCodePoint;se(String,"fromCodePoint",function(e){return ye.Call(Ie,this,arguments)})}var Me={fromCodePoint:function(e){for(var t,n=[],r=0,i=arguments.length;r<i;r++){if(t=Number(arguments[r]),!ye.SameValue(t,ye.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?P(n,String.fromCharCode(t)):(t-=65536,P(n,String.fromCharCode(55296+(t>>10))),P(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=ye.ToObject(e,"bad callSite"),n=ye.ToObject(t.raw,"bad raw value"),r=n.length,i=ye.ToLength(r);if(i<=0)return"";for(var a,o,s,c,u=[],l=0;l<i&&(a=ye.ToString(l),s=ye.ToString(n[a]),P(u,s),!(l+1>=i));)o=l+1<arguments.length?arguments[l+1]:"",c=ye.ToString(o),P(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&se(String,"raw",Me.raw),m(String,Me);var De={repeat:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ye.ToString(e);arguments.length>1&&(n=arguments[1]);var i=D(ye.ToInteger(n),0);return N(t,i,i+r.length)===r},endsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ye.ToString(e),i=t.length;arguments.length>1&&(n=arguments[1]);var a=void 0===n?i:ye.ToInteger(n),o=R(D(a,0),i);return N(t,o-r.length,o)===r},includes:function(e){if(ye.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ye.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e),r=t.length;if(n>=0&&n<r){var i=t.charCodeAt(n);if(i<55296||i>56319||n+1===r)return i;var a=t.charCodeAt(n+1);return a<56320||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&se(String.prototype,"includes",De.includes),String.prototype.startsWith&&String.prototype.endsWith){var Re=o(function(){return"/a/".startsWith(/a/)}),Le=s(function(){return!1==="abc".startsWith("a",1/0)});Re&&Le||(se(String.prototype,"startsWith",De.startsWith),se(String.prototype,"endsWith",De.endsWith))}ce&&(s(function(){var e=/a/;return e[Y.match]=!1,"/a/".startsWith(e)})||se(String.prototype,"startsWith",De.startsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".endsWith(e)})||se(String.prototype,"endsWith",De.endsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".includes(e)})||se(String.prototype,"includes",De.includes));m(String.prototype,De);var qe=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),Fe=new RegExp("(^["+qe+"]+)|(["+qe+"]+$)","g"),Ve=function(){return ye.ToString(ye.RequireObjectCoercible(this)).replace(Fe,"")},He=["\x85","\u200b","\ufffe"].join(""),ze=new RegExp("["+He+"]","g"),$e=/^[-+]0x[0-9a-f]+$/i,Be=He.trim().length!==He.length;y(String.prototype,"trim",Ve,Be);var We=function(e){return{value:e,done:0===arguments.length}},Ue=function(e){ye.RequireObjectCoercible(e),this._s=ye.ToString(e),this._i=0};Ue.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,We();var n,r,i=e.charCodeAt(t);return r=i<55296||i>56319||t+1===e.length?1:(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,We(e.substr(t,r))},_e(Ue.prototype),_e(String.prototype,function(){return new Ue(this)});var Ge={from:function(e){var t,n,i,a,o,s,c=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)n=!1;else{if(!ye.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2]),n=!0}if(void 0!==(ne(e)||ye.GetMethod(e,ue))){o=ye.IsConstructor(c)?Object(new c):[];var u,l,p=ye.GetIterator(e);for(s=0;!1!==(u=ye.IteratorStep(p));){l=u.value;try{n&&(l=void 0===i?t(l,s):r(t,i,l,s)),o[s]=l}catch(e){throw ye.IteratorClose(p,!0),e}s+=1}a=s}else{var f,d=ye.ToObject(e);for(a=ye.ToLength(d.length),o=ye.IsConstructor(c)?Object(new c(a)):new Array(a),s=0;s<a;++s)f=d[s],n&&(f=void 0===i?t(f,s):r(t,i,f,s)),Ne(o,s,f)}return o.length=a,o},of:function(){for(var e=arguments.length,t=this,n=i(t)||!ye.IsCallable(t)?new Array(e):ye.Construct(t,[e]),r=0;r<e;++r)Ne(n,r,arguments[r]);return n.length=e,n}};m(Array,Ge),Ee(Array),m((t=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ye.ToLength(n.length);e<r;e++){var i,a=this.kind;return"key"===a?i=e:"value"===a?i=n[e]:"entry"===a&&(i=[e,n[e]]),this.i=e+1,We(i)}return this.array=void 0,We()}}),_e(t.prototype),Array.of===Ge.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||se(Array,"of",Ge.of);var Xe={copyWithin:function(e,t){var n,r=ye.ToObject(this),i=ye.ToLength(r.length),a=ye.ToInteger(e),o=ye.ToInteger(t),s=a<0?D(i+a,0):R(a,i),c=o<0?D(i+o,0):R(o,i);arguments.length>2&&(n=arguments[2]);var u=void 0===n?i:ye.ToInteger(n),l=u<0?D(i+u,0):R(u,i),p=R(l-c,i-s),f=1;for(c<s&&s<c+p&&(f=-1,c+=p-1,s+=p-1);p>0;)c in r?r[s]=r[c]:delete r[s],c+=f,s+=f,p-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=ye.ToObject(this),i=ye.ToLength(r.length);t=ye.ToInteger(void 0===t?0:t);for(var a=(n=ye.ToInteger(void 0===n?i:n))<0?i+n:n,o=t<0?D(i+t,0):R(t,i);o<i&&o<a;++o)r[o]=e;return r},find:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var i,a=arguments.length>1?arguments[1]:null,o=0;o<n;o++)if(i=t[o],a){if(r(e,a,i,o,t))return i}else if(e(i,o,t))return i},findIndex:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,a=0;a<n;a++)if(i){if(r(e,i,t[a],a,t))return a}else if(e(t[a],a,t))return a;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ye.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ye.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(m(Array.prototype,{values:Array.prototype[ue]}),oe(Y.unscopables)&&(Array.prototype[Y.unscopables].values=!0)),l&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ye=Array.prototype.values;se(Array.prototype,"values",function(){return ye.Call(Ye,this,arguments)}),y(Array.prototype,ue,Array.prototype.values,!0)}m(Array.prototype,Xe),1/[!0].indexOf(!0,-0)<0&&y(Array.prototype,"indexOf",function(e){var t=E(this,arguments);return 0===t&&1/t<0?0:t},!0),_e(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_e(Object.getPrototypeOf([].values()));var Je,Ke=s(function(){return 0===Array.from({length:-1}).length}),Ze=1===(Je=Array.from([0].entries())).length&&i(Je[0])&&0===Je[0][0]&&0===Je[0][1];if(Ke&&Ze||se(Array,"from",Ge.from),!s(function(){return Array.from([0],void 0)})){var Qe=Array.from;se(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?ye.Call(Qe,this,arguments):r(Qe,this,e)})}var et=-(Math.pow(2,32)-1),tt=function(e,t){var n={length:et};return n[t?(n.length>>>0)-1:0]=!0,s(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!tt(Array.prototype.forEach)){var nt=Array.prototype.forEach;se(Array.prototype,"forEach",function(e){return ye.Call(nt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.map)){var rt=Array.prototype.map;se(Array.prototype,"map",function(e){return ye.Call(rt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.filter)){var it=Array.prototype.filter;se(Array.prototype,"filter",function(e){return ye.Call(it,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.some)){var at=Array.prototype.some;se(Array.prototype,"some",function(e){return ye.Call(at,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.every)){var ot=Array.prototype.every;se(Array.prototype,"every",function(e){return ye.Call(ot,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduce)){var st=Array.prototype.reduce;se(Array.prototype,"reduce",function(e){return ye.Call(st,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduceRight,!0)){var ct=Array.prototype.reduceRight;se(Array.prototype,"reduceRight",function(e){return ye.Call(ct,this.length>=0?this:[],arguments)})}var ut=8!==Number("0o10"),lt=2!==Number("0b10"),pt=h(He,function(e){return 0===Number(e+0+e)});if(ut||lt||pt){var ft=Number,dt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=dt.test.bind(dt),mt=ht.test.bind(ht),gt=ze.test.bind(ze),vt=$e.test.bind($e),bt=function(){var e=function(t){var n;"string"==typeof(n=arguments.length>0?re(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),re(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),re(t)))return t;throw new TypeError("No default value")}(t):0)&&(n=ye.Call(Ve,n),yt(n)?n=parseInt(N(n,2),2):mt(n)?n=parseInt(N(n,2),8):(gt(n)||vt(n))&&(n=NaN));var r=this,i=s(function(){return ft.prototype.valueOf.call(r),!0});return r instanceof e&&!i?new ft(n):ft(n)};return e}();Ae(ft,bt,{}),m(bt,{NaN:ft.NaN,MAX_VALUE:ft.MAX_VALUE,MIN_VALUE:ft.MIN_VALUE,NEGATIVE_INFINITY:ft.NEGATIVE_INFINITY,POSITIVE_INFINITY:ft.POSITIVE_INFINITY}),Number=bt,T(j,"Number",bt)}var wt=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:wt,MIN_SAFE_INTEGER:-wt,EPSILON:2.220446049250313e-16,parseInt:j.parseInt,parseFloat:j.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&ye.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&q(e)<=Number.MAX_SAFE_INTEGER},isNaN:K}),y(Number,"parseInt",j.parseInt,Number.parseInt!==j.parseInt),1===[,1].find(function(){return!0})&&se(Array.prototype,"find",Xe.find),0!==[,1].findIndex(function(){return!0})&&se(Array.prototype,"findIndex",Xe.findIndex);var Tt,St,xt,kt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Ot=function(e,t){u&&kt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},jt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),i=e;i<t;++i)r[i-e]=arguments[i];return r},At=function(e){return function(t,n){return t[n]=e[n],t}},Ct=function(e,t){var n,r=a(Object(t));return ye.IsCallable(Object.getOwnPropertySymbols)&&(n=d(Object.getOwnPropertySymbols(Object(t)),kt(t))),f(_(r,n||[]),At(t),e)},Et={assign:function(e,t){var n=ye.ToObject(e,"Cannot convert undefined or null to object");return f(ye.Call(jt,1,arguments),Ct,n)},is:function(e,t){return ye.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()&&se(Object,"assign",Et.assign),m(Object,Et),u){var _t={setPrototypeOf:function(e,t){var n,i=function(e,t){return function(e,t){if(!ye.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ye.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,r(n,{},null)}catch(t){if(e.prototype!=={}.__proto__)return;n=function(e){this.__proto__=e},i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object)};m(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Tt=Object.create(null),St=Object.getPrototypeOf,xt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=St(e);return t===Tt?null:t},Object.setPrototypeOf=function(e,t){return xt(e,null===t?Tt:t)},Object.setPrototypeOf.polyfill=!1),!!o(function(){return Object.keys("foo")})){var Nt=Object.keys;se(Object,"keys",function(e){return Nt(ye.ToObject(e))}),a=Object.keys}if(o(function(){return Object.keys(/a/g)})){var Pt=Object.keys;se(Object,"keys",function(e){if(ae(e)){var t=[];for(var n in e)z(e,n)&&P(t,n);return t}return Pt(e)}),a=Object.keys}if(Object.getOwnPropertyNames&&!!o(function(){return Object.getOwnPropertyNames("foo")})){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;se(Object,"getOwnPropertyNames",function(e){var t=ye.ToObject(e);if("[object Window]"===g(t))try{return Mt(t)}catch(e){return _([],It)}return Mt(t)})}if(Object.getOwnPropertyDescriptor&&!!o(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Dt=Object.getOwnPropertyDescriptor;se(Object,"getOwnPropertyDescriptor",function(e,t){return Dt(ye.ToObject(e),t)})}if(Object.seal&&!!o(function(){return Object.seal("foo")})){var Rt=Object.seal;se(Object,"seal",function(e){return ye.TypeIsObject(e)?Rt(e):e})}if(Object.isSealed&&!!o(function(){return Object.isSealed("foo")})){var Lt=Object.isSealed;se(Object,"isSealed",function(e){return!ye.TypeIsObject(e)||Lt(e)})}if(Object.freeze&&!!o(function(){return Object.freeze("foo")})){var qt=Object.freeze;se(Object,"freeze",function(e){return ye.TypeIsObject(e)?qt(e):e})}if(Object.isFrozen&&!!o(function(){return Object.isFrozen("foo")})){var Ft=Object.isFrozen;se(Object,"isFrozen",function(e){return!ye.TypeIsObject(e)||Ft(e)})}if(Object.preventExtensions&&!!o(function(){return Object.preventExtensions("foo")})){var Vt=Object.preventExtensions;se(Object,"preventExtensions",function(e){return ye.TypeIsObject(e)?Vt(e):e})}if(Object.isExtensible&&!!o(function(){return Object.isExtensible("foo")})){var Ht=Object.isExtensible;se(Object,"isExtensible",function(e){return!!ye.TypeIsObject(e)&&Ht(e)})}if(Object.getPrototypeOf&&!!o(function(){return Object.getPrototypeOf("foo")})){var zt=Object.getPrototypeOf;se(Object,"getPrototypeOf",function(e){return zt(ye.ToObject(e))})}var $t,Bt=u&&(($t=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ye.IsCallable($t.get));if(u&&!Bt){b(RegExp.prototype,"flags",function(){if(!ye.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var Wt,Ut=u&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=ce&&u&&((Wt=/./)[Y.match]=!1,RegExp(Wt)===Wt),Xt=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Yt=Xt&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Yt){var Jt=RegExp.prototype.toString;y(RegExp.prototype,"toString",function(){var e=ye.RequireObjectCoercible(this);return ae(e)?r(Jt,e):"/"+fe(e.source)+"/"+fe(e.flags)},!0),x(RegExp.prototype.toString,Jt)}if(u&&(!Ut||Gt)){var Kt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=ye.IsCallable(Zt.get)?Zt.get:function(){return this.source},en=RegExp,tn=function e(t,n){var r=ye.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?ae(t)?new e(ye.Call(Qt,t),void 0===n?ye.Call(Kt,t):n):(r&&(t.source,void 0===n&&t.flags),new en(t,n)):t};Ae(en,tn,{$input:!0}),RegExp=tn,T(j,"RegExp",tn)}if(u){var nn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(a(nn),function(e){e in RegExp&&!(nn[e]in RegExp)&&b(RegExp,nn[e],function(){return RegExp[e]})})}Ee(RegExp);var rn=1/Number.EPSILON,an=Math.pow(2,-23),on=Math.pow(2,127)*(2-an),sn=Math.pow(2,-126),cn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,pn=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(K(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return ee(t-1+H(1-n)*t);var r=t/2;return ee(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!A(t))return t;var n=q(t),r=n*n,i=Q(t);return n<1?i*ee(n+r/(H(r+1)+1)):i*(ee(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(K(t)||t<-1||t>1)return NaN;var n=q(t);return Q(t)*ee(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=F(V(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=ye.ToUint32(t);return 0===n?32:pn?ye.Call(pn,n):31-L(V(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(K(t))return NaN;if(!A(t))return 1/0;var n=F(q(t)-1);return(n+1/(n*cn*cn))*(cn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!A(t)||0===t)return t;if(q(t)>.5)return F(t)-1;for(var n=t,r=0,i=1;r+n!==r;)r+=n,n*=t/(i+=1);return r},hypot:function(e,t){for(var n=0,r=0,i=0;i<arguments.length;++i){var a=q(Number(arguments[i]));r<a?(n*=r/a*(r/a),n+=1,r=a):n+=a>0?a/r*(a/r):a}return r===1/0?1/0:r*H(n)},log2:function(e){return V(e)*un},log10:function(e){return V(e)*ln},log1p:ee,sign:Q,sinh:function(e){var t=Number(e);if(!A(t)||0===t)return t;var n=q(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var i=F(n-1);return Q(t)*(i-1/(i*cn*cn))*(cn/2)},tanh:function(e){var t=Number(e);return K(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=ye.ToUint32(e),r=ye.ToUint32(t),i=65535&n,a=65535&r;return i*a+((n>>>16&65535)*a+i*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||K(t))return t;var n=Q(t),r=q(t);if(r<sn)return n*(r/sn/an+rn-rn)*sn*an;var i=(1+an/Number.EPSILON)*r,a=i-(i-r);return a>on||K(a)?n*(1/0):n*a}},dn=function(e,t,n){return q(1-e/t)/Number.EPSILON<(n||8)};m(Math,fn),y(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),y(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),y(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),y(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),y(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),y(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),y(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),y(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),y(Math,"acosh",fn.acosh,!dn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),y(Math,"cbrt",fn.cbrt,!dn(Math.cbrt(1e-300),1e-100)),y(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);y(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var yn=Math.round,mn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),gn=[rn+1,2*rn-1].every(function(e){return Math.round(e)===e});y(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!mn||!gn),x(Math.round,yn);var vn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,x(Math.imul,vn)),2!==Math.imul.length&&se(Math,"imul",function(e,t){return ye.Call(vn,Math,arguments)});var bn,wn,Tn=function(){var e=j.setTimeout;if("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))){ye.IsPromise=function(e){return!!ye.TypeIsObject(e)&&void 0!==e._promise};var t,n=function(e){if(!ye.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!ye.IsCallable(t.resolve)||!ye.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ye.IsCallable(window.postMessage)&&(t=function(){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"zero-timeout-message"===t.data){if(t.stopPropagation(),0===e.length)return;M(e)()}},!0),function(t){P(e,t),window.postMessage("zero-timeout-message","*")}});var i,a,o,s,c,u=ye.IsCallable(j.setImmediate)?j.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(i=j.Promise,(a=i&&i.resolve&&i.resolve())&&function(e){return a.then(e)}||(ye.IsCallable(t)?t():function(t){e(t,0)})),l=function(e){return e},p=function(e){throw e},f={},d=function(e,t,n){u(function(){h(e,t,n)})},h=function(e,t,n){var r,i;if(t===f)return e(n);try{r=e(n),i=t.resolve}catch(e){r=e,i=t.reject}i(r)},y=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,a=0;i<r;i++,a+=3)d(n[a+0],n[a+2],t),e[a+0]=void 0,e[a+1]=void 0,e[a+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},g=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,a=0;i<r;i++,a+=3)d(n[a+1],n[a+2],t),e[a+0]=void 0,e[a+1]=void 0,e[a+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},v=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return g(e,new TypeError("Self resolution"));if(!ye.TypeIsObject(n))return y(e,n);try{r=n.then}catch(t){return g(e,t)}if(!ye.IsCallable(r))return y(e,n);u(function(){w(e,n,r)})}},reject:function(n){if(!t)return t=!0,g(e,n)}}},b=function(e,t,n,i){e===s?r(e,t,n,i,f):r(e,t,n,i)},w=function(e,t,n){var r=v(e),i=r.resolve,a=r.reject;try{b(n,t,i,a)}catch(e){a(e)}},T=c=function(e){if(!(this instanceof c))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ye.IsCallable(e))throw new TypeError("not a valid resolver");var t=Pe(this,c,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=v(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=T.prototype;var S=function(e,t,n,r){var i=!1;return function(a){i||(i=!0,t[e]=a,0==--r.count&&(0,n.resolve)(t))}};return m(T,{all:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,i,a=new n(t);try{return function(e,t,n){for(var r,i,a=e.iterator,o=[],s={count:1},c=0;;){try{if(!1===(r=ye.IteratorStep(a))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}o[c]=void 0;var u=t.resolve(i),l=S(c,o,n,s);s.count+=1,b(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(o);return n.promise}(i={iterator:r=ye.GetIterator(e),done:!1},t,a)}catch(e){var o=e;if(i&&!i.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,a.reject)(o),a.promise}},race:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,i,a=new n(t);try{return function(e,t,n){for(var r,i,a,o=e.iterator;;){try{if(!1===(r=ye.IteratorStep(o))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}a=t.resolve(i),b(a.then,a,n.resolve,n.reject)}return n.promise}(i={iterator:r=ye.GetIterator(e),done:!1},t,a)}catch(e){var o=e;if(i&&!i.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,a.reject)(o),a.promise}},reject:function(e){if(!ye.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new n(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ye.IsPromise(e)&&e.constructor===t)return e;var r=new n(t);return(0,r.resolve)(e),r.promise}}),m(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!ye.IsPromise(this))throw new TypeError("not a promise");var r,i=ye.SpeciesConstructor(this,T);r=arguments.length>2&&arguments[2]===f&&i===T?f:new n(i);var a,o=ye.IsCallable(e)?e:l,s=ye.IsCallable(t)?t:p,c=this._promise;if(0===c.state){if(0===c.reactionLength)c.fulfillReactionHandler0=o,c.rejectReactionHandler0=s,c.reactionCapability0=r;else{var u=3*(c.reactionLength-1);c[u+0]=o,c[u+1]=s,c[u+2]=r}c.reactionLength+=1}else if(1===c.state)a=c.result,d(o,r,a);else{if(2!==c.state)throw new TypeError("unexpected Promise state");a=c.result,d(s,r,a)}return r.promise}}),f=new n(T),s=o.then,T}}();if(j.Promise&&(delete j.Promise.accept,delete j.Promise.defer,delete j.Promise.prototype.chain),"function"==typeof Tn){m(j,{Promise:Tn});var Sn=O(j.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),xn=!o(function(){return j.Promise.reject(42).then(null,5).then(null,$)}),kn=o(function(){return j.Promise.call(3,$)}),On=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,$).then(null,$)}catch(e){return!0}return t===n}(j.Promise),jn=u&&(bn=0,wn=Object.defineProperty({},"then",{get:function(){bn+=1}}),Promise.resolve(wn),1===bn),An=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};An.prototype=Promise.prototype,An.all=Promise.all;var Cn=s(function(){return!!An.all([1,2])});if(Sn&&xn&&kn&&!On&&jn&&!Cn||(Promise=Tn,se(j,"Promise",Tn)),1!==Promise.all.length){var En=Promise.all;se(Promise,"all",function(e){return ye.Call(En,this,arguments)})}if(1!==Promise.race.length){var _n=Promise.race;se(Promise,"race",function(e){return ye.Call(_n,this,arguments)})}if(1!==Promise.resolve.length){var Nn=Promise.resolve;se(Promise,"resolve",function(e){return ye.Call(Nn,this,arguments)})}if(1!==Promise.reject.length){var Pn=Promise.reject;se(Promise,"reject",function(e){return ye.Call(Pn,this,arguments)})}Ot(Promise,"all"),Ot(Promise,"race"),Ot(Promise,"resolve"),Ot(Promise,"reject"),Ee(Promise)}var In,Mn,Dn=function(e){var t=a(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Rn=Dn(["z","a","bb"]),Ln=Dn(["z",1,"a","3",2]);if(u){var qn=function(e,t){return t||Rn?he(e)?"^"+ye.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Ln?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Fn=function(){return Object.create?Object.create(null):{}},Vn=function(e,t,n){if(i(n)||ie(n))p(n,function(e){if(!ye.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(n instanceof e)r(e.prototype.forEach,n,function(e,n){t.set(n,e)});else{var a,o;if(!he(n)){if(o=t.set,!ye.IsCallable(o))throw new TypeError("bad map");a=ye.GetIterator(n)}if(void 0!==a)for(;;){var s=ye.IteratorStep(a);if(!1===s)break;var c=s.value;try{if(!ye.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");r(o,t,c[0],c[1])}catch(e){throw ye.IteratorClose(a,!0),e}}}},Hn=function(e,t,n){if(i(n)||ie(n))p(n,function(e){t.add(e)});else if(n instanceof e)r(e.prototype.forEach,n,function(e){t.add(e)});else{var a,o;if(!he(n)){if(o=t.add,!ye.IsCallable(o))throw new TypeError("bad set");a=ye.GetIterator(n)}if(void 0!==a)for(;;){var s=ye.IteratorStep(a);if(!1===s)break;var c=s.value;try{r(o,t,c)}catch(e){throw ye.IteratorClose(a,!0),e}}}},zn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n,i=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},a=function(e,t){i(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};_e(a.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return We();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,We(e);return this.i=void 0,We()}});var o=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Pe(this,e,n,{_es6map:!0,_head:null,_map:B?new B:null,_size:0,_storage:Fn()}),i=new t(null,null);return i.next=i.prev=i,r._head=i,arguments.length>0&&Vn(e,r,arguments[0]),r};return b(n=o.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(n,{get:function(e){var t;i(this,"get");var n=qn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=U.call(this._map,e))?t.value:void 0;for(var r=this._head,a=r;(a=a.next)!==r;)if(ye.SameValueZero(a.key,e))return a.value},has:function(e){i(this,"has");var t=qn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(ye.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){i(this,"set");var r,a=this._head,o=a,s=qn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),o=a.prev}else this._map&&(G.call(this._map,e)?U.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),o=a.prev));for(;(o=o.next)!==a;)if(ye.SameValueZero(o.key,e))return o.value=n,this;return r=r||new t(e,n),ye.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){i(this,"delete");var n=this._head,r=n,a=qn(t,!0);if(null!==a){if(void 0===this._storage[a])return!1;r=this._storage[a].prev,delete this._storage[a]}else if(this._map){if(!G.call(this._map,t))return!1;r=U.call(this._map,t).prev,W.call(this._map,t)}for(;(r=r.next)!==n;)if(ye.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._map=B?new B:null,this._size=0,this._storage=Fn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return i(this,"keys"),new a(this,"key")},values:function(){return i(this,"values"),new a(this,"value")},entries:function(){return i(this,"entries"),new a(this,"key+value")},forEach:function(e){i(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),a=n.next();!a.done;a=n.next())t?r(e,t,a.value[1],a.value[0],this):e(a.value[1],a.value[0],this)}}),_e(n,n.entries),o}(),Set:function(){var e,t=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},n=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:Fn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Hn(t,n,arguments[0]),n};e=n.prototype;var i=function(e){if(!e["[[SetData]]"]){var t=new zn.Map;e["[[SetData]]"]=t,p(a(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?N(t,1):"n"===n?+N(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};b(n.prototype,"size",function(){return t(this,"size"),this._storage?a(this._storage).length:(i(this),this["[[SetData]]"].size)}),m(n.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=qn(e))?!!this._storage[n]:(i(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=qn(e))?(this._storage[n]=!0,this):(i(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=qn(e))){var r=z(this._storage,n);return delete this._storage[n]&&r}return i(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=Fn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),i(this),new o(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),i(this),new o(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var n=arguments.length>1?arguments[1]:null,a=this;i(a),this["[[SetData]]"].forEach(function(t,i){n?r(e,n,i,i,a):e(i,i,a)})}}),y(n.prototype,"keys",n.prototype.values,!0),_e(n.prototype,n.prototype.values);var o=function(e){this.it=e};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},_e(o.prototype),n}()};if(j.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(j.Set=zn.Set),j.Map||j.Set){s(function(){return 2===new Map([[1,2]]).get(1)})||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,j.Map.prototype),t},j.Map.prototype=k(B.prototype),y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var $n=new Map,Bn=((Mn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Mn),Mn.get(0)===Mn&&Mn.get(-0)===Mn&&Mn.has(0)&&Mn.has(-0)),Wn=$n.set(1,2)===$n;Bn&&Wn||se(Map.prototype,"set",function(e,t){return r(X,this,0===e?0:e,t),this}),Bn||(m(Map.prototype,{get:function(e){return r(U,this,0===e?0:e)},has:function(e){return r(G,this,0===e?0:e)}},!0),x(Map.prototype.get,U),x(Map.prototype.has,G));var Un=new Set,Gn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((In=Un).delete(0),In.add(-0),!In.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Yn=Set.prototype.add;Set.prototype.add=function(e){return r(Yn,this,0===e?0:e),this},x(Set.prototype.add,Yn)}if(!Gn){var Jn=Set.prototype.has;Set.prototype.has=function(e){return r(Jn,this,0===e?0:e)},x(Set.prototype.has,Jn);var Kn=Set.prototype.delete;Set.prototype.delete=function(e){return r(Kn,this,0===e?0:e)},x(Set.prototype.delete,Kn)}var Zn=O(j.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Qn=Object.setPrototypeOf&&!Zn,er=function(){try{return!(j.Map()instanceof j.Map)}catch(e){return e instanceof TypeError}}();0===j.Map.length&&!Qn&&er||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Map.prototype=B.prototype,y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var tr=O(j.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),nr=Object.setPrototypeOf&&!tr,rr=function(){try{return!(j.Set()instanceof j.Set)}catch(e){return e instanceof TypeError}}();if(0!==j.Set.length||nr||!rr){var ir=j.Set;j.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new ir;return arguments.length>0&&Hn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Set.prototype=ir.prototype,y(j.Set.prototype,"constructor",j.Set,!0),x(j.Set,ir)}var ar=new j.Map,or=!s(function(){return ar.keys().next().done});if(("function"!=typeof j.Map.prototype.clear||0!==(new j.Set).size||0!==ar.size||"function"!=typeof j.Map.prototype.keys||"function"!=typeof j.Set.prototype.keys||"function"!=typeof j.Map.prototype.forEach||"function"!=typeof j.Set.prototype.forEach||c(j.Map)||c(j.Set)||"function"!=typeof ar.keys().next||or||!Zn)&&m(j,{Map:zn.Map,Set:zn.Set},!0),j.Set.prototype.keys!==j.Set.prototype.values&&y(j.Set.prototype,"keys",j.Set.prototype.values,!0),_e(Object.getPrototypeOf((new j.Map).keys())),_e(Object.getPrototypeOf((new j.Set).keys())),l&&"has"!==j.Set.prototype.has.name){var sr=j.Set.prototype.has;se(j.Set.prototype,"has",function(e){return r(sr,this,e)})}}m(j,zn),Ee(j.Map),Ee(j.Set)}var cr=function(e){if(!ye.TypeIsObject(e))throw new TypeError("target must be an object")},ur={apply:function(){return ye.Call(ye.Call,null,arguments)},construct:function(e,t){if(!ye.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ye.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ye.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(cr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return cr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(ur,{ownKeys:function(e){cr(e);var t=Object.getOwnPropertyNames(e);return ye.IsCallable(Object.getOwnPropertySymbols)&&I(t,Object.getOwnPropertySymbols(e)),t}});var lr=function(e){return!o(e)};if(Object.preventExtensions&&Object.assign(ur,{isExtensible:function(e){return cr(e),Object.isExtensible(e)},preventExtensions:function(e){return cr(e),lr(function(){return Object.preventExtensions(e)})}}),u){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var i=Object.getPrototypeOf(e);if(null===i)return;return pr(i,t,n)}return"value"in r?r.value:r.get?ye.Call(r.get,n):void 0},fr=function(e,t,n,i){var a=Object.getOwnPropertyDescriptor(e,t);if(!a){var o=Object.getPrototypeOf(e);if(null!==o)return fr(o,t,n,i);a={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in a?!!a.writable&&(!!ye.TypeIsObject(i)&&(Object.getOwnPropertyDescriptor(i,t)?pe.defineProperty(i,t,{value:n}):pe.defineProperty(i,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!a.set&&(r(a.set,i,n),!0)};Object.assign(ur,{defineProperty:function(e,t,n){return cr(e),lr(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return cr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){cr(e);var n=arguments.length>2?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){cr(e);var r=arguments.length>3?arguments[3]:e;return fr(e,t,n,r)}})}if(Object.getPrototypeOf){var dr=Object.getPrototypeOf;ur.getPrototypeOf=function(e){return cr(e),dr(e)}}if(Object.setPrototypeOf&&ur.getPrototypeOf){Object.assign(ur,{setPrototypeOf:function(e,t){if(cr(e),null!==t&&!ye.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===pe.getPrototypeOf(e)||!(pe.isExtensible&&!pe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=ur.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(ur).forEach(function(e){!function(e,t){ye.IsCallable(j.Reflect[e])?s(function(){return j.Reflect[e](1),j.Reflect[e](NaN),j.Reflect[e](!0),!0})&&se(j.Reflect,e,t):y(j.Reflect,e,t)}(e,ur[e])});var hr=j.Reflect.getPrototypeOf;if(l&&hr&&"getPrototypeOf"!==hr.name&&se(j.Reflect,"getPrototypeOf",function(e){return r(hr,j.Reflect,e)}),j.Reflect.setPrototypeOf&&s(function(){return j.Reflect.setPrototypeOf(1,{}),!0})&&se(j.Reflect,"setPrototypeOf",ur.setPrototypeOf),j.Reflect.defineProperty&&(s(function(){var e=!j.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!j.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||se(j.Reflect,"defineProperty",ur.defineProperty)),j.Reflect.construct&&(s(function(){var e=function(){};return j.Reflect.construct(function(){},[],e)instanceof e})||se(j.Reflect,"construct",ur.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;se(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":ye.Call(yr,this)})}var mr={anchor:function(e){return ye.CreateHTML(this,"a","name",e)},big:function(){return ye.CreateHTML(this,"big","","")},blink:function(){return ye.CreateHTML(this,"blink","","")},bold:function(){return ye.CreateHTML(this,"b","","")},fixed:function(){return ye.CreateHTML(this,"tt","","")},fontcolor:function(e){return ye.CreateHTML(this,"font","color",e)},fontsize:function(e){return ye.CreateHTML(this,"font","size",e)},italics:function(){return ye.CreateHTML(this,"i","","")},link:function(e){return ye.CreateHTML(this,"a","href",e)},small:function(){return ye.CreateHTML(this,"small","","")},strike:function(){return ye.CreateHTML(this,"strike","","")},sub:function(){return ye.CreateHTML(this,"sub","","")},sup:function(){return ye.CreateHTML(this,"sup","","")}};p(Object.keys(mr),function(e){var t=String.prototype[e],n=!1;if(ye.IsCallable(t)){var i=r(t,"",' " '),a=_([],i.match(/"/g)).length;n=i!==i.toLowerCase()||a>2}else n=!0;n&&se(String.prototype,e,mr[e])});var gr=function(){if(!ce)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(Y()))return!0;if("[null]"!==e([Y()]))return!0;var t={a:Y()};return t[Y()]=!0,"{}"!==e(t)}(),vr=s(function(){return!ce||"{}"===JSON.stringify(Object(Y()))&&"[{}]"===JSON.stringify([Object(Y())])});if(gr||!vr){var br=JSON.stringify;se(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var n=[e];if(i(t))n.push(t);else{var a=ye.IsCallable(t)?t:null;n.push(function(e,t){var n=a?r(a,this,e,t):t;if("symbol"!==(void 0===n?"undefined":_typeof(n)))return oe(n)?At({})(n):n})}return arguments.length>2&&n.push(arguments[2]),br.apply(this,n)}})}return j},"function"==typeof define&&define.amd?define("es6-shim",factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory():root.returnExports=factory(),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=Object.getPrototypeOf,i=n.slice,a=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,s=n.indexOf,c={},u=c.toString,l=c.hasOwnProperty,p=l.toString,f=p.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,i,a=(n=n||m).createElement("script");if(a.text=e,t)for(r in g)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function b(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?c[u.call(e)]||"object":void 0===e?"undefined":_typeof(e)}var w=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===(void 0===o?"undefined":_typeof(o))||h(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,o[t]=w.extend(u,a,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=l.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a(s)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,r,i,a,o,s,c,u,l,p,f,d,h,y,m,g,v,b,w="sizzle"+1*new Date,T=e.document,S=0,x=0,k=ce(),O=ce(),j=ce(),A=ce(),C=function(e,t){return e===t&&(p=!0),0},E={}.hasOwnProperty,_=[],N=_.pop,P=_.push,I=_.push,M=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+L+"*("+q+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+L+"*\\]",V=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),$=new RegExp("^"+L+"*,"+L+"*"),B=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),U=new RegExp(V),G=new RegExp("^"+q+"$"),X={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){f()},oe=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(_=M.call(T.childNodes),T.childNodes),_[T.childNodes.length].nodeType}catch(e){I={apply:_.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var a,s,u,l,p,h,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&(f(t),t=t||d,y)){if(11!==T&&(p=Q.exec(e)))if(a=p[1]){if(9===T){if(!(u=t.getElementById(a)))return r;if(u.id===a)return r.push(u),r}else if(v&&(u=v.getElementById(a))&&b(t,u)&&u.id===a)return r.push(u),r}else{if(p[2])return I.apply(r,t.getElementsByTagName(e)),r;if((a=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===T&&(W.test(e)||B.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=w)),s=(h=o(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+be(h[s]);g=h.join(",")}try{return I.apply(r,v.querySelectorAll(g)),r}catch(t){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,r,i)}function ce(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:T;return o!=d&&9===o.nodeType&&o.documentElement?(h=(d=o).documentElement,y=!a(d),T!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ae,!1):i.attachEvent&&i.attachEvent("onunload",ae)),n.scope=le(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==T&&b(T,e)?-1:t==d||t.ownerDocument==T&&b(T,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e==d?-1:t==d?1:i?-1:a?1:l?D(l,e)-D(l,t):0;if(i===a)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==T?-1:s[r]==T?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var i=r.attrHandle[t.toLowerCase()],a=i&&E.call(r.attrHandle,t.toLowerCase())?i(e,t,!y):void 0;return void 0!==a?a:n.attributes||!y?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,a=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,f,d,h,y=a!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(m){if(a){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&v){for(b=(d=(u=(l=(p=(f=m)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=d&&m.childNodes[d];f=++d&&f&&f[y]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[S,d,b];break}}else if(v&&(b=d=(u=(l=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===b)for(;(f=++d&&f&&f[y]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((l=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=D(e,a[o])]=!(n[r]=a[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ue(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[w]?ue(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ue(function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=x++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,c){var u,l,p,f=[S,s];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[a])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(l[a]=f,f[2]=e(t,n,c))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Se(e,t,n,r,i){for(var a,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),u&&t.push(s)));return o}function xe(e,t,n,r,i,a){return r&&!r[w]&&(r=xe(r)),i&&!i[w]&&(i=xe(i,a)),ue(function(a,o,s,c){var u,l,p,f=[],d=[],h=o.length,y=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?y:Se(y,f,e,s,c),g=n?i||(a?e:h||r)?[]:o:m;if(n&&n(m,g,s,c),r)for(u=Se(g,d),r(u,[],s,c),l=u.length;l--;)(p=u[l])&&(g[d[l]]=!(m[d[l]]=p));if(a){if(i||e){if(i){for(u=[],l=g.length;l--;)(p=g[l])&&u.push(m[l]=p);i(null,g=[],u,c)}for(l=g.length;l--;)(p=g[l])&&(u=i?D(a,p):f[l])>-1&&(a[u]=!(o[u]=p))}}else g=Se(g===o?g.splice(h,g.length):g),i?i(null,o,g,c):I.apply(o,g)})}function ke(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],c=o?1:0,l=we(function(e){return e===t},s,!0),p=we(function(e){return D(t,e)>-1},s,!0),f=[function(e,n,r){var i=!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,i}];c<a;c++)if(n=r.relative[e[c].type])f=[we(Te(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[w]){for(i=++c;i<a&&!r.relative[e[i].type];i++);return xe(c>1&&Te(f),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<i&&ke(e.slice(c,i)),i<a&&ke(e=e.slice(i)),i<a&&be(e))}f.push(n)}return Te(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=se.tokenize=function(e,t){var n,i,a,o,s,c,u,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=r.preFilter;s;){for(o in n&&!(i=$.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(a=[])),n=!1,(i=B.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(i=X[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,c).slice(0)},s=se.compile=function(e,t){var n,i=[],a=[],s=j[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=ke(t[n]))[w]?i.push(s):a.push(s);(s=j(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,c,l){var p,h,m,g=0,v="0",b=a&&[],w=[],T=u,x=a||i&&r.find.TAG("*",l),k=S+=null==T?1:Math.random()||.1,O=x.length;for(l&&(u=o==d||o||l);v!==O&&null!=(p=x[v]);v++){if(i&&p){for(h=0,o||p.ownerDocument==d||(f(p),s=!y);m=e[h++];)if(m(p,o||d,s)){c.push(p);break}l&&(S=k)}n&&((p=!m&&p)&&g--,a&&b.push(p))}if(g+=v,n&&v!==g){for(h=0;m=t[h++];)m(b,w,o,s);if(a){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=N.call(c));w=Se(w)}I.apply(c,w),l&&!a&&w.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(S=k,u=T),b};return n?ue(a):a}(a,i))).selector=e}return s},c=se.select=function(e,t,n,i){var a,c,u,l,p,f="function"==typeof e&&e,d=!i&&o(e=f.selector||e);if(n=n||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&y&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(a=X.needsContext.test(e)?0:c.length;a--&&(u=c[a],!r.relative[l=u.type]);)if((p=r.find[l])&&(i=p(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(a,1),!(e=i.length&&be(c)))return I.apply(n,i),n;break}}return(f||s(e,d))(i,t,!y,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=w.expr.match.needsContext;function j(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return h(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return s.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&O.test(e)?w(e):e||[],!1).length}});var E,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&w.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,E=w(m);var N=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&w(e);if(!O.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?w.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(P[e]||w.uniqueSort(i),N.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function D(e){return e}function R(e){throw e}function L(e,t,n,r){var i;try{e&&h(i=e.promise)?i.call(e).done(t).fail(n):e&&h(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,a=[],o=[],s=-1,c=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){w.each(n,function(n,r){h(r)?e.unique&&u.has(r)||a.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=h(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=i&&i.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var a=0;function o(t,n,r,i){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<a)){if((e=r.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,h(u)?i?u.call(e,o(a,n,D,i),o(a,n,R,i)):(a++,u.call(e,o(a,n,D,i),o(a,n,R,i),o(a,n,D,n.notifyWith))):(r!==D&&(s=void 0,c=[e]),(i||n.resolveWith)(s,c))}},l=i?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,l.stackTrace),t+1>=a&&(r!==R&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),e.setTimeout(l))}}return w.Deferred(function(e){n[0][3].add(o(0,e,h(i)?i:D,e.notifyWith)),n[1][3].add(o(0,e,h(t)?t:D)),n[2][3].add(o(0,e,h(r)?r:R))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},a={};return w.each(n,function(e,t){var o=t[2],s=t[5];i[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=o.fireWith}),i.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),a=i.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?i.call(arguments):n,--t||o.resolveWith(r,a)}};if(t<=1&&(L(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||h(a[n]&&a[n].then)))return o.then();for(;n--;)L(a[n],s(n),o.reject);return o.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();function V(){m.removeEventListener("DOMContentLoaded",V),e.removeEventListener("load",V),w.ready()}w.fn.ready=function(e){return F.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(m,[w]))}}),w.ready.then=F.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",V),e.addEventListener("load",V));var H=function e(t,n,r,i,a,o,s){var c=0,u=t.length,l=null==r;if("object"===b(r))for(c in a=!0,r)e(t,n,c,r[c],!0,o,s);else if(void 0!==i&&(a=!0,h(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;c<u;c++)n(t[c],r,s?i:i.call(t[c],c,n(t[c],r)));return a?t:l?n.call(t):u?n(t[0],r):o},z=/^-ms-/,$=/-([a-z])/g;function B(e,t){return t.toUpperCase()}function W(e){return e.replace(z,"ms-").replace($,B)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[W(t)]=n;else for(r in t)i[W(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(W):(t=W(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new G,Y=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}Y.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=Y.get(a),1===a.nodeType&&!X.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=W(r.slice(5)),Z(a,r,i[r]));X.set(a,"hasDataAttrs",!0)}return i}return"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){Y.set(this,e)}):H(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=Y.get(a,e))?n:void 0!==(n=Z(a,e))?n:void 0;this.each(function(){Y.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),a=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){w.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=m.documentElement,re=function(e){return w.contains(e.ownerDocument,e)},ie={composed:!0};ne.getRootNode&&(re=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===w.css(e,"display")};function oe(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},c=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ee.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)w.style(e,t,l+u),(1-a)*(1-(a=s()/c||.5))<=0&&(o=0),l/=a;l*=2,w.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}var se={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=se[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),se[r]=i,i)}function ue(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=X.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[a]=ce(r))):"none"!==n&&(i[a]="none",X.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var le,pe,fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;le=m.createDocumentFragment().appendChild(m.createElement("div")),(pe=m.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),le.appendChild(pe),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&j(e,t)?w.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,r,i){for(var a,o,s,c,u,l,p=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((a=e[d])||0===a)if("object"===b(a))w.merge(f,a.nodeType?[a]:a);else if(ve.test(a)){for(o=o||p.appendChild(t.createElement("div")),s=(de.exec(a)||["",""])[1].toLowerCase(),c=ye[s]||ye._default,o.innerHTML=c[1]+w.htmlPrefilter(a)+c[2],l=c[0];l--;)o=o.lastChild;w.merge(f,o.childNodes),(o=p.firstChild).textContent=""}else f.push(t.createTextNode(a));for(p.textContent="",d=0;a=f[d++];)if(r&&w.inArray(a,r)>-1)i&&i.push(a);else if(u=re(a),o=me(p.appendChild(a),"script"),u&&ge(o),n)for(l=0;a=o[l++];)he.test(a.type||"")&&n.push(a);return p}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ke(){return!1}function Oe(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function je(e,t,n,r,i,a){var o,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)je(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function Ae(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,a,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=i.call(arguments),X.set(this,t,o),r=n(this,t),this[t](),o!==(a=X.get(this,t))||r?X.set(this,t,!1):a={},o!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else o.length&&(X.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,xe)}w.event={global:{},add:function(e,t,n,r,i){var a,o,s,c,u,l,p,f,d,h,y,m=X.get(e);if(U(e))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&w.find.matchesSelector(ne,i),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(p=w.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,p=w.event.special[d]||{},l=w.extend({type:d,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},a),(f=c[d])||((f=c[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(e,t,n,r,i){var a,o,s,c,u,l,p,f,d,h,y,m=X.hasData(e)&&X.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=w.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)l=f[a],!i&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(a,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));o&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||w.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[u],n,r,!0);w.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=new Array(arguments.length),c=w.event.fix(e),u=(X.get(this,"events")||Object.create(null))[c.type]||[],l=w.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=w.event.handlers.call(this,c,u),t=0;(i=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==a.namespace&&!c.rnamespace.test(a.namespace)||(c.handleObj=a,c.data=a.data,void 0!==(r=((w.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,i,a,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},n=0;n<c;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),o[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&j(t,"input")&&X.get(t,"click")||j(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return je(this,e,t,n,r)},one:function(e,t,n,r){return je(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return j(e,"table")&&j(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,a,o,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(i in X.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)w.event.add(t,i,s[i][n]);Y.hasData(e)&&(a=Y.access(e),o=w.extend({},a),Y.set(t,o))}}function De(e,t,n,r){t=a(t);var i,o,s,c,u,l,p=0,f=e.length,y=f-1,m=t[0],g=h(m);if(g||f>1&&"string"==typeof m&&!d.checkClone&&Ee.test(m))return e.each(function(i){var a=e.eq(i);g&&(t[0]=m.call(this,i,a.html())),De(a,t,n,r)});if(f&&(o=(i=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(c=(s=w.map(me(i,"script"),Pe)).length;p<f;p++)u=i,p!==y&&(u=w.clone(u,!0,!0),c&&w.merge(s,me(u,"script"))),n.call(e[p],u,p);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,Ie),p=0;p<c;p++)u=s[p],he.test(u.type||"")&&!X.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):v(u.textContent.replace(_e,""),u,l))}return e}function Re(e,t,n){for(var r,i=t?w.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||w.cleanData(me(r)),r.parentNode&&(n&&re(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,s,c,u,l=e.cloneNode(!0),p=re(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=me(l),r=0,i=(a=me(e)).length;r<i;r++)s=a[r],c=o[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&fe.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(a=a||me(e),o=o||me(l),r=0,i=a.length;r<i;r++)Me(a[r],o[r]);else Me(e,l);return(o=me(l,"script")).length>0&&ge(o,!p&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,i=w.event.special,a=0;void 0!==(n=e[a]);a++)if(U(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return H(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),w(i[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r},Ve=new RegExp(te.join("|"),"i");function He(e,t,n){var r,i,a,o,s=e.style;return(n=n||qe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||re(e)||(o=w.style(e,t)),!d.pixelBoxStyles()&&Le.test(o)&&Ve.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,c=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),i=36===n(t.width),l.style.position="absolute",a=12===n(l.offsetWidth/3),ne.removeChild(u),l=null}}function n(e){return Math.round(parseFloat(e))}var r,i,a,o,s,c,u=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,n,r,i;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),s=parseInt(i.height)>3,ne.removeChild(t)),s}}))}();var $e=["Webkit","Moz","ms"],Be=m.createElement("div").style,We={};function Ue(e){var t=w.cssProps[e]||We[e];return t||(e in Be?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in Be)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,a){var o="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+te[o],!0,i)),r?("content"===n&&(c-=w.css(e,"padding"+te[o],!0,i)),"margin"!==n&&(c-=w.css(e,"border"+te[o]+"Width",!0,i))):(c+=w.css(e,"padding"+te[o],!0,i),"padding"!==n?c+=w.css(e,"border"+te[o]+"Width",!0,i):s+=w.css(e,"border"+te[o]+"Width",!0,i));return!r&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-s-.5))||0),c}function Qe(e,t,n){var r=qe(e),i=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),a=i,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(o)){if(!n)return o;o="auto"}return(!d.boxSizingReliable()&&i||!d.reliableTrDimensions()&&j(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+Ze(e,t,n||(i?"border":"content"),a,r,o)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=W(t),c=Xe.test(t),u=e.style;if(c||(t=Ue(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t];"string"===(a=void 0===n?"undefined":_typeof(n))&&(i=ee.exec(n))&&i[1]&&(n=oe(e,t,i),a="number"),null!=n&&n==n&&("number"!==a||c||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,a,o,s=W(t);return Xe.test(t)||(t=Ue(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=He(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):Fe(e,Ye,function(){return Qe(e,t,r)})},set:function(e,n,r){var i,a=qe(e),o=!d.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,a),c=r?Ze(e,t,r,s,a):0;return s&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Ze(e,t,"border",!1,a)-.5)),c&&(i=ee.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,c)}}}),w.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+te[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=qe(e),i=t.length;o<i;o++)a[t[o]]=w.css(e,t[o],!1,r);return a}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(w.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function at(){nt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function ot(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=te[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function ut(e,t,n){var r,i,a=0,o=ut.prefilters.length,s=w.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=tt||ot(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=W(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(l,u.opts.specialEasing);a<o;a++)if(r=ut.prefilters[a].call(u,e,l,u.opts))return h(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ct,u),h(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,c,u,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&ae(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],a=a||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;y=!0}d[r]=m&&m[r]||w.style(e,r)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=m&&m.display)&&(u=X.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(ue([e],!0),u=e.style.display||u,l=w.css(e,"display"),ue([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(m?"hidden"in m&&(y=m.hidden):m=X.access(e,"fxshow",{display:u}),a&&(m.hidden=!y),y&&ue([e],!0),f.done(function(){for(r in y||ue([e]),X.remove(e,"fxshow"),d)w.style(e,r,d[r])})),c=ct(y?m[r]:0,r,f),r in m||(m[r]=c.start,y&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?w.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),a=w.speed(t,n,r),o=function(){var t=ut(this,w.extend({},e),a);(i||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=w.timers,o=X.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&it.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}}),w.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){nt||(nt=!0,at())},w.fx.stop=function(){nt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var lt,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return H(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?w.prop(e,t,n):(1===a&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&j(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=pt[o],pt[o]=i,i=null!=n(e,t,r)?o:null,pt[o]=a),i}});var ft=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}w.fn.extend({prop:function(e,t){return H(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,c=0;if(h(e))return this.each(function(t){w(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[c++];)if(i=yt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,c=0;if(h(e))return this.each(function(t){w(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(i=yt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":_typeof(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,i,a,o;if(r)for(i=0,a=w(this),o=mt(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=h(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?a+1:i.length;for(r=a<0?c:o?a:0;r<c;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!j(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=w.makeArray(t),o=i.length;o--;)((r=i[o]).selected=w.inArray(w.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var a,o,s,c,u,p,f,d,g=[r||m],v=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!vt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(b=v.split(".")).shift(),b.sort()),u=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(r,n))){if(!i&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,vt.test(c+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),s=o;s===(r.ownerDocument||m)&&g.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=g[a++])&&!t.isPropagationStopped();)d=o,t.type=a>1?c:f.bindType||v,(p=(X.get(o,"events")||Object.create(null))[t.type]&&X.get(o,"handle"))&&p.apply(o,n),(p=u&&o[u])&&p.apply&&U(o)&&(t.result=p.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!U(r)||u&&h(r[v])&&!y(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,bt),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,bt),w.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),d.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t);i||r.addEventListener(e,n,!0),X.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t)-1;i?X.access(r,t,i):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,Tt={guid:Date.now()},St=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var xt=/\[\]$/,kt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||xt.test(e)?r(e,i):At(e+"["+("object"===(void 0===i?"undefined":_typeof(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)At(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ct=/%20/g,Et=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Rt="*/".concat("*"),Lt=m.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(M)||[];if(h(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},a=e===Dt;function o(s){var c;return i[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||i[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Vt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Lt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:qt(Mt),ajaxTransport:qt(Dt),ajax:function(t,n){"object"===(void 0===t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var r,i,a,o,s,c,u,l,p,f,d=w.ajaxSetup({},n),h=d.context||d,y=d.context&&(h.nodeType||h.jquery)?w(h):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),b=d.statusCode||{},T={},S={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Nt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),O(0,t),this}};if(g.promise(k),d.url=((t||d.url||wt.href)+"").replace(It,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=m.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),Ft(Mt,d,n,k),u)return k;for(p in(l=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),i=d.url.replace(Et,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(St.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(_t,"$1"),f=(St.test(i)?"&":"?")+"_="+Tt.guid+++f),d.url=i+f),d.ifModified&&(w.lastModified[i]&&k.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&k.setRequestHeader("If-None-Match",w.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Rt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,k,d)||u))return k.abort();if(x="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),r=Ft(Dt,d,n,k)){if(k.readyState=1,l&&y.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,r.send(T,O)}catch(e){if(u)throw e;O(-1,e)}}else O(-1,"No Transport");function O(t,n,o,c){var p,f,m,T,S,x=n;u||(u=!0,s&&e.clearTimeout(s),r=void 0,a=c||"",k.readyState=t>0?4:0,p=t>=200&&t<300||304===t,o&&(T=function(e,t,n){for(var r,i,a,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)a=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==c[0]&&c.unshift(a),n[a]}(d,k,o)),!p&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),T=function(e,t,n,r){var i,a,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=l.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=l.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(o=u[c+" "+a]||u["* "+a]))for(i in u)if((s=i.split(" "))[1]===a&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}(d,T,k,p),p?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=S),(S=k.getResponseHeader("etag"))&&(w.etag[i]=S)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=T.state,f=T.data,p=!(m=T.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",p?g.resolveWith(h,[f,x,k]):g.rejectWith(h,[k,x,m]),k.statusCode(b),b=void 0,l&&y.trigger(p?"ajaxSuccess":"ajaxError",[k,d,p?f:m]),v.fireWith(h,[k,x]),l&&(y.trigger("ajaxComplete",[k,d]),--w.active||w.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return h(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,w.ajaxTransport(function(t){var n,r;if(d.cors||zt&&!t.crossDomain)return{send:function(i,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,a,o,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+i):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||w.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=e[i],e[i]=function(){o=arguments},r.always(function(){void 0===a?w(e).removeProp(i):e[i]=a,t[i]&&(t.jsonpCallback=n.jsonpCallback,Bt.push(i)),o&&h(a)&&a(o[0]),o=a=void 0}),"script"}),d.createHTMLDocument=(($t=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),a=!n&&[],(i=A.exec(e))?[t.createElement(i[1])]:(i=be([e],t,a),a&&a.length&&w(a).remove(),w.merge([],i.childNodes)));var r,i,a},w.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(i="POST"),o.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,a,o,s,c,u=w.css(e,"position"),l=w(e),p={};"static"===u&&(e.style.position="relative"),s=l.offset(),a=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+c).indexOf("auto")>-1?(o=(r=l.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(c)||0),h(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),l.css(p))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ne})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return H(this,function(e,r,i){var a;if(y(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=He(e,t),Le.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return H(this,function(t,n,i){var a;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,o?i:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=i.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||w.guid++,a},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=j,w.isFunction=h,w.isWindow=y,w.camelCase=W,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Ut,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Gt),w},void 0===t&&(e.jQuery=e.$=w),w}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]instanceof Text?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return e instanceof Text&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){var e=void 0,t={};function n(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function r(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function i(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function a(e){for(var n=e.innerText,r=[],a=0,s=a,c=n.length,u=null;a<c;){for(var l=n.slice(a),p=(r.length?r[0]:e).innerMode,f=0,d=p.length;f<d;f+=1){var h=t[p[f]];if(i(h,l,u,s<a)&&h.pattern.test(l)){var y=h.pattern.exec(l),m=h.fn(y),g=!1,v=0;if(m.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in m.matches){g=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),m.cannotCross&&m.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!m.isFront)continue}s<a&&e.addChild({type:"text",text:n.slice(s,a),innerMode:p}),s=a+=(u=e.addChild(m)).text.length,g&&(o(e,u,r[v]),r=r.slice(v+1)),u.isFrontToken()&&r.unshift(u);break}}f===d&&(a+=1,null===u&&(u={type:"text"}))}for(s<a&&e.addChild({type:"text",text:n.slice(s,a),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function o(e,t,n){var i=e.children.indexOf(t),a=e.children.indexOf(n);t.children=e.children.splice(a+1,i-(a+1)),t.children.forEach(function(e){r(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,s=t.children.length;o<s;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(a,1),r(e,t)}n.prototype={constructor:n,addChild:function(e){var t=this.lastChildEnd(),i=new n({start:t,end:e.text&&t+e.text.length,children:[]},e);return i.innerText&&a(i),this.children.push(i),r(this,i),i},firstChild:function(){return this.children&&this.children[0]||null},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return t&&n.everyLeaf(e)},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},e={lex:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return a(new n({type:"root",start:r||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:e.modes[i]}))},rules:t,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("lexer",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=e):this.TwineLexer=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e;function t(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?(Object.keys(e).forEach(function(n){e[n]=t(e[n])}),e):(e+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=n("?:"),i=n("?!"),a=n("?="),o="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=o.replace("*","+"),c="\\b",u="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",l=u.replace("\\-",""),p=r("\\n","$"),f=o+"(\\*+)"+s,d=o+"((?:0\\.)+)"+s,h=o+"-{3,}"+o+p,y=o+"(==+>|<=+|=+><=+|<==+>)"+o+p,m=o+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+o+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(t).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+i("\\]"))+"+)"},v=l+"*"+l.replace("\\w","a-zA-Z")+l+"*",b="\\$("+v+")",w="_("+v+")",T="'s"+s+"("+v+")",S="("+v+")"+s+"of"+c+i("it\\b"),x="'s"+s,k=r("it","time","visits?","exits?","pos")+c,O="its"+s+"("+v+")",j="its"+s,A="("+v+")"+s+"of"+s+"it"+c,C="of\\b"+s+"it"+c,E={opener:"\\(",name:"("+r("\\$","_")+"?"+u+"+):"+i("\\/"),closer:"\\)"},_=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),N="[a-zA-Z][\\w\\-]*",P="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",I="\\|("+u+"+)(>|\\))",M="(<|\\()("+u+"+)\\|",D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+i("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:u,anyLetterStrict:l,whitespace:s,escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+N+P+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style","textarea")+")"+P+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:y,column:m,bulleted:f,numbered:d,strikeOpener:t("~~"),italicOpener:t("//"),boldOpener:t("''"),supOpener:t("^^"),strongFront:t("**"),strongBack:t("**"),emFront:t("*"),emBack:t("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\["+i("=+"),hookPrependedFront:I+"\\["+i("=+"),hookFront:"\\["+i("=+"),hookBack:"\\]"+i(M),hookAppendedBack:"\\]"+M,unclosedHook:"\\[=+",unclosedHookPrepended:I+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,passageLinkPeek:"[[",legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,legacyLinkPeek:"[[",simpleLink:g.opener+g.legacyText+g.closer,simpleLinkPeek:"[[",macroFront:E.opener+a(E.name),macroFrontPeek:"(",macroName:E.name,groupingFront:"\\("+i(E.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",validPropertyName:v,property:T,propertyPeek:"'s",belongingProperty:S,possessiveOperator:x,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:j,itsOperatorPeek:"its",belongingItOperator:C,belongingItOperatorPeek:"of",variable:b,variablePeek:"$",tempVariable:w,tempVariablePeek:"_",hookName:"\\?("+u+"+)\\b",hookNamePeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+i("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:D,boolean:r("true","false")+c,identifier:k,itsProperty:O,itsPropertyPeek:"its",belongingItProperty:A,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+i(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+i(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+o+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:t("+")+i("="),subtraction:t("-")+i("=","type"),multiplication:t("*")+i("="),division:r("/","%")+i("="),comma:",",spread:"\\.\\.\\."+i("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:t("-type")+c,incorrectOperator:_},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var t=Object.keys,n=Object.assign;function r(r){return Object.freeze({lex:function(r){function i(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function a(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var o=Object.bind(0,null);function s(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var i=r(t);return i.text||(i.text=t[0]),i.type||(i.type=n),i.innerMode||(i.innerMode=e),i}}),t}var c=[],u=[],l=[],p=s(c,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});t(p).forEach(function(e){p[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align","column","escapedLine"],p[e].cannotFollow=["text"]});var f=s(c,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:a("boldOpener","bold")},italicOpener:{fn:a("italicOpener","italic")},strikeOpener:{fn:a("strikeOpener","strike")},supOpener:{fn:a("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:o},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},unclosedCollapsed:{fn:o},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:c}}},br:{fn:o}}),d=n(s(u,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",r=e[3]||"";return{type:"twineLink",innerText:n?r:t,passage:t?r:n,innerMode:c}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:c}}},variable:{cannotFollow:["macroFront"],fn:i("name")},tempVariable:{cannotFollow:["macroFront"],fn:i("name")}}),{hookFront:f.hookFront,hookBack:f.hookBack}),h=s(u,n({macroName:{canFollow:["macroFront"],fn:i("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:i("name"),canFollow:["variable","hookName","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","datatype","hook","boolean","number"]},possessiveOperator:{fn:o},itsProperty:{cannotFollow:["text"],fn:i("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:i("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:i("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:l}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:l}}},hookName:{fn:i("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollow:["text"],fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:i("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollow:"text"}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{}))),y=s(l,{singleStringCloser:h.singleStringOpener,doubleStringCloser:h.doubleStringOpener,escapedStringChar:h.escapedStringChar});c.push.apply(c,_toConsumableArray(t(p)).concat(_toConsumableArray(t(d)),_toConsumableArray(t(f)))),u.push.apply(u,_toConsumableArray(t(d)).concat(_toConsumableArray(t(h)))),l.push.apply(l,_toConsumableArray(t(y)));var m=n({},p,f,d,h,y);t(m).forEach(function(t){var n=e[t];m[t].pattern="string"!=typeof n?n:RegExp("^(?:"+n+")","i"),e[t+"Peek"]&&(m[t].peek=e[t+"Peek"])}),n(r.rules,m);var g=r.modes;return g.start=g.markup=c,g.macro=u,g.string=l,r}(r).lex,Patterns:e})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(e=require("./patterns"),module.exports=r(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(t,n){return e=n,r(t)}):this&&this.loaded&&this.modules?(e=this.modules.Patterns,this.modules.Markup=r(this.modules.Lexer)):(e=this.Patterns,this.TwineMarkup=r(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&void 0!==t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),i=parseInt(r.length);if(i<=0)return!1;for(var a=n>=0?n:Math.max(0,i+n);a<i;){if(Object.is(t,r[a]))return!0;a+=1}return!1}),!window.Symbol&&(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils",["jquery","markup","utils/polyfills"],function(e){var t=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),i=["audio"],a=[function(e){return t(e)!==t(e).toLowerCase()},function(e){return t(e)!==t(e).toUpperCase()},function(e){return t(e).toLowerCase()!==t(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,n,r){return e===r[n-1]+1&&e===r[n+1]-1?"-":t(e)}).join("").replace(/\-+/g,"-")+"]"}),o=_slicedToArray(a,3),s=o[0],c=o[1],u=o[2];function l(e){return"instant"===e?0:800}var p=void 0,f=[],d={},h=0,y={},m=0,g={},v=void 0;function b(e,t,n,r,i){var a=null,o=0,s=t+n;function c(n){1&e[0].compareDocumentPosition(document)&&(s=0),a&&(s-=n-a,o+=n-a),a=n,r>0&&h+m>0&&(s-=r,e.css("animation-delay",(v.cssTimeUnit(e.css("animation-delay"))||0)-r+"ms")),s<=0?i(o):requestAnimationFrame(c),s<=t&&e.css("visibility","")}s?requestAnimationFrame(c):c()}return e(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,r=e.type.includes("down"),i=t?d:y,a=t&&v.insensitiveName(t)||n;i[a]&&!r?t?h=Math.max(h-1,0):m=Math.max(m-1,0):!i[a]&&r&&(t?h+=1:m+=1),i[a]=r}).on("mousemove",function(e){var t=e.pageX,n=e.pageY;g.x=t,g.y=n}),v={lockProperty:function(e,t,n){var r=Object.create({configurable:0,writable:0});return n&&(r.value=n),Object.defineProperty(e,t,r),e},permutations:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,i=[[].concat(t)],a=Array(r).fill(0),o=1,s=void 0,c=void 0;o<r;)a[o]<o?(s=o%2&&a[o],c=t[o],t[o]=t[s],t[s]=c,++a[o],o=1,i.push([].concat(t))):(a[o]=0,++o);return i},shuffled:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[])},matMul:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a;if(r.length>0)return(a=v).matMul.apply(a,[v.matMul(e,t)].concat(r));if(!t)return e;for(var o=[],s=0;s<e.length;s++){o[s]=[];for(var c=0;c<t[0].length;c++){for(var u=0,l=0;l<e[0].length;l++)u+=e[s][l]*t[l][c];o[s][c]=u}}return o},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:s,anyLowercase:c,anyCasedLetter:u,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},allKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return d[e]})},someKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return d[e]})},buttonsDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return y[e]})},anyInputDown:function(){return h+m>0},mouseCoords:g,parentColours:function(e){for(var t={colour:null,backgroundColour:null},n=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent()){if(!t.backgroundColour){var r=e.css("background-color");r.match(n)||(t.backgroundColour=r)}if(!t.colour){var i=e.css("color");i.match(n)||(t.colour=i)}if(t.colour&&t.backgroundColour)return t}return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){return!!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))||!n.includes(e.tagName.toLowerCase())&&!/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style"))&&(!!r.includes(e.tagName.toLowerCase())||(t.push(e),!0))})&&t.every(function(e){return window.getComputedStyle(e).display.includes("inline")})},transitionReplace:function(t,n,r){var i=t.closest("tw-hook");i.length>0&&(t=i);var a=e("<tw-transition-container>").css("position","relative");a.insertBefore(t.first());var o=void 0;n&&(o=e("<tw-transition-container>").appendTo(a),n.appendTo(o));var s=e("<tw-transition-container>").css("position","absolute").prependTo(a);t.detach().appendTo(s),v.transitionOut(s,r),n&&v.transitionIn(o,r,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||l(t),(e.length>1||!v.childrenProbablyInline(e)||!["tw-hook","tw-passage","tw-expression"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),o&&e.css("transform-origin",o),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":n+"ms","animation-delay":r-a+"ms"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),b(e,n,r-a,i,function(){e.remove()}))},transitionIn:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(0!==t.length){r=r||l(n);var u=t.length>1||!v.childrenProbablyInline(t)||!["tw-hook","tw-passage","tw-expression"].includes(t.tag());u&&(t=t.wrapAll("<tw-transition-container>").parent()),c&&t.css("transform-origin",c),t.attr("data-t8n",n).addClass("transition-in").css(Object.assign({"animation-duration":r+"ms","animation-delay":a-s+"ms"},a-s?{visibility:"hidden"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(t)?t.css("display","inline"):t.parent().is("tw-backdrop,tw-story")||t[0].setAttribute("style",t[0].getAttribute("style")+"display:block !important;width:100%")}),b(t,r,a-s,o,function(n){var r=0===t.filter(i.join(",")).length;u&&r?(t.find("tw-transition-container").each(function(t,r){(r=e(r)).css("animation-delay",v.cssTimeUnit(r.css("animation-delay")||0)-n+"ms")}),t.contents().unwrap()):t.removeClass("transition-in").removeAttr("data-t8n")})}},debounce:function(e){var t=void 0,n=void 0,r=0,i=function i(){Date.now()-r>300?(t=0,e.apply(void 0,_toConsumableArray(n))):t=requestAnimationFrame(i)};return function(){r=Date.now(),n=arguments,t&&cancelAnimationFrame(t),t=requestAnimationFrame(i)}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},onStartup:function(e){f?f.push(e):e()},get storyElement(){return p}},e(function(){p=e("tw-story"),f.forEach(function(e){return e()}),f=null}),Object.freeze(v)}),define("utils/naturalsort",[],function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(n,r){var i,a,o,s,c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,p=/^0/,f=t(n).trim(),d=t(r).trim(),h=f.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=d.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(l))||1!==h.length&&f.match(u)&&Date.parse(f),g=parseInt(d.match(l))||m&&d.match(u)&&Date.parse(d)||null;if(e&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(e)),g){if(m<g)return-1;if(m>g)return 1}for(var v=0,b=Math.max(h.length,y.length);v<b;v++){if(i=!(h[v]||"").match(p)&&parseFloat(h[v])||h[v]||0,a=!(y[v]||"").match(p)&&parseFloat(y[v])||y[v]||0,isNaN(i)!==isNaN(a))return isNaN(i)?1:-1;if((void 0===i?"undefined":_typeof(i))!==(void 0===a?"undefined":_typeof(a)))i+="",a+="";else if("string"==typeof i&&o&&0!==(s=o.compare(i,a)))return s;if(i<a)return-1;if(i>a)return 1}return 0}}}),define("twinescript/compiler",["utils"],function(e){var t=e.impossible,n=JSON.stringify;function r(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function i(e,t){var n=[];return e.length?([["error"],["comma"],["to","into"],["where","when","via"],["making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink"],["macro"],["grouping"]]["most"===t?"reverse":"valueOf"]().some(function(t){var i=void 0;if(i=t.rightAssociative?r(e,t.rightAssociative):function(e,t){return e.length-1-r.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),t])}(e,t),!Number.isNaN(i)&&i>-1)return n=[e[i],i],!0}),n):n}function a(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=a(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"}[t]||t}var s=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"];return function e(r){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=c.isVarRef,l=c.isTypedVar,p=c.whitespaceError,f=c.elidedComparison,d=c.testNeedsRight,h="Operations.Identifiers.it";if(!(r=[].concat(r)).length)return u&&p?"TwineError.create('operation',"+n(p)+")":"";var y=void 0;if(1===r.length){var m=(y=r[0]).type;if("identifier"===m)return u?"VarRef.create(Operations.Identifiers,"+n(y.text)+")":"Operations.Identifiers."+y.text.toLowerCase()+" ";if("variable"===m||"tempVariable"===m){var g="VarRef.create("+("tempVariable"===m?"section.stackTop.tempV":"State.v")+"ariables,"+n(y.name)+")"+(u||l?"":".get()");return l?"TypedVar.create(Datatype.create('any'),"+g+")":g}if("hookName"===m)return"HookSet.create({type:'name', data:'"+y.name+"'}) ";if("string"===m)return y.text.replace(/\n/g,"\\n");if("hook"===m)return"CodeHook.create("+n(y.text.slice(1,-1))+","+n(y.html||"")+")";if("colour"===m)return"Colour.create("+n(y.colour)+")";if("datatype"===m)return"Datatype.create("+n(y.name)+")";if("blockedValue"===m)return"section.blockedValue()";if("root"===m)return e(y.children);if("whitespace"===m&&u&&p)return"TwineError.create('operation',"+n(p)+")"}var v,b=i(r,"least"),w=_slicedToArray(b,2);y=w[0],v=w[1];var T=(y||{}).type,S=r.slice(0,v),x=r.slice(v+1),k=function(e,t){return{isVarRef:!0,isTypedVar:t,whitespaceError:"I need usable data to be on the "+e+' of "'+y.text+'".'}},O="must",j="mustn't",A="may",C=void 0,E=void 0,_="",N="",P="",I=O,M=O,D=!1;if(T)if("comma"===T)N=",",M=A;else if("spread"===T)_="Operations.makeSpreader(",P=")",I=A;else if("bind"===T)_="VarBind.create(",E=e(x,k("right")),P=(y.text.startsWith("2")?",'two way'":"")+")",I=j;else if("to"===T)_="Operations.makeAssignmentRequest(Operations.setIt(",E=e(x,k("right")),N="),",C=e(S,k("left",!0)),P=",'to')";else if("into"===T)_="Operations.makeAssignmentRequest(",E=e(S,k("left")),N=",Operations.setIt(",C=e(x,k("right",!0)),P="),'into')";else if("typeSignature"===T)_="TypedVar.create(",N=",",E=e(x,k("right")),P=")",l=!1;else if("where"===T||"when"===T||"via"===T)_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=n(e(x)),P=","+n(r.map(function(e){return e.text}).join(""))+")";else if("making"===T||"each"===T)"each"===T?(_="Lambda.create(",E=e(x,k("right")).trim(),P=",'where','true',"+n(r.map(function(e){return e.text}).join(""))+")",I=A):(_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=e(x,k("right")).trim(),P=","+n(r.map(function(e){return e.text}).join(""))+")");else if("augmentedAssign"===T)_="Operations.makeAssignmentRequest(",C=e(S,k("left")),N=",",E="Operations["+n(y.operator)+"]("+e(S)+","+e(x)+")",P=","+n(y.operator)+")";else if("and"===T||"or"===T){var R=function e(t){var n=i(t,"least"),r=_slicedToArray(n,2),a=r[0],o=r[1];if(a)return s.includes(a.type)?a:["and","or"].includes(a.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},L=R(S),q=R(x),F="TwineError.create('operation', 'This use of \"is not\" and \""+T+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+T+" __ is not __\"') ";if(_="Operations."+T+"(",N=",",P=")",f===y.type)_=P="",C=e(S,{isVarRef:u,elidedComparison:f}).trim(),E=e(x,{elidedComparison:f}).trim();else if(L&&!q){var V=L,H=n(a(V));if("isNot"===V.type||"isNotA"===V.type||"untypifies"===V.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+H+","+e(x,{elidedComparison:T})+")"}else if(!L&&q){var z=q,$=r.indexOf(z),B=n(o(z));if("isNot"===z.type||"isNotA"===z.type||"untypifies"===z.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+B+","+e(S,{elidedComparison:T})+")",C=e([].concat(_toConsumableArray(r.slice($+1)),[Object.assign(Object.create(z),_defineProperty({},"inequality"===z.type?"operator":"type",o(z)))],_toConsumableArray(r.slice(v+1,$))))}u=!1}else if(s.includes(T))D=!0,u=!1,_="Operations["+n(a(y))+"](",N=",",P=")";else if("addition"===T||"subtraction"===T){if(!e(S,{testNeedsRight:!0}).trim())return y.type={addition:"positive",subtraction:"negative"}[T],e(r,{isVarRef:u,whitespaceError:p,elidedComparison:f,testNeedsRight:d});u=!1,_="Operations["+n(y.text)+"](",N=",",P=")"}else if("multiplication"===T||"division"===T)u=!1,_="Operations["+n(y.text)+"](",N=",",P=")";else if("positive"===T||"negative"===T)u=!1,C="negative"===T?"-1":"1",_="Operations['*'](",N=",",P=")";else if("not"===T)_="Operations.not(",E=e(x),P=")",I=A;else if("belongingProperty"===T)_="VarRef.create(",E=e(x,k("right")),P=","+n(y.name)+")"+(u?"":".get()"),I=A;else if("belongingOperator"===T||"belongingItOperator"===T)C=y.type.includes("It")?h:e(x,k("right")),E=e(S),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()");else if("property"===T)_="VarRef.create(",C=e(S,k("left")),P=","+n(y.name)+")"+(u?"":".get()"),M=A;else if("itsProperty"===T||"belongingItProperty"===T)_="VarRef.create(",C=h,P=","+n(y.name)+")"+(u?"":".get()"),I=M=A;else if("possessiveOperator"===T||"itsOperator"===T)y.type.includes("it")&&(C=h,I=A),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()"),l=!1;else if("twineLink"===T)N='Macros.run("link-goto", [section,'+n(y.innerText)+","+n(y.passage)+"])",I=M=j;else if("macro"===T){var W=y.children[0],U="$"===W.text[0]||"_"===W.text[0];"macroName"===W.type||U||t("Compiler.compile","macro token had no macroName child token"),N="Macros.run"+(U?"Custom":"")+"("+(U?"VarRef.create("+("_"===W.text[0]?"section.stackTop.tempV":"State.v")+"ariables,"+n(W.text.trim().slice(1,-1))+").get()":'"'+y.name+'"')+", [section,"+e(y.children.slice(1),{isTypedVar:l})+"])",I=M=j}else if("grouping"===T)N="("+e(y.children,{isVarRef:u})+")",I=M=j;else if("error"===T)return"TwineError.create('syntax',"+n(y.message)+(y.explanation?", "+n(y.explanation):"")+")";return v>-1?(C=(C||e(S,{isVarRef:u,isTypedVar:l})).trim(),E=(E||e(x)).trim(),D&&!C&&(C=h),I===O&&!C||M===O&&!E?d&&M&&!E?"":"TwineError.create('operation','I need usable code to be "+(I===O?"left ":"")+(I===O&&M===O?"and ":"")+(M===O?"right ":"")+'of "'+y.text+"\"')":I===j&&C||M===j&&E?"TwineError.create('operation','There can't be code to the "+(I===j?"left ":"")+(I===j&&M===j?"or ":"")+(M===j?"right ":"")+'of "'+y.text+"\"')":_+C+N+E+P):1===r.length?(("value"in r[0]?r[0].value:r[0].text)+"").trim()||" ":r.reduce(function(t,n){return t+e(n,{isVarRef:u,isTypedVar:l})},"")}}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape;e(document.documentElement).on("click","tw-folddown",function(t){var n=t.target;for((n=e(n)).toggleClass("open");n&&!n.next().length;)n=n.parent();n&&n.next().toggle()});var i={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true."},a={error:[],warning:[]},o={create:function(e,t,r,a){return t&&"string"==typeof t||n("TwineError.create","has a bad message string"),r||e in i||n("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:r,source:void 0,innerDOM:a,appendTitleText:!1})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e||(t instanceof Error?t:o.isPrototypeOf(t)?t:!!Array.isArray(t)&&o.containsError.apply(o,_toConsumableArray(t)))},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(n){var o=this;n=n||this.source||"";var s=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(n)+"'>"+r(this.message+(this.appendTitleText?" "+n:""))+"</tw-error>"),c=e("<tw-error-explanation>").text(this.explanation||i[this.type]).hide(),u=e("<tw-folddown tabindex=0>");return this.innerDOM&&e("<tw-open-button>").on("click",function(){var n=e("<tw-backdrop><tw-dialog></tw-backdrop>");n.find("tw-dialog").prepend(o.innerDOM,e("<tw-link tabindex=0>OK</tw-link>").on("click",function(){o.innerDOM.detach(),n.remove()}).wrap("<tw-dialog-links>").parent()),t.storyElement.prepend(n)}).appendTo(s),s.append(u).append(c),s.data("TwineError",this),a.error.forEach(function(e){return e(o,n)}),s},on:function(e,t){if(e in a)return"function"!=typeof t||a[e].includes(t)||a[e].push(t),o;n("TwineError.on","invalid event name")}};return o}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){var i=e.escape,a=e.impossible,o=e.insensitiveName,s=void 0;function c(e,t){return"<"+t+">"+e+"</"+t+">"}function u(e,t){var n=s.render(e.children);return n&&c(n,t)}var l,p,f="text-align: center; max-width:50%; ",d=RegExp(t.Patterns.macroFront+t.Patterns.macroName,"ig");return s={options:{debug:!1,blockerMacros:[],metadataMacros:[]},preprocess:function(e){var i=s.options.metadataMacros;if(!(e.match(d)||[]).some(function(e){return i.some(function(t){return o(e.slice(1,-1))===t})}))return{};var a=!1,c={};return t.lex(e).children.forEach(function e(t){if("macro"===t.type){if(i.some(function(e){return t.name===e})){if(r.isPrototypeOf(c[t.name]))return;if(a)return void(c[t.name]=r.create("syntax","The ("+t.name+":) macro can't appear after non-metadata macros."));if(c[t.name])return void(c[t.name]=r.create("syntax","There is more than one ("+t.name+":) macro."));c[t.name]={code:n(t),source:t.text}}else a=!0;t.children.forEach(function e(t){"macro"===t.type&&i.some(function(e){return t.name===e})?c[t.name]=r.create("syntax","The ("+t.name+":) macro can't be inside another macro."):t.children.forEach(e)})}else t.children.forEach(e)}),c},exec:(l=void 0,p=void 0,function(e){return"string"!=typeof e?(a("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===l?p:(l=e,p=s.render(t.lex(e).children))}),render:function e(a){var l="",p=[];if(!a)return l;for(var d=a.length,h=0;h<d;h+=1){var y=a[h];switch(y.type){case"error":l+=r.create("syntax",y.message,y.explanation).render(i(y.text))[0].outerHTML;break;case"numbered":case"bulleted":var m="numbered"===y.type?"ol":"ul";l+="<"+m+">";for(var g=1;h<d&&a[h];){if("br"===a[h].type){if(l+="</li>",!a[h+1]||a[h+1].type!==y.type)break}else a[h].type===y.type?(l+=("<"+m+">").repeat(Math.max(0,a[h].depth-g)),l+=("</"+m+">").repeat(Math.max(0,g-a[h].depth)),l+="<li>",g=a[h].depth):l+=e([a[h]]);h+=1}l+=("</"+m+">").repeat(g+1);break;case"align":for(;y&&"align"===y.type;){var v=y.align,b=h+=1;if("left"===v){h-=1;break}for(;h<d&&a[h]&&"align"!==a[h].type;)h+=1;var w=e(a.slice(b,h)),T="";switch(v){case"center":T+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":T+="text-align: "+v+";";break;default:+v&&(T+=f+"margin-left: "+v+"%;")}l+="<tw-align "+(T?'style="'+T+'"':"")+">"+w+"</tw-align>\n",y=a[h]}break;case"column":for(var S=[];y&&"column"===y.type;){var x=y.column,k=h+=1;if("none"===x){h-=1;break}for(;h<d&&a[h]&&"column"!==a[h].type;)h+=1;S.push({text:y.text,type:x,body:e(a.slice(k,h)),width:y.width,marginLeft:y.marginLeft,marginRight:y.marginRight}),y=a[h]}S.length&&function(){var e=S.reduce(function(e,t){return e+t.width},0);l+="<tw-columns>"+S.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;">'+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":for(l+="<h"+y.depth+">";++h<d&&a[h];){if("br"===a[h].type){l+="</h"+y.depth+">";break}l+=e([a[h]])}break;case"br":if(!p.length||/td|th/.test(p[0])){l+="<br>";for(var O=a[h+1];O&&("br"===O.type||"tag"===O.type&&/^<br\b/i.test(O.text));)l+="<tw-consecutive-br"+("tag"===O.type?" data-raw":"")+"></tw-consecutive-br>",O=a[(h+=1)+1]}break;case"hr":l+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":l+='<a class="link" href="'+i(y.text)+'">'+y.text+"</a>";break;case"scriptStyleTag":case"tag":var j=y.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(j)&&p[y.text.startsWith("</")?"shift":"unshift"](j),l+=y.text.startsWith("</")?y.text:y.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":l+=u(y,y.type);break;case"strike":l+=u(y,"s");break;case"bold":l+=u(y,"b");break;case"italic":l+=u(y,"i");break;case"twineLink":var A=_slicedToArray(t.lex("(link-goto:"+JSON.stringify(y.innerText)+","+JSON.stringify(y.passage)+")").children,1)[0];l+='<tw-expression type="macro" name="link-goto"'+(s.options.debug?' title="'+i(y.text)+'"':"")+' js="'+i(n(A))+'"></tw-expression>';break;case"hook":l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+(s.options.debug&&y.name?' title="Hook: ?'+y.name+'"':"")+' source="'+i(y.innerText)+'"></tw-hook>';break;case"unclosedHook":return l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+'source="'+i(a.slice(h+1,d).map(function(e){return e.text}).join(""))+'"></tw-hook>';case"verbatim":l+=c(i(y.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":l+=u(y,"tw-collapsed");break;case"unclosedCollapsed":return l+="<tw-collapsed>"+e(a.slice(h+1,d))+"</tw-collapsed>";case"variable":case"tempVariable":case"macro":var C=function(){var t=[],a=[];if("macro"===y.type&&function n(r){"string"!==r.type&&"hook"!==r.type&&r.children.every(n);var i=r.firstChild();if("macro"===r.type&&i&&"macroName"===i.type&&s.options.blockerMacros.includes(o(i.text.slice(0,-1))))t.push(r);else if("hook"===r.type){if(!r.everyLeaf(function(e){return"error"!==e.type||(a.push(e),!1)}))return!1;r.html=e(r.children)}return!0}(y),a.length)return{v:r.create("syntax","This code hook's markup contained "+a.length+" error"+(a.length?"s":"")+":<br>\u2014"+a.map(function(e){return e.message}).join("<br>\u2014")).render(i(y.text))[0].outerHTML};var c=t.length&&t.map(function(e){var t=n(e);return e.type="blockedValue",t});l+='<tw-expression type="'+y.type+'" name="'+i(y.name||y.text)+'"'+(s.options.debug?' title="'+i(y.text)+'"':"")+(t.length?' blockers="'+i(JSON.stringify(c))+'"':"")+' js="'+i(n(y))+'"></tw-expression>',t.forEach(function(e){return e.type="macro"})}();if("object"===(void 0===C?"undefined":_typeof(C)))return C.v;break;default:l+=y.children&&y.children.length?e(y.children):y.text}}return l}},Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","renderer","internaltypes/twineerror"],function(e,t,n,r,i,a){var o=n.unescape,s=n.onStartup,c=Object.assign;function u(e){var t=o(e.html()),n=i.preprocess(t);return c(new Map([["source",t],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:n})}var l=c(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var n=t("en",function(e){return e.get("name")}),r=[];return this.forEach(function(t){var n=t instanceof Map&&t.get("tags");Array.isArray(n)&&n.includes(e)&&r.push(t)}),r.sort(n)},getStorylets:function(e,n){var r=n?n.filter(e,[].concat(_toConsumableArray(l.values()))):[].concat(_toConsumableArray(l.values()));if(a.containsError(r))return r;var i=[],o=-1/0,s=r.reduce(function(t,n){if(t)return t;var r=n.get("storylet");if(r){var s=e.speculate(r,n.get("name"),"a (storylet:) macro");if(a.containsError(s))return s.message="There's an error in the storylet passage \""+n.get("name")+'":\n'+s.message,s.source=r.TwineScript_ToSource(),s;if(s){var c=n.get("exclusivity");o=Math.max(o,"number"==typeof c?c:0),i.push(n)}}},void 0);if(s)return s;var c=t("en");return i.filter(function(e){var t=e.get("exclusivity");return(t="number"==typeof t?t:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:c(e.get("name"),t.get("name"))})},allStorylets:function(){return[].concat(_toConsumableArray(l.values())).filter(function(e){return e.get("storylet")})},loadMetadata:function(e){var t=[];return l.forEach(function(n){n.metadata&&Object.keys(n.metadata).forEach(function(r){if(a.containsError(n.metadata[r]))t.push(n.metadata[r]);else{var i=n.metadata[r],o=i.code,s=i.source,c=e.speculate(o,n.get("name"),"a ("+r+":) macro"),u='In "'+n.get("name")+'":\n';if(a.containsError(c))return c.message=u+c.message,c.source=s,void t.push(c);c instanceof Map?c.forEach(function(e,t){return l(t,e)}):l(r,c)}function l(e,r){n.has(e)?t.push(a.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):n.set(e,r)}}),n.metadata=void 0}),t},hasValid:function(e){var t=this.get(e);return t&&t instanceof Map&&t.has("source")},create:u});return s(function(){Array.from(e("tw-storydata > tw-passagedata")).forEach(function(t){t=e(t),l.set(t.attr("name"),new u(t))})}),l}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(e,t,n,r){var i=t.impossible,a=t.nth,o=t.insensitiveName,s=t.permutations,c=r.validPropertyName,u="object",l="boolean",p="string",f="number",d="function";function h(e){return!!e&&((void 0===e?"undefined":_typeof(e))===u||(void 0===e?"undefined":_typeof(e))===d)}function y(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":(void 0===e?"undefined":_typeof(e))===p?p:e&&(void 0===e?"undefined":_typeof(e))===u?u:""}function g(e){if(!h(e))return e;if(_typeof(e.TwineScript_Clone)===d)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if((void 0===e?"undefined":_typeof(e))===d)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return i("OperationUtils.clone","The value "+e+" cannot be cloned!"),e}function v(e){return h(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":(void 0===e?"undefined":_typeof(e))===l?"the boolean value '"+e+"'":(void 0===e?"undefined":_typeof(e))===p||(void 0===e?"undefined":_typeof(e))===f?"the "+(void 0===e?"undefined":_typeof(e))+" "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function b(e,t){return(void 0===e?"undefined":_typeof(e))!==u&&(void 0===t?"undefined":_typeof(t))!==u?e===t:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(t[n],e)}):e instanceof Map&&t instanceof Map?b(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?b([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&_typeof(e.TwineScript_is)===d?e.TwineScript_is(t):e&&(void 0===e?"undefined":_typeof(e))===u&&t&&(void 0===t?"undefined":_typeof(t))===u&&y(e)&&y(t)?b(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}return Object.freeze({isObject:h,isPureObject:y,singleTypeCheck:function e(t,n){if(null===n)return void 0===t;var r=void 0===t?"undefined":_typeof(t);if((void 0===n?"undefined":_typeof(n))!==d&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern)return n.innerType.some(function(n){return e(t,n)});if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")==="where"in t&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(o(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?r===p:n===Boolean?r===l:n===parseInt?r===f&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?r===f&&!Number.isNaN(t):n===Array?Array.isArray(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))},isValidDatamapName:function(e,t){if(e instanceof Map||i("isValidDatamapName","called with non-Map"),n.containsError(t))return t;if((void 0===t?"undefined":_typeof(t))!==p&&(void 0===t?"undefined":_typeof(t))!==f)return n.create("property","Only strings and numbers can be used as data names for "+v(e)+", not "+v(t)+".");var r=(void 0===t?"undefined":_typeof(t))===p?+t:""+t;return!(!Number.isNaN(r)&&e.has(r))||n.create("property","You mustn't use both "+v(t)+" and "+v(r)+" as data names in the same datamap.")},collectionType:m,isSequential:function(e){return(void 0===e?"undefined":_typeof(e))===p||Array.isArray(e)||_typeof(e.hooks)===d},unstorableValue:function e(t){return t&&t.TwineScript_Unstorable&&t||Array.isArray(t)&&t.find(e)||t instanceof Map&&[].concat(_toConsumableArray(t.values())).find(e)||t instanceof Set&&[].concat(_toConsumableArray(t)).find(e)},clone:g,objectName:v,typeName:function e(t){var n=y(t);if(n&&t.innerType)return t.typeName?t.typeName:"insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(Array.isArray(t.innerType)||i("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType);if(n&&t.pattern&&"range"===t.pattern){if(t.name)return t.name;var r=t.min,a=t.max;return"a"+(r>0?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+a:a<1/0?" up to "+a:"")}return t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":h(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:v(t)},typeID:function(e){var t=void 0===e?"undefined":_typeof(e);return[l,p,f].includes(t)?t:Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:function t(r,o){return n.containsError(r)&&i("toSource","received a TwineError"),_typeof(r.TwineScript_ToSource)===d?r.TwineScript_ToSource():y(r)&&"first"in r&&"last"in r?(r.first<0?(-1!==r.first?a(-r.first):"")+"last":a(r.first+1))+"to"+(r.last<0?(-1!==r.last?a(-r.last):"")+"last":a(r.last+1)):Array.isArray(r)?"(a:"+("property"===o?r.map(function(e){return e+(e>0)}):r).map(t)+")":r instanceof Map?"(dm:"+Array.from(r.entries()).sort(function(t,n){return[t[0],n[0]].sort(e("en"))[0]===t[0]?-1:1}).map(function(e){return e.map(t)})+")":r instanceof Set?"(ds:"+Array.from(r).sort(e("en")).map(t)+")":(void 0===r?"undefined":_typeof(r))===f&&"property"===o?r<0?-1===r?"last":a(-r)+"last":a(r+1):(void 0===r?"undefined":_typeof(r))===p&&"property"===o?RegExp(c).test(r)?r:"("+JSON.stringify(r)+")":JSON.stringify(r)},is:b,contains:function(e,t){if(e||""===e){if((void 0===e?"undefined":_typeof(e))===p)return(void 0===t?"undefined":_typeof(t))!==p?n.create("operation",v(e)+" can only contain strings, not "+v(t)+"."):e.includes(t);if(Array.isArray(e))return e.some(function(e){return b(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return b(e,t)})}return n.create("operation",v(e)+" cannot contain any values, let alone "+v(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===d?t.TwineScript_IsTypeOf(e):n.create("operation",'"is a" should only be used to compare type names, not '+v(t)+".")},matches:function e(t,r){var i=!1;if(t&&_typeof(t.TwineScript_IsTypeOf)===d){var a=t.TwineScript_IsTypeOf(r);if(n.containsError(a))return a;i|=a}if(r&&_typeof(r.TwineScript_IsTypeOf)===d){var o=r.TwineScript_IsTypeOf(t);if(n.containsError(o))return o;i|=o}if(i)return!0;if(Array.isArray(t)&&Array.isArray(r)){for(var c=0,u=0,l=!0;l&&c<t.length&&u<r.length;){var p=t[c],f=r[u];if(p.rest){for(;u<r.length&&e(p,f);)f=r[u+=1];c+=1}else if(f.rest){for(;c<t.length&&e(p,f);)p=t[c+=1];u+=1}else e(p,f)?(c+=1,u+=1):l=!1}return l&&c>=t.length&&u>=r.length}return t instanceof Map&&r instanceof Map?e(Array.from(t.entries()).sort(),Array.from(r.entries()).sort()):t instanceof Set&&r instanceof Set?(t=[].concat(_toConsumableArray(t)),s.apply(void 0,_toConsumableArray(r)).some(function(n){return e(t,n)})):b(t,r)},subset:function e(t,r,i){if(!r||!i)return n.create("macrocall","The sub"+m(t)+" index value must not be "+(r&&i)+".");var a=(void 0===t?"undefined":_typeof(t))===p;if(a&&(t=Array.from(t)),r<0&&(r=Math.max(0,t.length+r+1)),i<0&&(i=Math.max(0,t.length+i+1)),r>i)return e(arguments[0],i,r);var o=t.slice(r>0?r-1:r,i).map(g);return a?o.join(""):o},range:function e(t,n){if(t>n)return e(n,t);var r=[t];for(n-=t;n-- >0;)r.push(++t);return r},printBuiltinValue:function e(t){return n.containsError(t)?t:t&&_typeof(t.TwineScript_Print)===d?t.TwineScript_Print():t instanceof Map?(t=Array.from(t.entries()),n.containsError(t)?t:t.reduce(function(t,n){var r=_slicedToArray(n,2),i=r[0],a=r[1];return t+"<tr><td>`"+e(i)+"`</td><td>`"+e(a)+"`</td></tr>"},"<table class=datamap>")+"</table>"):t instanceof Set?Array.from(t.values()).map(e)+"":Array.isArray(t)?t.map(e)+"":t&&_typeof(t.jquery)===p?t:h(t)?n.create("unimplemented","I don't know how to print this value yet."):t+""},unique:function(e,t,n){return!n.slice(t+1).some(function(t){return b(e,t)})}})}),define("utils/renderutils",["jquery","utils","renderer"],function(e,t,n){var r=RegExp(t.realWhitespace+"+"),i=RegExp(t.realWhitespace+"+","g");function a(e,t,n){var r=e.textContent.length;if(!(t>=r)){var i=void 0,a=[i=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&a.push(i.splitText(n-t))),a}}var o,s=(o=void 0,function(){if(void 0!==o)return o;var t=e("<p>");return t[0].normalize?(t.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),o=1===t.contents().length):o=!1});var c="tw-collapsed,[collapsing=true]";var u=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.section,a=r.parent,o=void 0===a?t.storyElement:a,s=r.cd,c=r.message,u=void 0===c?"":c,l=r.defaultValue,p=r.buttons,f=void 0===p?[{name:"OK",confirm:!0,callback:Object}]:p,d=e("<tw-backdrop><tw-dialog>"+(l||""===l?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(f.length?f.reduce(function(e,t,n){var r=t.name;return e+"<tw-link style='margin:0 "+(n===f.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+r+"</tw-link>"},""):"<tw-link tabindex=0>"+f[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>"),h=d.find("tw-dialog");if(o.append(d),i){i.renderInto(u,h,Object.assign({},s,{append:"prepend"}));var y=s&&s.transition&&d.find("tw-dialog > tw-transition-container");y&&y.length&&y.appendTo(d).append(h.prepend(y.contents().detach()))}else h.prepend(n.exec(u));if(l){var m=d.find("input").last();m.val(l).on("keypress",function(e){13===e.which&&(d.remove(),f.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return m.focus()},100)}return f.reverse().forEach(function(t,n){e(d.find("tw-link").get(-n-1)).on("click",function(){d.remove(),t.callback()})}),d},realWhitespace:r,textNodeToChars:function(e){var t=[].concat(_toConsumableArray(e.textContent));return 1===t.length?[e]:t.reduce(function(e,t){return t.match(r)&&e.length&&e[e.length-1].match(r)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(t,n){var r=e;return n.length<e.textContent.length&&(e=e.splitText(n.length)),t.concat(r)},[])},findTextInNodes:function e(t,n){var r=[],i="",o=[];if(!t.length||!n)return o;for(;t.length>0;){r.push(t[0]),i+=t[0].textContent,t.shift();var s=i.indexOf(n);if(s>-1){for(var c,u=i.length-(s+n.length);s>=r[0].textContent.length;)s-=r[0].textContent.length,r.shift();if(1===r.length){var l=a(r[0],s,s+n.length);o.push(l[0]),l[1]&&t.unshift(l[1]);break}o.push(a(r[0],s,r[0].length)[0]),(c=o).push.apply(c,_toConsumableArray(r.slice(1,-1)));var p=a(r[r.length-1],0,r[r.length-1].textContent.length-u);o.push(p[0]),p[1]&&t.unshift(p[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(t){function n(t){return 0===e(this||t).parentsUntil(c).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(i=i[i.length-1])||e(r)}(t);e(r).parents(c).length||(r=null);var a=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return i||e(r)}(t);e(a).parents(c).length||(a=null);var o="br:not([data-raw]),tw-consecutive-br:not([data-raw])";t.find(o).filter(n).replaceWith(document.createTextNode(" "));var u=(t=e(t.get().map(function(t){return e(t).filter(n).is(o)?e(document.createTextNode(" ")).replaceAll(t)[0]:t}))).textNodes(),l=0;u.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(i," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(u)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(l+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return l+=e.length,""}),!1))}),l>0&&a&&(u[u.length-1].textContent+=" "),t[0]&&s()&&t[0].normalize()},geomStringRegExp:u,geomParse:function(e){var t=e.length,n=u.exec(e)||[],r=_slicedToArray(n,3),i=r[0],a=r[1],o=r[2];return i?{marginLeft:a.length/t*100,size:o.length/t*100}:{marginLeft:0,size:0}}})}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(e,t,n,r){var i=n.textNodeToChars,a=n.realWhitespace,o=n.findTextInNodes,s=r.toSource;function c(n){var r=n.dom,s=e();this.next&&(s=s.add(c.call(this.next,n)));var u=function(t,n){if(Array.isArray(n))return n.reduce(function(e,n){return e.add(t.get(n))},e());if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&"first"in n&&"last"in n){var r=n.first,o=n.last,s=t.length;r<0&&(r+=s),o<0&&(o+=s);for(var c=[t.get(r)];r!==o;)r+=Math.sign(o-r),c.push(t.get(r));return e(c)}if("string"==typeof n){if("chars"===n){var u=[],l=!0,p=!1,f=void 0;try{for(var d,h=t.textNodes(":not(tw-error, tw-error *)")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=!0,g=!1,v=void 0;try{for(var b,w=i(y)[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var T=b.value;T.textContent.match(a)||u.push(T)}}catch(e){g=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(g)throw v}}}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return e(u)}if("links"===n)return t.findAndFilter("tw-link, .enchantment-link");if("visited"===n)return t.findAndFilter("tw-link.visited");if("lines"===n){var S=t.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),x=[[]];return t.textNodes(":not(tw-error, tw-error *):not(tw-sidebar, tw-sidebar *)").forEach(function(e){S.length&&2&e.compareDocumentPosition(S[0])&&(S.shift(),x.push([])),x[x.length-1]=x[x.length-1].concat(e)}),x=x.map(function(t){return t.map(function(n){for(var r=n.parentNode;e(r).textNodes().every(function(e){return t.includes(e)})&&!t.every(function(t){return e(r).has(t).length});){r=(n=r).parentNode}return n})}),e(x.map(function(t){return e(t).wrapAll("<tw-pseudo-hook>").parent()[0]}))}}return e(t.get(n))};if(this.selector){var l=void 0;if("string"===this.selector.type)l=function(t,n){var r=o(n.textNodes(),t),i=e();return r.forEach(function(t){i=i.add(e(t).wrapAll("<tw-pseudo-hook>").parent())}),i}(this.selector.data,r);else{if("base"===this.selector.type)return s.add(u(c.call(this.selector.data,n),this.property));var p=function(e){var n='tw-hook[name="'+(e=t.insensitiveName(e).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+e+'"]';return n+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}(this.selector.data);l=r.findAndFilter(p).add(r.parentsUntil(t.storyElement.parent())).filter(p)}s=this.property?s.add(u(l,this.property)):s.add(l)}return s}function u(e){if(!e)return[];var n=e.selector,r=e.property,i=e.next;return[JSON.stringify(["base"===n.type?u(n.data):t.insensitiveName(n.data),r])].concat(_toConsumableArray(u(i))).sort()}var l=Object.freeze({forEach:function(t,n){var r=c.call(this,t).each(function(t){n(e(this),t)});return t.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),r},hooks:function(e){return c.call(this,e)},get TwineScript_ObjectName(){return this.property||this.next?"a complex hook name":"?"+this.selector.data+" (a hook name)"},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",n=this.selector,r=n.type,i=n.data;return"name"===r?i.match(RegExp("^"+t.anyRealLetter+"+$"))?e+="?"+i:e+="(hooks-named:"+JSON.stringify(i)+")":"string"===r?e+=JSON.stringify(i):"base"===r&&(e+=i.TwineScript_ToSource()+"'s "+s(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return u(this)+""==u(e)+""},TwineScript_GetProperty:function(e){return l.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return l.create(this.selector,this.property,this.next)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||l),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return l.isPrototypeOf(e)||"string"==typeof e||t.impossible("HookSet.from() was given a non-HookSet non-string."),l.isPrototypeOf(e)?e:l.create({type:"string",data:e})}});return l}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var i=t.assertOnlyHas,a=t.impossible,o=t.transitionIn,s=n.exec,c=Object.assign,u=Object.keys,l=Object.create,p=Object.seal,f=function(e){return e.split(/\n/g).reduce(function(e,t,n,r){var i=r.length;return e.concat(document.createTextNode(t),n!==i-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])},d=void 0,h={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,functions:null,section:null,timestamp:0,summary:function(){var e=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","functions","enablers"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",u(this.loopVars).length&&"loopVars",u(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=c(l(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,i=this.transition,a=this.transitionDeferred,s=this.append,c=this.target;"function"==typeof c&&(c=c());var l=function(t){if(Array.isArray(e.styles)&&e.styles.length>0){var n=e.styles.reduce(function(e,t){return u(t).forEach(function(n){var r=t[n];e[+("function"==typeof r)][n]=r}),e},[{},{}]),r=_slicedToArray(n,2),i=r[0],a=r[1];t.css(i),setTimeout(function(){return t.css(a)})}e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};if(Array.isArray(n)&&n.length&&(c=n.map(function(e){return e.target})),[].concat(c).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,l):l(e)}),i&&!a&&!s){var p=c,f=void 0;do{!(f=p.data("timestamp"))&&(p=p.parent())}while(!f&&p.length);o(c,i,this.transitionTime,this.transitionDelay,this.transitionSkip,f?Date.now()-f:0,this.transitionOrigin)}},render:function(){var t=this,n=this.source,u=this.transition,l=this.transitionTime,p=this.transitionDeferred,y=this.enabled,m=this.enablers,g=this.data,v=this.section,b=this.newTargets,w=this.functions,T=this.appendSource,S=this.target,x=this.target,k=this.append;if("function"==typeof S&&(S=S()),i(this,d),!k)return a("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),e();if(m&&m.length){var O=m[0],j=O.descriptor,A=O.changer,C=j.render();if(A){var E=h.create({section:v,target:C});A.run(E),E.update()}return C}if(!y||void 0!==S.attr("hidden"))return h.create({target:S,data:c({},g,{originalSource:n,hidden:!0})}).update(),e();if(Array.isArray(b)&&b.length&&(S=b),!S)return a("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var _=e();if([].concat(S).filter(function(e){return!e.jquery}).map(function(e){var t=k,n=void 0;if(e.target&&e.append){var r=e;t=r.append,n=r.before,e=e.target}return{elements:e.hooks(v,x).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(x[0]))}),append:t}},[]).forEach(function(n){var r=n.elements,i=n.append;r.each(function(n,r){r=e(r),_=_.add(t.create({target:r,append:i,newTargets:null}).render()),r.filter("tw-pseudo-hook").contents().unwrap()})}),_.length||Array.isArray(S)||r.isPrototypeOf(S))return _;if(!(k in S)){if("replace"!==k)return a("ChangeDescriptor.render","The target doesn't have a '"+k+"' method."),e();S[0]instanceof Text?k="replaceWith":(S.empty(),k="append")}return S[0]instanceof Text&&("append"===k&&(k="after"),"prepend"===k&&(k="before")),_=e(n&&(this.verbatim?f(n):e.parseHTML(s(n),document,!0))),Array.isArray(T)&&T.forEach(function(n){var r=n.source,i=n.append,a=e(t.verbatim?f(r):e.parseHTML(s(r),document,!0));_="append"===i?_.add(a):"prepend"===i?a.add(_):a}),S[k](_.length?_:void 0),S.data("timestamp",Date.now()),this.update(),u&&!p&&o("replace"===k?S:_,u,l,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),w&&w.forEach(function(e){return e(S)}),_}};return d=u(h),p(h)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var i=e.impossible,a=t.is,o=t.toSource,s={},c={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(o))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||i("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) changer"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){if(c.isPrototypeOf(e))return this.macroName===e.macroName&&a(this.params,e.params)&&a(this.next,e.next)},TwineScript_Clone:function(){return this.create(this.macroName,this.params,this.next)},run:function(e){var t=s[this.macroName].apply(s,[e].concat(_toConsumableArray(this.params)));if(r.containsError(t))return t;this.next&&this.next.run(e)},register:function(e,t){s[e]=t}};return Object.freeze(c)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils","markup","twinescript/compiler"],function(e,t,n,r,i,a,o){var s=e.impossible,c=i.objectName,u=i.toSource,l=a.lex,p=Object.assign,f=Object.create,d=["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}),h=p(f(null),{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:f(null),TwineScript_VariableStore:!0,TwineScript_MockVisits:null}),y={passage:"",variables:h,create:function(e,t){var n=f(y);return n.passage=e||"",n.variables=p(f(this.variables),t),n}},m=[],g=-1,v=y.create(),b=void 0,w={forward:[],back:[],load:[]},T=void 0;function S(e){v=(m[g]||y).create(e),function(){if(T.hasSessionStorage){var e=T.serialise();if("string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){return}}}()}return T=p({get passage(){return v.passage},get variables(){return v.variables},get pastLength(){return g},get futureLength(){return m.length-1-g},get mockVisits(){return v.variables.TwineScript_MockVisits||[]},set mockVisits(e){v.variables.TwineScript_MockVisits=e},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;r<=g;r++)n+=+(e===m[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===v.passage)return 0;for(var n=g;n>0;n--)if(m[n].passage===e)return g-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=g-1;t>=0;t--)e.unshift(m[t].passage);return e},timelinePassageNames:function(){return m.map(function(e){return e.passage})},play:function(e){v||s("State.play","present is undefined!"),v.passage=e,m=m.slice(0,g+1).concat(v),g+=1,S(e),w.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&g>0;t--)n=!0,g-=1;return n&&(S(m[g].passage),w.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&m.length>0;t--)n=!0,g+=1;return n&&(S(m[g].passage),w.forward.forEach(function(e){return e(m[g].passage,"fastForward")})),n},on:function(e,t){if(e in w)return"function"!=typeof t||w[e].includes(t)||w[e].push(t),T;s("State.on","invalid event name")},reset:function(){m=[],g=-1,v=y.create(),b=void 0,w.load.forEach(function(e){return e(m)})},hasStorage:d[0],hasSessionStorage:d[1]},function(){function e(e,t){Object.keys(t).forEach(function(n){return!n.startsWith("TwineScript_")&&(t[n]=e.eval(o(l(t[n],0,"macro"))))})}return{serialise:function(){var e=m.slice(0,g+1),t=e.map(function(e){return Object.keys(e.variables).filter(function(t){return e.variables[t]&&(n=e.variables[t],i=void 0===n?"undefined":_typeof(n),!(!r.containsError(n)&&("function"==typeof n.TwineScript_ToSource||Array.isArray(n)||n instanceof Map||n instanceof Set||"string"===i||"number"===i||"boolean"===i||Object.isPrototypeOf.call(h.TwineScript_TypeDefs,n))));var n,i}).map(function(t){return[t,e.variables[t]]})});if(b||(b=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),i=r[0],a=r[1];return e||i&&[i,a,n+1]},void 0)),b){var n=_slicedToArray(b,3),i=n[0],a=n[1],o=n[2];return r.create("saving","The variable $"+i+" holds "+c(a)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,function(e,t){return this.TwineScript_VariableStore?"TwineScript_TypeDefs"===e?Object.keys(t).reduce(function(e,n){return e[n]=u(t[n]),e},{}):u(t):t})}catch(e){return!1}},deserialise:function(n,r){var i,a=void 0,o=h,s="The save data is unintelligible.";try{a=JSON.parse(r)}catch(e){return Error(s)}return Array.isArray(a)?(i=(a=a.map(function(r){if("object"!==(void 0===r?"undefined":_typeof(r))||!r.hasOwnProperty("passage")||!r.hasOwnProperty("variables"))return Error(s);if(!t.hasValid(r.passage))return Error("The data refers to a passage named '"+r.passage+"', but it isn't in this story.");if(r.variables=p(f(o),r.variables),Object.hasOwnProperty.call(r.variables,"TwineScript_TypeDefs")){var i=r.variables.TwineScript_TypeDefs=p(f(o.TwineScript_TypeDefs),r.variables.TwineScript_TypeDefs);try{e(n,i)}catch(e){return Error(s)}}try{e(n,r.variables)}catch(e){return Error(s)}return o=r.variables,p(f(y),r)})).find(function(e){return e instanceof Error}))?i:(m=a,w.load.forEach(function(e){return e(m)}),g=m.length-1,S(m[g].passage),!0):Error(s)}}}()),Object.seal(y),Object.freeze(T)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(e,t,n,r,i){var a=n.impossible,o=n.andList,s=n.nth,c=r.is,u=r.isObject,l=r.toSource,p=r.isSequential,f=r.objectName,d=r.typeName,h=r.clone,y=r.isValidDatamapName,m=r.subset,g=r.collectionType,v=r.unstorableValue,b=r.matches,w=void 0,T=0,S={set:[],delete:[]};function x(e,n){var r=void 0;if(e instanceof Map&&(r=t.containsError(y(e,n))))return r;if(p(e)){var a=void 0,s="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.) or slices ('1stTo2ndlast', '3rdTo5th'), ",c="You can't access the '0th' or '0thlast' position of "+f(e)+".";if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+f(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(a=/^(\d+)(?:st|[nr]d|th)last$/i.exec(n))){if("0"===a[1])return t.create("property",c);n=-a[1]}else if("string"==typeof n&&(a=/^(\d+)(?:st|[nr]d|th)$/i.exec(n))){if("0"===a[1])return t.create("property",c);n=a[1]-1}else if("string"==typeof n&&(a=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(n))){var u=_slicedToArray(a,5),l=u[1],d=void 0===l?0:l,h=u[2],m=u[3],g=void 0===m?0:m;n={last:g=u[4]?-g:g-1,first:d=h?-d:d-1}}else if("last"===n)n=-1;else if("random"===n){if(!e.length)return t.create("property","I can't get a random value from "+f(e)+", because it's empty");n=Math.random()*Array.from(e).length|0}else{if(i.isPrototypeOf(e)&&!i.TwineScript_Properties.includes(n))return t.create("property",s+o(i.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if(!["length","any","all","start","end","random"].includes(n)&&!i.isPrototypeOf(e))return t.create("property",s+"'length', 'any', 'all', 'start', 'end', and 'random' of "+f(e)+", not "+f(n)+".")}}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of "+f(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else{if(Array.isArray(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(n))return t.create("property","You can only get the "+o(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+f(e)+".")}return n}function k(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}function O(e,t){if(void 0===e)return e;if(e instanceof Map||w.isPrototypeOf(e))return e.get(t);if("any"===t||"all"===t||"start"===t||"end"===t)return function(e,t){var n="'"+t+"' value"+("any"===t?"":"s")+" of ";return{determiner:t,array:[].concat(_toConsumableArray(e)),string:"string"==typeof e&&e,TwineScript_ObjectName:n+f(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}(e,t);if("string"==typeof e&&(e=[].concat(_toConsumableArray(e))),p(e)&&Number.isFinite(t)&&(t=k(e,t)),e.TwineScript_GetProperty)return e.TwineScript_GetProperty(t);var n=e[t];return"function"!=typeof n?n:void 0}function j(e){if(e.computed){var t=e.value;return w.isPrototypeOf(t)&&(t=t.get()),"string"==typeof t?"('"+t+"')":"("+t+")"}return"number"==typeof e?s(e):"'"+e+"'"}function A(n,r,a){if(n.TwineScript_VariableStore){if(n.TwineScript_TypeDefs&&r in n.TwineScript_TypeDefs){var o=n.TwineScript_TypeDefs[r];if("const"===o.name){if(void 0!==n[r])return t.create("operation","I can't alter "+(n===e.variables?"$":"_")+r+" because it's been restricted to a constant value.","This variable can't be changed for the rest of the story.")}else if(!b(o,a))return t.create("operation","I can't set "+(n===e.variables?"$":"_")+r+" to "+d(a)+" because it's been restricted to "+l(o)+"-type data.","You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return Array.isArray(r)?r.map(function(e){return A(n,e)}):n instanceof Map?"string"==typeof r||t.create("operation",f(n)+" can only have string data names, not "+f(r)+"."):p(n)?["length","random","any","all","start","end"].includes(r)?t.create("operation","I can't forcibly alter the '"+r+"' of "+f(n)+".","start"===r||"end"===r?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+r+"'.":void 0):+r==(0|r)||t.create("property",f(n)+" can only have position keys ('3rd', '1st', (5), etc.), not "+j(r)+"."):n.TwineScript_Identifiers&&r in n?t.create("keyword","I can't alter the value of the '"+r+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):t.create("operation","I can't modify "+f(n),n instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":i.isPrototypeOf(n)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function C(e,t,n){var r=t;e instanceof Map?e.set(t,n):(p(e)&&(t=k(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),S.set.forEach(function(t){return t(e,r,n)})}function E(e,t){var n=t;p(e)&&(t=k(e,t)),Array.isArray(e)&&/^(?:[1-9]\d*|0)$/.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],S.delete.forEach(function(t){return t(e,n)})}function _(e){return Object.assign(Object.create(w),{error:e})}function N(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&"last"in r&&"first"in r){if(i.isPrototypeOf(n))return n.TwineScript_GetProperty(r);var s=r.first,c=r.last;return m(n,s+(s>=0),c+(c>=0))}if(Array.isArray(r))return i.isPrototypeOf(n)?n.TwineScript_GetProperty(r):r.map(function(e){return N(n,e,e)})["string"==typeof n?"join":"valueOf"]("");var u=O(n,r);if(void 0===u){if(n===e.variables)return T;if(n.TwineScript_VariableStore)return t.create("property","There isn't a temp variable named _"+a+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:).");if(Array.isArray(n)&&"number"==typeof r)return t.create("property","This array of "+(n.length+1)+" elements doesn't have a "+j(a)+" element.",n.length?"It contains: "+o(n.map(f))+".":"The array is empty.");var l=Array.from("function"==typeof n.keys&&n.keys());return t.create("property","I can't find a "+j(a)+" data name in "+f(n),n instanceof Map&&l.length?"Its names include: "+o(l)+".":void 0)}return u}function P(e,n){var r=this,i=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:N.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(i)?i:void 0}return w=Object.freeze({get:function(){return this.error?this.error:N(this.deepestObject,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(n){var r=this;return this.error?this.error:!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?P.call(this,function(n,i,a){var o,s=_slicedToArray(i,2),c=s[0],l=s[1];if(o=t.containsError(n,c,l)||t.containsError(A(c,l,n)))return o;var d;if(d=v(n))return t.create("operation",f(n)+" can't be stored"+(g(n)?" because it holds "+f(d)+".":""));if(a>0)c=h(c);else if(c.TwineScript_VariableStore&&c!==e.variables){for(var y=c;y.TwineScript_VariableStore&&!y.hasOwnProperty(l);)y=Object.getPrototypeOf(y);y.TwineScript_VariableStore&&(c=y)}if("string"==typeof c){if("string"!=typeof n)return t.create("datatype","I can't put this non-string value, "+f(n)+", in a string.");if(n.length!==(Array.isArray(l)?l.length:1))return t.create("datatype",f(n)+"is not the right length to fit into this string location.");c=[].concat(_toConsumableArray(c));var m=[].concat(_toConsumableArray(n));[].concat(l).forEach(function(e){0+e<0&&(e=c.length+(0+e)),c=[].concat(_toConsumableArray(c.slice(0,e)),[m.shift()],_toConsumableArray(c.slice(e+1)))}),c=c.join("")}else u(c)&&(void 0!==n.TwineScript_KnownName&&(n.TwineScript_KnownName=r.TwineScript_ObjectName),Array.isArray(l)&&p(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),l.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return C(c,n,r)})):C(c,l,n));return c},n):t.create("macrocall","I can't (set:) "+f(this)+", if the "+(f(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return this.error?this.error:P.call(this,function(e,n,r){var i,a=_slicedToArray(n,2),o=a[0],s=a[1];if(i=t.containsError(e,o,s)||t.containsError(A(o,s)))return i;if(r>0&&(o=h(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(s)?(p(o)&&(s=[].concat(_toConsumableArray(new Set(s)))).sort(function(e,t){return k(o,t)-k(o,e)}),s.forEach(function(e){return E(o,e)})):E(o,s),c&&(o=o.join(""))}else C(o,s,e);return o},null)},defineType:function(e){var n=this.object,r=this.compiledPropertyChain;if(!n||!n.TwineScript_VariableStore||1!==r.length||!n.TwineScript_TypeDefs)return t.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.");var i=r[0];Object.hasOwnProperty.call(n,"TwineScript_TypeDefs")||(n.TwineScript_TypeDefs=Object.create(n.TwineScript_TypeDefs));var a=n.TwineScript_TypeDefs,o=a[i];if(o&&!c(o,e))return t.create("operation","I can't redefine the type of "+f(this)+" to "+(e.TwineScript_ObjectName||d(e))+", as it is already "+(o.TwineScript_ObjectName||d(o))+".");a[i]=e,"const"===e.name&&(n[i]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,n){var r=void 0;if(r=t.containsError(e))return _(r);n=[].concat(n),w.isPrototypeOf(e)&&(n=e.propertyChain.concat(n),e=e.object);var i=function(e,n){return{compiledPropertyChain:n.reduce(function(r,i,a){var o;return i.computed&&(i=i.value),w.isPrototypeOf(i)&&(i=i.get()),i=Array.isArray(i)?i.map(function(t){return x(e,t)}):x(e,i),(o=t.containsError(r,i))?o:(a<n.length-1&&(e=N(e,i)),r.push(i),r)},[]),deepestObject:e}}(e,n),a=i.compiledPropertyChain,o=i.deepestObject;return(r=t.containsError(a,o))?_(r):Object.assign(Object.create(w),{object:e,propertyChain:n,compiledPropertyChain:a,deepestObject:o})},TwineScript_ToSource:function(){var t=this,n=function(e,n){return!n&&t.object.TwineScript_VariableStore?e:j(e)};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))},get TwineScript_ObjectName(){return this.TwineScript_ToSource()+(this.object.TwineScript_VariableStoreName?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),w;a("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0,TwineScript_TypeDefs:Object.create(null)})}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("datatypes/custommacro",["jquery","utils/operationutils","internaltypes/changedescriptor","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,a,o){var s=t.objectName,c=t.matches,u=Object.assign,l=Object.create,p=function(t){return function(c){for(var p=arguments.length,f=Array(p>1?p-1:0),d=1;d<p;d++)f[d-1]=arguments[d];t.called+=1;var h=t.varNames,y=t.params,m=t.body,g=u(l(i),{TwineScript_VariableStoreName:t.TwineScript_ObjectName+" call #"+t.called,TwineScript_TypeDefs:l(null)}),v=[],b=0;f.forEach(function(e,t){var n=h[b];g.TwineScript_TypeDefs[n]=y[b].datatype.rest?y[b].datatype.create("array"):y[b].datatype;var i=r.create(g,n);if(y[b].datatype.rest){var a=(g[n]||[]).concat(e);if(t<f.length-1)return void(g[n]=a);i.set(a)}else i.set(e),b+=1;v.push(o.create(s(i)+" is now "+s(g[n])))}),f.length&&(b+=1),y[b]&&y[b].datatype.rest&&(r.create(g,h[b]).set([]),g.TwineScript_TypeDefs[name]=y[b].datatype.create("array"));var w=void 0,T=e("<p>").append(m.html);c.stack.unshift({tempVariables:g,dom:T,output:function(e){w=e}}),c.execute(),c.stackTop.blocked&&c.stack.shift();var S,x,k=T.find("tw-error");return k.length?(T.prepend(v.map(function(e){return e.render()}),"<br>"),a.create("propagated",k.length+" error"+(k.length>1?"s":"")+" occurred when running "+t.TwineScript_ObjectName+".",void 0,T)):void 0===w?a.create("custommacro",t.TwineScript_ObjectName+" didn't output any data or hooks using (output:) or (output-data:)."):n.isPrototypeOf(w)?(S=w,x=u({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},TwineScript_Attach:function(e){return e.run(S),x},TwineScript_Run:function(){return S}})):w}},f=Object.freeze({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",get TwineScript_ObjectName(){return this.TwineScript_KnownName?"the "+this.TwineScript_KnownName+" macro":"a custom macro"},TwineScript_GetProperty:function(e){if("params"===e)return[].concat(_toConsumableArray(this.params))},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){return u(l(f),this)},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},create:function(e,t){var n=u(l(this),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(e){var t=void 0;return t=e.datatype.toTypeSignatureObject?e.datatype.toTypeSignatureObject({rest:e.rest}):{pattern:"range",range:function(t){return c(e.datatype,t)}},e.rest?{pattern:"zero or more",innerType:t}:t}),body:t,TwineScript_KnownName:""});return n.fn=p(n),n}});return f}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var i=e.objectName,a=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:a,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(a),this)},create:function(e,o,s,c){var u=void 0;function l(e){var r=e&&e.varRef?e.varRef:e;return void 0===r||r&&n.isPrototypeOf(r)&&t.isPrototypeOf(r.object)&&1===r.propertyChain.length}if("making"===o&&!l(s))return r.create("syntax","I need a temp variable, or typed temp variable, to the right of '"+o+"', not "+i(s)+".");if(r.containsError(e))return e;if(a.isPrototypeOf(e)){if("when"===o||"when"in e)return r.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+o+"'.");if(o in e&&("where"!==o||"true"!==e[o]))return r.create("syntax","This lambda has two '"+o+"' clauses.");u=e}else{if("when"===o&&void 0!==e)return r.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!l(e))return r.create("syntax","This lambda needs to start with a single temp variable, or typed temp variable, not "+i(e)+".");(u=Object.create(this)).loop=e||""}return u.source=c.trim(),u[o]=s,u.making&&u.making.getName()===(u.loop&&u.loop.getName())?r.create("syntax","This lambda has two variables named '"+u.loop.getName()+"'.","Lambdas should have all-unique parameter names."):u},apply:function(e,n){var i=n.loop,a=n.pos,o=n.making,s=n.ignoreVia,c=n.tempVariables;function u(e,t){if(e)if("datatype"in e&&"varRef"in e){var n=e.varRef.create(c,e.varRef.propertyChain);n.defineType(e.datatype);var i=n.set(t);if(r.containsError(i))return i}else c[e.getName()]=t}c=c||Object.create(e.stack.length?e.stackTop.tempVariables:t);var l=u(this.loop,i)||u(this.making,o);if(r.containsError(l))return l;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:c,lambdaPos:this.when?void 0:a}));var p=e.eval("Operations");!i||this.making||this.when?p.initialiseIt(r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName)):p.initialiseIt(i);var f=!s&&this.via,d=e.eval("where"in this||"when"in this?"Operations.where("+(this.where||this.when)+","+(f||"true")+",null)":f||"true");return e.stack.shift(),d},filter:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=void 0,o=t.reduce(function(t,o,s){if(a=r.containsError(t))return a;var c=n.apply(e,{loop:o,pos:s+1,ignoreVia:!0,tempVariables:i});return(a=r.containsError(c))?a:t.concat(c?[o]:[])},[]);return(a=r.containsError(o))?a:o}});return a}),define("datatypes/codehook",["internaltypes/twineerror","renderer"],function(e,t){var n=t.exec;return Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return"["+this.source+"]"},create:function(t,r){r||(r=n(t));var i=e.containsError(r);return i||Object.assign(Object.create(this),{source:t,html:r})}})}),define("datatypes/colour",["jquery","utils"],function(e,t){var n=t.matMul,r=Math.max,i=Math.min,a=Math.sin,o=Math.cos,s=Math.pow,c=Math.round,u=Math.floor,l=Math.atan2,p=Math.cbrt,f=Math.sqrt,d=Math.PI,h=Object.assign,y=Object.create,m=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,g=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function b(e){var t=e.r,n=e.g,a=e.b,o=e.a,s=r(t/=255,n/=255,a/=255),u=i(t,n,a),l=(s+u)/2,p=s-u;if(s===u)return{h:0,s:0,l:l};var f=void 0;switch(s){case t:f=(n-a)/p+(n<a?6:0);break;case n:f=(a-t)/p+2;break;case a:f=(t-n)/p+4}return{h:f=c(60*f),s:l>.5?p/(2-s-u):p/(s+u),l:l,a:o}}var w=[.96422,1,.82521],T=24389/27,S=216/24389,x=function(e){return e.map(function(e){return[e]})},k=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,r=e.c,i=e.h,c=e.a;t*=100;var u=[];u[1]=(t+16)/116,u[0]=r*o(i*d/180)/500+u[1],u[2]=u[1]-r*a(i*d/180)/200;var l=[s(u[0],3)>S?s(u[0],3):(116*u[0]-16)/T,t>T*S?s((t+16)/116,3):t/T,s(u[2],3)>S?s(u[2],3):(116*u[2]-16)/T].map(function(e,t){return e*w[t]}),p=k(n([[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],n([[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],x(l)))).map(function(e){return 255*e}),f=_slicedToArray(p,3);return{r:f[0],g:f[1],b:f[2],a:c}}function j(e){var t=O(e);return[t.r,t.g,t.b].every(function(e){return e>=0&&e<=255})}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),n=e.toRGBA();return A.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){if(!A.isPrototypeOf(e))return!1;if(e.lcha&&this.lcha)return e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a;var t=this.toRGBA();return(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA();return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},toHSLA:function(){return b(this.toRGBA())},toRGBA:function(){return this.lch?O(function(e){if(j(e))return e;var t=(e=h({},e)).c,n=0;for(e.c/=2;t-n>1e-5;)j(e)?n=e.c:t=e.c,e.c=(t+n)/2;return e}(h({},this.lch,{a:this.a}))):this},toLCHA:function(){return this.lch?h({},this.lch):(t=(e=this).r,r=e.g,i=e.b,a=e.a,o=k(n([[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],n([[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],x([t/255,r/255,i/255])))).map(function(e,t){return e/w[t]}).map(function(e){return e>S?p(e):(T*e+16)/116}),c=[116*o[1]-16,500*(o[0]-o[1]),200*(o[1]-o[2])],u=180*l(c[2],c[1])/d,{l:c[0]/100,c:f(s(c[1],2)+s(c[2],2)),h:u>=0?u:u+360,a:a});var e,t,r,i,a,o,c,u},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,t.a=this.a,A.create(t)},TwineScript_GetProperty:function(e){if("lch"===e){var t=this.toLCHA();return new Map([["l",t.l],["c",t.c],["h",t.h]])}var n=this.toRGBA();return"h"===e||"s"===e||"l"===e?b(n)[e]:"r"===e||"g"===e||"b"===e||"a"===e?n[e]:void 0},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){var e=!this.lch&&b(this);if(e&&!e.h&&!e.s){if(1===e.l)return"white";if(0===e.l)return"black"}return"("+(this.lch?"lch":"hsl")+":"+(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l])+(1!==this.a?","+this.a:"")+")"},create:function(t){return"string"==typeof t?this.create((A.isHexString(t)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(m,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(t){if(t in v)return v[t];var n=e("<p>").css("background-color",t).css("background-color");return n="transparent"===n?{r:0,g:0,b:0,a:0}:n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[t]=n,n})(t)):!("h"in t&&"s"in t&&"l"in t)||"r"in t||"g"in t||"b"in t?("a"in t&&"number"==typeof t.a||(t.a=1),h(y(this),"h"in t&&"c"in t&&!("s"in t)&&"l"in t?{a:t.a,lch:{l:t.l,c:t.c,h:t.h}}:t)):this.create(function(e){var t=e.h,n=e.s,r=e.l,i=e.a;if(0===n){var a=u(255*r);return{r:a,g:a,b:a}}var o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;function c(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(o-s)*e:e<.5?o:e<2/3?s+(o-s)*(2/3-e)*6:s}return{r:u(255*c((t/=360)+1/3)),g:u(255*c(t)),b:u(255*c(t-1/3)),a:i}}(t))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(m)||e.slice(1).match(g))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var t=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,n){var r=e.colour,i=e.stop;return t.stops[n].stop===i&&t.stops[n].colour.TwineScript_is(r)})},TwineScript_Clone:function(){return n.create(this.angle,[].concat(_toConsumableArray(this.stops)))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(e){return n.create(this.angle,this.stops.map(function(t){return{colour:t.colour,stop:t.stop*e}}))},toLinearGradientString:function(){var e=this;return(this.repeating?"repeating-":"")+"linear-gradient("+this.angle+"deg, "+this.stops.reduce(function(t,n){var r=n.colour,i=n.stop;return t+r.toRGBAString()+" "+i*(e.repeating?1:100)+(e.repeating?"px,":"%,")},"").slice(0,-1)+")"}});return n}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=e.realWhitespace,u=e.anyRealLetter,l=e.anyCasedLetter,p=e.anyNewline,f=t.objectName,d=Object.assign,h=Object.seal,y=Object.keys,m=Math.floor,g=Math.abs,v=void 0,b=void 0,w={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return w.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e={pattern:"range",range:v[this.name]};return this.rest?{pattern:"zero or more",innerType:e}:e},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":e;var n=Object.create(this);return n.name=e,n.rest=t,n},from:function(e){var t=y(b).find(function(t){return b[t](e)});return t?w.create(t):s.create("datatype",f(e)+" doesn't correspond to a datatype value.")}};return b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return w.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return i.isPrototypeOf(e)},lambda:function(e){return a.isPrototypeOf(e)},macro:function(e){return o.isPrototypeOf(e)},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=d({},b,{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e)&&!e.length},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+c+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},any:function(){return!0},const:function(){return!0}}),h(w)}),define("datatypes/typedvar",["utils/operationutils","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var i=e.typeName,a=e.matches,o=e.toSource,s=e.unstorableValue,c=Object.freeze,u=Object.assign,l=Object.create,p=c({TwineScript_TypeName:"a typed variable name",get TwineScript_ObjectName(){return this.TwineScript_ToSource()},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return u(l(p),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return o(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return a(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n;if(n=r.containsError(t)||r.containsError(e)||t.error)return n;var a=s(e);return a&&!p.isPrototypeOf(a)?r.create("syntax","The -type syntax can't have "+i(a)+" to its left."):u(l(this),{datatype:e,varRef:t})}});return p}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/hookset","datatypes/codehook","datatypes/typedvar","datatypes/datatype","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p,f){var d=n.insensitiveName,h=n.nth,y=n.plural,m=n.andList,g=n.lockProperty,v=(r.clone,r.objectName),b=r.typeName,w=r.singleTypeCheck,T=r.toSource,S=void 0,x={};function k(e,n,r){var i=n.fn,a=n.typeSignature,s=n.isChanger,u=void 0!==s&&s,l=r[0];r=function(e){return e.reduce(function(e,n){if(n&&!0===n.spreader){var r=n.value,i=f.containsError(r);if(i)e.push(i);else if(Array.isArray(r)||"string"==typeof r)for(var a=0;a<r.length;a++)e.push(r[a]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(f.create("operation","I can't spread out "+v(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[])}(r.slice(1)),a=[].concat(a||[]);var p=!e,d=p?"":"("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";e=p?"this custom macro":"the "+d+" macro";var g=void 0;g=a.length>0?e+" must only be given "+m(a.map(b))+(a.length>1?", in that order":"."):e+" must not be given any data."+(p?"":" Just write "+d);for(var T=void 0,x=function(t,n){var i=a[t],s=r[t];if(f.containsError(s))return{v:s};if(c.isPrototypeOf(s)&&u)return{v:f.create("syntax","Please put this hook outside the parentheses of the changer macro, not inside it.","Hooks should appear after a macro"+(p?".":": "+d+"[Some text]"))};if(t>=a.length&&!T)return{v:f.create("datatype",r.length-a.length+" too many values were given to "+e+".",g)};if(i||(i=T),!i.innerType||"rest"!==i.pattern&&"zero or more"!==i.pattern||(T=i.innerType,"rest"===i.pattern&&(i=i.innerType)),!w(s,i)){if(void 0===s){var l=a.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length;return{v:f.create("datatype",e+" needs "+y(l-t,"more value")+".",g)}}return s&&s.TwineScript_Unstorable&&(i===S.TypeSignature.Any||i.innerType&&i.innerType===S.TypeSignature.Any)?{v:f.create("datatype",e+"'s "+h(t+1)+" value, "+v(s)+", is not valid data for this macro.",g)}:s&&o.isPrototypeOf(s)&&"lambda"===i.pattern?{v:f.create("datatype",e+"'s "+h(t+1)+" value (a lambda) should have "+m(["where","when","making","via","with"].filter(function(e){return i.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+m(["where","when","making","via","with"].filter(function(e){return e in s}).map(function(e){return"a '"+e+"' clause"}))+".")}:"insensitive set"===i.pattern?{v:f.create("datatype",v(s)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+m(i.innerType)+".")}:{v:f.create("datatype",e+"'s "+h(t+1)+" value is "+v(s)+", but should be "+b(i)+".",i.message||g)}}},k=0,O=Math.max(r.length,a.length);k<O;k+=1){var j=x(k);if("object"===(void 0===j?"undefined":_typeof(j)))return j.v}return i.apply(void 0,[l].concat(_toConsumableArray(r)))}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={fn:t,typeSignature:n};r&&(i.isChanger=!0),Object.freeze(i),Array.isArray(e)?e.forEach(function(e){return g(x,d(e),i)}):g(x,d(e),i)}return S={has:function(e){return e=d(e),x.hasOwnProperty(e)},get:function(e){return e=d(e),x.hasOwnProperty(e)&&x[e]},add:function e(t,n,r){return O(t,n,r),e},addChanger:function e(t,n,r,a){return O(t,n,a,!0),i.register(Array.isArray(t)?t[0]:t,r),e},addCommand:function e(t,n,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return O(t,function(e,t,n,r){return function(i){for(var a=arguments.length,o=Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var c=t.apply(void 0,o);if(c)return c;var u=p.create(),l=Object.assign({TwineScript_TypeID:"command",TwineScript_ObjectName:"a ("+e+":) command",TwineScript_TypeName:"a ("+e+":) command",TwineScript_Print:function(){return"`[A ("+e+":) command]`"},TwineScript_ToSource:function(){return"("+e+":"+o.map(T)+")"},TwineScript_is:function(e){return T(this)===T(e)}},r?{TwineScript_Attach:function(e,t){return u.section=e,t.run(u),l},TwineScript_Run:function(e){return n.apply(void 0,[u,e].concat(o))}}:{TwineScript_Run:function(e){return n.apply(void 0,[e].concat(o))}});return l}}([].concat(t)[0],n,r,a),i),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:e,max:t,range:function(n){return"number"==typeof n&&!Number.isNaN(n)&&n>=e&&n<=t}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=0&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=1&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t){return S.has(e)?k(e,S.get(e),t):f.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t){return a.isPrototypeOf(e)?k("",e,t):f.create("macrocall","I can't call "+v(e)+" because it isn't a custom macro.")}},Object.assign(S.TypeSignature,{positiveNumber:S.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:S.TypeSignature.numberRange(0,1/0),percent:S.TypeSignature.numberRange(0,1)}),Object.freeze(S)}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i){var a=n.objectName;return r.on("set",function(n,r){n.TwineScript_VariableStore&&e(t.storyElement).find("[data-2bind]").each(function(t,i){var a=(i=e(i)).data("twoWayBindEvent");"function"==typeof a&&a(i,n,r)})}),Object.freeze({TwineScript_TypeName:"a bound variable",TwineScript_ObjectName:"a bound variable",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var t,n=this.varRef.set(e);if(t=i.containsError(n))return t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one way";return r.isPrototypeOf(e)?e.error?e.error:Object.assign(Object.create(this),{varRef:e,bind:t}):i.create("operation","I can only 'bind' a variable, not "+a(e)+".")}})}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i){var a=e.objectName,o=e.matches;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,c=[],u=function e(s,c){var u,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=[],f=void 0;if(f=c&&r.isPrototypeOf(c)?c.get():c,u=i.containsError(f))return u;if(Array.isArray(f)&&Array.isArray(s)){for(var d=0,h=0;d<s.length&&h<f.length;){var y=s[d],m=f[h];if(t.isPrototypeOf(y)&&y.datatype.rest||n.isPrototypeOf(y)&&y.rest){for(var g=h;h<f.length&&o(y,m);)m=f[h+=1];t.isPrototypeOf(y)?y.datatype=[y.datatype]:n.isPrototypeOf(y)&&(y=n.create("array")),p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,{first:g+1,last:h+1}):f.slice(g,h)))}else p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,h+1):m)),h+=1;d+=1}return d<s.length?l&&i.create("operation","I can't unpack this array because it needs "+(s.length-d)+" more value"+(s.length-d>0?"s":"")+"."):p}if(s instanceof Map&&f instanceof Map){var v=!0,b=!1,w=void 0;try{for(var T,S=s.entries()[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var x=_slicedToArray(T.value,2),k=x[0],O=x[1];if(!f.has(k))return l&&i.create("operation","I can't unpack this datamap because it needs a '"+k+"' data name.");p=p.concat(e(O,r.isPrototypeOf(c)?r.create(c,k):f.get(k)))}}catch(e){b=!0,w=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw w}}return p}if(t.isPrototypeOf(s)){if("function"==typeof s.datatype.destructure)return[{dest:s,value:f,src:c}].concat(s.datatype.destructure(f));if(!o(f,s.datatype))return[l&&i.create("operation","I can't unpack "+a(f)+" into "+s.varRef.TwineScript_ToSource()+" because it doesn't match "+a(s.datatype)+".")];p=p.concat(e(s.datatype,f))}return r.isPrototypeOf(s)||t.isPrototypeOf(s)?p.concat({dest:s,value:f,src:c}):"function"==typeof s.destructure?p.concat(s.destructure(f)):o(f,s)?p:l&&i.create("operation","I tried to unpack, but "+a(s)+" in the pattern didn't match "+a(f)+".")}(this.dest,this.src);if(s=i.containsError(u))return s;if(!u.length)return i.create("operation","I can't store a new value inside "+a(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var l=!0,p=!1,f=void 0;try{for(var d,h=u.reverse()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=y.dest,g=y.value,v=y.src;if(t.isPrototypeOf(m)){if(s=i.containsError(m.defineType()))return s;m=m.varRef}if(s=m.set(g),i.isPrototypeOf(s))return s;e&&v&&v.delete(),c.shift(a(m)+" is now "+a(g))}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return c.join("; ")},create:function(e,t,n){return Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["jquery","state","datatypes/assignmentrequest","utils/operationutils","internaltypes/varref","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=r.isObject,u=r.collectionType,l=r.is,p=r.isA,f=r.clone,d=r.unique,h=r.contains,y=r.matches,m=r.objectName,g=void 0,v=0;function b(e,t,n,r){return n=n||"do this to",function(i,a){1===t.length&&(a=i);var o;return(o=s.containsError(i,a))?o:(void 0===i?"undefined":_typeof(i))!==e||(void 0===a?"undefined":_typeof(a))!==e?s.create("operation","I can only "+n+" "+e+"s, not "+m((void 0===i?"undefined":_typeof(i))!==e?i:a)+".",r):t(i,a)}}function w(e){return function(t,n){var r;if(r=s.containsError(t,n))return r;if((void 0===t?"undefined":_typeof(t))!==(void 0===n?"undefined":_typeof(n))||c(t)&&"TwineScript_TypeName"in t&&c(n)&&"TwineScript_TypeName"in n&&t.TwineScript_TypeName!==n.TwineScript_TypeName||u(t)!==u(n)){var i=m(t)+" isn't the same type of data as "+m(n);return s.create("operation",i[0].toUpperCase()+i.slice(1))}return e(t,n)}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function r(i,a){var o=void 0;if(o=s.containsError(i,a))return o;v=i;var c=i.determiner?[i,a]:a.determiner?[a,i]:[],u=_slicedToArray(c,2),l=u[0],p=u[1];if(l){var f=l.determiner;if("start"===f||"end"===f){if(t)return s.create("operation","I can't use '"+t+"' with the 'start' or 'end' of "+m(l)+".");if(p.determiner){if("start"===p.determiner||"end"===p.determiner)return s.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");var d=[p,l];l=d[0],p=d[1]}for(var h=l.string||l.array,y=0;y<h.length+1;y+=1){var g=y?"end"===f?h.slice(-y):h.slice(0,y):h.constructor(),b=l===i?r(g,a):r(i,g);if(o=s.containsError(b))return o;if(b!==n)return b}return n}var w="all"===f;return l.array.reduce(function(e,t){var n,o=l===i?r(t,a):r(i,t);return(n=s.containsError(e,o))?n:w?e&&o:e||o},w)}return e(i,a)}}function S(e,t){return T(function(t,n){var r=e(t,n);return s.containsError(r)?r:!r},t,!0)}var x="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(n){var r=Object.create(this);return r.Identifiers={TwineScript_Identifiers:!0,get it(){return v},get time(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'time' can't be used in "+n.stackTop.evaluateOnly+"."):Date.now()-n.timestamp},get visits(){var e=n.stackTop.speculativePassage,r=function(n){return n===(e||t.passage)};return t.pastPassageNames().filter(r).length+t.mockVisits.filter(r).length+(!e||e===t.passage)},get visit(){return r.Identifiers.visits},get exits(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'exit' and 'exits' can't be used in "+n.stackTop.evaluateOnly+"."):n.dom.find("tw-enchantment, tw-link").filter(function(t,n){return e(n).data("enchantmentEvent")||e(n).parent().data("linkPassageName")||e(n).parent().data("clickEvent")}).length},get exit(){return r.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:s.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}},r},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](v,r))},"and"===e)},and:b("boolean",w(function(e,t){return e&&t}),"use 'and' to join",x),or:b("boolean",w(function(e,t){return e||t}),"use 'or' to join",x),not:b("boolean",function(e){return!e},"use 'not' to invert",x),"+":w(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(f)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:s.create("operation","I can't use + on "+m(e)+".")}),"-":w(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return l(e,t)})});if(e instanceof Set){var n=[].concat(_toConsumableArray(t));return new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return l(e,t)})}))}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:s.create("operation","I can't use - on "+m(e)+".")}),"*":b("number",w(function(e,t){return e*t}),"multiply"),"/":b("number",w(function(e,t){return 0===t?s.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":b("number",w(function(e,t){return 0===t?s.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":T(b("number",w(function(e,t){return e<t}),"do < to"),"<"),">":T(b("number",w(function(e,t){return e>t}),"do > to"),">"),"<=":T(b("number",w(function(e,t){return e<=t}),"do <= to"),"<="),">=":T(b("number",w(function(e,t){return e>=t}),"do >= to"),">="),is:T(l),isNot:S(l),contains:T(h,"contains"),doesNotContain:S(h,"does not contain"),isIn:T(function(e,t){return h(t,e)},"is in"),isNotIn:S(function(e,t){return h(t,e)},"is not in"),isA:T(p,"is a"),isNotA:S(p,"is not a"),typifies:T(function(e,t){return p(t,e)}),untypifies:S(function(e,t){return p(t,e)}),matches:T(y),doesNotMatch:S(y),where:function(e,t,n){var r;return(r=s.containsError(e))?r:"boolean"!=typeof e?s.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){if(a.isPrototypeOf(e)||o.isPrototypeOf(e)){var t=f(e);return(a.isPrototypeOf(e)?t.datatype:t).rest=!0,t}return{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:"a spreaded '...' value",TwineScript_Unstorable:!0}},makeAssignmentRequest:function(e,t,r){var i=s.containsError(e,t);return i||n.create(e,t,r)},setIt:function(e){return i.isPrototypeOf(e)||a.isPrototypeOf(e)?(v=e.get(),e):e},initialiseIt:function(e){v=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{return eval(arguments[0])}catch(e){return e}},section}}),define("section",["jquery","utils","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","utils/renderutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","datatypes/lambda","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,a,o,s,c,u,l,p,f,d,h,y){var m,g=o.printBuiltinValue,v=o.objectName,b=o.typeID,w=s.collapse;function T(e,n,r){if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&c.isPrototypeOf(n)){if(r.data("originalSource",r.popAttr("source")),!this.renderInto(r.data("originalSource"),r,n)){var i=t.insensitiveName(e.attr("name"));if(["if","elseif","unless","else","testfalse"].includes(i)&&(e.addClass("false"),"elseif"!==i&&(this.stackTop.lastHookShown=!1)),r.data("live")){var a=r.data("live"),o=a.delay,s=a.event;(function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;a&&t.assertMustHave(a,["when"]);var o=n.data("originalSource")||"",s=_slicedToArray(this.stack,1)[0].tempVariables,c=this.whenUnblocked.bind(this,function(){if(r.inDOM()){var t=a&&a.filter(r,[!0],s);h.containsError(t)?t.render(e.attr("title")).replaceAll(e):!a||t[0]?(r.renderInto(o,n,{append:"replace"}),t||n.find("tw-expression[name='stop']").length||r.inDOM()&&setTimeout(c,i)):setTimeout(c,i)}});setTimeout(c,i)}).call(this,e,r,o,s)}return}}else{if(!1===n)return r.attr("source")&&(r.data("originalSource",r.popAttr("source")),r.data("hidden",!0)),e.addClass("false"),void(this.stackTop.lastHookShown=!1);!0!==n&&e.replaceWith(h.create("datatype",v(n)+" cannot be attached to this hook.","Only Booleans and changers can be attached to hooks.").render(e.attr("title")))}this.stackTop.lastHookShown=!0}function S(t){var n=(t instanceof e?t[0]:t).nextSibling;if(n&&(n instanceof Text&&!n.textContent.trim()||["br","tw-consecutive-br"].includes((n.tagName||"").toLowerCase()))){var r=S(n),i=r.whitespace,a=r.nextElem;return{whitespace:e(n).add(i),nextElem:a}}return{whitespace:e(),nextElem:e(n)}}var x={add:[],remove:[]};return m={create:function(e){var n=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||t.storyElement,stack:[],enchantments:[],unblockCallbacks:[]});return n=r(n)},get stackTop(){return this.stack[0]},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t,n){var r=e("<p>");this.stack.unshift({desc:f.create({target:r,source:t,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:n,finalIter:!0}),this.execute();var i;return(i=r.find("tw-error")).length>0?i:r},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:Object.assign(Object.create(d),{TwineScript_VariableStoreName:n}),speculativePassage:t});var r=void 0;return r=p.isPrototypeOf(e)?e.apply(this,{fail:!1,pass:!0}):this.eval(e),this.stack.shift(),r},renderInto:function(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=f.create({target:n,source:t,section:this,append:"append"});if(r)if(c.isPrototypeOf(r)){var s=r.run(o);if(h.containsError(s))return s.render(n.attr("title")).replaceAll(n),!1}else Object.assign(o,r);if((n=o.target,this.stack.length>=50)&&this.stack.reduce(function(e,t){return e+!!t.finalIter},0)>=50)return h.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(n.attr("title")).replaceAll(n),!1;var u=function(t,r,a){var o=n instanceof e&&n.is("tw-hook")&&n.parents("tw-collapsed,[collapsing=true]").length>0;i.stack.unshift({desc:t,finalIter:a,tempVariables:r,collapses:o,evaluateOnly:i.stackTop&&i.stackTop.evaluateOnly})};if(a||(a=Object.create(this.stack.length?this.stackTop.tempVariables:d)),!a.hasOwnProperty("TwineScript_VariableStoreName")){var l=n&&n.tag();a.TwineScript_VariableStoreName="tw-hook"===l?n.attr("name")?"?"+n.attr("name"):"an unnamed hook":"tw-expression"===l?"a "+n.attr("type")+" expression":"tw-passage"===l?"this passage":"an unknown scope"}return Object.keys(o.loopVars).length?function(){var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));if(y.create(t+" loop"+(1!==t?"s":"")).render().prependTo(n),t){for(var r=function(n){u(o,Object.keys(e).reduce(function(t,r){return t[r]=e[r][n],t},Object.create(a),n===t-1))},s=t-1;s>=0;s-=1)r(s);for(s=t-1;s>=0&&!i.stackTop.blocked;s-=1)i.execute()}}():(u(o,a,!0),this.execute()),0===this.stack.length&&this.updateEnchantments(),o.enabled},execute:function(){var n=this,r=this.stackTop,a=r.desc,o=r.dom,s=r.collapses,u=r.evaluateOnly;a&&!o&&(o=a.render(),this.stackTop.dom=o,this.stackTop.desc=void 0),o.findAndFilter("tw-hook,tw-expression").each(function(r,a){if(n.stackTop.blocked)return!1;switch((a=e(a)).tag()){case"tw-hook":var o=a.popAttr("source")||"";if(o&&a.data("originalSource",o),a.data("tempVariables",n.stackTop.tempVariables),a.popAttr("hidden")){a.data("hidden",!0);break}o&&n.renderInto(o,a);break;case"tw-expression":if(a.attr("blockers")){if(u)return void a.removeAttr("blockers").removeAttr("js").replaceWith(h.create("syntax","I can't use a macro like (prompt:) or (confirm:) in "+u+".","Please rewrite this without putting such macros here.").render(a.attr("title"),a));var s=[];try{s=JSON.parse(a.popAttr("blockers")),a.data("blockers",s)}catch(e){t.impossible("Section.execute","JSON.parse blockers failed.")}}if(a.data("blockers")){var p=a.data("blockers");if(p.length){n.stackTop.blocked=!0;var d=n.eval(p.shift());return h.containsError(d)&&(n.stackTop.blocked=!1,a.removeData("blockers").replaceWith(d.render(a.attr("title"),a))),!1}a.removeData("blockers")}a.attr("js")&&function(n){var r=this.eval(n.popAttr("js")||"");this.stackTop.evaluateOnly&&r&&(c.isPrototypeOf(r)||"function"==typeof r.TwineScript_Run)&&(r=h.create("syntax","I can't work out what "+this.stackTop.evaluateOnly+" should evaluate to, because it contains a "+(c.isPrototypeOf(r)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var a=void 0,o=void 0,s=e();for(o=n;c.isPrototypeOf(r);){var u=S(o);if(a=u.whitespace,(o=u.nextElem)[0]instanceof Text&&"+"===o[0].textContent.trim()){var p,d=o,m=S(d);if(p=m.whitespace,(o=m.nextElem).is("tw-expression")){var w=this.eval(o.popAttr("js"));if(h.containsError(w)){r=w;break}var x=i["+"](r,w);e(a).add(d).add(p).remove(),r=h.containsError(x)?h.create("operation","I can't combine "+v(r)+" with "+v(w)+".","function"==typeof w.TwineScript_Run?"If you want to attach this changer to "+v(w)+", remove the + between them.":"Changers can only be added to other changers."):x;continue}}if(o.is("tw-expression")){var k=this.eval(o.popAttr("js"));if(h.containsError(k)){r=k;break}if(k&&"object"===(void 0===k?"undefined":_typeof(k))&&"function"==typeof k.TwineScript_Attach){r=k.TwineScript_Attach(this,r);break}return c.isPrototypeOf(k)?void n.replaceWith(h.create("operation","Changers like ("+r.macroName+":) need to be combined using + between them.","Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(n.attr("title"))):void n.replaceWith(h.create("operation",v(k)+" can't have changers like ("+r.macroName+":) attached.","Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(n.attr("title")))}if(o.is("tw-hook")){a.remove(),s=o;break}r.macroName||t.impossible("Section.runExpression","changer has no macroName");var O=n.attr("title")||"("+r.macroName+": ...)";return void n.replaceWith(h.create("syntax","The ("+r.macroName+":) changer should be stored in a variable or attached to a hook.","Macros like this should appear before a hook: "+O+"[Some text]").render(n.attr("title")))}n.attr("return",b(r)),s=s.length?s:S(n).nextElem.filter("tw-hook");var j=void 0;if(j=h.containsError(r))j instanceof Error&&(j=h.fromError(j)),n.replaceWith(j.render(n.attr("title"),n));else if(y.isPrototypeOf(r))n.append(r.render());else if(r&&"function"==typeof r.TwineScript_Run)if(r=r.TwineScript_Run(this),h.containsError(r))n.replaceWith(r.render(n.attr("title")));else if(f.isPrototypeOf(r)){if(r.data&&r.data.live)return void n.replaceWith(h.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(n.attr("title")));r.section=this,r.target=o,this.renderInto("",o,r)}else{if("blocked"===r)return this.stackTop.blocked=!0,void n.attr("js","section.blockedValue()");r&&t.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor "+(void 0===r?"undefined":_typeof(r))+': "'+r+'"')}else!s.length&&("string"==typeof r||"number"==typeof r||r instanceof Map||r instanceof Set||Array.isArray(r)||l.isPrototypeOf(r))||r&&"function"==typeof r.TwineScript_Print&&!c.isPrototypeOf(r)?(r=g(r),h.containsError(r)?(r instanceof Error&&(r=h.fromError(r)),n.replaceWith(r.render(n.attr("title")))):"string"!=typeof r?t.impossible("printBuiltinValue() produced a non-string "+(void 0===r?"undefined":_typeof(r))):this.renderInto(r,n)):s.length?T.call(this,n,r,s):c.isPrototypeOf(r)||"boolean"==typeof r||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+r)}.call(n,a)}}),this.stackTop.blocked||(o.length&&s&&w(o),o.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){w(e(this))}),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return x[e].push(t),this},addEnchantment:function(e){var t=this;this.enchantments.push(e),x.add.forEach(function(n){return n(t,e)})},removeEnchantment:function(e){var t=this,n=this.enchantments.indexOf(e);this.enchantments.splice(n,1),e.disenchant(),x.remove.forEach(function(n){return n(t,e)})},unblock:function(e){for(this.stack.length||t.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;this.unblockCallbacks.length>0;){if(this.unblockCallbacks.shift()(),this.stackTop&&this.stackTop.blocked)return}},whenUnblocked:function(e){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):e()},blockedValue:function(){var e=this.stackTop;return e||t.impossible("Section.blockedValue","stack is empty"),e.blockedValues&&e.blockedValues.length||t.impossible("Section.blockedValue","blockedValues is missing or empty"),e.blockedValues.shift()}},Object.preventExtensions(m)}),define("engine",["jquery","utils","state","section","passages"],function(e,t,n,r,i){var a,o=t.escape,s=t.impossible,c=t.passageSelector,u=t.transitionOut,l=Object.create(null);function p(e,t){return"<tw-include type="+e+" title='"+o(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function f(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(o,["stretch","transition"]);var f=i.get(a),d=t.storyElement,h=d.parent(),y=o.stretch,m=o.transition,g=(m=void 0===m?{}:m).depart,v=void 0===g?"instant":g,b=m.arrive,w=void 0===b?"dissolve":b,T=m.departOrigin,S=m.arriveOrigin,x=m.time;h.findAndFilter("tw-enchantment").each(function(t,n){var r=(n=e(n)).data("enchantedProperties");r&&d.css(r.reduce(function(e,t){return e[t]="",e},{})),n[0]===h[0]&&(h=d.unwrap().parent())}),i.hasValid(a)||s("Engine.showPassage","There's no passage with the name \""+a+'"!');var k,O,j,A,C=d.children(c).not(".transition-out, .transition-out *"),E=(f.get("tags")||[]).join(" "),_=(k=e("<tw-passage><tw-sidebar>"),O=k.children("tw-sidebar"),j=e('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),A=e('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),n.pastLength<=0&&j.css("visibility","hidden"),n.futureLength<=0&&A.css("visibility","hidden"),O.append(j,A),k);"function"==typeof T&&(T=T.call(C)),"function"==typeof S&&(S=S.call(_)),d.detach(),_.appendTo(d).attr({tags:E}),!y&&v&&(u(C,v,x,0,0,0,T),C.css("position","absolute")),d.attr({tags:E});var N=r.create(_),P=f.get("source");P=i.getTagged("header").map(p.bind(0,"header")).join("")+(l.debug?i.getTagged("debug-header").map(p.bind(0,"debug-header")).join(""):"")+P+i.getTagged("footer").map(p.bind(0,"footer")).join("")+(l.debug?i.getTagged("debug-footer").map(p.bind(0,"debug-footer")).join(""):""),n.pastLength<=0&&(l.debug&&(P=i.getTagged("debug-startup").map(p.bind(0,"debug-startup")).join("")+P),P=i.getTagged("startup").map(p.bind(0,"startup")).join("")+P),N.renderInto(P,_,{transition:w,transitionTime:x,transitionOrigin:S}),h.append(d.parents().length?d.parents().last():d),scroll(0,y?_.offset().top-.05*e(window).height():d.offset().top)}return a={goBack:function(e){n.rewind()&&f(n.passage,e)},goForward:function(e){n.fastForward()&&f(n.passage,e)},goToPassage:function(e,t){n.play(e),f(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:f,options:l},Object.freeze(a)}),define("debugmode/panel",["jquery"],function(e){return Object.freeze({create:function(t){var n=t.className,r=t.rowAdd,i=t.rowCheck,a=t.columnHead,o=t.tabName,s=t.tabUpdate,c=e("<div class='panel panel-"+n+"' hidden><table class='panel-rows'></table></div>"),u=e("<button class='tab tab-"+n+"'>0 "+o+"s</button>");return u.click(function(){u.toggleClass("enabled"),u.parent().siblings(".panel").attr("hidden",""),u.is(".enabled")&&(u.siblings(".tab:not(.tab-"+n+")").removeClass("enabled"),c.removeAttr("hidden"))}),s||(s=function(e){return u.text(e+" "+o+(1!==e?"s":""))}),Object.assign(Object.create(this),{tabName:o,tab:u,panel:c,panelRows:c.find(".panel-rows"),rowAdd:r,rowCheck:i,columnHead:a,tabUpdate:s})},update:function(t,n){var r=this.rowCheck,i=this.rowAdd,a=this.panelRows,o=this.columnHead,s=[],c=a.children();t.forEach(function(t){var n=c.filter(function(n,i){return r(t,e(i))}),o=i(t);n.length?n.replaceWith(o):a.append(o),s.push(o[0])}),c.filter(function(e,t){return!s.includes(t)}).remove(),this.tabUpdate(n),n>0&&!a.find(".panel-head").length?a.prepend(o()):0===n&&a.find(".panel-head").remove()}})}),define("debugmode/mode",["jquery","utils","state","internaltypes/varref","internaltypes/twineerror","utils/operationutils","engine","passages","section","debugmode/panel"],function(e,t,n,r,i,a,o,s,c,u){var l=t.escape,p=t.nth,f=t.storyElement,d=t.debounce,h=a.objectName,y=a.isObject,m=a.toSource;return function(t,a){var g=e(document.documentElement),v=e("<tw-debugger>\n\t\t<div class='panel panel-errors' hidden><table></table></div>\n\t\t<div class='tabs'></div>\n\t\t<label style='user-select:none'>Turns: </label><select class='turns' disabled></select><button class='show-invisibles'>Debug View</button><button class='show-dom'>DOM View</button>\n\t\t<div class='resizer'>\n\t\t</tw-debugger>"),b=v.find(".tabs"),w=v.find(".show-dom"),T=v.find(".show-invisibles"),S=v.find(".turns");v.find(".resizer").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=v.width();g.on("mousemove.debugger-resizer",function(e){var r=e.pageX;v.width((n+t-r|0)+"px")}).on("mouseup.debugger-resizer",function(){g.off(".debugger-resizer")})}),T.click(function(){g.toggleClass("debug-mode").removeClass("dom-debug-mode"),T.toggleClass("enabled"),w.removeClass("enabled")}),w.click(function(){g.toggleClass("dom-debug-mode").removeClass("debug-mode"),w.toggleClass("enabled"),T.removeClass("enabled")}),n.timelinePassageNames().forEach(function(e,t){S.append("<option value="+t+">"+(t+1)+": "+e+"</option>")}),S.val(n.pastLength),n.pastLength>0&&S.removeAttr("disabled"),S.change(function(e){var t=e.target.value-n.pastLength;0!==t&&(n[t<0?"rewind":"fastForward"](Math.abs(t)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.pastLength;i>=1&&S.removeAttr("disabled"),r?(S.find("[selected]").removeAttr("selected"),S.val(i)):(S.children().each(function(t,n){t>=i&&e(n).remove()}),S.append("<option value="+i+">"+(i+1)+": "+t+"</option>").val(i))}).on("back",function(){n.pastLength<=1&&S.attr("disabled"),S.find("[selected]").removeAttr("selected"),S.val(n.pastLength)}).on("load",function(e){S.empty(),S[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return S.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})});var x=new Set,k=u.create({className:"variables",tabName:"Variable",rowAdd:function(t){var n=t.name,r=t.path,i=t.value,a=t.tempScope,o=t.type,s=y(i)&&i.TwineScript_DebugName?i.TwineScript_DebugName():l(h(i)),c="";r.length&&(c=r.reduce(function(e,t){return e+t+"'s "},""));var u=o?m(o):"",p=s.length>48&&!i.TwineScript_DebugName,f="object"===(void 0===i?"undefined":_typeof(i))||p,d=p?s.slice(0,48)+"\u2026":s;return e('<div class="variable-row">').attr("data-name",n).attr("data-path",r+"").attr("data-scope",a||"").css("padding-left",Math.min(5,r.length)+"em").append("<td class='variable-type'>"+(u?u+"-type ":"")+"</td>","<td class='variable-name'>"+(c?"<span class='variable-path'>"+(a?"_":"$")+l(c)+"</span> ":"")+(c?"":a?"_":"$")+l(n+"")+"</td>","<td class='temporary-variable-scope'>"+(a||"")+"</td>","<td class='variable-value'>"+d+"</td><td class='panel-row-buttons'>"+(f?"<tw-folddown tabindex=0>(source:) </tw-folddown>":"")+"</td>").add(f?"<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'>"+l(m(i))+"</td></tr>":"")},rowCheck:function(e,t){var n=e.name,r=e.path,i=e.tempScope;return t.attr("data-name")===n&&t.attr("data-path")===r+""&&t.attr("data-scope")===i},columnHead:function(){return'<tr class="panel-head"><th>Type</th><th>Name</th><th>Scope</th><th>Value</th></tr>'}}),O=d(function(){var e=[],t=n.variables,r=e.length;function i(t){if(!(e.length>500)){e.push(t);var n=t.path.concat(t.name),r=t.value,a=t.tempScope;Array.isArray(r)?r.forEach(function(e,t){return i({name:p(t+1),path:n,value:e,tempScope:a})}):r instanceof Map?[].concat(_toConsumableArray(r)).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return i({name:r,path:n,value:o,tempScope:a})}):r instanceof Set&&[].concat(_toConsumableArray(r)).forEach(function(e){return i({name:"???",path:n,value:e,tempScope:a})})}}for(var a in t)a.startsWith("TwineScript")||(r+=1,i({name:a,path:[],value:t[a],tempScope:"",type:t.TwineScript_TypeDefs&&t.TwineScript_TypeDefs[a]}));e.push.apply(e,_toConsumableArray(x)),r+=x.size,k.update(e,r),k.panel[(r?"remove":"add")+"Class"]("panel-variables-empty")}),j=void 0;r.on("set",function(e,t,r){if(e!==n.variables&&e.TwineScript_VariableStoreName){var i=e.TwineScript_VariableStoreName,a=e.TwineScript_TypeDefs&&e.TwineScript_TypeDefs[t],o=[].concat(_toConsumableArray(x)).find(function(e){return e.name===t&&e.tempScope===i});o?o.value=r:x.add({name:t,path:[],value:r,tempScope:i,type:a})}O(),j()}).on("delete",function(){O(),j()}),k.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),k.tab.addClass("enabled");var A=k.panel.find(".clipboard");g.on("click",".panel-variables-copy",function(){var e=[];for(var t in n.variables)t.startsWith("TwineScript")||e.push("$"+t+" to "+m(n.variables[t]));A.val("(set:"+e+")")[0].select(),document.execCommand("copy")});var C=u.create({className:"enchantments",tabName:"Enchantment",rowAdd:function(t){var n=t.scope,r=t.changer,i=t.name,a=t.localHook,o=void 0;return o=r?l(h(r)):"<em>enchanted via ("+i+":)</em>",e('<div class="enchantment-row">').data("enchantment",t).append("<td><span class='enchantment-name'>"+m(n)+(a?"</span><span class=enchantment-local>"+(a.attr("name")?"?"+a.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value'>"+o+"</td>"+(r?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).add(r?"<tr class='panel-row-source' style='display:none'><td colspan='3'>"+l(m(r))+"</td></tr>":"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th>Scope</th><th>Value</th></div>'}}),E=d(function(e){C.update(e.enchantments,e.enchantments.length)});c.on("add",E).on("remove",E);var _=c.create(f),N=u.create({className:"storylets",tabName:"Storylet",rowAdd:function(t){var n=t.name,r=t.active,i=t.storyletSource,a=t.exclusive,o=t.urgent;return e('<tr class="storylet-row '+(r?"":"storylet-closed")+'">').attr("data-name",n).append("<td class='storylet-name'>"+n+"</td><td class='storylet-lambda'>"+i+"</td><td class='storylet-exclusive'>"+a+"</td><td class='storylet-urgent'>"+o+"</td>")},rowCheck:function(e,t){var n=e.name;return t.attr("data-name")===l(n+"")},columnHead:function(){return"<tr class=\"panel-head\"><th>Name</th><th>Condition</th><th class='storylet-exclusive'>Exclusivity</th><th class='storylet-urgent'>Urgency</th></tr>"}});N.tab.hide(),j=d(function(){var e=s.getStorylets(_),t=i.containsError(e),n=s.allStorylets();N.update(n.map(function(n){return{name:n.get("name"),storyletSource:n.get("storylet").TwineScript_ToSource(),active:!t&&e.some(function(e){return e.get("name")===n.get("name")}),exclusive:"number"==typeof n.get("exclusivity")?n.get("exclusivity"):0,urgent:"number"==typeof n.get("urgency")?n.get("urgency"):0}}),t?0:e.length),N.panel[(t?"add":"remove")+"Class"]("storylet-error");var r=n.some(function(e){return e.get("exclusivity")&&"number"==typeof e.get("exclusivity")}),a=n.some(function(e){return e.get("urgency")&&"number"==typeof e.get("urgency")});N.panel[(r?"add":"remove")+"Class"]("panel-exclusive"),N.panel[(a?"add":"remove")+"Class"]("panel-urgent"),n.length&&N.tab.show()});var P=u.create({className:"source",tabName:"Source",rowAdd:e.noop,rowCheck:e.noop,tabUpdate:e.noop,columnHead:e.noop});P.tab.text("Source");var I=u.create({className:"errors",tabName:"Error",rowAdd:e.noop,rowCheck:e.noop,columnHead:e.noop}),M=function(t,r){if("propagated"!==t.type){I.panelRows.children().length>500&&I.panelRows.children(":first-child").remove();var i=e('<tr class="error-row"><td class="error-passage">'+n.passage+'</td><td class="error-message">'+t.message+"</td></tr>");i.find(".error-message").attr("title",r),I.panelRows.append(i),I.tabUpdate(I.panelRows.children().length)}};function D(){x=new Set,O(),j(),C.panelRows.empty(),C.tabUpdate(0),n.passage&&P.panelRows.text(s.get(n.passage).get("source"))}i.on("error",M),v.prepend(k.panel,C.panel,I.panel,N.panel,P.panel),b.prepend(k.tab,C.tab,I.tab,N.tab,P.tab),n.on("forward",D).on("back",D).on("load",D),t&&(M(t,a),D()),e(document.body).append(v)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=t.realWhitespace,u=t.nth,l=t.anyRealLetter,p=n.subset,f=n.objectName,d=n.clone,h=n.toSource,y=e.TypeSignature,m=y.rest,g=y.zeroOrMore,v=y.either,b=y.optional,w=y.insensitiveSet,T=y.numberRange,S=y.percent,x=y.nonNegativeInteger,k=y.positiveInteger,O=y.Any,j=Math.max,A=Math.min,C=Math.round,E=Math.floor,_=Math.ceil;function N(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?s.create("macrocall","This mathematical expression doesn't compute!"):t}}e.add(["str","string","text"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.join("")},[g(e.TypeSignature.either(String,Number,Boolean,Array))])("source",function(e,t){return t&&"command"===t.TwineScript_TypeID&&!t.TwineScript_ToSource?s.create("datatype","I can't construct the source code of a command created by a custom macro."):h(t)},[O])("substring",function(e,t,n,r){return p(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(RegExp(c+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],function(e,t,n){return 0===n.length?s.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[x,String])(["str-reversed","string-reversed"],function(e,t){return[].concat(_toConsumableArray(t)).reverse().join("")},[String])("joined",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.join(t)},[m(String)])("plural",function(e,t,n,r){return n&&""!==r?t+" "+(1!==Math.abs(t)?r||n+"s":n):s.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,b(String)])(["str-nth","string-nth"],function(e,t){return u(t)},[parseInt])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+f(t)+" to a number."):+t},[String])("datatype",function(e,t){return a.from(t)},[O])("datapattern",function(e,t){return function e(t){var n,r=void 0;return Array.isArray(t)?r=t.map(e):t instanceof Map?(r=new Map,[].concat(_toConsumableArray(t)).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],a=n[1];return r.set(i,e(a))})):r=a.from(t),(n=s.containsError(r))?n:r}(t)},[O])(["rgb","rgba"],function(e){return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[T(0,255),T(0,255),T(0,255),b(S)])(["hsl","hsla"],function(e,t,n,i,a){return(t=C(t)%360)<0&&(t+=360),r.create({h:t,s:n,l:i,a:a})},[Number,S,S,b(S)])(["lch","lcha"],function(e,t,n,i,a){return(i=C(i)%360)<0&&(i+=360),r.create({l:t,c:n,h:i,a:a})},[S,T(0,132),Number,b(S)])("complement",function(e,t){return t.LCHRotate(180)},[r])("palette",function(e,t,n){var i=n.toLCHA(),a=i.l,o={l:a<=.75?.75+a/3:.75-3*(1-a),c:80,h:i.h,a:1},s=void 0,c=void 0,u=void 0;return s=r.create(o),o.l+=a<=.75?-.1:.1,o.l<.5&&(o.l*=.5/o.l),c=r.create(o),o.l+=a<=.85?.15:-.15,u=r.create(o),"adjacent"===t?(c=(s=s.LCHRotate(-30)).LCHRotate(30),u=s.LCHRotate(60)):"triad"===t&&(u=s.LCHRotate(180),c=s.LCHRotate(140),s=s.LCHRotate(-140)),[n,s,c,u]},[w("mono","adjacent","triad"),r])("gradient",function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];if((t=C(t)%360)<0&&(t+=360),a.length<4)return s.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours.");var c=void 0,u=[],l=a.reduce(function(e,t){if(s.containsError(e))return e;if(void 0===c)c=t;else{if("number"!=typeof c||!r.isPrototypeOf(t))return s.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");u.push({stop:c,colour:d(t)}),c=void 0}return e},!0);return s.containsError(l)?l:void 0!==c?s.create("macrocall","This gradient has a colour-stop percent without a colour."):i.create(t,u)},[Number,m(v(S,r))])("stripes",function(e,t,n){for(var r=arguments.length,a=Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];(t=C(t)%360)<0&&(t+=360);var s=0,c=[];return a.forEach(function(e){c.push({stop:s,colour:d(e)}),s+=n,c.push({stop:s,colour:d(e)})}),i.create(t,c,!0)},[Number,k,r,m(r)])("hooks-named",function(e,t){return t?o.create({type:"name",data:t}):s.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2){var n=arguments.length<=t+1?void 0:arguments[t+1];if(t===(arguments.length<=1?0:arguments.length-1)-1||s.containsError(n))return n;if("boolean"!=typeof n)return s.create("datatype","(cond:)'s "+u(t+1)+" value is "+f(n)+", but should be a boolean.");if(n)return arguments.length<=t+1+1?void 0:arguments[t+1+1]}return s.create("macrocall","An odd number of values must be given to (cond:), not "+(arguments.length<=1?0:arguments.length-1),"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,O,m(O)]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,m(Number)],max:[j,m(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return e>0?E(e):_(e)},Number],ceil:[_,Number],pow:[N(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[N(Math.sqrt),Number],log:[N(Math.log),Number],log10:[N(Math.log10),Number],log2:[N(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=A(e,t),r=j(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},m(O)],nth:[function(e){var t;return e<=0?s.create("datatype","(nth:)'s first value should be a positive whole number, not "+e):(t=(e-1)%(arguments.length<=1?0:arguments.length-1)+1,arguments.length<=t?void 0:arguments[t])},[parseInt,m(O)]],"":function(){var t=this;Object.keys(this).forEach(function(n){if(n){var r=t[n][0],i=t[n][1];e.add(n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.apply(void 0,n)},i)}})}}[""]()}),define("macrolib/commands",["jquery","macros","utils","state","passages","renderer","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/lambda","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(e,t,n,r,i,a,o,s,c,u,l,p,f,d,h,y,m,g,v,b){var w=v.printBuiltinValue,T=v.objectName,S=v.clone,x=v.toSource,k=b.dialog,O=b.geomParse,j=b.geomStringRegExp,A=t.TypeSignature,C=A.Any,E=A.Everything,_=A.rest,N=A.either,P=A.optional,I=A.zeroOrMore,M=A.positiveInteger,D=A.positiveNumber,R=Object.assign,L=Math.floor,q=Math.ceil,F=Math.abs,V=Math.max,H=Math.min,z=e.noop;function $(e){return"("+e+" "+o.options.ifid+") "}["set","put","unpack"].forEach(function(e){return t.add(e,function(t){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if("into"===r.operator&&"set"===e)return s.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===r.operator&&"set"!==e)return s.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((y.isPrototypeOf(r.dest)||m.isPrototypeOf(r.dest))===("unpack"===e))return s.create("macrocall","unpack"===e?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the ("+e+":) macro with just single variables and typed variables to the "+("set"===e?"left of 'to'.":"right of 'into'."));var i=r.set();if(s.containsError(i))return i}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a ("+e+":) operation",TwineScript_ObjectName:"a ("+e+":) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)])}),t.add("move",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return s.create("macrocall","Please say 'into' when using the (move:) macro.");var r=n.set(!0);if(s.containsError(r))return r}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)]),t.addCommand("display",function(e){if(!i.hasValid(e))return s.create("macrocall","I can't (display:) the passage '"+e+"' because it doesn't exist.")},function(e,t,r){return R(e,{source:n.unescape(i.get(r).get("source"))})},[String])("print",z,function(e,t,n){return R(e,{source:w(n)})},[C])(["verbatim-print","v6m-print"],z,function(e,t,n){return R(e,{verbatim:!0,source:w(n)})},[C])(["verbatim-source","v6m-source"],function(e){if(e&&"command"===e.TwineScript_TypeID&&!e.TwineScript_ToSource)return s.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return R(e,{verbatim:!0,source:w(x(n))})},[C])("go-to",function(e){if(!i.hasValid(e))return s.create("macrocall","I can't (go-to:) the passage '"+e+"' because it doesn't exist.")},function(e,t,n){return requestAnimationFrame(function(){return o.goToPassage(n,{transition:e.data.passageT8n})}),"blocked"},[String])("undo",z,function(e){return r.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(requestAnimationFrame(function(){return o.goBack({transition:e.data.passageT8n})}),"blocked")},[]),n.onStartup(function(){return e(n.storyElement).on("click.icon","tw-icon",function(t){var n=e(this),i=n.data("clickEvent"),a=n.attr("alt");i&&i(n),"Undo"===a&&(t.stopPropagation(),o.goBack()),"Redo"===a&&(t.stopPropagation(),o.goForward()),"Fullscreen"===a&&(t.stopPropagation(),o.toggleFullscreen()),"Reload"===a&&(r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return r.pastLength>0}],["Redo","&#8631;",function(){return r.futureLength>0}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var n=_slicedToArray(e,3),r=n[0],i=n[1],a=n[2];t.addCommand("icon-"+r.toLowerCase(),function(e,t){if("string"==typeof e&&"string"==typeof t){var n=[].concat(_toConsumableArray(e)).length,i=[].concat(_toConsumableArray(t)).length;if(n>1&&i>1)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 1 character long, for its icon.");if(1===n&&1===i)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 2 or more characters long, for its label.")}},function(e,t,n,o){if("string"==typeof o&&1===[].concat(_toConsumableArray(o)).length||"string"==typeof n&&[].concat(_toConsumableArray(n)).length>1){var s=[o,n];n=s[0],o=s[1]}return R(e,{source:'<tw-icon tabindex=0 alt="'+r+'" '+(o?'data-label="'+o.replace('"',"&quot;")+'"':"")+' title="'+r+'" '+(a()?"":'style="visibility:hidden"')+">"+(n||i)+"</tw-icon>"})},[P(String),P(String)])}),t.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:s.create("datatype","The 2nd "+r):s.create("datatype","The 1st "+r)},function(e,t,r,i,a){e.attr.push({"data-2bind":!0}),e.data.twoWayBindEvent=function(t,n,o){if(r.varRef.matches(n,o)){var s=r.varRef.get();if("number"==typeof s)e.target.children("tw-icon").text(s>0?L(s):q(s)).attr("data-label",1!==F(s)&&void 0!==a?a:i)}};var o=r.varRef.get();return"number"!=typeof o?s.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not "+T(o)+"."):R(e,{source:'<tw-icon data-label="'+n.escape(1!==F(o)&&void 0!==a?a:i)+'">'+(o>0?L(o):q(o))+"</tw-icon>"})},[g,String,P(String)]),t.addCommand("meter",function(e,t,n,r){return"string"!=typeof r||r.trim()?-1===n.search(j)||!n.includes("=")&&n.length>1?s.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:s.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(e,t,n,r,i,a,o){a&&"string"!=typeof a&&(o=a,a=void 0),o||(o=d.create({h:0,s:0,l:.5,a:.5})),d.isPrototypeOf(o)&&(o=h.create(90,[{colour:o,stop:0},{colour:o,stop:1}]));var c=O(i),u=c.marginLeft,l=c.size,p=u>0&&Math.ceil(u+l)<100,f=function(e){var t=V(0,H(1,e/r)),n=o.repeating?o:o.multiply(r/e);return"height:100%;background-repeat:no-repeat;background-image:"+(p?R(n,n.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+R(n,n.repeating?{}:{angle:p||0===u?90:270}).toLinearGradientString()+";background-size:"+(p?Array(2).fill(50*t+"%"):100*t+"%")+";background-position-x:"+(p?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===u?"left":"right")+";text-align:"+(p?"center":0===u?"left":"right")};e.styles.push({"margin-left":u+"%",width:l+"%",height:"1.5em",display:"block"}),e.attr.push({"data-2bind":!0});var y=a&&t.stackTop.tempVariables;e.data.twoWayBindEvent=function(t,r,i){if(n.varRef.matches(r,i)){var o=n.varRef.get();if("number"==typeof o){var s=e.target.children("tw-meter");if(s.attr("style",f(o)),a){var c=R({},e,{source:a,target:s,append:"replace",transitionDeferred:!1});e.section.renderInto("",null,c,y)}}}};var m=n.varRef.get();return"number"!=typeof m?s.create("datatype","(meter:) can only be bound to a variable holding a number, not "+T(m)+"."):R(e,{source:'<tw-meter style="'+f(m)+'">'+(a||"")+"</tw-meter>"})},[g,D,String,P(N(String,d,h)),P(N(d,h))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(e,n){return t.addCommand(e,function(){return""===(arguments.length<=0?void 0:arguments[0])?s.create("datatype","The first string in a ("+e[0]+":) can't be empty."):arguments.length<=(g.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?s.create("datatype","I need two or more strings to "+(n?"sequence":"cycle")+" through, not just '"+(t=arguments.length-1,arguments.length<=t?void 0:arguments[t])+"'."):void 0;var t},function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=void 0;g.isPrototypeOf(i[0])&&(o=i.shift());var c=0;if(o&&"two way"===o.bind){e.attr.push({"data-2bind":!0});var u=i.indexOf(o.varRef.get());u>-1&&(c=u)}var l=t.stackTop.tempVariables;function p(t,r){var a=c>=i.length-1&&n,u=""===i[c]?"":a?i[c]:"<tw-link>"+i[c]+"</tw-link>";if(a&&(e.data.clickEvent=void 0),o&&!r){var p=o.set(i[c]);if(s.containsError(p))return void t.replaceWith(p.render(i[c]))}var f=R({},e,{source:u,transitionDeferred:!1});e.section.renderInto("",null,f,l)}i[c]&&(e.data.clickEvent=function(e){c=(c+1)%i.length,p(e,!1)})&&(e.data.twoWayBindEvent=function(e,t,n){if(o.varRef.matches(t,n)){var r=o.varRef.get(),a=i.indexOf(r);a>-1&&a!==c&&(c=a,p(e,!0))}});var f="<tw-link>"+i[c]+"</tw-link>";if(o){var d=o.set(i[c]);if(s.containsError(d))return d}return R(e,{source:f,append:"replace",transitionDeferred:!0})},[N(g,String),_(String)])}),n.onStartup(function(){return e(n.storyElement).on("change.dropdown-macro","select",function(){var t=e(this),n=t.closest("tw-expression, tw-hook").data("dropdownEvent");n&&n(t)})}),t.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===(t=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=t?void 0:arguments[t])?s.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?s.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(t,r,i){for(var a=arguments.length,o=Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];var u=0;if("two way"===i.bind){t.attr.push({"data-2bind":!0});var l=o.indexOf(i.varRef.get());l>-1&&(u=l)}var p=Math.max.apply(Math,_toConsumableArray(o.map(function(e){return[].concat(_toConsumableArray(e)).length}))),f="<select>"+o.map(function(e,t){return"<option"+(t===u?" selected":"")+(""===e?" disabled":"")+">"+n.escape(e||"\u2500".repeat(p))+"</option>"}).join("\n")+"</select>";t.data.dropdownEvent=function(e){var t=e.val(),n=i.set(t);s.containsError(n)&&e.replaceWith(n.render(t))},t.data.twoWayBindEvent=function(e,t,n){if(i.varRef.matches(t,n)){var r=i.varRef.get(),a=o.indexOf(r);a>-1&&a!==u&&(e.find("select").val(r),u=a)}},t.styles.push({"background-color":function(){return n.parentColours(e(this)).backgroundColour}});var d=i.set(o[u]);return s.containsError(d)?d:R(t,{source:f,append:"replace"})},[g,String,_(String)]),n.onStartup(function(){return e(n.storyElement).on("input.checkbox-macro","input[type=checkbox]",function(){var t=e(this),n=t.closest("tw-expression").data("checkboxEvent");n&&n(t)})});var B=1;t.addCommand("checkbox",function(){},function(e,t,n,r){var i=!1,a="checkbox-"+ ++B;if("two way"===n.bind){e.attr.push({"data-2bind":!0});var o=n.varRef.get();"boolean"==typeof o&&(i=o),e.data.twoWayBindEvent=function(e,t,r){if(n.varRef.matches(t,r)){var i=n.varRef.get();"boolean"==typeof i&&e.children("input[type=checkbox]").prop("checked",i)}}}return e.data.checkboxEvent=function(e){var t=e.is(":checked"),r=n.set(t);s.containsError(r)&&e.replaceWith(r.render(""))},R(e,{source:'<input id="'+a+'" type="checkbox" '+(i?"checked":"")+'><label for="'+a+'">'+r+"</label>",append:"replace"})},[g,String]),n.onStartup(function(){return e(document).on("fullscreenchange",function(){e("input[type=checkbox][id^=fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression").data("fullscreenEvent")||Object)(n)})})}),t.addCommand("checkbox-fullscreen",function(){},function(t,n,r){var i="fullscreenCheckbox-"+ ++B;return t.data.fullscreenEvent=function(t){return e(t).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},t.data.checkboxEvent=function(){return o.toggleFullscreen()},R(t,{source:'<input id="'+i+'" type="checkbox" '+(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ")+(document.fullscreenElement||document.msFullscreenElement?"checked":"")+'><label for="'+i+'">'+r+"</label>",append:"replace"})},[String]),n.onStartup(function(){return e(n.storyElement).on("input.input-box-macro","textarea",function(){var t=e(this),n=t.closest("tw-expression").data("inputBoxEvent");n&&n(t)})}),["input-box","force-input-box"].forEach(function(e){return t.addCommand(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=g.isPrototypeOf(n[0]),a="number"==typeof n[1+i],o="string"==typeof n[1+i+a],c=n[+i];if("string"!=typeof c||-1===c.search(j)||!c.includes("=")&&c.length>1)return s.create("datatype","The ("+e+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(c)+".");if("force-input-box"===e&&!o)return s.create("datatype","The ("+e+":) macro requires a string of text to forcibly input.");var u=1+i+a+o;return n.length>u?s.create("datatype","An incorrect combination of values was given to this ("+e+":) macro."):void 0},function(t,r){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var c="force-input-box"===e,u=g.isPrototypeOf(a[0]),l="number"==typeof a[1+u],p=u&&a[0],f=l?a[1+u]:3,d=O(a[+u]),h=d.marginLeft,y=d.size,m="string"==typeof a[1+u+l]?a[1+u+l]:"",v=c?"":m;if("two way"===p.bind){t.attr.push({"data-2bind":!0});var b=p.varRef.get();if("string"==typeof b){v=c?m.slice(0,b.length):b;var w=p.set(v);if(s.containsError(w))return w}t.data.twoWayBindEvent=function(e,t,n){if(p.varRef.matches(t,n)){var r=p.varRef.get();"string"==typeof r&&e.find("textarea").val(c?m.slice(0,r.length):r)}}}else if(p){var T=p.set(c?"":m);if(s.containsError(T))return T}c||(t.data.inputBoxEvent=function(e){var t=e.val(),n=p.set(t);s.containsError(n)&&e.replaceWith(n.render(""))});var S='<textarea style="width:100%" rows='+f+">"+n.escape(v)+"</textarea>";if(c){var x=Array.from(m);t.data.inputBoxEvent=function(e){var t=e.val().length,n=x.slice(0,t).join("");if(e.val(n),p){var r=p.set(n);s.containsError(r)&&e.replaceWith(r.render(""))}return!0}}return t.styles.push({display:"block","margin-left":h+"%",width:y+"%","border-style":function(){return this.style.borderStyle||"solid"}}),R(t,{source:S,append:"replace"})},[N(g,String),P(N(M,String)),P(N(M,String)),P(String)])}),["show","rerun"].forEach(function(n){return t.addCommand(n,z,function(t,r){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return a.forEach(function(i){return i.forEach(r,function(i){var a=i.data("hidden");if(void 0!==a!=("rerun"===n))if(i.removeData("hidden"),a instanceof e)i.empty().append(a);else{var o=i.data("tempVariables");r.renderInto("",null,R({},t,{append:"replace",source:i.data("originalSource")||"",target:i}),o&&Object.create(o))}})}),t},[_(l)])});var W=function(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]};t.addCommand("hide",z,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return t.forEach(e,function(e){Boolean(e.data("hidden"))||e.data("hidden",e.contents().detach())})})},[_(l)],!1)("stop",z,z,[],!1)("load-game",z,function(e,t){var n=localStorage.getItem($("Saved Game")+t);if(!n)return s.create("saving","I can't find a save slot named '"+t+"'!");var i=r.deserialise(e,n);if(i instanceof Error){var a=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+i.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===a.find("input").last().val()&&localStorage.removeItem($("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]});return"blocked"}requestAnimationFrame(o.showPassage.bind(o,r.passage,!1))},[String],!1)("mock-visits",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!o.options.debug)return s.create("operation","(mock-visits:) cannot be used outside of debug mode.","This macro is not meant to be used outside of debugging your story.");var r=t.find(function(e){return!i.hasValid(e)});return r?s.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.mockVisits=S(n)},[_(String)],!1)(["dialog","alert"],function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(g.isPrototypeOf(e)){if("two way"===e.bind)return s.create("datatype","(dialog:) shouldn't be given two-way bound variables.");if(void 0===t)return s.create("datatype","(dialog:) needs a message string to display.")}else void 0!==t&&i.unshift(t);var o=i.findIndex(function(e){return""===e});if(o>-1)return s.create("datatype","(dialog:)'s "+n.nth(o+1)+" link text shouldn't be an empty string.")},function(e,t,n,r){for(var i=arguments.length,a=Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];return g.isPrototypeOf(n)||(void 0!==r&&a.unshift(r),r=n,n=void 0),a.length||(a=["OK"]),k({section:t,message:r,cd:e,buttons:a.map(function(e){return{name:e,callback:function(){t.unblock(n&&n.set(e)||"")}}})}),"blocked"},[N(g,String),I(String)])("open-url",z,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],z,function(){if(r.pastLength<1)return s.create("infinite","I mustn't (restart:) the story in the starting passage.");r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()},[],!1)("goto-url",z,function(e,t){window.location.assign(t)},[String],!1)("ignore",z,z,[I(E)])("assert-exists",function(e){if(""===e)return s.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?l.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:s.create("assertion","I didn't see any "+("string"==typeof n?"text occurrences of":"hooks matching")+" "+x(n)+" in this passage.")},[N(l,String)]),t.add("assert",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:R(s.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game",function(e,t,n){if(n=n||"",!r.hasStorage)return!1;var i=r.serialise();if(s.containsError(i))return i;if(!1===i)return!1;try{return localStorage.setItem($("Saved Game")+t,i),localStorage.setItem($("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,P(String)])("prompt",function(e,t,n,r,i){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly))));if(""===i)return s.create("datatype","The text for (prompt:)'s confirm link can't be blank.");var a=k({section:e,message:t,defaultValue:n,buttons:[{name:i||"OK",confirm:!0,callback:function(){return e.unblock(a.find("input").last().val())}},{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}}]});setTimeout(function(){return a.find("input").last().focus()},100)},[String,String,P(String),P(String)])("confirm",function(e,t,n,r){return e.stackTop&&e.stackTop.evaluateOnly?s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly)))):""===r?s.create("datatype","The text for (confirm:)'s confirm link can't be blank."):void k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}},{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}}]})},[String,P(String),P(String)])("page-url",function(){return window.location.href},[]),a.options.blockerMacros.push("prompt","confirm")}),define("macrolib/datastructures",["jquery","utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p,f){var d=t.shuffled,h=t.permutations,y=i.objectName,m=i.subset,g=i.collectionType,v=i.isValidDatamapName,b=i.is,w=i.unique,T=i.clone,S=i.range,x=r.TypeSignature,k=x.optional,O=x.rest,j=x.either,A=x.zeroOrMore,C=x.Any,E=x.nonNegativeInteger;r.add(["a","array"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},A(j(l,C)))("range",function(e,t,n){return S(t,n)},[parseInt,parseInt])("subarray",function(e,t,n,r){return m(t,n,r)},[Array,parseInt,parseInt])("reversed",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(T)},A(C))("shuffled",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,n).map(T)},[C,O(C)])("sorted",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.sort(n("en"))},[j(Number,String),O(j(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===(t*=-1)?f.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?f.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(T)},[parseInt,C,O(C)])("rotated-to",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);if(f.containsError(a))return a;if(!a.length)return f.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.");var o=r.indexOf(a[0]);return r.slice(o).concat(r.slice(0,o)).map(T)},[c.TypeSignature("where"),C,O(C)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var a=[];t-- >0;)a.push.apply(a,r);return a.map(T)},[E,O(C)])("interlaced",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),a=[],o=0;o<i;o+=1)for(var s=0;s<n.length;s+=1)a.push(T(n[s][o]));return a},[Array,O(Array)])("permutations",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?h.apply(void 0,n):[]},[A(C)]),r.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.map(function(n,r){return t.apply(e,{loop:n,pos:r+1})})},[c.TypeSignature("via"),A(C)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.filter(e,r)},[c.TypeSignature("where"),A(C)])(["all-pass","pass"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||a.length===r.length},[c.TypeSignature("where"),A(C)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||a.length>0},[c.TypeSignature("where"),A(C)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||0===a.length},[c.TypeSignature("where"),A(C)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"where"in t&&(r=t.filter(e,r)),f.containsError(r)||r.reduce(function(n,r,i){return t.apply(e,{making:n,loop:r,pos:i+1})})},[j(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),O(C)]),r.add("datanames",function(e,t){return Array.from(t.keys()).sort(n("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(n("en",function(e){return String(e[0])})).map(function(e){return T(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(n("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",T(e[1])]])})},[Map])("history",function(e,t){var n=a.mockVisits.concat(a.pastPassageNames());if(!t)return n;var r=t.filter(e,n.map(function(e){return s.get(e)}));return f.containsError(r)?r:r.map(function(e){return e.get("name")})},[k(c.TypeSignature("where"))])("passage",function(e,t){return T(s.get(t||a.passage))||f.create("macrocall","There's no passage named '"+t+"' in this story.")},[k(String)])("passages",function(e,t){var r=n("en"),i=[].concat(_toConsumableArray(s.values())).map(function(e){return T(e)}),a=t?t.filter(e,i):i,o=f.containsError(a);return o||a.sort(function(e,t){return r(e.get("name"),t.get("name"))})},[k(c.TypeSignature("where"))])("open-storylets",function(e,t){if(e.stackTop.evaluateOnly)return f.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+".");var n=s.getStorylets(e,t),r=f.containsError(n);return r||n.map(T)},[k(c.TypeSignature("where"))])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{if(!a.hasStorage)break;n=localStorage.key(t),t+=1;var i=e("Saved Game");n&&n.startsWith(i)&&(n=n.slice(i.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=void 0,a=new Map,o=n.reduce(function(e,t){var n=void 0;if(f.containsError(e))return e;if(void 0===i)i=t;else{if(n=f.containsError(v(a,i)))return n;if(a.has(i))return f.create("macrocall","You used the same data name ("+y(i)+") twice in the same (datamap:) call.");a.set(i,T(t)),i=void 0}return e},!0);return f.containsError(o)?o:void 0!==i?f.create("macrocall","This datamap has a data name without a value."):a},A(j(l,C)))(["dataset","ds"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(w).map(T))},A(C))("count",function e(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(i.length>1){var o,s=i.map(function(r){return e(t,n,r)});return(o=f.containsError(s))?o:s.reduce(function(e,t){return e+t},0)}var c=i[0];switch(g(n)){case"dataset":case"datamap":return f.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?f.create("macrocall",y(n)+" can't contain  "+y(c)+" because it isn't also a string."):c?n.split(c).length-1:0;case"array":return n.reduce(function(e,t){return e+b(t,c)},0);default:return f.create("macrocall",y(n)+" can't contain values, let alone "+y(c)+".")}},[C,O(C)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l){var p=r.geomParse,f=r.geomStringRegExp,d=Object.assign,h=t.TypeSignature,y=h.either,m=h.wrapped,g=h.optional,v=h.Any,b=h.Everything,w=h.zeroOrMore,T=h.rest,S=h.insensitiveSet,x=h.positiveNumber,k=h.positiveInteger,O=h.nonNegativeNumber,j=h.percent,A=[m(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];n.onStartup(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),u.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var C,E,_=S("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur"),N=S("dotted","dashed","solid","double","groove","ridge","inset","outset","none");t.addChanger("if",function(e,t){return s.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},A)("unless",function(e,t){return s.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},A)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?s.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):l.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},A)("else",function(e){return"lastHookShown"in e.stack[0]?s.create("else",[!1===e.stack[0].lastHookShown]):l.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return s.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return s.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return s.create("live",[t])},function(e,t){e.enabled=!1,e.data.live={delay:t}},g(Number))("event",function(e,t){return s.create("event",[t])},function(e,t){e.enabled=!1,e.data.live={event:t}},c.TypeSignature("when"))("more",function(){return s.create("more")},function(e){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return 0!==e.eval("Operations").Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return s.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,r){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return n.anyInputDown()&&(t-=r),e.eval("Operations").Identifiers.time>t?[!0]:[]}}}},[x,g(O)])("hook",function(e,t){return t?s.create("hook",[t]):l.create("datatype","(hook:) names can't be empty strings.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.loop?s.create("for",[t].concat(r)):l.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o=t.filter(e.section,r);if(a=l.containsError(o))return a;e.loopVars[t.loop.getName()]=o||[]},[c.TypeSignature("where"),w(v)])(["transition","t8n"],function(e,t){return s.create("transition",[n.insensitiveName(t)])},function(t,r){return t.transition=r,"zoom"===r&&(t.transitionOrigin=function(){var t=e(this).offset(),r=t.left,i=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-i)+"px"}),t},[_])(["transition-time","t8n-time"],function(e,t){return s.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=d(e.data.passageT8n||{},{time:t}),e},[x])(["transition-delay","t8n-delay"],function(e,t){return s.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return s.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[x])(["transition-depart","t8n-depart"],function(e,t){return s.create("transition-depart",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{depart:r}),"zoom"===r&&(t.data.passageT8n.departOrigin=function(){var t=e(this).offset(),r=t.left,i=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-i)+"px"}),t},[_])(["transition-arrive","t8n-arrive"],function(e,t){return s.create("transition-arrive",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{arrive:r}),"zoom"===r&&(t.data.passageT8n.arriveOrigin=function(){var t=e(this),r=t.offset(),i=r.left,a=r.top,o=t.height();return{"transform-origin":100*(n.mouseCoords.x-i)/t.width()+"% "+100*(n.mouseCoords.y-a)/o+"%",height:o+"px"}}),t},[_])("button",function(){return s.create("button",[])},function(e){return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(this.className.length>0)+"enchantment-button")}}),e},[])(["border","b4r"],function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return s.create("border",r.map(n.insensitiveName))},function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.styles.push({display:function(){var t=e(this).css("display");return r.every(function(e){return"none"===e})||!t.includes("inline")?t:"inline-block"},"border-style":r.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),t},[N].concat(_toConsumableArray(Array(3).fill(g(N)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-size",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))("corner-radius",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("corner-radius",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-colour",n.map(function(e){return i.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[y(String,i)].concat(_toConsumableArray(Array(3).fill(g(y(String,i))))))("opacity",function(e,t){return s.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[j])("font",function(e,t){return s.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return l.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var i=Math.round(r/(t.length-2)*50);n=d({"text-align":"center","max-width":"50%"},25===i?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":i+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="inline-block",s.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return s.create("text-colour",[t])},function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[y(String,i)])(["text-size","size"],function(e,t){return s.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return s.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return s.create("text-rotate-z",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("text-rotate-y",function(e,t){return s.create("text-rotate-y",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateY("+n+"deg)"}}),t},[Number])("text-rotate-x",function(e,t){return s.create("text-rotate-x",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateX("+n+"deg)"}}),t},[Number])(["background","bg"],function(e,t){return s.create("background",[t])},function(t,r){var a=void 0;return i.isPrototypeOf(r)?r=r.toRGBAString(r):o.isPrototypeOf(r)&&(r=r.toLinearGradientString(r)),a=i.isHexString(r)||i.isCSS3Function(r)?{"background-color":r}:r.startsWith("linear-gradient(")||r.startsWith("repeating-linear-gradient(")?{"background-image":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(a,{display:function(){var t=e(this);return!t.children().length||n.childrenProbablyInline(t)?e(this).css("display"):"block"}}),t},[y(String,i,o)]).apply(void 0,_toConsumableArray((C={color:function(){return"transparent"}},E=d(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){return n.parentColours(e(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},C],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},C],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},C],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return s.create("text-style",r.map(n.insensitiveName))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i+=1)"none"===n[i]?e.styles=[]:e.styles=e.styles.concat(E[n[i]]);return e},[T(S.apply(void 0,_toConsumableArray(Object.keys(E))))]])))("collapse",function(){return s.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=u.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?s.create("hover-style",[t]):l.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[s])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),s.create("css",[t])},function(t,n){return t.attr.push({style:function(){return(e(this).attr("style")||"")+n}}),t},[String])("test-true",function(){return s.create("test-true",[])},function(e){return e.enabled=!0},w(b))("test-false",function(){return s.create("test-false",[])},function(e){return e.enabled=!1},w(b)),t.addCommand("animate",e.noop,function(e,t,r,i,a){r.forEach(t,function(t){var r=void 0;if("zoom"===name){var o=t.offset(),s=o.left,c=o.top;r=n.mouseCoords.x-s+"px "+(n.mouseCoords.y-c)+"px"}n.transitionIn(t,i,e.transitionTime||a,e.transitionDelay,e.transitionSkip,0,r)})},[T(a),S.apply(void 0,_toConsumableArray(_.innerType.filter(function(e){return"instant"!==e}))),g(x)]),["box","float-box"].forEach(function(r){return t.addChanger(r,function(e,t,n){var i=-1===t.search(f)||t.length>1&&!t.includes("="),a="float-box"===r&&(-1===n.search(f)||n.length>1&&!n.includes("="));return i||a?l.create("datatype","The ("+r+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(i?t:n)+'".'):s.create(r,[t,n].filter(function(e){return void 0!==e}))},function(t,i,a){var o,s=p(i),c=s.marginLeft,u=s.size,l=void 0;if("float-box"===r){var f=p(a);l=f.marginLeft,a=f.size}var h="box"===r?"%":"vw",y=(_defineProperty(o={display:"block",width:u+h,"max-width":u+h},"box"===r?"margin-left":"left",c+h),_defineProperty(o,"box-sizing","content-box"),_defineProperty(o,"overflow-y","auto"),_defineProperty(o,"padding",function(){return e(this).css("padding")||"1em"}),o);return void 0!==a&&(y.height=a+("box"===r?"em":"vh")),"float-box"===r&&d(y,{position:"fixed",top:l+"vh","background-color":function(){return n.parentColours(e(this)).backgroundColour}}),t.styles.push(y),t},[String,"box"===r?g(k):String])})}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(e,t,n,r,i,a,o){var s=i.objectName,c=o.collapse,u={create:function(n){return t.assertOnlyHas(n,["scope","localHook","section","attr","data","changer","functions","lambda","name"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var i=this,o=this.attr,u=this.data,l=this.functions,p=this.section,f=this.scope,d=this.localHook,h=this.lambda,y=[];f.forEach(p,function(m,g){if(!d||d.has(m[0]).length){var v=void 0;if(h)if(v=h.apply(p,{loop:f.TwineScript_GetProperty(g),pos:g+1}),a.containsError(v))m.replaceWith(v.render("")),h=v=null;else if(r.isPrototypeOf(v)){var b=v.summary();(b.includes("newTargets")||b.includes("target"))&&(m.replaceWith(a.create("macrocall","The changer produced by the 'via' lambda given to (enchant:) can't include a revision or enchantment changer like (replace:) or (click:).").render("")),h=v=null)}else m.replaceWith(a.create("macrocall","The 'via' lambda given to (enchant:) must return a changer, not "+s(v)+".").render("")),h=v=null;else v=i.changer;var w=!o&&!u&&(!v||v.summary().every(function(e){return e.startsWith("transition")})),T=w?m:m.wrap("<tw-enchantment>").parent();if(o&&T.attr(o),u&&T.data(u),l&&l.forEach(function(e){return e(T)}),v){var S=n.create({section:p,target:T});if(v.run(S),S.update(),m.is(t.storyElement)){var x=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(S.styles))));m.css(x.reduce(function(e,t){return e[t]="inherit",e},{})),T.data({enchantedProperties:x})}else if(m.is("tw-passage")&&S.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})){var k="padding-left",O="padding-right";t.storyElement.css(k,"0px").css(O,"0px"),T.data({enchantedProperties:[k,O]})}}m.is(t.storyElement)&&T.css({width:"100%",height:"100%"}),"true"===T.attr("collapsing")&&(T.find("[collapsing=false]").each(function(){e(this).removeAttr("collapsing")}),c(T)),w||y.push(T)}}),this.enchantments=e(y)},disenchant:function(){this.enchantments.each(function(){e(this).contents().unwrap();var n=e(this).data("enchantedProperties");n&&t.storyElement.css(n.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(u)}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/changercommand","datatypes/lambda","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p){var f=n.is,d=o.TypeSignature,h=d.either,y=d.rest,m=d.optional;function g(e,t){if(c.isPrototypeOf(t)){var n=t.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return n.includes(e)}))return p.create("datatype","The changer given to ("+e+":) can't include a revision or enchantment changer like (replace:) or (click:).")}}["enchant","change"].forEach(function(e){o.addCommand(e,function(t,n){var r=g(e,n);if(r)return r},function(t,n,r){var i,a=l.create((_defineProperty(i={scope:s.from(n)},c.isPrototypeOf(r)?"changer":"lambda",r),_defineProperty(i,"section",t),i));return"enchant"===e?(t.addEnchantment(a),t.updateEnchantments()):a.enchantScope(),""},[h(s,String),h(c,u.TypeSignature("via"))],!1)}),o.addChanger("enchant-in",function(e,t,n){var r=g("enchant-in",n);return r||c.create("enchant-in",[t,n])},function(e,t,n){return e.functions=(e.functions||[]).concat(function(r){var i;e.section.addEnchantment(l.create((_defineProperty(i={scope:s.from(t),localHook:r},c.isPrototypeOf(n)?"changer":"lambda",n),_defineProperty(i,"section",e.section),i)))}),e},[h(s,String),h(c,u.TypeSignature("via"))]),[["link-style",s.create({type:"name",data:"link"})],["line-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"lines",void 0)],["char-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.addChanger(n,function(e,t){var r=g(n,t);return r||c.create(n,[t])},function(e,t){return e.functions=(e.functions||[]).concat(function(n){var i;e.section.addEnchantment(l.create((_defineProperty(i={scope:r,localHook:n},c.isPrototypeOf(t)?"changer":"lambda",t),_defineProperty(i,"section",e.section),i)))}),e},[h(c,u.TypeSignature("via"))])});var v=["replace","append","prepend"];function b(n,i){return t.onStartup(function(){var r=n.classList.replace(/ /g,"."),i=n.blockClassList?n.blockClassList.replace(/ /g,"."):"",a="."+r+(i?",."+i:"");t.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),a,function(){var t=e(Array.from(e(this).parents(a).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})}),[function(e,t,n){if(!t)return p.create("datatype","A string given to this ("+i+":) macro was empty.");if(n){var r=g(i,n);if(r)return r}return c.create(i,[s.from(t)].concat(n?[n]:[]))},function(e,t,a){e.enabled=!1,e.transitionDeferred=!0,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var o=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),s=l.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||"block"===e.children().css("display")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){e.section.stackTop&&e.section.stackTop.blocked||(n.once&&e.section.removeEnchantment(s),n.goto?r.goToPassage(n.goto,{transition:n.transition}):n.undo?r.goBack({transition:n.transition}):e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0,transitionDeferred:!1}),o))}},scope:t,section:e.section,name:i},c.isPrototypeOf(a)?"changer":"lambda",a));return e.section&&(e.section.addEnchantment(s),s.enchantScope()),e},[h(s,String),m(h(c,u.TypeSignature("via")))]]}v.forEach(function(t){o.addChanger(t,function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.every(Boolean)?c.create(t,r.map(s.from)):p.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e(n.target).parents().filter("tw-collapsed,[collapsing=true]").length>0||n.attr.some(function(e){return e.collapsing})||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(a.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,i=n.append;return f(e,r)&&t===i})}).map(function(e){return{target:e,append:t,before:!0}}))),n},y(h(s,String)))(t+"-with",function(e,n){return c.create(t+"-with",[n])},function(e,n){return e.appendSource=(e.appendSource||[]).concat({source:n,append:t}),e},String)});var w="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,T=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",w?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",w?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}}];T.forEach(function(e){return o.addChanger.apply(o,[e.name].concat(_toConsumableArray(b(e.enchantDesc,e.name))))}),t.onStartup(function(){T.forEach(function(n){var r=n.enchantDesc;r.blockClassList&&t.storyElement.on(r.event.map(function(e){return e+".enchantment"}).join(" "),function(){var t=e(Array.from(e(this).parents("."+r.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})})}),v.forEach(function(e){T.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;o.addChanger.apply(o,[r].concat(_toConsumableArray(b(n,r))))})}),T.forEach(function(e){["goto","undo"].forEach(function(t){var n=e.name+"-"+t;o.addCommand(n,function(e,r){return!e||!r&&"goto"===t?p.create("datatype","A string given to this ("+n+":) macro was empty."):"goto"!==t||a.hasValid(r)?void 0:p.create("macrocall","I can't ("+n+":) the passage '"+r+"' because it doesn't exist.")},function(r,a,o,c){if("undo"===t&&i.pastLength<1)return p.create("macrocall","I can't (undo:) on the first turn.");var u=b(Object.assign({},e.enchantDesc,{transition:r.data.passageT8n},"undo"===t?{undo:!0}:{goto:c}),n);return(0,_slicedToArray(u,2)[1])({section:a},s.from(o)),Object.assign(r,{source:""})},[h(s,String)].concat("undo"===t?[]:String))})})}),define("macrolib/metadata",["macros","renderer","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,i){var a=n.clone,o=n.objectName,s=n.isValidDatamapName,c=e.TypeSignature,u=c.zeroOrMore,l=c.Any,p=t.options.metadataMacros,f=function(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}};[["storylet",r.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];e.add(r,function(e,t){return e.stackTop.speculativePassage?t:f(r)},i),p.push(r)}),e.add("metadata",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=void 0,u=new Map,l=n.reduce(function(e,t){var n=void 0;if(i.containsError(e))return e;if(void 0===c)c=t;else{if(n=i.containsError(s(u,c)))return n;if(u.has(c))return i.create("macrocall","You used the same data name ("+o(c)+") twice in the same (metadata:) call.");u.set(c,a(t)),c=void 0}return e},!0);return i.containsError(l)?l:void 0!==c?i.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?u:f("storylet")},u(l)),p.push("metadata")}),define("macrolib/patterns",["jquery","macros","utils","utils/operationutils","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,i,a,o){var s=n.anyRealLetter,c=n.anyUppercase,u=n.anyLowercase,l=n.anyCasedLetter,p=n.realWhitespace,f=n.impossible,d=r.objectName,h=r.toSource,y=t.TypeSignature,m=y.rest,g=y.either,v=y.optional,b=y.nonNegativeInteger,w=Object.assign,T=Object.create,S=m(g(String,i,a)),x=function e(t){var n,r=t.name,y=t.fullArgs,m=t.args,g=t.makeRegExpString,v=void 0===g?function(e){return e.join("")}:g,b=t.insensitive,S=void 0!==b&&b,x=t.canContainTypedVars,k=void 0===x||x,O=t.canBeUsedAlone,j=void 0===O||O,A=m||y,C=A.map(function e(t){if(a.isPrototypeOf(t)){if(!k)return o.create("operation","Optional string patterns, like ("+r+":)"+("p-many"===r?" with min 0":"")+", can't have typed variables inside them.");var n=e(t.datatype);return o.containsError(n)?n:"("+n+")"}if(i.isPrototypeOf(t)){if(!k&&"typedVars"in t&&t.typedVars().length)return o.create("operation","("+r+":) can't have typed variables inside its pattern.");if(t.regExp)return(t.rest?"(?:":"")+(S?t.insensitive().regExp:t.regExp)+(t.rest?")*":"");var h=t.name,y=t.rest?"*":"";return"alnum"===h?s+y:"whitespace"===h?p+y:"uppercase"===h?(S?l:c)+y:"lowercase"===h?(S?l:u)+y:"anycase"===h?l+y:"digit"===h?"\\d"+y:"linebreak"===h?"(?:\\r|\\n|\\r\\n)"+y:"str"===h?".*?":["even","odd","int","num"].includes(h)?o.create("datatype","Please use string datatypes like 'digit' in ("+r+":) instead of number datatypes."):o.create("datatype","The ("+r+":) macro must only be given string-related datatypes, not "+d(t)+".")}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),S&&(t=t.replace(RegExp("("+c+"|"+u+")","g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"})),t):(f("createPattern","mapper() was given a non-string non-datatype "+t),"")});if(n=o.containsError(C))return n;var E=v(C),_=w(T(i),{name:r,regExp:E,insensitive:function(){return S?_:e({name:r,fullArgs:y,args:A.map(function(e){return i.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:v,insensitive:!0,canContainTypedVars:k,canBeUsedAlone:j})},typedVars:function(){return A.reduce(function(t,n){return a.isPrototypeOf(n)&&(t=t.concat(S?a.create(e({name:"p-ins",fullArgs:[n.datatype],insensitive:!0}),n.varRef):n),n=n.datatype),i.isPrototypeOf(n)&&"function"==typeof n.typedVars&&(t=t.concat(n.typedVars())),t},[])},destructure:function(t){if("string"!=typeof t)return[o.create("operation","I can't unpack "+d(t)+" into "+this.TwineScript_ToSource()+" because it isn't a string.")];var n=this.typedVars();if(!n.length)return[];var r=(RegExp("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$").exec(t)||[]).slice(1);return r.length?r.map(function(t,r){var i=n[r];if(i)return i.datatype.rest&&!i.datatype.regExp&&((i=i.TwineScript_Clone()).datatype=e({name:"p",fullArgs:[i.datatype]})),{dest:i,value:t||"",src:void 0}}).filter(Boolean):[o.create("operation","I can't unpack "+d(t)+" because it doesn't match the pattern "+this.TwineScript_ToSource()+".")]},TwineScript_IsTypeOf:function(e){return j?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$"):o.create("operation","A ("+r+":) datatype must only be used with a (p:) macro.")},TwineScript_toTypeSignatureObject:function(){var e=this;return{pattern:"range",name:r,range:function(t){return e.TwineScript_IsTypeOf(t)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+r+":"+y.map(h)+")"}});return Object.defineProperty(_,"TwineScript_ObjectName",{get:function(){return"a ("+r+":) datatype"}}),_};t.add(["p","pattern"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p",fullArgs:n})},S)(["p-either","pattern-either"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},S)(["p-opt","pattern-opt","p-optional","pattern-optional"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},S)(["p-not","pattern-not"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==[].concat(_toConsumableArray(e)).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?o.create("datatype","(p-not:) should only be given single character"):x({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.join("")+"]"}})},S)(["p-many","pattern-many"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n.slice(),c=void 0,u=void 0;if("number"==typeof n[0]&&(c=n.shift(),u="number"==typeof n[0]?n.shift():1/0),void 0!==u&&u<c)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");if(!n.length)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");var l=n.find(function(e){return"string"!=typeof e&&!i.isPrototypeOf(e)&&!a.isPrototypeOf(e)});return l?o.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+d(l)+"."):x({name:"p-many",args:n,fullArgs:s,canContainTypedVars:c>0,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==c?"{"+c+(u===1/0?",":u!==c?","+u:"")+"}":"+")}})},[m(g(b,String,i,a))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-ins",fullArgs:n,insensitive:!0})},S)(["split","splitted"],function(e,t,n){if(t=x({name:"split",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t))return t;if(!n)return[""];if(!t.regExp)return[].concat(_toConsumableArray(n));for(var r=RegExp(t.regExp),i=[],a=void 0;n&&(a=r.exec(n));){if(a.index+a[0].length===0)return i;i.push(n.slice(0,a.index)),n=n.slice(a.index+a[0].length)}return i.concat(n||[])},[g(String,i),String])("trimmed",function(e,t,n){return void 0===n||i.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=x({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[g(String,i),v(String)])}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l){var p=t.TypeSignature,f=p.optional,d=p.rest,h=p.either,y=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],m=Object.assign;function g(e,t,r){r=r||t;var a=i.hasValid(t)&&t===r,o=e.evaluateTwineMarkup(n.unescape(r),"a link's passage name"),s=void 0;if(a){var c=o.children().length>0?"`".repeat((r.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"";t=c+"\0".repeat(!!c)+t+"\0".repeat(!!c)+c}else o.findAndFilter("tw-error").length&&(s=o.findAndFilter("tw-error").data("TwineError")),r=o.text();return{text:t,passage:r,error:s}}n.onStartup(function(){e(n.storyElement).on("click.passage-link","tw-link",function(){var t=e(this),n=t.closest("tw-expression"),r=t.closest("tw-expression, tw-hook"),i=r.data("clickEvent"),o=r.data("section");if(!(o&&o.stackTop&&o.stackTop.blocked))if(i){if(t.find("tw-error").length>0)return;i(t)}else{var s=n.data("linkPassageName"),c=Object.assign({},n.data("passageT8n")||{});n.find("tw-enchantment").each(function(t,n){Object.assign(c,e(n).data("passageT8n")||{})}),s?a.goToPassage(s,{transition:c}):t.is("[undo]")?a.goBack({transition:c}):t.is("[fullscreen]")&&a.toggleFullscreen()}}),e(document).on("fullscreenchange",function(){e("tw-link[fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(n)})})}),[["link","link-replace"],["link-reveal"],["link-repeat"],["link-rerun"]].forEach(function(e){return t.addChanger(e,function(t,n,r){if(!n)return l.create("datatype",y[0]);if(r){var i=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return i.includes(e)}))return l.create("datatype","The changer given to ("+e[0]+":) can't include a revision or enchantment changer like (replace:) or (click:).")}return o.create(e[0],[n].concat(r||[]))},function(t,n,r){var i=e[0],a=t.section&&t.section.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=s.create({source:"<tw-link tabindex=0>"+n+"</tw-link>",target:function(){return t.target},append:"replace",data:{section:t.section,clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==o}),"link-reveal"===i&&e.contents().unwrap();var n=e.parent();"link-rerun"===i&&e.detach(),"link"!==i&&"link-rerun"!==i&&"click-block"!==i||n.empty(),t.section.renderInto("",null,t,a),"link-rerun"===i&&n.prepend(e)}}});return t.enablers=(t.enablers||[]).concat({descriptor:o,changer:r}),t},[String,f(o)])}),t.addCommand("link-goto",function(e){if(!e)return l.create.apply(l,["datatype"].concat(y))},function(e,t,a,o){var s,c=g(t,a,o);if(a=c.text,o=c.passage,s=c.error)return s;if(e.transition){var u="transition";return l.create("datatype","Please attach ("+u+"-depart:) or ("+u+"-arrive:) to a passage link, not ("+u+":).")}var p=void 0;return i.hasValid(o)||(p='<tw-broken-link passage-name="'+n.escape(o)+'">'+a+"</tw-broken-link>"),p=p||"<tw-link tabindex=0 "+(r.passageNameVisited(o)>0?'class="visited" ':"")+">"+a+"</tw-link>",e.data.linkPassageName=o,e.data.section=t,m(e,{source:p,transitionDeferred:!0})},[String,f(String)])("link-storylet",function(){var e,t=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1,arguments.length<=e?void 0:arguments[e]);if(!t||"string"==typeof t)return l.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n,a,o,s=(n=2+(1==(arguments.length<=2?0:arguments.length-2)?0:3==(arguments.length<=2?0:arguments.length-2)||"string"==typeof(arguments.length<=2?void 0:arguments[2])?1:2),arguments.length<=n?void 0:arguments[n]),c="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),p=(a=(arguments.length<=2?0:arguments.length-2)-1+2,(arguments.length<=a?void 0:arguments[a])!==s&&(o=(arguments.length<=2?0:arguments.length-2)-1+2,arguments.length<=o?void 0:arguments[o]));if(e.transition){var f="transition";return l.create("datatype","Please attach ("+f+"-depart:) or ("+f+"-arrive:) to (link-storylet:), not ("+f+":).")}var d=u.isPrototypeOf(s),h=i.getStorylets(t,d&&s),y=l.containsError(h);if(y)return y;var g=h[d?0:s<0?h.length+s:s-1],v=void 0;if(g)g=g.get("name"),c=c||g,v=v||"<tw-link tabindex=0 "+(r.passageNameVisited(g)>0?'class="visited" ':"")+">"+c+"</tw-link>",e.data.linkPassageName=g,e.data.section=t;else{if(!p)return e;v=p}return m(e,{source:v,transitionDeferred:!0})},[h(parseInt,String,u.TypeSignature("where")),f(h(parseInt,String,u.TypeSignature("where"))),f(String)])("link-undo",function(e){if(!e)return l.create("datatype",y[0])},function(e,t,n){return r.pastLength<1?l.create("macrocall","I can't use (link-undo:) on the first turn."):(e.data.section=t,m(e,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String])("link-show",function(e){if(!e)return l.create("datatype",y[0])},function(t,n,r){for(var i=arguments.length,a=Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return t.data.section=n,t.data.clickEvent=function(r){r.contents().unwrap(),a.forEach(function(r){return r.forEach(n,function(r){var i=r.data("originalSource")||"",a=r.data("hidden");if(a)if(r.removeData("hidden"),a instanceof e)r.empty().append(a);else{var o=r.data("tempVariables");n.renderInto("",null,m({},t,{source:i,target:r,transitionDeferred:!1}),o&&Object.create(o))}})})},m(t,{source:"<tw-link tabindex=0>"+r+"</tw-link>",transitionDeferred:!0})},[String,d(c)])("link-fullscreen",function(e,t){if(!e||!t)return l.create("datatype",y[0])},function(e,t,n,r){var i=function(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""},a=t.stackTop.tempVariables;return e.data.section=t,e.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&e.data.section.whenUnblocked(function(){var t=m({},e,{append:"replace",source:i(),transitionDeferred:!1});e.section.renderInto("",null,t,a)})},m(e,{source:i(),transitionDeferred:!0})},[String,String,f(String)]),t.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return l.create.apply(l,["datatype"].concat(y));if(o.isPrototypeOf(n)){if(o.isPrototypeOf(r))return l.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}if(r){var i=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return i.includes(e)}))return l.create("datatype","The changer given to (link-reveal-goto:) can't include a revision or enchantment changer like (replace:) or (click:).")}var a=g(e,t,n);return t=a.text,n=a.passage,a.error||o.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}))},function(e,t,o,c){if(i.hasValid(o)){var u=r.passageNameVisited(o),l=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),p=s.create({source:"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+">"+t+"</tw-link>",target:e.target,append:"replace",data:{section:e.section,append:"replace",clickEvent:function(t){e.enablers=e.enablers.filter(function(e){return e.descriptor!==p}),t.contents().unwrap(),e.section.renderInto("",null,e,l),e.section.whenUnblocked(function(){return a.goToPassage(o,{transition:e.data.passageT8n})})}}});return e.enablers=(e.enablers||[]).concat({descriptor:p,changer:c}),e}e.source='<tw-broken-link passage-name="'+n.escape(o)+'">'+t+"</tw-broken-link>"},[String,f(h(o,String)),f(o)])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c){var u=t.add,l=t.addChanger,p=t.addCommand,f=t.TypeSignature,d=f.rest,h=f.either,y=f.Any,m=r.objectName;u("macro",function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var u=void 0,l=[];for(u=0;u<i.length;u+=1){var p=u===i.length-1;if(s.isPrototypeOf(i[u])===p)return c.create("datatype","The "+(p?"":e.nth(i.length-u+1)+"-")+"last value given to (macro:) should be a "+(p?"code hook":"datatyped variable")+", not "+m(i[u]));if(!p){var f="A custom macro";if(i[u].varRef.object===n.variables)return c.create("datatype",f+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(i[u].varRef.propertyChain.length>1)return c.create("datatype",f+"'s typed variables can't be properties inside a data structure.");if(i[u].datatype.rest&&u!==i.length-2)return c.create("datatype",f+" can only have one spread variable, and it must be its last variable.");var d=i[u].varRef.propertyChain[0];if(l.includes(d))return c.create("datatype",f+"'s typed variables can't both be named '"+d+"'.");l.push(d)}}return a.create(i.slice(0,-1),i[i.length-1])},[d(h(s,o))]);var g=function(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return c.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")};p(["output-data","out-data"],function(){},function(e,t){var n=e.stack;return g("output-data",n,t)||"blocked"},[y],!1),l(["output","out"],function(e){return Object.assign(i.create("output",[e]))},function(e,t){var n=t.stack,r=t.stackTop;return e.loopVars=Object.keys(r.tempVariables).reduce(function(e,t){return e[t]=[r.tempVariables[t]],e},{}),g("output",n,e),r.blocked=!0,e},[]),p("error",function(e){if(!e)return c.create("datatype","This (error:) macro was given an empty string.")},function(e,t){var n=e.stack;return g("error",n,c.create("user",t))||"blocked"},[String],!1)}),define("repl",["utils","engine","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r,i){e.onStartup(function(){return setTimeout(function(){t.options.debug&&(window.REPL=function(e){var t=r(n.lex("(print:"+e+")"));console.log(t);var a=i({}).eval(t);return a.TwineScript_Run?a.TwineScript_Run().source:a},window.LEX=function(e){var t=n.lex(e);return 1===t.length?t[0]:t})})})}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["es6-shim","jqueryplugins"]}),require(["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref118,TwineError){var dialog=_ref118.dialog;function __HarloweEval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug?DebugMode():TwineError.on("error",function(e,t){return!$("tw-debugger").length&&DebugMode(e,t)}),_installHandlers=null},oldOnError;function printJSError(e){var t=e.name+": "+e.message;if(e.stack){var n=e.stack.split("\n"),r=n.findIndex(function(e){return e.includes("__HarloweEval")});t+="\n"+n.slice(0,r).join("\n").replace(/\([^\)]+\)/g,"")}return"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+t+"```</div>"}oldOnError=window.onerror,window.onerror=function(e,t,n,r,i){window.onerror=oldOnError,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n"+printJSError(i)+"\n(This is probably due to a bug in the Harlowe game engine.)"})),"function"==typeof oldOnError&&oldOnError.apply(void 0,arguments)},Utils.onStartup(function(){var e=$("tw-storydata");if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($("tw-passagedata"),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$("tw-passagedata[pid="+n+"]").attr("name"),_installHandlers();var r=!1;$("[role=script]").each(function(e){try{__HarloweEval($(this).html())}catch(t){r||(r=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(e+1)+" script:\n\n"+printJSError(t)}))}}),$("[role=stylesheet]").each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())});var i=Section.create(),a=Passages.loadMetadata(i);if(a.length){var o=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"});a.forEach(function(e){return o.find("p").append(e.render(""))})}var s=!Engine.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session");s&&!0===State.deserialise(i,s)?Engine.showPassage(State.passage,!1):Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();
</script>

</body>
</html>
